webpackJsonp([3],{19:function(e,t,n){try{(function(){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var e=[{value:"Integer",label:"整数字段"},{value:"Number",label:"数值字段"},{value:"Text",label:"文本框单行"},{value:"TextArea",label:"文本框多行"},{value:"RichTextEditor",label:"富文本"},{value:"Select",label:"选择列表(单行)"},{value:"MultiSelect",label:"选择列表(多行)"},{value:"CheckboxGroup",label:"复选按钮"},{value:"RadioGroup",label:"单选按钮"},{value:"DatePicker",label:"日期选择控件"},{value:"DateTimePicker",label:"日期时间选择控件"},{value:"TimeTracking",label:"时间跟踪"},{value:"File",label:"文件"},{value:"SingleVersion",label:"单一版本选择"},{value:"MultiVersion",label:"多版本选择"},{value:"SingleUser",label:"单一用户选择"},{value:"MultiUser",label:"多用户选择"},{value:"Url",label:"URL"}];t.FieldTypes=e;var n=[{id:"new",name:"新建"},{id:"inprogress",name:"进行中"},{id:"completed",name:"完成"}];t.StateCategories=n;var r={project:[{id:"view_project",name:"查看项目"},{id:"manage_project",name:"管理项目"}],issue:[{id:"create_issue",name:"创建问题"},{id:"edit_issue",name:"编辑问题"},{id:"edit_self_issue",name:"编辑自己创建的问题"},{id:"delete_issue",name:"删除问题"},{id:"delete_self_issue",name:"删除自己创建的问题"},{id:"assign_issue",name:"分配问题"},{id:"assigned_issue",name:"被分配问题"},{id:"resolve_issue",name:"解决问题"},{id:"close_issue",name:"关闭问题"},{id:"reset_issue",name:"重置问题"},{id:"link_issue",name:"链接问题"},{id:"move_issue",name:"移动问题"},{id:"exec_workflow",name:"执行流程"}],comments:[{id:"add_comments",name:"添加评论"},{id:"edit_comments",name:"编辑评论"},{id:"edit_self_comments",name:"编辑自己的评论"},{id:"delete_comments",name:"删除评论"},{id:"delete_self_comments",name:"删除自己的评论"}],worklogs:[{id:"add_worklog",name:"添加工作日志"},{id:"edit_worklog",name:"编辑工作日志"},{id:"edit_self_worklog",name:"编辑自己的工作日志"},{id:"delete_worklog",name:"删除工作日志"},{id:"delete_self_worklog",name:"删除自己的工作日志"}],files:[{id:"upload_file",name:"上传附件"},{id:"download_file",name:"下载附件"},{id:"remove_file",name:"删除附件"},{id:"remove_self_file",name:"删除自己上传附件"}]};t.Permissions=r;var o=[{id:"create_issue",name:"创建问题"},{id:"edit_issue",name:"编辑问题"},{id:"del_issue",name:"删除问题"},{id:"resolve_issue",name:"解决问题"},{id:"close_issue",name:"关闭问题"},{id:"reopen_issue",name:"重新打开问题"},{id:"create_version",name:"创建版本"},{id:"edit_version",name:"编辑版本"},{id:"release_version",name:"发布版本"},{id:"merge_version",name:"合并版本"},{id:"del_version",name:"删除版本"},{id:"add_worklog",name:"添加工作日志"},{id:"edit_worklog",name:"编辑工作日志"}];t.webhookEvents=o;var a={CARD:"card",KANBAN_COLUMN:"kanban_column",KANBAN_FILTER:"kanban_filter"};t.CardTypes=a;var i=["#CCCCCC","#B3B3B3","#999999","#A4DD00","#68BC00","#006600","#73D8FF","#009CE0","#0062B1","#FCDC00","#FCC400","#FB9E00","#FE9200","#E27300","#C45100","#F44E3B","#D33115","#9F0500"];t.PriorityRGBs=i;var l=["#CCCCCC","#B3B3B3","#999999","#808080","#666666","#FDA1FF","#FA28FF","#AB149E","#AEA1FF","#7B64FF","#653294","#73D8FF","#009CE0","#0062B1","#68CCCA","#16A5A5","#0C797D","#A4DD00","#68BC00","#006600","#DBDF00","#B0BC00","#808900","#FCDC00","#FCC400","#FB9E00","#FE9200","#E27300","#C45100","#F44E3B","#D33115","#9F0500","#4D4D4D","#333333","#000000"];t.LabelRGBs=l;var s=660;t.DetailMinWidth=s;var u=1e3;t.DetailMaxWdith=u}).call(this)}finally{}},41:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}Object.defineProperty(t,"__esModule",{value:!0}),t.CheckboxGroup=t.Checkbox=void 0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(1),l=r(i);t.Checkbox=l.default.createClass({displayName:"Checkbox",contextTypes:{checkboxGroup:l.default.PropTypes.object.isRequired},componentWillMount:function(){if(!this.context||!this.context.checkboxGroup)throw new Error("The `Checkbox` component must be used as a child of `CheckboxGroup`.")},render:function(){var e=this.context.checkboxGroup,t=e.name,n=e.checkedValues,r=e.onChange,o={};return n&&(o.checked=n.indexOf(this.props.value)>=0),"function"==typeof r&&(o.onChange=r.bind(null,this.props.value)),l.default.createElement("input",a({},this.props,{type:"checkbox",name:t},o))}}),t.CheckboxGroup=l.default.createClass({displayName:"CheckboxGroup",propTypes:{name:i.PropTypes.string,defaultValue:i.PropTypes.array,value:i.PropTypes.array,onChange:i.PropTypes.func,children:i.PropTypes.node.isRequired,Component:i.PropTypes.oneOfType([i.PropTypes.string,i.PropTypes.func,i.PropTypes.object])},getDefaultProps:function(){return{Component:"div"}},childContextTypes:{checkboxGroup:l.default.PropTypes.object},getChildContext:function(){return{checkboxGroup:{name:this.props.name,checkedValues:this.state.value,onChange:this._onCheckboxChange}}},getInitialState:function(){return{value:this.props.value||this.props.defaultValue||[]}},componentWillReceiveProps:function(e){e.value&&this.setState({value:e.value})},render:function(){var e=this.props,t=e.Component,n=(e.name,e.value,e.onChange,e.children),r=o(e,["Component","name","value","onChange","children"]);return l.default.createElement(t,r,n)},getValue:function(){return this.state.value},_isControlledComponent:function(){return!!this.props.value},_onCheckboxChange:function(e,t){var n;n=t.target.checked?this.state.value.concat(e):this.state.value.filter(function(t){return t!==e}),this._isControlledComponent()?this.setState({value:this.props.value}):this.setState({value:n}),"function"==typeof this.props.onChange&&this.props.onChange(n)}})},45:function(e,t,n){!function(t,r){e.exports=r(n(1),n(123))}(this,function(e,t){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";e.exports=n(2).default},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MIN_ZOOM_LEVEL=0,t.MAX_ZOOM_LEVEL=300,t.ZOOM_RATIO=1.007,t.ZOOM_BUTTON_INCREMENT_SIZE=100,t.WHEEL_MOVE_X_THRESHOLD=200,t.WHEEL_MOVE_Y_THRESHOLD=1,t.KEYS={ESC:27,LEFT_ARROW:37,RIGHT_ARROW:39}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=n(8),d=r(c),p=n(9),f=r(p),m=n(3),h=n(1),y=n(7),g=r(y),v=g.default,b=(0,m.getIEVersion)();b<10&&(v=u({},v,{toolbarSide:v.toolbarSide+" "+v.toolbarSideNoFlex,toolbarLeftSide:v.toolbarLeftSide+" "+v.toolbarLeftSideNoFlex,toolbarRightSide:v.toolbarRightSide+" "+v.toolbarRightSideNoFlex}));var w=function(e){function t(e){a(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={isClosing:!e.animationDisabled,shouldAnimate:!1,zoomLevel:h.MIN_ZOOM_LEVEL,offsetX:0,offsetY:0},n.closeIfClickInner=n.closeIfClickInner.bind(n),n.handleImageDoubleClick=n.handleImageDoubleClick.bind(n),n.handleImageMouseWheel=n.handleImageMouseWheel.bind(n),n.handleKeyInput=n.handleKeyInput.bind(n),n.handleMouseUp=n.handleMouseUp.bind(n),n.handleOuterMouseDown=n.handleOuterMouseDown.bind(n),n.handleOuterMouseMove=n.handleOuterMouseMove.bind(n),n.handleOuterMousewheel=n.handleOuterMousewheel.bind(n),n.handleOuterTouchStart=n.handleOuterTouchStart.bind(n),n.handleOuterTouchMove=n.handleOuterTouchMove.bind(n),n.handleCaptionMousewheel=n.handleCaptionMousewheel.bind(n),n.handleWindowResize=n.handleWindowResize.bind(n),n.handleZoomInButtonClick=n.handleZoomInButtonClick.bind(n),n.handleZoomOutButtonClick=n.handleZoomOutButtonClick.bind(n),n.requestClose=n.requestClose.bind(n),n.requestMoveNext=n.requestMoveNext.bind(n),n.requestMovePrev=n.requestMovePrev.bind(n),n}return l(t,e),s(t,[{key:"componentWillMount",value:function(){this.listenersAttached=!1,this.keyPressed=!1,this.imageCache={},this.lastKeyDownTime=0,this.resizeTimeout=null,this.wheelActionTimeout=null,this.resetScrollTimeout=null,this.scrollX=0,this.scrollY=0,this.isDragging=!1,this.dragStartX=0,this.dragStartY=0,this.dragStartOffsetX=0,this.dragStartOffsetY=0,this.keyCounter=0,this.moveRequested=!1,this.props.animationDisabled||this.setState({isClosing:!1})}},{key:"componentDidMount",value:function(){this.mounted=!0,this.attachListeners(),this.loadAllImages()}},{key:"componentWillReceiveProps",value:function(e){var t=this,n=!1,r={},o={};this.getSrcTypes().forEach(function(a){t.props[a.name]!==e[a.name]&&(n=!0,r[t.props[a.name]]=!0,o[e[a.name]]=!0)}),(n||this.moveRequested)&&(Object.keys(r).forEach(function(e){!(e in o)&&e in t.imageCache&&(t.imageCache[e].loaded=!1)}),this.moveRequested=!1,this.loadAllImages(e))}},{key:"componentWillUnmount",value:function(){this.mounted=!1,this.detachListeners()}},{key:"attachListeners",value:function(){this.listenersAttached||(window.addEventListener("resize",this.handleWindowResize),window.addEventListener("mouseup",this.handleMouseUp),window.addEventListener("touchend",this.handleMouseUp),(0,m.isInIframe)()&&(window.top.addEventListener("mouseup",this.handleMouseUp),window.top.addEventListener("touchend",this.handleMouseUp)),this.listenersAttached=!0)}},{key:"changeZoom",value:function(e,t,n){if(this.props.enableZoom){var r=Math.max(h.MIN_ZOOM_LEVEL,Math.min(h.MAX_ZOOM_LEVEL,e));if(r!==this.state.zoomLevel){if(r===h.MIN_ZOOM_LEVEL)return this.setState({zoomLevel:r,offsetX:0,offsetY:0});var o=this.getBestImageForType("mainSrc");if(null!==o){var a=this.getZoomMultiplier(),i=this.getZoomMultiplier(r),l=this.getLightboxRect(),s="undefined"!=typeof t?(t-l.left-(l.width-o.width)/2)/o.width:.5,u="undefined"!=typeof n?(n-l.top-(l.height-o.height)/2)/o.height:.5,c=o.width*a,d=o.height*a,p=o.width*i,f=o.height*i,m=(c-p)*(s-.5),y=(d-f)*(u-.5),g=this.state.offsetX-m,v=this.state.offsetY-y,b=this.getMaxOffsets();this.state.zoomLevel>r&&(g=Math.max(b.minX,Math.min(b.maxX,g)),v=Math.max(b.minY,Math.min(b.maxY,v))),this.setState({zoomLevel:r,offsetX:g,offsetY:v})}}}}},{key:"closeIfClickInner",value:function(e){e.target.className.search(/\binner\b/)>-1&&this.requestClose(e)}},{key:"detachListeners",value:function(){this.listenersAttached&&(window.removeEventListener("resize",this.handleWindowResize),window.removeEventListener("mouseup",this.handleMouseUp),window.removeEventListener("touchend",this.handleMouseUp),(0,m.isInIframe)()&&(window.top.removeEventListener("mouseup",this.handleMouseUp),window.top.removeEventListener("touchend",this.handleMouseUp)),this.listenersAttached=!1)}},{key:"getBestImageForType",value:function(e){var t=this.props[e],n={};if(this.isImageLoaded(t))n=this.getFitSizes(this.imageCache[t].width,this.imageCache[t].height);else{if(!this.isImageLoaded(this.props[e+"Thumbnail"]))return null;t=this.props[e+"Thumbnail"],n=this.getFitSizes(this.imageCache[t].width,this.imageCache[t].height,!0)}return{src:t,height:n.height,width:n.width}}},{key:"getFitSizes",value:function(e,t,n){var r=this.getLightboxRect(),o=r.height-2*this.props.imagePadding,a=r.width-2*this.props.imagePadding;n||(o=Math.min(o,t),a=Math.min(a,e));var i=a/o,l=e/t;return i>l?{width:e*o/t,height:o}:{width:a,height:t*a/e}}},{key:"getMaxOffsets",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state.zoomLevel,t=this.getBestImageForType("mainSrc");if(null===t)return{maxX:0,minX:0,maxY:0,minY:0};var n=this.getLightboxRect(),r=this.getZoomMultiplier(e),o=0;o=r*t.width-n.width<0?(n.width-r*t.width)/2:(r*t.width-n.width)/2;var a=0;return a=r*t.height-n.height<0?(n.height-r*t.height)/2:(r*t.height-n.height)/2,{maxX:o,maxY:a,minX:-1*o,minY:-1*a}}},{key:"getSrcTypes",value:function(){return[{name:"mainSrc",keyEnding:"i"+this.keyCounter},{name:"mainSrcThumbnail",keyEnding:"t"+this.keyCounter},{name:"nextSrc",keyEnding:"i"+(this.keyCounter+1)},{name:"nextSrcThumbnail",keyEnding:"t"+(this.keyCounter+1)},{name:"prevSrc",keyEnding:"i"+(this.keyCounter-1)},{name:"prevSrcThumbnail",keyEnding:"t"+(this.keyCounter-1)}]}},{key:"getZoomMultiplier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state.zoomLevel;return Math.pow(h.ZOOM_RATIO,e)}},{key:"getLightboxRect",value:function(){return this.outerEl?this.outerEl.getBoundingClientRect():{width:(0,m.getWindowWidth)(),height:(0,m.getWindowHeight)(),top:0,right:0,bottom:0,left:0}}},{key:"handleKeyInput",value:function(e){if(e.stopPropagation(),!this.isAnimating()){if("keyup"===e.type)return void(this.lastKeyDownTime-=this.props.keyRepeatKeyupBonus);var t=e.which||e.keyCode,n=new Date;if(!(n.getTime()-this.lastKeyDownTime<this.props.keyRepeatLimit&&t!==h.KEYS.ESC))switch(this.lastKeyDownTime=n.getTime(),t){case h.KEYS.ESC:e.preventDefault(),this.requestClose(e);break;case h.KEYS.LEFT_ARROW:if(!this.props.prevSrc)return;e.preventDefault(),this.keyPressed=!0,this.requestMovePrev(e);break;case h.KEYS.RIGHT_ARROW:if(!this.props.nextSrc)return;e.preventDefault(),this.keyPressed=!0,this.requestMoveNext(e)}}}},{key:"handleOuterMousewheel",value:function(e){var t=this;e.preventDefault(),e.stopPropagation();var n=h.WHEEL_MOVE_X_THRESHOLD,r=0,o=500;if(clearTimeout(this.resetScrollTimeout),this.resetScrollTimeout=setTimeout(function(){t.scrollX=0,t.scrollY=0},300),null===this.wheelActionTimeout&&!this.isAnimating()){if(Math.abs(e.deltaY)<Math.abs(e.deltaX)){this.scrollY=0,this.scrollX+=e.deltaX;var a=n/2;this.scrollX>=n||e.deltaX>=a?(this.requestMoveNext(e),r=o,this.scrollX=0):(this.scrollX<=-1*n||e.deltaX<=-1*a)&&(this.requestMovePrev(e),r=o,this.scrollX=0)}0!==r&&(this.wheelActionTimeout=setTimeout(function(){t.wheelActionTimeout=null},r))}}},{key:"handleImageMouseWheel",value:function(e){e.preventDefault();var t=h.WHEEL_MOVE_Y_THRESHOLD;if(Math.abs(e.deltaY)>=Math.abs(e.deltaX)){if(e.stopPropagation(),Math.abs(e.deltaY)<t)return;this.scrollX=0,this.scrollY+=e.deltaY,this.changeZoom(this.state.zoomLevel-e.deltaY,e.clientX,e.clientY)}}},{key:"handleImageDoubleClick",value:function(e){this.state.zoomLevel>h.MIN_ZOOM_LEVEL?this.changeZoom(h.MIN_ZOOM_LEVEL,e.clientX,e.clientY):this.changeZoom(this.state.zoomLevel+h.ZOOM_BUTTON_INCREMENT_SIZE,e.clientX,e.clientY)}},{key:"handleMouseUp",value:function(){var e=this;if(this.isDragging){this.isDragging=!1;var t=this.getMaxOffsets(),n=Math.max(t.minX,Math.min(t.maxX,this.state.offsetX)),r=Math.max(t.minY,Math.min(t.maxY,this.state.offsetY));n===this.state.offsetX&&r===this.state.offsetY||(this.setState({offsetX:n,offsetY:r,shouldAnimate:!0}),setTimeout(function(){e.setState({shouldAnimate:!1})},this.props.animationDuration))}}},{key:"handleMoveStart",value:function(e,t){this.state.zoomLevel<=h.MIN_ZOOM_LEVEL||(this.isDragging=!0,this.dragStartX=e,this.dragStartY=t,this.dragStartOffsetX=this.state.offsetX,this.dragStartOffsetY=this.state.offsetY)}},{key:"handleOuterMouseDown",value:function(e){e.preventDefault(),this.handleMoveStart(e.clientX,e.clientY)}},{key:"handleOuterTouchStart",value:function(e){var t=e.changedTouches[0];this.handleMoveStart(parseInt(t.clientX,10),parseInt(t.clientY,10))}},{key:"handleMove",value:function(e,t){if(this.isDragging){var n=this.dragStartX-e+this.dragStartOffsetX,r=this.dragStartY-t+this.dragStartOffsetY;this.state.offsetX===n&&this.state.offsetY===r||this.setState({offsetX:n,offsetY:r})}}},{key:"handleOuterMouseMove",value:function(e){this.handleMove(e.clientX,e.clientY)}},{key:"handleOuterTouchMove",value:function(e){if(e.preventDefault(),!(this.state.zoomLevel<=h.MIN_ZOOM_LEVEL)){var t=e.changedTouches[0];this.handleMove(parseInt(t.clientX,10),parseInt(t.clientY,10))}}},{key:"handleWindowResize",value:function(){clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(this.forceUpdate.bind(this),100)}},{key:"handleZoomInButtonClick",value:function(){this.changeZoom(this.state.zoomLevel+h.ZOOM_BUTTON_INCREMENT_SIZE)}},{key:"handleZoomOutButtonClick",value:function(){this.changeZoom(this.state.zoomLevel-h.ZOOM_BUTTON_INCREMENT_SIZE)}},{key:"handleCaptionMousewheel",value:function(e){if(e.stopPropagation(),this.caption){var t=this.caption.getBoundingClientRect().height,n=this.caption.scrollHeight,r=this.caption.scrollTop;(e.deltaY>0&&t+r>=n||e.deltaY<0&&r<=0)&&e.preventDefault()}}},{key:"isAnimating",value:function(){return this.state.shouldAnimate||this.state.isClosing}},{key:"isImageLoaded",value:function(e){return e&&e in this.imageCache&&this.imageCache[e].loaded}},{key:"loadImage",value:function(e,t){var n=this;if(this.isImageLoaded(e))return void setTimeout(function(){t(null,n.imageCache[e].width,n.imageCache[e].height)},1);var r=this,o=new Image;o.onerror=function(){t("image load error")},o.onload=function(){r.imageCache[e]={loaded:!0,width:this.width,height:this.height},t(null,this.width,this.height)},o.src=e}},{key:"loadAllImages",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,n=function(t,n){return function(r){return r?void(window.console&&window.console.warn(r)):void(e.props[t]===n&&e.mounted&&e.forceUpdate())}};this.getSrcTypes().forEach(function(r){var o=r.name;t[o]&&!e.isImageLoaded(t[o])&&e.loadImage(t[o],n(o,t[o]))})}},{key:"requestClose",value:function(e){var t=this,n=function(){return t.props.onCloseRequest(e)};return this.props.animationDisabled||"keydown"===e.type&&!this.props.animationOnKeyInput?n():(this.setState({isClosing:!0}),void setTimeout(n,this.props.animationDuration))}},{key:"requestMove",value:function(e,t){var n=this,r={zoomLevel:h.MIN_ZOOM_LEVEL,offsetX:0,offsetY:0};this.props.animationDisabled||this.keyPressed&&!this.props.animationOnKeyInput||(r.shouldAnimate=!0,setTimeout(function(){return n.setState({shouldAnimate:!1})},this.props.animationDuration)),this.keyPressed=!1,this.moveRequested=!0,"prev"===e?(this.keyCounter--,this.setState(r),this.props.onMovePrevRequest(t)):(this.keyCounter++,this.setState(r),this.props.onMoveNextRequest(t))}},{key:"requestMoveNext",value:function(e){this.requestMove("next",e)}},{key:"requestMovePrev",value:function(e){this.requestMove("prev",e)}},{key:"render",value:function(){var e=this,n=this.props,r=n.animationDisabled,o=n.animationDuration,a=n.clickOutsideToClose,i=n.discourageDownloads,l=n.enableZoom,s=n.imageTitle,c=n.nextSrc,p=n.prevSrc,y=n.toolbarButtons,g=n.reactModalStyle,w=this.state,E=w.zoomLevel,k=w.offsetX,_=w.offsetY,x=w.isClosing,C=this.getLightboxRect(),S={};!r&&this.isAnimating()&&(S=u({},S,{transition:"transform "+o+"ms"}));var T={};this.getSrcTypes().forEach(function(e){var t=e.name,n=e.keyEnding;T[t]=n});var P=[],O=function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e.props[t]){var o=u({},r,S);E>h.MIN_ZOOM_LEVEL&&(o.cursor="move");var a=e.getBestImageForType(t);if(null===a){var l=void 0;return l=b<10?d.default.createElement("div",{className:v.loadingContainer__icon},(0,m.translate)("Loading...")):d.default.createElement("div",{className:"ril-loading-circle "+v.loadingCircle+" "+v.loadingContainer__icon},d.default.createElement("div",{className:"ril-loading-circle-point "+v.loadingCirclePoint}),d.default.createElement("div",{className:"ril-loading-circle-point "+v.loadingCirclePoint}),d.default.createElement("div",{className:"ril-loading-circle-point "+v.loadingCirclePoint}),d.default.createElement("div",{className:"ril-loading-circle-point "+v.loadingCirclePoint}),d.default.createElement("div",{className:"ril-loading-circle-point "+v.loadingCirclePoint}),d.default.createElement("div",{className:"ril-loading-circle-point "+v.loadingCirclePoint}),d.default.createElement("div",{className:"ril-loading-circle-point "+v.loadingCirclePoint}),d.default.createElement("div",{className:"ril-loading-circle-point "+v.loadingCirclePoint}),d.default.createElement("div",{className:"ril-loading-circle-point "+v.loadingCirclePoint}),d.default.createElement("div",{className:"ril-loading-circle-point "+v.loadingCirclePoint}),d.default.createElement("div",{className:"ril-loading-circle-point "+v.loadingCirclePoint}),d.default.createElement("div",{className:"ril-loading-circle-point "+v.loadingCirclePoint})),void P.push(d.default.createElement("div",{className:n+" "+v.image+" not-loaded ril-not-loaded",style:o,key:e.props[t]+T[t]},d.default.createElement("div",{className:v.loadingContainer},l)))}o.width=a.width,o.height=a.height;var c=a.src;i?(o.backgroundImage="url('"+c+"')",P.push(d.default.createElement("div",{className:n+" "+v.image+" "+v.imageDiscourager,onDoubleClick:e.handleImageDoubleClick,onWheel:e.handleImageMouseWheel,style:o,key:c+T[t]},d.default.createElement("div",{className:"download-blocker ril-download-blocker "+v.downloadBlocker})))):P.push(d.default.createElement("img",{className:n+" "+v.image,onDoubleClick:e.handleImageDoubleClick,onWheel:e.handleImageMouseWheel,style:o,src:c,key:c+T[t],alt:s||(0,m.translate)("Image")}))}},R=this.getZoomMultiplier();O("nextSrc","image-next ril-image-next "+v.imageNext,t.getTransform({x:C.width})),O("mainSrc","image-current ril-image-current",t.getTransform({x:-1*k,y:-1*_,zoom:R})),O("prevSrc","image-prev ril-image-prev "+v.imagePrev,t.getTransform({x:-1*C.width}));var M=function(){},j=[v.toolbarItemChild,v.builtinButton,v.zoomInButton],F=[v.toolbarItemChild,v.builtinButton,v.zoomOutButton],N=this.handleZoomInButtonClick,q=this.handleZoomOutButtonClick;E===h.MAX_ZOOM_LEVEL&&(j.push(v.builtinButtonDisabled),N=M),E===h.MIN_ZOOM_LEVEL&&(F.push(v.builtinButtonDisabled),q=M),this.isAnimating()&&(N=M,q=M);var I={overlay:u({zIndex:1e3,backgroundColor:"transparent"},g.overlay),content:u({backgroundColor:"transparent",overflow:"hidden",border:"none",borderRadius:0,padding:0,top:0,left:0,right:0,bottom:0},g.content)};return d.default.createElement(f.default,{isOpen:!0,onRequestClose:a?this.requestClose:M,onAfterOpen:function(){return e.outerEl&&e.outerEl.focus()},style:I},d.default.createElement("div",{className:"outer ril-outer "+v.outer+" "+v.outerAnimating+(x?" closing ril-closing "+v.outerClosing:""),style:{transition:"opacity "+o+"ms",animationDuration:o+"ms",animationDirection:x?"normal":"reverse"},ref:function(t){e.outerEl=t},onWheel:this.handleOuterMousewheel,onMouseMove:this.handleOuterMouseMove,onMouseDown:this.handleOuterMouseDown,onTouchStart:this.handleOuterTouchStart,onTouchMove:this.handleOuterTouchMove,tabIndex:"-1",onKeyDown:this.handleKeyInput,onKeyUp:this.handleKeyInput},d.default.createElement("div",{className:"inner ril-inner "+v.inner,onClick:a?this.closeIfClickInner:M},P),p&&d.default.createElement("button",{type:"button",className:"prev-button ril-prev-button "+v.navButtons+" "+v.navButtonPrev,key:"prev",onClick:this.isAnimating()?M:this.requestMovePrev}),c&&d.default.createElement("button",{type:"button",className:"next-button ril-next-button "+v.navButtons+" "+v.navButtonNext,key:"next",onClick:this.isAnimating()?M:this.requestMoveNext}),d.default.createElement("div",{className:"toolbar ril-toolbar "+v.toolbar},d.default.createElement("ul",{className:"toolbar-left ril-toolbar-left "+v.toolbarSide+" "+v.toolbarLeftSide},d.default.createElement("li",{className:"ril-toolbar__item "+v.toolbarItem},d.default.createElement("span",{className:"ril-toolbar__item__child "+v.toolbarItemChild},s))),d.default.createElement("ul",{className:["toolbar-right","ril-toolbar-right",v.toolbarSide,v.toolbarRightSide].join(" ")},y?y.map(function(e,t){return d.default.createElement("li",{key:t,className:"ril-toolbar__item "+v.toolbarItem},e)}):"",l&&d.default.createElement("li",{className:"ril-toolbar__item "+v.toolbarItem},d.default.createElement("button",{type:"button",key:"zoom-in",className:"zoom-in ril-zoom-in "+j.join(" "),onClick:N})),l&&d.default.createElement("li",{className:"ril-toolbar__item "+v.toolbarItem},d.default.createElement("button",{type:"button",key:"zoom-out",className:"zoom-out ril-zoom-out "+F.join(" "),onClick:q})),d.default.createElement("li",{className:"ril-toolbar__item "+v.toolbarItem},d.default.createElement("button",{type:"button",key:"close",className:"ril-close ril-toolbar__item__child"+(" "+v.toolbarItemChild+" "+v.builtinButton+" "+v.closeButton),onClick:this.isAnimating()?M:this.requestClose})))),this.props.imageCaption&&d.default.createElement("div",{onWheel:this.handleCaptionMousewheel,onMouseDown:function(e){return e.stopPropagation()},className:"ril-caption "+v.caption,ref:function(t){e.caption=t}},d.default.createElement("div",{className:"ril-caption-content "+v.captionContent},this.props.imageCaption))))}}],[{key:"getTransform",value:function(e){var t=e.x,n=void 0===t?null:t,r=e.y,a=void 0===r?null:r,i=e.zoom,l=void 0===i?null:i,s=b<10,u=[];return null===n&&null===a||u.push(s?"translate("+(n||0)+"px,"+(a||0)+"px)":"translate3d("+(n||0)+"px,"+(a||0)+"px,0)"),null!==l&&u.push(s?"scale("+l+")":"scale3d("+l+","+l+",1)"),o({},s?"msTransform":"transform",0===u.length?"none":u.join(" "))}}]),t}(c.Component);w.propTypes={mainSrc:c.PropTypes.string.isRequired,prevSrc:c.PropTypes.string,nextSrc:c.PropTypes.string,mainSrcThumbnail:c.PropTypes.string,prevSrcThumbnail:c.PropTypes.string,nextSrcThumbnail:c.PropTypes.string,onCloseRequest:c.PropTypes.func.isRequired,onMovePrevRequest:c.PropTypes.func,onMoveNextRequest:c.PropTypes.func,discourageDownloads:c.PropTypes.bool,animationDisabled:c.PropTypes.bool,animationOnKeyInput:c.PropTypes.bool,animationDuration:c.PropTypes.number,keyRepeatLimit:c.PropTypes.number,keyRepeatKeyupBonus:c.PropTypes.number,imageTitle:c.PropTypes.node,imageCaption:c.PropTypes.node,reactModalStyle:c.PropTypes.object,imagePadding:c.PropTypes.number,toolbarButtons:c.PropTypes.arrayOf(c.PropTypes.node),clickOutsideToClose:c.PropTypes.bool,enableZoom:c.PropTypes.bool},w.defaultProps={onMovePrevRequest:function(){},onMoveNextRequest:function(){},discourageDownloads:!1,animationDisabled:!1,animationOnKeyInput:!1,animationDuration:300,keyRepeatLimit:180,keyRepeatKeyupBonus:40,reactModalStyle:{},imagePadding:10,clickOutsideToClose:!0,enableZoom:!0},t.default=w},function(e,t){"use strict";function n(){var e=navigator.userAgent.match(/(?:MSIE |Trident\/.*; rv:)(\d+)/);return e?parseInt(e[1],10):void 0}function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!e)return"";var n=e;return t&&Object.keys(t).forEach(function(e){n=n.replace(e,t[e])}),n}function o(){return window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth}function a(){return window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight}function i(){try{return window.self!==window.top}catch(e){return!0}}Object.defineProperty(t,"__esModule",{value:!0}),t.getIEVersion=n,t.translate=r,t.getWindowWidth=o,t.getWindowHeight=a,t.isInIframe=i},function(e,t,n){t=e.exports=n(5)(),t.push([e.id,'@-webkit-keyframes closeWindow___2Hlon{0%{opacity:1}to{opacity:0}}@keyframes closeWindow___2Hlon{0%{opacity:1}to{opacity:0}}.outer___2lDXy{background-color:rgba(0,0,0,.85);top:0;left:0;right:0;bottom:0;z-index:1000;width:100%;height:100%}.outerClosing___1EQGK{opacity:0}.image___2FLq2,.inner___1rfRQ{position:absolute;top:0;left:0;right:0;bottom:0}.image___2FLq2{margin:auto;max-width:100%;max-height:100%}.imageNext___1uRqJ,.imagePrev___F6xVQ{@extends .image}.imageDiscourager___3-CUB{background-repeat:no-repeat;background-position:50%;background-size:contain}.navButtons___3kNVF{border:none;position:absolute;top:0;bottom:0;width:20px;height:34px;padding:40px 30px;margin:auto;cursor:pointer;opacity:.7}.navButtons___3kNVF:hover{opacity:1}.navButtons___3kNVF:active{opacity:.7}.navButtonPrev___2vBS8{left:0;background:rgba(0,0,0,.2) url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZlcnNpb249IjEuMSIgd2lkdGg9IjIwIiBoZWlnaHQ9IjM0Ij48cGF0aCBkPSJtIDE5LDMgLTIsLTIgLTE2LDE2IDE2LDE2IDEsLTEgLTE1LC0xNSAxNSwtMTUgeiIgZmlsbD0iI0ZGRiIvPjwvc3ZnPg==") no-repeat 50%}.navButtonNext___30R2i{right:0;background:rgba(0,0,0,.2) url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZlcnNpb249IjEuMSIgd2lkdGg9IjIwIiBoZWlnaHQ9IjM0Ij48cGF0aCBkPSJtIDEsMyAyLC0yIDE2LDE2IC0xNiwxNiAtMSwtMSAxNSwtMTUgLTE1LC0xNSB6IiBmaWxsPSIjRkZGIi8+PC9zdmc+") no-repeat 50%}.downloadBlocker___3rU9-{position:absolute;top:0;left:0;right:0;bottom:0;background-image:url("data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7");background-size:cover}.caption___3vDh_,.toolbar___1xYly{background-color:rgba(0,0,0,.5);position:absolute;left:0;right:0;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.caption___3vDh_{bottom:0;max-height:150px;overflow:auto}.captionContent___30kw2{padding:10px 20px;color:#fff}.toolbar___1xYly{top:0;height:50px}.toolbarSide___3FYWk{height:50px;margin:0}.toolbarSideNoFlex___KxqgW{height:auto;line-height:50px;max-width:48%;position:absolute;top:0;bottom:0}.toolbarLeftSide___8beAg{padding-left:20px;padding-right:0;-webkit-box-flex:0;-ms-flex:0 1 auto;flex:0 1 auto;overflow:hidden;text-overflow:ellipsis}.toolbarLeftSideNoFlex___3O3cZ{left:0;overflow:visible}.toolbarRightSide___1Sdfc{padding-left:0;padding-right:20px;-webkit-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto}.toolbarRightSideNoFlex___oa0FT{right:0}.toolbarItem___3WbMb{display:inline-block;line-height:50px;padding:0;color:#fff;font-size:120%;max-width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.toolbarItemChild___2U_MP{vertical-align:middle}.builtinButton___1zqo6{width:40px;height:35px;cursor:pointer;border:none;opacity:.7}.builtinButton___1zqo6:hover{opacity:1}.builtinButton___1zqo6:active{outline:none}.builtinButtonDisabled___3uvqe{cursor:default;opacity:.5}.builtinButtonDisabled___3uvqe:hover{opacity:.5}.closeButton___3BdAF{background:url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZlcnNpb249IjEuMSIgd2lkdGg9IjIwIiBoZWlnaHQ9IjIwIj48cGF0aCBkPSJtIDEsMyAxLjI1LC0xLjI1IDcuNSw3LjUgNy41LC03LjUgMS4yNSwxLjI1IC03LjUsNy41IDcuNSw3LjUgLTEuMjUsMS4yNSAtNy41LC03LjUgLTcuNSw3LjUgLTEuMjUsLTEuMjUgNy41LC03LjUgLTcuNSwtNy41IHoiIGZpbGw9IiNGRkYiLz48L3N2Zz4=") no-repeat 50%}.zoomInButton___3xtuX{background:url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCI+PGcgc3Ryb2tlPSIjZmZmIiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCI+PHBhdGggZD0iTTEgMTlsNi02Ii8+PHBhdGggZD0iTTkgOGg2Ii8+PHBhdGggZD0iTTEyIDV2NiIvPjwvZz48Y2lyY2xlIGN4PSIxMiIgY3k9IjgiIHI9IjciIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2ZmZiIgc3Ryb2tlLXdpZHRoPSIyIi8+PC9zdmc+") no-repeat 50%}.zoomOutButton___38PZx{background:url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCI+PGcgc3Ryb2tlPSIjZmZmIiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCI+PHBhdGggZD0iTTEgMTlsNi02Ii8+PHBhdGggZD0iTTkgOGg2Ii8+PC9nPjxjaXJjbGUgY3g9IjEyIiBjeT0iOCIgcj0iNyIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjZmZmIiBzdHJva2Utd2lkdGg9IjIiLz48L3N2Zz4=") no-repeat 50%}.outerAnimating___2-fZi{-webkit-animation-name:closeWindow___2Hlon;animation-name:closeWindow___2Hlon}@-webkit-keyframes pointFade___2RA5J{0%,19.999%,to{opacity:0}20%{opacity:1}}@keyframes pointFade___2RA5J{0%,19.999%,to{opacity:0}20%{opacity:1}}.loadingCircle___3JNJg{width:60px;height:60px;position:relative}.loadingCirclePoint___3md-S{width:100%;height:100%;position:absolute;left:0;top:0}.loadingCirclePoint___3md-S:before{content:\'\';display:block;margin:0 auto;width:15%;height:15%;background-color:#fff;border-radius:30%;-webkit-animation:pointFade___2RA5J 1.2s infinite ease-in-out both;animation:pointFade___2RA5J 1.2s infinite ease-in-out both}.loadingCirclePoint___3md-S:nth-of-type(1){-webkit-transform:rotate(0deg);transform:rotate(0deg)}.loadingCirclePoint___3md-S:nth-of-type(1):before,.loadingCirclePoint___3md-S:nth-of-type(7):before{-webkit-animation-delay:-1.2s;animation-delay:-1.2s}.loadingCirclePoint___3md-S:nth-of-type(2){-webkit-transform:rotate(30deg);transform:rotate(30deg)}.loadingCirclePoint___3md-S:nth-of-type(8){-webkit-transform:rotate(210deg);transform:rotate(210deg)}.loadingCirclePoint___3md-S:nth-of-type(2):before,.loadingCirclePoint___3md-S:nth-of-type(8):before{-webkit-animation-delay:-1s;animation-delay:-1s}.loadingCirclePoint___3md-S:nth-of-type(3){-webkit-transform:rotate(60deg);transform:rotate(60deg)}.loadingCirclePoint___3md-S:nth-of-type(9){-webkit-transform:rotate(240deg);transform:rotate(240deg)}.loadingCirclePoint___3md-S:nth-of-type(3):before,.loadingCirclePoint___3md-S:nth-of-type(9):before{-webkit-animation-delay:-.8s;animation-delay:-.8s}.loadingCirclePoint___3md-S:nth-of-type(4){-webkit-transform:rotate(90deg);transform:rotate(90deg)}.loadingCirclePoint___3md-S:nth-of-type(10){-webkit-transform:rotate(270deg);transform:rotate(270deg)}.loadingCirclePoint___3md-S:nth-of-type(4):before,.loadingCirclePoint___3md-S:nth-of-type(10):before{-webkit-animation-delay:-.6s;animation-delay:-.6s}.loadingCirclePoint___3md-S:nth-of-type(5){-webkit-transform:rotate(120deg);transform:rotate(120deg)}.loadingCirclePoint___3md-S:nth-of-type(11){-webkit-transform:rotate(300deg);transform:rotate(300deg)}.loadingCirclePoint___3md-S:nth-of-type(5):before,.loadingCirclePoint___3md-S:nth-of-type(11):before{-webkit-animation-delay:-.4s;animation-delay:-.4s}.loadingCirclePoint___3md-S:nth-of-type(6){-webkit-transform:rotate(150deg);transform:rotate(150deg)}.loadingCirclePoint___3md-S:nth-of-type(12){-webkit-transform:rotate(330deg);transform:rotate(330deg)}.loadingCirclePoint___3md-S:nth-of-type(6):before,.loadingCirclePoint___3md-S:nth-of-type(12):before{-webkit-animation-delay:-.2s;animation-delay:-.2s}.loadingCirclePoint___3md-S:nth-of-type(7){-webkit-transform:rotate(180deg);transform:rotate(180deg)}.loadingCirclePoint___3md-S:nth-of-type(13){-webkit-transform:rotate(1turn);transform:rotate(1turn)}.loadingCirclePoint___3md-S:nth-of-type(7):before,.loadingCirclePoint___3md-S:nth-of-type(13):before{-webkit-animation-delay:0ms;animation-delay:0ms}.loadingContainer___2vaJ-{position:absolute;top:0;right:0;bottom:0;left:0}.loadingContainer__icon___1wQQz{color:#fff;position:absolute;top:50%;left:50%;-webkit-transform:translateX(-50%) translateY(-50%);transform:translateX(-50%) translateY(-50%)}',""]),
t.locals={outer:"outer___2lDXy",outerClosing:"outerClosing___1EQGK",inner:"inner___1rfRQ",image:"image___2FLq2",imagePrev:"imagePrev___F6xVQ",imageNext:"imageNext___1uRqJ",imageDiscourager:"imageDiscourager___3-CUB",navButtons:"navButtons___3kNVF",navButtonPrev:"navButtonPrev___2vBS8",navButtonNext:"navButtonNext___30R2i",downloadBlocker:"downloadBlocker___3rU9-",caption:"caption___3vDh_",toolbar:"toolbar___1xYly",captionContent:"captionContent___30kw2",toolbarSide:"toolbarSide___3FYWk",toolbarSideNoFlex:"toolbarSideNoFlex___KxqgW",toolbarLeftSide:"toolbarLeftSide___8beAg",toolbarLeftSideNoFlex:"toolbarLeftSideNoFlex___3O3cZ",toolbarRightSide:"toolbarRightSide___1Sdfc",toolbarRightSideNoFlex:"toolbarRightSideNoFlex___oa0FT",toolbarItem:"toolbarItem___3WbMb",toolbarItemChild:"toolbarItemChild___2U_MP",builtinButton:"builtinButton___1zqo6",builtinButtonDisabled:"builtinButtonDisabled___3uvqe",closeButton:"closeButton___3BdAF",zoomInButton:"zoomInButton___3xtuX",zoomOutButton:"zoomOutButton___38PZx",outerAnimating:"outerAnimating___2-fZi",closeWindow:"closeWindow___2Hlon",loadingCircle:"loadingCircle___3JNJg",loadingCirclePoint:"loadingCirclePoint___3md-S",pointFade:"pointFade___2RA5J",loadingContainer:"loadingContainer___2vaJ-",loadingContainer__icon:"loadingContainer__icon___1wQQz"}},function(e,t){e.exports=function(){var e=[];return e.toString=function(){for(var e=[],t=0;t<this.length;t++){var n=this[t];n[2]?e.push("@media "+n[2]+"{"+n[1]+"}"):e.push(n[1])}return e.join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var r={},o=0;o<this.length;o++){var a=this[o][0];"number"==typeof a&&(r[a]=!0)}for(o=0;o<t.length;o++){var i=t[o];"number"==typeof i[0]&&r[i[0]]||(n&&!i[2]?i[2]=n:n&&(i[2]="("+i[2]+") and ("+n+")"),e.push(i))}},e}},function(e,t,n){function r(e,t){for(var n=0;n<e.length;n++){var r=e[n],o=f[r.id];if(o){o.refs++;for(var a=0;a<o.parts.length;a++)o.parts[a](r.parts[a]);for(;a<r.parts.length;a++)o.parts.push(u(r.parts[a],t))}else{for(var i=[],a=0;a<r.parts.length;a++)i.push(u(r.parts[a],t));f[r.id]={id:r.id,refs:1,parts:i}}}}function o(e){for(var t=[],n={},r=0;r<e.length;r++){var o=e[r],a=o[0],i=o[1],l=o[2],s=o[3],u={css:i,media:l,sourceMap:s};n[a]?n[a].parts.push(u):t.push(n[a]={id:a,parts:[u]})}return t}function a(e,t){var n=y(),r=b[b.length-1];if("top"===e.insertAt)r?r.nextSibling?n.insertBefore(t,r.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),b.push(t);else{if("bottom"!==e.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");n.appendChild(t)}}function i(e){e.parentNode.removeChild(e);var t=b.indexOf(e);t>=0&&b.splice(t,1)}function l(e){var t=document.createElement("style");return t.type="text/css",a(e,t),t}function s(e){var t=document.createElement("link");return t.rel="stylesheet",a(e,t),t}function u(e,t){var n,r,o;if(t.singleton){var a=v++;n=g||(g=l(t)),r=c.bind(null,n,a,!1),o=c.bind(null,n,a,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=s(t),r=p.bind(null,n),o=function(){i(n),n.href&&URL.revokeObjectURL(n.href)}):(n=l(t),r=d.bind(null,n),o=function(){i(n)});return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else o()}}function c(e,t,n,r){var o=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=w(t,o);else{var a=document.createTextNode(o),i=e.childNodes;i[t]&&e.removeChild(i[t]),i.length?e.insertBefore(a,i[t]):e.appendChild(a)}}function d(e,t){var n=t.css,r=t.media;if(r&&e.setAttribute("media",r),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}function p(e,t){var n=t.css,r=t.sourceMap;r&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */");var o=new Blob([n],{type:"text/css"}),a=e.href;e.href=URL.createObjectURL(o),a&&URL.revokeObjectURL(a)}var f={},m=function(e){var t;return function(){return"undefined"==typeof t&&(t=e.apply(this,arguments)),t}},h=m(function(){return/msie [6-9]\b/.test(window.navigator.userAgent.toLowerCase())}),y=m(function(){return document.head||document.getElementsByTagName("head")[0]}),g=null,v=0,b=[];e.exports=function(e,t){t=t||{},"undefined"==typeof t.singleton&&(t.singleton=h()),"undefined"==typeof t.insertAt&&(t.insertAt="bottom");var n=o(e);return r(n,t),function(e){for(var a=[],i=0;i<n.length;i++){var l=n[i],s=f[l.id];s.refs--,a.push(s)}if(e){var u=o(e);r(u,t)}for(var i=0;i<a.length;i++){var s=a[i];if(0===s.refs){for(var c=0;c<s.parts.length;c++)s.parts[c]();delete f[s.id]}}}};var w=function(){var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join("\n")}}()},function(e,t,n){var r=n(4);"string"==typeof r&&(r=[[e.id,r,""]]),n(6)(r,{}),r.locals&&(e.exports=r.locals)},function(t,n){t.exports=e},function(e,n){e.exports=t}])})},49:function(e,t,n){try{(function(){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function(e,t,n){for(var r=!0;r;){var o=e,a=t,i=n;r=!1,null===o&&(o=Function.prototype);var l=Object.getOwnPropertyDescriptor(o,a);if(void 0!==l){if("value"in l)return l.value;var s=l.get;if(void 0===s)return;return s.call(i)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=a,n=i,r=!0,l=u=void 0}},s=n(1),u=r(s),c=n(12),d=n(35),p=n(19),f={beginDrag:function(e){return{id:e.id,index:e.index}}},m={hover:function(e,t,n){var r=t.getItem().index,o=e.index;if(r!==o){var a=(0,c.findDOMNode)(n).getBoundingClientRect(),i=(a.bottom-a.top)/2,l=t.getClientOffset(),s=l.y-a.top;r<o&&s<i||r>o&&s>i||(e.moveCard(r,o),t.getItem().index=o)}}},h=function(e){function t(){o(this,n),l(Object.getPrototypeOf(n.prototype),"constructor",this).apply(this,arguments)}a(t,e),i(t,[{key:"render",value:function(){var e=this.props,t=e.text,n=e.isDragging,r=e.connectDragSource,o=e.connectDropTarget,a=e.deleteCard,i=n?0:1,l={"float":"right",cursor:"pointer"};return r(o(u.default.createElement("div",{style:{opacity:i},className:"dragcard"},t,!!a&&u.default.createElement("span",{style:l,onClick:a,title:"删除",className:"rm-icon"},u.default.createElement("i",{className:"fa fa-remove"})))))}}],[{key:"propTypes",value:{connectDragSource:s.PropTypes.func.isRequired,connectDropTarget:s.PropTypes.func.isRequired,index:s.PropTypes.number.isRequired,isDragging:s.PropTypes.bool.isRequired,id:s.PropTypes.any.isRequired,text:s.PropTypes.string.isRequired,deleteCard:s.PropTypes.func,moveCard:s.PropTypes.func.isRequired},enumerable:!0}]);var n=t;return t=(0,d.DragSource)(p.CardTypes.CARD,f,function(e,t){return{connectDragSource:e.dragSource(),isDragging:t.isDragging()}})(t)||t,t=(0,d.DropTarget)(p.CardTypes.CARD,m,function(e){return{connectDropTarget:e.dropTarget()}})(t)||t}(s.Component);t.default=h,e.exports=t.default}).call(this)}finally{}},61:function(e,t,n){!function(t,r){e.exports=r(n(1),n(12))}(this,function(e,t){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=5)}([function(t,n){t.exports=e},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(0),u=r(s),c=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),l(t,[{key:"render",value:function(){return u.default.createElement("div",{"data-filetype":this.props.filetype,className:"filepicker-file-icon"})}}]),t}(u.default.Component);t.default=c},function(e,t,n){(function(e){(function(){var t,n,r,o,a,i,l,s,u=[].slice,c={}.hasOwnProperty,d=function(e,t){function n(){this.constructor=e}for(var r in t)c.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};l=function(){},n=function(){function e(){}return e.prototype.addEventListener=e.prototype.on,e.prototype.on=function(e,t){return this._callbacks=this._callbacks||{},this._callbacks[e]||(this._callbacks[e]=[]),this._callbacks[e].push(t),this},e.prototype.emit=function(){var e,t,n,r,o,a;if(r=arguments[0],e=2<=arguments.length?u.call(arguments,1):[],this._callbacks=this._callbacks||{},n=this._callbacks[r])for(o=0,a=n.length;o<a;o++)t=n[o],t.apply(this,e);return this},e.prototype.removeListener=e.prototype.off,e.prototype.removeAllListeners=e.prototype.off,e.prototype.removeEventListener=e.prototype.off,e.prototype.off=function(e,t){var n,r,o,a,i;if(!this._callbacks||0===arguments.length)return this._callbacks={},this;if(r=this._callbacks[e],!r)return this;if(1===arguments.length)return delete this._callbacks[e],this;for(o=a=0,i=r.length;a<i;o=++a)if(n=r[o],n===t){r.splice(o,1);break}return this},e}(),t=function(e){function t(e,n){var o,a,i;if(this.element=e,this.version=t.version,this.defaultOptions.previewTemplate=this.defaultOptions.previewTemplate.replace(/\n*/g,""),this.clickableElements=[],this.listeners=[],this.files=[],"string"==typeof this.element&&(this.element=document.querySelector(this.element)),!this.element||null==this.element.nodeType)throw new Error("Invalid dropzone element.");if(this.element.dropzone)throw new Error("Dropzone already attached.");if(t.instances.push(this),this.element.dropzone=this,o=null!=(i=t.optionsForElement(this.element))?i:{},this.options=r({},this.defaultOptions,o,null!=n?n:{}),this.options.forceFallback||!t.isBrowserSupported())return this.options.fallback.call(this);if(null==this.options.url&&(this.options.url=this.element.getAttribute("action")),!this.options.url)throw new Error("No URL provided.");if(this.options.acceptedFiles&&this.options.acceptedMimeTypes)throw new Error("You can't provide both 'acceptedFiles' and 'acceptedMimeTypes'. 'acceptedMimeTypes' is deprecated.");this.options.acceptedMimeTypes&&(this.options.acceptedFiles=this.options.acceptedMimeTypes,delete this.options.acceptedMimeTypes),this.options.method=this.options.method.toUpperCase(),(a=this.getExistingFallback())&&a.parentNode&&a.parentNode.removeChild(a),this.options.previewsContainer!==!1&&(this.options.previewsContainer?this.previewsContainer=t.getElement(this.options.previewsContainer,"previewsContainer"):this.previewsContainer=this.element),this.options.clickable&&(this.options.clickable===!0?this.clickableElements=[this.element]:this.clickableElements=t.getElements(this.options.clickable,"clickable")),this.init()}var r,o;return d(t,e),t.prototype.Emitter=n,t.prototype.events=["drop","dragstart","dragend","dragenter","dragover","dragleave","addedfile","addedfiles","removedfile","thumbnail","error","errormultiple","processing","processingmultiple","uploadprogress","totaluploadprogress","sending","sendingmultiple","success","successmultiple","canceled","canceledmultiple","complete","completemultiple","reset","maxfilesexceeded","maxfilesreached","queuecomplete"],t.prototype.defaultOptions={url:null,method:"post",withCredentials:!1,parallelUploads:2,uploadMultiple:!1,maxFilesize:256,paramName:"file",createImageThumbnails:!0,maxThumbnailFilesize:10,thumbnailWidth:120,thumbnailHeight:120,filesizeBase:1e3,maxFiles:null,params:{},clickable:!0,ignoreHiddenFiles:!0,acceptedFiles:null,acceptedMimeTypes:null,autoProcessQueue:!0,autoQueue:!0,addRemoveLinks:!1,previewsContainer:null,hiddenInputContainer:"body",capture:null,renameFilename:null,dictDefaultMessage:"Drop files here to upload",dictFallbackMessage:"Your browser does not support drag'n'drop file uploads.",dictFallbackText:"Please use the fallback form below to upload your files like in the olden days.",dictFileTooBig:"File is too big ({{filesize}}MiB). Max filesize: {{maxFilesize}}MiB.",dictInvalidFileType:"You can't upload files of this type.",dictResponseError:"Server responded with {{statusCode}} code.",dictCancelUpload:"Cancel upload",dictCancelUploadConfirmation:"Are you sure you want to cancel this upload?",dictRemoveFile:"Remove file",dictRemoveFileConfirmation:null,dictMaxFilesExceeded:"You can not upload any more files.",accept:function(e,t){return t()},init:function(){return l},forceFallback:!1,fallback:function(){var e,n,r,o,a,i;for(this.element.className=""+this.element.className+" dz-browser-not-supported",i=this.element.getElementsByTagName("div"),o=0,a=i.length;o<a;o++)e=i[o],/(^| )dz-message($| )/.test(e.className)&&(n=e,e.className="dz-message");return n||(n=t.createElement('<div class="dz-message"><span></span></div>'),this.element.appendChild(n)),r=n.getElementsByTagName("span")[0],r&&(null!=r.textContent?r.textContent=this.options.dictFallbackMessage:null!=r.innerText&&(r.innerText=this.options.dictFallbackMessage)),this.element.appendChild(this.getFallbackForm())},resize:function(e){var t,n,r;return t={srcX:0,srcY:0,srcWidth:e.width,srcHeight:e.height},n=e.width/e.height,t.optWidth=this.options.thumbnailWidth,t.optHeight=this.options.thumbnailHeight,null==t.optWidth&&null==t.optHeight?(t.optWidth=t.srcWidth,t.optHeight=t.srcHeight):null==t.optWidth?t.optWidth=n*t.optHeight:null==t.optHeight&&(t.optHeight=1/n*t.optWidth),r=t.optWidth/t.optHeight,e.height<t.optHeight||e.width<t.optWidth?(t.trgHeight=t.srcHeight,t.trgWidth=t.srcWidth):n>r?(t.srcHeight=e.height,t.srcWidth=t.srcHeight*r):(t.srcWidth=e.width,t.srcHeight=t.srcWidth/r),t.srcX=(e.width-t.srcWidth)/2,t.srcY=(e.height-t.srcHeight)/2,t},drop:function(e){return this.element.classList.remove("dz-drag-hover")},dragstart:l,dragend:function(e){return this.element.classList.remove("dz-drag-hover")},dragenter:function(e){return this.element.classList.add("dz-drag-hover")},dragover:function(e){return this.element.classList.add("dz-drag-hover")},dragleave:function(e){return this.element.classList.remove("dz-drag-hover")},paste:l,reset:function(){return this.element.classList.remove("dz-started")},addedfile:function(e){var n,r,o,a,i,l,s,u,c,d,p,f,m;if(this.element===this.previewsContainer&&this.element.classList.add("dz-started"),this.previewsContainer){for(e.previewElement=t.createElement(this.options.previewTemplate.trim()),e.previewTemplate=e.previewElement,this.previewsContainer.appendChild(e.previewElement),d=e.previewElement.querySelectorAll("[data-dz-name]"),a=0,s=d.length;a<s;a++)n=d[a],n.textContent=this._renameFilename(e.name);for(p=e.previewElement.querySelectorAll("[data-dz-size]"),i=0,u=p.length;i<u;i++)n=p[i],n.innerHTML=this.filesize(e.size);for(this.options.addRemoveLinks&&(e._removeLink=t.createElement('<a class="dz-remove" href="javascript:undefined;" data-dz-remove>'+this.options.dictRemoveFile+"</a>"),e.previewElement.appendChild(e._removeLink)),r=function(n){return function(r){return r.preventDefault(),r.stopPropagation(),e.status===t.UPLOADING?t.confirm(n.options.dictCancelUploadConfirmation,function(){return n.removeFile(e)}):n.options.dictRemoveFileConfirmation?t.confirm(n.options.dictRemoveFileConfirmation,function(){return n.removeFile(e)}):n.removeFile(e)}}(this),f=e.previewElement.querySelectorAll("[data-dz-remove]"),m=[],l=0,c=f.length;l<c;l++)o=f[l],m.push(o.addEventListener("click",r));return m}},removedfile:function(e){var t;return e.previewElement&&null!=(t=e.previewElement)&&t.parentNode.removeChild(e.previewElement),this._updateMaxFilesReachedClass()},thumbnail:function(e,t){var n,r,o,a;if(e.previewElement){for(e.previewElement.classList.remove("dz-file-preview"),a=e.previewElement.querySelectorAll("[data-dz-thumbnail]"),r=0,o=a.length;r<o;r++)n=a[r],n.alt=e.name,n.src=t;return setTimeout(function(t){return function(){return e.previewElement.classList.add("dz-image-preview")}}(this),1)}},error:function(e,t){var n,r,o,a,i;if(e.previewElement){for(e.previewElement.classList.add("dz-error"),"String"!=typeof t&&t.error&&(t=t.error),a=e.previewElement.querySelectorAll("[data-dz-errormessage]"),i=[],r=0,o=a.length;r<o;r++)n=a[r],i.push(n.textContent=t);return i}},errormultiple:l,processing:function(e){if(e.previewElement&&(e.previewElement.classList.add("dz-processing"),e._removeLink))return e._removeLink.textContent=this.options.dictCancelUpload},processingmultiple:l,uploadprogress:function(e,t,n){var r,o,a,i,l;if(e.previewElement){for(i=e.previewElement.querySelectorAll("[data-dz-uploadprogress]"),l=[],o=0,a=i.length;o<a;o++)r=i[o],"PROGRESS"===r.nodeName?l.push(r.value=t):l.push(r.style.width=""+t+"%");return l}},totaluploadprogress:l,sending:l,sendingmultiple:l,success:function(e){if(e.previewElement)return e.previewElement.classList.add("dz-success")},successmultiple:l,canceled:function(e){return this.emit("error",e,"Upload canceled.")},canceledmultiple:l,complete:function(e){if(e._removeLink&&(e._removeLink.textContent=this.options.dictRemoveFile),e.previewElement)return e.previewElement.classList.add("dz-complete")},completemultiple:l,maxfilesexceeded:l,maxfilesreached:l,queuecomplete:l,addedfiles:l,previewTemplate:'<div class="dz-preview dz-file-preview">\n  <div class="dz-image"><img data-dz-thumbnail /></div>\n  <div class="dz-details">\n    <div class="dz-size"><span data-dz-size></span></div>\n    <div class="dz-filename"><span data-dz-name></span></div>\n  </div>\n  <div class="dz-progress"><span class="dz-upload" data-dz-uploadprogress></span></div>\n  <div class="dz-error-message"><span data-dz-errormessage></span></div>\n  <div class="dz-success-mark">\n    <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n      <title>Check</title>\n      <defs></defs>\n      <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\n        <path d="M23.5,31.8431458 L17.5852419,25.9283877 C16.0248253,24.3679711 13.4910294,24.366835 11.9289322,25.9289322 C10.3700136,27.4878508 10.3665912,30.0234455 11.9283877,31.5852419 L20.4147581,40.0716123 C20.5133999,40.1702541 20.6159315,40.2626649 20.7218615,40.3488435 C22.2835669,41.8725651 24.794234,41.8626202 26.3461564,40.3106978 L43.3106978,23.3461564 C44.8771021,21.7797521 44.8758057,19.2483887 43.3137085,17.6862915 C41.7547899,16.1273729 39.2176035,16.1255422 37.6538436,17.6893022 L23.5,31.8431458 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z" id="Oval-2" stroke-opacity="0.198794158" stroke="#747474" fill-opacity="0.816519475" fill="#FFFFFF" sketch:type="MSShapeGroup"></path>\n      </g>\n    </svg>\n  </div>\n  <div class="dz-error-mark">\n    <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n      <title>Error</title>\n      <defs></defs>\n      <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\n        <g id="Check-+-Oval-2" sketch:type="MSLayerGroup" stroke="#747474" stroke-opacity="0.198794158" fill="#FFFFFF" fill-opacity="0.816519475">\n          <path d="M32.6568542,29 L38.3106978,23.3461564 C39.8771021,21.7797521 39.8758057,19.2483887 38.3137085,17.6862915 C36.7547899,16.1273729 34.2176035,16.1255422 32.6538436,17.6893022 L27,23.3431458 L21.3461564,17.6893022 C19.7823965,16.1255422 17.2452101,16.1273729 15.6862915,17.6862915 C14.1241943,19.2483887 14.1228979,21.7797521 15.6893022,23.3461564 L21.3431458,29 L15.6893022,34.6538436 C14.1228979,36.2202479 14.1241943,38.7516113 15.6862915,40.3137085 C17.2452101,41.8726271 19.7823965,41.8744578 21.3461564,40.3106978 L27,34.6568542 L32.6538436,40.3106978 C34.2176035,41.8744578 36.7547899,41.8726271 38.3137085,40.3137085 C39.8758057,38.7516113 39.8771021,36.2202479 38.3106978,34.6538436 L32.6568542,29 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z" id="Oval-2" sketch:type="MSShapeGroup"></path>\n        </g>\n      </g>\n    </svg>\n  </div>\n</div>'},r=function(){var e,t,n,r,o,a,i;for(r=arguments[0],n=2<=arguments.length?u.call(arguments,1):[],a=0,i=n.length;a<i;a++){t=n[a];for(e in t)o=t[e],r[e]=o}return r},t.prototype.getAcceptedFiles=function(){var e,t,n,r,o;for(r=this.files,o=[],t=0,n=r.length;t<n;t++)e=r[t],e.accepted&&o.push(e);return o},t.prototype.getRejectedFiles=function(){var e,t,n,r,o;for(r=this.files,o=[],t=0,n=r.length;t<n;t++)e=r[t],e.accepted||o.push(e);return o},t.prototype.getFilesWithStatus=function(e){var t,n,r,o,a;for(o=this.files,a=[],n=0,r=o.length;n<r;n++)t=o[n],t.status===e&&a.push(t);return a},t.prototype.getQueuedFiles=function(){return this.getFilesWithStatus(t.QUEUED)},t.prototype.getUploadingFiles=function(){return this.getFilesWithStatus(t.UPLOADING)},t.prototype.getAddedFiles=function(){return this.getFilesWithStatus(t.ADDED)},t.prototype.getActiveFiles=function(){var e,n,r,o,a;for(o=this.files,a=[],n=0,r=o.length;n<r;n++)e=o[n],e.status!==t.UPLOADING&&e.status!==t.QUEUED||a.push(e);return a},t.prototype.init=function(){var e,n,r,o,a,i,l;for("form"===this.element.tagName&&this.element.setAttribute("enctype","multipart/form-data"),this.element.classList.contains("dropzone")&&!this.element.querySelector(".dz-message")&&this.element.appendChild(t.createElement('<div class="dz-default dz-message"><span>'+this.options.dictDefaultMessage+"</span></div>")),this.clickableElements.length&&(r=function(e){return function(){return e.hiddenFileInput&&e.hiddenFileInput.parentNode.removeChild(e.hiddenFileInput),e.hiddenFileInput=document.createElement("input"),e.hiddenFileInput.setAttribute("type","file"),(null==e.options.maxFiles||e.options.maxFiles>1)&&e.hiddenFileInput.setAttribute("multiple","multiple"),e.hiddenFileInput.className="dz-hidden-input",null!=e.options.acceptedFiles&&e.hiddenFileInput.setAttribute("accept",e.options.acceptedFiles),null!=e.options.capture&&e.hiddenFileInput.setAttribute("capture",e.options.capture),e.hiddenFileInput.style.visibility="hidden",e.hiddenFileInput.style.position="absolute",e.hiddenFileInput.style.top="0",e.hiddenFileInput.style.left="0",e.hiddenFileInput.style.height="0",e.hiddenFileInput.style.width="0",document.querySelector(e.options.hiddenInputContainer).appendChild(e.hiddenFileInput),e.hiddenFileInput.addEventListener("change",function(){var t,n,o,a;if(n=e.hiddenFileInput.files,n.length)for(o=0,a=n.length;o<a;o++)t=n[o],e.addFile(t);return e.emit("addedfiles",n),r()})}}(this))(),this.URL=null!=(i=window.URL)?i:window.webkitURL,l=this.events,o=0,a=l.length;o<a;o++)e=l[o],this.on(e,this.options[e]);return this.on("uploadprogress",function(e){return function(){return e.updateTotalUploadProgress()}}(this)),this.on("removedfile",function(e){return function(){return e.updateTotalUploadProgress()}}(this)),this.on("canceled",function(e){return function(t){return e.emit("complete",t)}}(this)),this.on("complete",function(e){return function(t){if(0===e.getAddedFiles().length&&0===e.getUploadingFiles().length&&0===e.getQueuedFiles().length)return setTimeout(function(){return e.emit("queuecomplete")},0)}}(this)),n=function(e){return e.stopPropagation(),e.preventDefault?e.preventDefault():e.returnValue=!1},this.listeners=[{element:this.element,events:{dragstart:function(e){return function(t){return e.emit("dragstart",t)}}(this),dragenter:function(e){return function(t){return n(t),e.emit("dragenter",t)}}(this),dragover:function(e){return function(t){var r;try{r=t.dataTransfer.effectAllowed}catch(o){}return t.dataTransfer.dropEffect="move"===r||"linkMove"===r?"move":"copy",n(t),e.emit("dragover",t)}}(this),dragleave:function(e){return function(t){return e.emit("dragleave",t)}}(this),drop:function(e){return function(t){return n(t),e.drop(t)}}(this),dragend:function(e){return function(t){return e.emit("dragend",t)}}(this)}}],this.clickableElements.forEach(function(e){return function(n){return e.listeners.push({element:n,events:{click:function(r){return(n!==e.element||r.target===e.element||t.elementInside(r.target,e.element.querySelector(".dz-message")))&&e.hiddenFileInput.click(),!0}}})}}(this)),this.enable(),this.options.init.call(this)},t.prototype.destroy=function(){var e;return this.disable(),this.removeAllFiles(!0),(null!=(e=this.hiddenFileInput)?e.parentNode:void 0)&&(this.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput),this.hiddenFileInput=null),delete this.element.dropzone,t.instances.splice(t.instances.indexOf(this),1)},t.prototype.updateTotalUploadProgress=function(){var e,t,n,r,o,a,i,l;if(r=0,n=0,e=this.getActiveFiles(),e.length){for(l=this.getActiveFiles(),a=0,i=l.length;a<i;a++)t=l[a],r+=t.upload.bytesSent,n+=t.upload.total;o=100*r/n}else o=100;return this.emit("totaluploadprogress",o,n,r)},t.prototype._getParamName=function(e){return"function"==typeof this.options.paramName?this.options.paramName(e):""+this.options.paramName+(this.options.uploadMultiple?"["+e+"]":"")},t.prototype._renameFilename=function(e){return"function"!=typeof this.options.renameFilename?e:this.options.renameFilename(e)},t.prototype.getFallbackForm=function(){var e,n,r,o;return(e=this.getExistingFallback())?e:(r='<div class="dz-fallback">',this.options.dictFallbackText&&(r+="<p>"+this.options.dictFallbackText+"</p>"),r+='<input type="file" name="'+this._getParamName(0)+'" '+(this.options.uploadMultiple?'multiple="multiple"':void 0)+' /><input type="submit" value="Upload!"></div>',n=t.createElement(r),"FORM"!==this.element.tagName?(o=t.createElement('<form action="'+this.options.url+'" enctype="multipart/form-data" method="'+this.options.method+'"></form>'),o.appendChild(n)):(this.element.setAttribute("enctype","multipart/form-data"),this.element.setAttribute("method",this.options.method)),null!=o?o:n)},t.prototype.getExistingFallback=function(){var e,t,n,r,o,a;for(t=function(e){var t,n,r;for(n=0,r=e.length;n<r;n++)if(t=e[n],/(^| )fallback($| )/.test(t.className))return t},a=["div","form"],r=0,o=a.length;r<o;r++)if(n=a[r],e=t(this.element.getElementsByTagName(n)))return e},t.prototype.setupEventListeners=function(){var e,t,n,r,o,a,i;for(a=this.listeners,i=[],r=0,o=a.length;r<o;r++)e=a[r],i.push(function(){var r,o;r=e.events,o=[];for(t in r)n=r[t],o.push(e.element.addEventListener(t,n,!1));return o}());return i},t.prototype.removeEventListeners=function(){var e,t,n,r,o,a,i;for(a=this.listeners,i=[],r=0,o=a.length;r<o;r++)e=a[r],i.push(function(){var r,o;r=e.events,o=[];for(t in r)n=r[t],o.push(e.element.removeEventListener(t,n,!1));return o}());return i},t.prototype.disable=function(){var e,t,n,r,o;for(this.clickableElements.forEach(function(e){return e.classList.remove("dz-clickable")}),this.removeEventListeners(),r=this.files,o=[],t=0,n=r.length;t<n;t++)e=r[t],o.push(this.cancelUpload(e));return o},t.prototype.enable=function(){return this.clickableElements.forEach(function(e){return e.classList.add("dz-clickable")}),this.setupEventListeners()},t.prototype.filesize=function(e){var t,n,r,o,a,i,l,s;if(r=0,o="b",e>0){for(i=["TB","GB","MB","KB","b"],n=l=0,s=i.length;l<s;n=++l)if(a=i[n],t=Math.pow(this.options.filesizeBase,4-n)/10,e>=t){r=e/Math.pow(this.options.filesizeBase,4-n),o=a;break}r=Math.round(10*r)/10}return"<strong>"+r+"</strong> "+o},t.prototype._updateMaxFilesReachedClass=function(){return null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(this.getAcceptedFiles().length===this.options.maxFiles&&this.emit("maxfilesreached",this.files),this.element.classList.add("dz-max-files-reached")):this.element.classList.remove("dz-max-files-reached")},t.prototype.drop=function(e){var t,n;e.dataTransfer&&(this.emit("drop",e),t=e.dataTransfer.files,this.emit("addedfiles",t),t.length&&(n=e.dataTransfer.items,n&&n.length&&null!=n[0].webkitGetAsEntry?this._addFilesFromItems(n):this.handleFiles(t)))},t.prototype.paste=function(e){var t,n;if(null!=(null!=e&&null!=(n=e.clipboardData)?n.items:void 0))return this.emit("paste",e),t=e.clipboardData.items,t.length?this._addFilesFromItems(t):void 0},t.prototype.handleFiles=function(e){var t,n,r,o;for(o=[],n=0,r=e.length;n<r;n++)t=e[n],o.push(this.addFile(t));return o},t.prototype._addFilesFromItems=function(e){var t,n,r,o,a;for(a=[],r=0,o=e.length;r<o;r++)n=e[r],null!=n.webkitGetAsEntry&&(t=n.webkitGetAsEntry())?t.isFile?a.push(this.addFile(n.getAsFile())):t.isDirectory?a.push(this._addFilesFromDirectory(t,t.name)):a.push(void 0):null!=n.getAsFile&&(null==n.kind||"file"===n.kind)?a.push(this.addFile(n.getAsFile())):a.push(void 0);return a},t.prototype._addFilesFromDirectory=function(e,t){var n,r,o;return n=e.createReader(),r=function(e){return"undefined"!=typeof console&&null!==console?("function"==typeof console.log,void 0):void 0},(o=function(e){return function(){return n.readEntries(function(n){var r,a,i;if(n.length>0){for(a=0,i=n.length;a<i;a++)r=n[a],r.isFile?r.file(function(n){if(!e.options.ignoreHiddenFiles||"."!==n.name.substring(0,1))return n.fullPath=""+t+"/"+n.name,e.addFile(n)}):r.isDirectory&&e._addFilesFromDirectory(r,""+t+"/"+r.name);o()}return null},r)}}(this))()},t.prototype.accept=function(e,n){return e.size>1024*this.options.maxFilesize*1024?n(this.options.dictFileTooBig.replace("{{filesize}}",Math.round(e.size/1024/10.24)/100).replace("{{maxFilesize}}",this.options.maxFilesize)):t.isValidFile(e,this.options.acceptedFiles)?null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(n(this.options.dictMaxFilesExceeded.replace("{{maxFiles}}",this.options.maxFiles)),this.emit("maxfilesexceeded",e)):this.options.accept.call(this,e,n):n(this.options.dictInvalidFileType)},t.prototype.addFile=function(e){return e.upload={progress:0,total:e.size,bytesSent:0},this.files.push(e),e.status=t.ADDED,this.emit("addedfile",e),this._enqueueThumbnail(e),this.accept(e,function(t){return function(n){return n?(e.accepted=!1,t._errorProcessing([e],n)):(e.accepted=!0,t.options.autoQueue&&t.enqueueFile(e)),t._updateMaxFilesReachedClass()}}(this))},t.prototype.enqueueFiles=function(e){var t,n,r;for(n=0,r=e.length;n<r;n++)t=e[n],this.enqueueFile(t);return null},t.prototype.enqueueFile=function(e){if(e.status!==t.ADDED||e.accepted!==!0)throw new Error("This file can't be queued because it has already been processed or was rejected.");
if(e.status=t.QUEUED,this.options.autoProcessQueue)return setTimeout(function(e){return function(){return e.processQueue()}}(this),0)},t.prototype._thumbnailQueue=[],t.prototype._processingThumbnail=!1,t.prototype._enqueueThumbnail=function(e){if(this.options.createImageThumbnails&&e.type.match(/image.*/)&&e.size<=1024*this.options.maxThumbnailFilesize*1024)return this._thumbnailQueue.push(e),setTimeout(function(e){return function(){return e._processThumbnailQueue()}}(this),0)},t.prototype._processThumbnailQueue=function(){if(!this._processingThumbnail&&0!==this._thumbnailQueue.length)return this._processingThumbnail=!0,this.createThumbnail(this._thumbnailQueue.shift(),function(e){return function(){return e._processingThumbnail=!1,e._processThumbnailQueue()}}(this))},t.prototype.removeFile=function(e){if(e.status===t.UPLOADING&&this.cancelUpload(e),this.files=s(this.files,e),this.emit("removedfile",e),0===this.files.length)return this.emit("reset")},t.prototype.removeAllFiles=function(e){var n,r,o,a;for(null==e&&(e=!1),a=this.files.slice(),r=0,o=a.length;r<o;r++)n=a[r],(n.status!==t.UPLOADING||e)&&this.removeFile(n);return null},t.prototype.createThumbnail=function(e,t){var n;return n=new FileReader,n.onload=function(r){return function(){return"image/svg+xml"===e.type?(r.emit("thumbnail",e,n.result),void(null!=t&&t())):r.createThumbnailFromUrl(e,n.result,t)}}(this),n.readAsDataURL(e)},t.prototype.createThumbnailFromUrl=function(e,t,n,r){var o;return o=document.createElement("img"),r&&(o.crossOrigin=r),o.onload=function(t){return function(){var r,a,l,s,u,c,d,p;if(e.width=o.width,e.height=o.height,l=t.options.resize.call(t,e),null==l.trgWidth&&(l.trgWidth=l.optWidth),null==l.trgHeight&&(l.trgHeight=l.optHeight),r=document.createElement("canvas"),a=r.getContext("2d"),r.width=l.trgWidth,r.height=l.trgHeight,i(a,o,null!=(u=l.srcX)?u:0,null!=(c=l.srcY)?c:0,l.srcWidth,l.srcHeight,null!=(d=l.trgX)?d:0,null!=(p=l.trgY)?p:0,l.trgWidth,l.trgHeight),s=r.toDataURL("image/png"),t.emit("thumbnail",e,s),null!=n)return n()}}(this),null!=n&&(o.onerror=n),o.src=t},t.prototype.processQueue=function(){var e,t,n,r;if(t=this.options.parallelUploads,n=this.getUploadingFiles().length,e=n,!(n>=t)&&(r=this.getQueuedFiles(),r.length>0)){if(this.options.uploadMultiple)return this.processFiles(r.slice(0,t-n));for(;e<t;){if(!r.length)return;this.processFile(r.shift()),e++}}},t.prototype.processFile=function(e){return this.processFiles([e])},t.prototype.processFiles=function(e){var n,r,o;for(r=0,o=e.length;r<o;r++)n=e[r],n.processing=!0,n.status=t.UPLOADING,this.emit("processing",n);return this.options.uploadMultiple&&this.emit("processingmultiple",e),this.uploadFiles(e)},t.prototype._getFilesWithXhr=function(e){var t,n;return n=function(){var n,r,o,a;for(o=this.files,a=[],n=0,r=o.length;n<r;n++)t=o[n],t.xhr===e&&a.push(t);return a}.call(this)},t.prototype.cancelUpload=function(e){var n,r,o,a,i,l,s;if(e.status===t.UPLOADING){for(r=this._getFilesWithXhr(e.xhr),o=0,i=r.length;o<i;o++)n=r[o],n.status=t.CANCELED;for(e.xhr.abort(),a=0,l=r.length;a<l;a++)n=r[a],this.emit("canceled",n);this.options.uploadMultiple&&this.emit("canceledmultiple",r)}else(s=e.status)!==t.ADDED&&s!==t.QUEUED||(e.status=t.CANCELED,this.emit("canceled",e),this.options.uploadMultiple&&this.emit("canceledmultiple",[e]));if(this.options.autoProcessQueue)return this.processQueue()},o=function(){var e,t;return t=arguments[0],e=2<=arguments.length?u.call(arguments,1):[],"function"==typeof t?t.apply(this,e):t},t.prototype.uploadFile=function(e){return this.uploadFiles([e])},t.prototype.uploadFiles=function(e){var n,a,i,l,s,u,c,d,p,f,m,h,y,g,v,b,w,E,k,_,x,C,S,T,P,O,R,M,j,F,N,q,I,L;for(k=new XMLHttpRequest,_=0,T=e.length;_<T;_++)n=e[_],n.xhr=k;h=o(this.options.method,e),w=o(this.options.url,e),k.open(h,w,!0),k.withCredentials=!!this.options.withCredentials,v=null,i=function(t){return function(){var r,o,a;for(a=[],r=0,o=e.length;r<o;r++)n=e[r],a.push(t._errorProcessing(e,v||t.options.dictResponseError.replace("{{statusCode}}",k.status),k));return a}}(this),b=function(t){return function(r){var o,a,i,l,s,u,c,d,p;if(null!=r)for(a=100*r.loaded/r.total,i=0,u=e.length;i<u;i++)n=e[i],n.upload={progress:a,total:r.total,bytesSent:r.loaded};else{for(o=!0,a=100,l=0,c=e.length;l<c;l++)n=e[l],100===n.upload.progress&&n.upload.bytesSent===n.upload.total||(o=!1),n.upload.progress=a,n.upload.bytesSent=n.upload.total;if(o)return}for(p=[],s=0,d=e.length;s<d;s++)n=e[s],p.push(t.emit("uploadprogress",n,a,n.upload.bytesSent));return p}}(this),k.onload=function(n){return function(r){var o;if(e[0].status!==t.CANCELED&&4===k.readyState){if(v=k.responseText,k.getResponseHeader("content-type")&&~k.getResponseHeader("content-type").indexOf("application/json"))try{v=JSON.parse(v)}catch(a){r=a,v="Invalid JSON response from server."}return b(),200<=(o=k.status)&&o<300?n._finished(e,v,r):i()}}}(this),k.onerror=function(n){return function(){if(e[0].status!==t.CANCELED)return i()}}(this),g=null!=(j=k.upload)?j:k,g.onprogress=b,u={Accept:"application/json","Cache-Control":"no-cache","X-Requested-With":"XMLHttpRequest"},this.options.headers&&r(u,this.options.headers);for(l in u)s=u[l],s&&k.setRequestHeader(l,s);if(a=new FormData,this.options.params){F=this.options.params;for(m in F)E=F[m],a.append(m,E)}for(x=0,P=e.length;x<P;x++)n=e[x],this.emit("sending",n,k,a);if(this.options.uploadMultiple&&this.emit("sendingmultiple",e,k,a),"FORM"===this.element.tagName)for(N=this.element.querySelectorAll("input, textarea, select, button"),C=0,O=N.length;C<O;C++)if(d=N[C],p=d.getAttribute("name"),f=d.getAttribute("type"),"SELECT"===d.tagName&&d.hasAttribute("multiple"))for(q=d.options,S=0,R=q.length;S<R;S++)y=q[S],y.selected&&a.append(p,y.value);else(!f||"checkbox"!==(I=f.toLowerCase())&&"radio"!==I||d.checked)&&a.append(p,d.value);for(c=M=0,L=e.length-1;0<=L?M<=L:M>=L;c=0<=L?++M:--M)a.append(this._getParamName(c),e[c],this._renameFilename(e[c].name));return this.submitRequest(k,a,e)},t.prototype.submitRequest=function(e,t,n){return e.send(t)},t.prototype._finished=function(e,n,r){var o,a,i;for(a=0,i=e.length;a<i;a++)o=e[a],o.status=t.SUCCESS,this.emit("success",o,n,r),this.emit("complete",o);if(this.options.uploadMultiple&&(this.emit("successmultiple",e,n,r),this.emit("completemultiple",e)),this.options.autoProcessQueue)return this.processQueue()},t.prototype._errorProcessing=function(e,n,r){var o,a,i;for(a=0,i=e.length;a<i;a++)o=e[a],o.status=t.ERROR,this.emit("error",o,n,r),this.emit("complete",o);if(this.options.uploadMultiple&&(this.emit("errormultiple",e,n,r),this.emit("completemultiple",e)),this.options.autoProcessQueue)return this.processQueue()},t}(n),t.version="4.3.0",t.options={},t.optionsForElement=function(e){return e.getAttribute("id")?t.options[r(e.getAttribute("id"))]:void 0},t.instances=[],t.forElement=function(e){if("string"==typeof e&&(e=document.querySelector(e)),null==(null!=e?e.dropzone:void 0))throw new Error("No Dropzone found for given element. This is probably because you're trying to access it before Dropzone had the time to initialize. Use the `init` option to setup any additional observers on your Dropzone.");return e.dropzone},t.autoDiscover=!0,t.discover=function(){var e,n,r,o,a,i;for(document.querySelectorAll?r=document.querySelectorAll(".dropzone"):(r=[],e=function(e){var t,n,o,a;for(a=[],n=0,o=e.length;n<o;n++)t=e[n],/(^| )dropzone($| )/.test(t.className)?a.push(r.push(t)):a.push(void 0);return a},e(document.getElementsByTagName("div")),e(document.getElementsByTagName("form"))),i=[],o=0,a=r.length;o<a;o++)n=r[o],t.optionsForElement(n)!==!1?i.push(new t(n)):i.push(void 0);return i},t.blacklistedBrowsers=[/opera.*Macintosh.*version\/12/i],t.isBrowserSupported=function(){var e,n,r,o,a;if(e=!0,window.File&&window.FileReader&&window.FileList&&window.Blob&&window.FormData&&document.querySelector)if("classList"in document.createElement("a"))for(a=t.blacklistedBrowsers,r=0,o=a.length;r<o;r++)n=a[r],n.test(navigator.userAgent)&&(e=!1);else e=!1;else e=!1;return e},s=function(e,t){var n,r,o,a;for(a=[],r=0,o=e.length;r<o;r++)n=e[r],n!==t&&a.push(n);return a},r=function(e){return e.replace(/[\-_](\w)/g,function(e){return e.charAt(1).toUpperCase()})},t.createElement=function(e){var t;return t=document.createElement("div"),t.innerHTML=e,t.childNodes[0]},t.elementInside=function(e,t){if(e===t)return!0;for(;e=e.parentNode;)if(e===t)return!0;return!1},t.getElement=function(e,t){var n;if("string"==typeof e?n=document.querySelector(e):null!=e.nodeType&&(n=e),null==n)throw new Error("Invalid `"+t+"` option provided. Please provide a CSS selector or a plain HTML element.");return n},t.getElements=function(e,t){var n,r,o,a,i,l,s,u;if(e instanceof Array){o=[];try{for(a=0,l=e.length;a<l;a++)r=e[a],o.push(this.getElement(r,t))}catch(c){n=c,o=null}}else if("string"==typeof e)for(o=[],u=document.querySelectorAll(e),i=0,s=u.length;i<s;i++)r=u[i],o.push(r);else null!=e.nodeType&&(o=[e]);if(null==o||!o.length)throw new Error("Invalid `"+t+"` option provided. Please provide a CSS selector, a plain HTML element or a list of those.");return o},t.confirm=function(e,t,n){return window.confirm(e)?t():null!=n?n():void 0},t.isValidFile=function(e,t){var n,r,o,a,i;if(!t)return!0;for(t=t.split(","),r=e.type,n=r.replace(/\/.*$/,""),a=0,i=t.length;a<i;a++)if(o=t[a],o=o.trim(),"."===o.charAt(0)){if(e.name.toLowerCase().indexOf(o.toLowerCase(),e.name.length-o.length)!==-1)return!0}else if(/\/\*$/.test(o)){if(n===o.replace(/\/.*$/,""))return!0}else if(r===o)return!0;return!1},"undefined"!=typeof jQuery&&null!==jQuery&&(jQuery.fn.dropzone=function(e){return this.each(function(){return new t(this,e)})}),"undefined"!=typeof e&&null!==e?e.exports=t:window.Dropzone=t,t.ADDED="added",t.QUEUED="queued",t.ACCEPTED=t.QUEUED,t.UPLOADING="uploading",t.PROCESSING=t.UPLOADING,t.CANCELED="canceled",t.ERROR="error",t.SUCCESS="success",a=function(e){var t,n,r,o,a,i,l,s,u,c;for(l=e.naturalWidth,i=e.naturalHeight,n=document.createElement("canvas"),n.width=1,n.height=i,r=n.getContext("2d"),r.drawImage(e,0,0),o=r.getImageData(0,0,1,i).data,c=0,a=i,s=i;s>c;)t=o[4*(s-1)+3],0===t?a=s:c=s,s=a+c>>1;return u=s/i,0===u?1:u},i=function(e,t,n,r,o,i,l,s,u,c){var d;return d=a(t),e.drawImage(t,n,r,o,i,l,s,u,c/d)},o=function(e,t){var n,r,o,a,i,l,s,u,c;if(o=!1,c=!0,r=e.document,u=r.documentElement,n=r.addEventListener?"addEventListener":"attachEvent",s=r.addEventListener?"removeEventListener":"detachEvent",l=r.addEventListener?"":"on",a=function(n){if("readystatechange"!==n.type||"complete"===r.readyState)return("load"===n.type?e:r)[s](l+n.type,a,!1),!o&&(o=!0)?t.call(e,n.type||n):void 0},i=function(){var e;try{u.doScroll("left")}catch(t){return e=t,void setTimeout(i,50)}return a("poll")},"complete"!==r.readyState){if(r.createEventObject&&u.doScroll){try{c=!e.frameElement}catch(d){}c&&i()}return r[n](l+"DOMContentLoaded",a,!1),r[n](l+"readystatechange",a,!1),e[n](l+"load",a,!1)}},t._autoDiscoverFunction=function(){if(t.autoDiscover)return t.discover()},o(window,t._autoDiscoverFunction)}).call(this)}).call(t,n(6)(e))},function(e,t,n){"use strict";var r=Object.prototype.hasOwnProperty,o=Object.prototype.toString,a=function(e){return"function"==typeof Array.isArray?Array.isArray(e):"[object Array]"===o.call(e)},i=function(e){if(!e||"[object Object]"!==o.call(e))return!1;var t=r.call(e,"constructor"),n=e.constructor&&e.constructor.prototype&&r.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!t&&!n)return!1;var a;for(a in e);return"undefined"==typeof a||r.call(e,a)};e.exports=function l(){var e,t,n,r,o,s,u=arguments[0],c=1,d=arguments.length,p=!1;for("boolean"==typeof u?(p=u,u=arguments[1]||{},c=2):("object"!=typeof u&&"function"!=typeof u||null==u)&&(u={});c<d;++c)if(e=arguments[c],null!=e)for(t in e)n=u[t],r=e[t],u!==r&&(p&&r&&(i(r)||(o=a(r)))?(o?(o=!1,s=n&&a(n)?n:[]):s=n&&i(n)?n:{},u[t]=l(p,s,r)):"undefined"!=typeof r&&(u[t]=r));return u}},function(e,n){e.exports=t},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.DropzoneComponent=void 0;var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(0),u=r(s),c=n(4),d=r(c),p=n(3),f=r(p),m=n(1),h=r(m),y=null,g=t.DropzoneComponent=function(e){function t(e){o(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={files:[]},n}return i(t,e),l(t,[{key:"getDjsConfig",value:function(){var e=null,t={url:this.props.config.postUrl?this.props.config.postUrl:null};return e=this.props.djsConfig?(0,f.default)(!0,{},t,this.props.djsConfig):t}},{key:"componentDidMount",value:function(){var e=this.getDjsConfig();y=y||n(2),y.autoDiscover=!1,!this.props.config.postUrl&&!this.props.eventHandlers.drop;var t=this.props.config.dropzoneSelector||d.default.findDOMNode(this);this.dropzone=new y(t,e),this.setupEvents()}},{key:"componentWillUnmount",value:function(){var e=this;if(this.dropzone){var t=this.dropzone.getActiveFiles();if(t.length>0){this.queueDestroy=!0;var n=window.setInterval(function(){return e.queueDestroy===!1?window.clearInterval(n):0===e.dropzone.getActiveFiles().length?(e.dropzone=e.destroy(e.dropzone),window.clearInterval(n)):void 0},500)}else this.dropzone=this.destroy(this.dropzone)}}},{key:"componentDidUpdate",value:function(){if(this.queueDestroy=!1,!this.dropzone){var e=this.props.config.dropzoneSelector||d.default.findDOMNode(this);this.dropzone=new y(e,this.getDjsConfig())}}},{key:"componentWillUpdate",value:function(){var e=void 0,t=void 0;e=this.props.djsConfig?this.props.djsConfig:{};try{t=this.props.config.postUrl?{url:this.props.config.postUrl}:{}}catch(n){t={}}this.dropzone.options=(0,f.default)(!0,{},this.dropzone.options,e,t)}},{key:"render",value:function(){var e=[],t=this.state.files,n=this.props.config,r=this.props.className?"filepicker dropzone "+this.props.className:"filepicker dropzone";if(n.showFiletypeIcon&&n.iconFiletypes&&(!t||t.length<1))for(var o=0;o<this.props.config.iconFiletypes.length;o+=1)e.push(u.default.createElement(h.default,{filetype:n.iconFiletypes[o],key:"icon-component"+o}));return!this.props.config.postUrl&&this.props.action?u.default.createElement("form",{action:this.props.action,className:r},e,this.props.children):u.default.createElement("div",{className:r}," ",e," ",this.props.children," ")}},{key:"setupEvents",value:function(){var e=this,t=this.props.eventHandlers;if(this.dropzone&&t){for(var n in t)if(t.hasOwnProperty(n)&&t[n])if("[object Array]"===Object.prototype.toString.call(t[n]))for(var r=0;r<t[n].length;r+=1)"init"===n?t[n][r](this.dropzone):this.dropzone.on(n,t[n][r]);else"init"===n?t[n](this.dropzone):this.dropzone.on(n,t[n]);this.dropzone.on("addedfile",function(t){if(t){var n=e.state.files||[];n.push(t),e.setState({files:n})}}),this.dropzone.on("removedfile",function(t){if(t){var n=e.state.files||[];n.forEach(function(e){e.name===t.name&&e.size===t.size&&n.splice(r,1)}),e.setState({files:n})}})}}},{key:"destroy",value:function(e){return e.off(),e.destroy()}}]),t}(u.default.Component);g.defaultProps={djsConfig:{},config:{},eventHandlers:{}},t.default=g},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}}])})},71:function(e,t){function n(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function r(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function o(e,t){return function(n){return e(t(n))}}function a(e,t){var n=q(e)||h(e)?r(e.length,String):[],o=n.length,a=!!o;for(var i in e)!t&&!O.call(e,i)||a&&("length"==i||d(i,o))||n.push(i);return n}function i(e,t,n){var r=e[t];O.call(e,t)&&m(r,n)&&(void 0!==n||t in e)||(e[t]=n)}function l(e){if(!f(e))return j(e);var t=[];for(var n in Object(e))O.call(e,n)&&"constructor"!=n&&t.push(n);return t}function s(e,t){return t=F(void 0===t?e.length-1:t,0),function(){for(var r=arguments,o=-1,a=F(r.length-t,0),i=Array(a);++o<a;)i[o]=r[t+o];o=-1;for(var l=Array(t+1);++o<t;)l[o]=r[o];return l[t]=i,n(e,this,l)}}function u(e,t,n,r){n||(n={});for(var o=-1,a=t.length;++o<a;){var l=t[o],s=r?r(n[l],e[l],l,n,e):void 0;i(n,l,void 0===s?e[l]:s)}return n}function c(e){return s(function(t,n){var r=-1,o=n.length,a=o>1?n[o-1]:void 0,i=o>2?n[2]:void 0;for(a=e.length>3&&"function"==typeof a?(o--,a):void 0,i&&p(n[0],n[1],i)&&(a=o<3?void 0:a,o=1),t=Object(t);++r<o;){var l=n[r];l&&e(t,l,r,a)}return t})}function d(e,t){return t=null==t?_:t,!!t&&("number"==typeof e||T.test(e))&&e>-1&&e%1==0&&e<t}function p(e,t,n){if(!w(n))return!1;var r=typeof t;return!!("number"==r?y(n)&&d(t,n.length):"string"==r&&t in n)&&m(n[t],e)}function f(e){var t=e&&e.constructor,n="function"==typeof t&&t.prototype||P;return e===n}function m(e,t){return e===t||e!==e&&t!==t}function h(e){return g(e)&&O.call(e,"callee")&&(!M.call(e,"callee")||R.call(e)==x)}function y(e){return null!=e&&b(e.length)&&!v(e)}function g(e){return E(e)&&y(e)}function v(e){var t=w(e)?R.call(e):"";return t==C||t==S}function b(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=_}function w(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function E(e){return!!e&&"object"==typeof e}function k(e){return y(e)?a(e):l(e)}var _=9007199254740991,x="[object Arguments]",C="[object Function]",S="[object GeneratorFunction]",T=/^(?:0|[1-9]\d*)$/,P=Object.prototype,O=P.hasOwnProperty,R=P.toString,M=P.propertyIsEnumerable,j=o(Object.keys,Object),F=Math.max,N=!M.call({valueOf:1},"valueOf"),q=Array.isArray,I=c(function(e,t){if(N||f(t)||y(t))return void u(t,k(t),e);for(var n in t)O.call(t,n)&&i(e,n,t[n])});e.exports=I},72:function(e,t,n){"use strict";!function(t){e.exports=t(n(1))}(function(e){function t(t){var n=e.createElement.bind(null,t);return n.type=t,n}var n={a:t("a"),abbr:t("abbr"),address:t("address"),area:t("area"),article:t("article"),aside:t("aside"),audio:t("audio"),b:t("b"),base:t("base"),bdi:t("bdi"),bdo:t("bdo"),big:t("big"),blockquote:t("blockquote"),body:t("body"),br:t("br"),button:t("button"),canvas:t("canvas"),caption:t("caption"),cite:t("cite"),code:t("code"),col:t("col"),colgroup:t("colgroup"),data:t("data"),datalist:t("datalist"),dd:t("dd"),del:t("del"),details:t("details"),dfn:t("dfn"),dialog:t("dialog"),div:t("div"),dl:t("dl"),dt:t("dt"),em:t("em"),embed:t("embed"),fieldset:t("fieldset"),figcaption:t("figcaption"),figure:t("figure"),footer:t("footer"),form:t("form"),h1:t("h1"),h2:t("h2"),h3:t("h3"),h4:t("h4"),h5:t("h5"),h6:t("h6"),head:t("head"),header:t("header"),hgroup:t("hgroup"),hr:t("hr"),html:t("html"),i:t("i"),iframe:t("iframe"),img:t("img"),input:t("input"),ins:t("ins"),kbd:t("kbd"),keygen:t("keygen"),label:t("label"),legend:t("legend"),li:t("li"),link:t("link"),main:t("main"),map:t("map"),mark:t("mark"),menu:t("menu"),menuitem:t("menuitem"),meta:t("meta"),meter:t("meter"),nav:t("nav"),noscript:t("noscript"),object:t("object"),ol:t("ol"),optgroup:t("optgroup"),option:t("option"),output:t("output"),p:t("p"),param:t("param"),picture:t("picture"),pre:t("pre"),progress:t("progress"),q:t("q"),rp:t("rp"),rt:t("rt"),ruby:t("ruby"),s:t("s"),samp:t("samp"),script:t("script"),section:t("section"),select:t("select"),small:t("small"),source:t("source"),span:t("span"),strong:t("strong"),style:t("style"),sub:t("sub"),summary:t("summary"),sup:t("sup"),table:t("table"),tbody:t("tbody"),td:t("td"),textarea:t("textarea"),tfoot:t("tfoot"),th:t("th"),thead:t("thead"),time:t("time"),title:t("title"),tr:t("tr"),track:t("track"),u:t("u"),ul:t("ul"),"var":t("var"),video:t("video"),wbr:t("wbr"),circle:t("circle"),clipPath:t("clipPath"),defs:t("defs"),ellipse:t("ellipse"),g:t("g"),image:t("image"),line:t("line"),linearGradient:t("linearGradient"),mask:t("mask"),path:t("path"),pattern:t("pattern"),polygon:t("polygon"),polyline:t("polyline"),radialGradient:t("radialGradient"),rect:t("rect"),stop:t("stop"),svg:t("svg"),text:t("text"),tspan:t("tspan")};return n})},73:function(e,t){function n(e,t){var n=e.nodeName.toLowerCase();return(/input|select|textarea|button|object/.test(n)?!e.disabled:"a"===n?e.href||t:t)&&o(e)}function r(e){return e.offsetWidth<=0&&e.offsetHeight<=0||"none"===e.style.display}function o(e){for(;e&&e!==document.body;){if(r(e))return!1;e=e.parentNode}return!0}function a(e){var t=e.getAttribute("tabindex");null===t&&(t=void 0);var r=isNaN(t);return(r||t>=0)&&n(e,!r)}function i(e){return[].slice.call(e.querySelectorAll("*"),0).filter(function(e){return a(e)})}e.exports=i},88:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(1),l=r(i),s=l.default.createClass({displayName:"Radio",contextTypes:{radioGroup:l.default.PropTypes.object},render:function(){var e=this.context.radioGroup,t=e.name,n=e.selectedValue,r=e.onChange,o={};return void 0!==n&&(o.checked=this.props.value===n),"function"==typeof r&&(o.onChange=r.bind(null,this.props.value)),l.default.createElement("input",a({},this.props,{type:"radio",name:t},o))}});t.Radio=s;var u=l.default.createClass({displayName:"RadioGroup",propTypes:{name:i.PropTypes.string,selectedValue:i.PropTypes.oneOfType([i.PropTypes.string,i.PropTypes.number,i.PropTypes.bool]),onChange:i.PropTypes.func,children:i.PropTypes.node.isRequired,Component:i.PropTypes.oneOfType([i.PropTypes.string,i.PropTypes.func,i.PropTypes.object])},getDefaultProps:function(){return{Component:"div"}},childContextTypes:{radioGroup:l.default.PropTypes.object},getChildContext:function(){var e=this.props,t=e.name,n=e.selectedValue,r=e.onChange;return{radioGroup:{name:t,selectedValue:n,onChange:r}}},render:function(){var e=this.props,t=e.Component,n=(e.name,e.selectedValue,e.onChange,e.children),r=o(e,["Component","name","selectedValue","onChange","children"]);return l.default.createElement(t,r,n)}});t.RadioGroup=u},91:function(e,t,n){(function(t){(function(){function t(e){this.tokens=[],this.tokens.links={},this.options=e||c.defaults,this.rules=d.normal,this.options.gfm&&(this.options.tables?this.rules=d.tables:this.rules=d.gfm)}function n(e,t){if(this.options=t||c.defaults,this.links=e,this.rules=p.normal,this.renderer=this.options.renderer||new r,this.renderer.options=this.options,!this.links)throw new Error("Tokens array requires a `links` property.");this.options.gfm?this.options.breaks?this.rules=p.breaks:this.rules=p.gfm:this.options.pedantic&&(this.rules=p.pedantic)}function r(e){this.options=e||{}}function o(e){this.tokens=[],this.token=null,this.options=e||c.defaults,this.options.renderer=this.options.renderer||new r,this.renderer=this.options.renderer,this.renderer.options=this.options}function a(e,t){return e.replace(t?/&/g:/&(?!#?\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function i(e){return e.replace(/&([#\w]+);/g,function(e,t){return t=t.toLowerCase(),"colon"===t?":":"#"===t.charAt(0)?"x"===t.charAt(1)?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""})}function l(e,t){return e=e.source,t=t||"",function n(r,o){return r?(o=o.source||o,o=o.replace(/(^|[^\[])\^/g,"$1"),e=e.replace(r,o),n):new RegExp(e,t)}}function s(){}function u(e){for(var t,n,r=1;r<arguments.length;r++){t=arguments[r];for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}function c(e,n,r){if(r||"function"==typeof n){r||(r=n,n=null),n=u({},c.defaults,n||{});var i,l,s=n.highlight,d=0;try{i=t.lex(e,n)}catch(p){return r(p)}l=i.length;var f=function(e){if(e)return n.highlight=s,r(e);var t;try{t=o.parse(i,n)}catch(a){e=a}return n.highlight=s,e?r(e):r(null,t)};if(!s||s.length<3)return f();if(delete n.highlight,!l)return f();for(;d<i.length;d++)!function(e){return"code"!==e.type?--l||f():s(e.text,e.lang,function(t,n){return t?f(t):null==n||n===e.text?--l||f():(e.text=n,e.escaped=!0,void(--l||f()))})}(i[d])}else try{return n&&(n=u({},c.defaults,n)),o.parse(t.lex(e,n),n)}catch(p){if(p.message+="\nPlease report this to https://github.com/chjj/marked.",(n||c.defaults).silent)return"<p>An error occured:</p><pre>"+a(p.message+"",!0)+"</pre>";throw p}}var d={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:s,hr:/^( *[-*_]){3,} *(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *#* *(?:\n+|$)/,nptable:s,lheading:/^([^\n]+)\n *(=|-){2,} *(?:\n+|$)/,blockquote:/^( *>[^\n]+(\n(?!def)[^\n]+)*\n*)+/,list:/^( *)(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:/^ *(?:comment *(?:\n|\s*$)|closed *(?:\n{2,}|\s*$)|closing *(?:\n{2,}|\s*$))/,def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +["(]([^\n]+)[")])? *(?:\n+|$)/,table:s,paragraph:/^((?:[^\n]+\n?(?!hr|heading|lheading|blockquote|tag|def))+)\n*/,text:/^[^\n]+/};d.bullet=/(?:[*+-]|\d+\.)/,d.item=/^( *)(bull) [^\n]*(?:\n(?!\1bull )[^\n]*)*/,d.item=l(d.item,"gm")(/bull/g,d.bullet)(),d.list=l(d.list)(/bull/g,d.bullet)("hr","\\n+(?=\\1?(?:[-*_] *){3,}(?:\\n+|$))")("def","\\n+(?="+d.def.source+")")(),d.blockquote=l(d.blockquote)("def",d.def)(),d._tag="(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:/|[^\\w\\s@]*@)\\b",d.html=l(d.html)("comment",/<!--[\s\S]*?-->/)("closed",/<(tag)[\s\S]+?<\/\1>/)("closing",/<tag(?:"[^"]*"|'[^']*'|[^'">])*?>/)(/tag/g,d._tag)(),d.paragraph=l(d.paragraph)("hr",d.hr)("heading",d.heading)("lheading",d.lheading)("blockquote",d.blockquote)("tag","<"+d._tag)("def",d.def)(),d.normal=u({},d),d.gfm=u({},d.normal,{fences:/^ *(`{3,}|~{3,})[ \.]*(\S+)? *\n([\s\S]*?)\s*\1 *(?:\n+|$)/,paragraph:/^/,heading:/^ *(#{1,6}) +([^\n]+?) *#* *(?:\n+|$)/}),d.gfm.paragraph=l(d.paragraph)("(?!","(?!"+d.gfm.fences.source.replace("\\1","\\2")+"|"+d.list.source.replace("\\1","\\3")+"|")(),d.tables=u({},d.gfm,{nptable:/^ *(\S.*\|.*)\n *([-:]+ *\|[-| :]*)\n((?:.*\|.*(?:\n|$))*)\n*/,table:/^ *\|(.+)\n *\|( *[-:]+[-| :]*)\n((?: *\|.*(?:\n|$))*)\n*/}),t.rules=d,t.lex=function(e,n){var r=new t(n);return r.lex(e)},t.prototype.lex=function(e){return e=e.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    ").replace(/\u00a0/g," ").replace(/\u2424/g,"\n"),this.token(e,!0)},t.prototype.token=function(e,t,n){for(var r,o,a,i,l,s,u,c,p,e=e.replace(/^ +$/gm,"");e;)if((a=this.rules.newline.exec(e))&&(e=e.substring(a[0].length),a[0].length>1&&this.tokens.push({type:"space"})),a=this.rules.code.exec(e))e=e.substring(a[0].length),a=a[0].replace(/^ {4}/gm,""),this.tokens.push({type:"code",text:this.options.pedantic?a:a.replace(/\n+$/,"")});else if(a=this.rules.fences.exec(e))e=e.substring(a[0].length),this.tokens.push({type:"code",lang:a[2],text:a[3]||""});else if(a=this.rules.heading.exec(e))e=e.substring(a[0].length),this.tokens.push({type:"heading",depth:a[1].length,text:a[2]});else if(t&&(a=this.rules.nptable.exec(e))){for(e=e.substring(a[0].length),s={type:"table",header:a[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:a[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:a[3].replace(/\n$/,"").split("\n")},c=0;c<s.align.length;c++)/^ *-+: *$/.test(s.align[c])?s.align[c]="right":/^ *:-+: *$/.test(s.align[c])?s.align[c]="center":/^ *:-+ *$/.test(s.align[c])?s.align[c]="left":s.align[c]=null;for(c=0;c<s.cells.length;c++)s.cells[c]=s.cells[c].split(/ *\| */);this.tokens.push(s)}else if(a=this.rules.lheading.exec(e))e=e.substring(a[0].length),this.tokens.push({type:"heading",depth:"="===a[2]?1:2,text:a[1]});else if(a=this.rules.hr.exec(e))e=e.substring(a[0].length),this.tokens.push({type:"hr"});else if(a=this.rules.blockquote.exec(e))e=e.substring(a[0].length),this.tokens.push({type:"blockquote_start"}),a=a[0].replace(/^ *> ?/gm,""),this.token(a,t,!0),this.tokens.push({type:"blockquote_end"});else if(a=this.rules.list.exec(e)){for(e=e.substring(a[0].length),i=a[2],this.tokens.push({type:"list_start",ordered:i.length>1}),a=a[0].match(this.rules.item),r=!1,p=a.length,c=0;c<p;c++)s=a[c],u=s.length,s=s.replace(/^ *([*+-]|\d+\.) +/,""),~s.indexOf("\n ")&&(u-=s.length,s=this.options.pedantic?s.replace(/^ {1,4}/gm,""):s.replace(new RegExp("^ {1,"+u+"}","gm"),"")),this.options.smartLists&&c!==p-1&&(l=d.bullet.exec(a[c+1])[0],i===l||i.length>1&&l.length>1||(e=a.slice(c+1).join("\n")+e,c=p-1)),o=r||/\n\n(?!\s*$)/.test(s),c!==p-1&&(r="\n"===s.charAt(s.length-1),o||(o=r)),this.tokens.push({type:o?"loose_item_start":"list_item_start"}),this.token(s,!1,n),this.tokens.push({type:"list_item_end"});this.tokens.push({type:"list_end"})}else if(a=this.rules.html.exec(e))e=e.substring(a[0].length),this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:!this.options.sanitizer&&("pre"===a[1]||"script"===a[1]||"style"===a[1]),text:a[0]});else if(!n&&t&&(a=this.rules.def.exec(e)))e=e.substring(a[0].length),this.tokens.links[a[1].toLowerCase()]={href:a[2],title:a[3]};else if(t&&(a=this.rules.table.exec(e))){for(e=e.substring(a[0].length),s={type:"table",header:a[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:a[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:a[3].replace(/(?: *\| *)?\n$/,"").split("\n")},c=0;c<s.align.length;c++)/^ *-+: *$/.test(s.align[c])?s.align[c]="right":/^ *:-+: *$/.test(s.align[c])?s.align[c]="center":/^ *:-+ *$/.test(s.align[c])?s.align[c]="left":s.align[c]=null;for(c=0;c<s.cells.length;c++)s.cells[c]=s.cells[c].replace(/^ *\| *| *\| *$/g,"").split(/ *\| */);this.tokens.push(s)}else if(t&&(a=this.rules.paragraph.exec(e)))e=e.substring(a[0].length),this.tokens.push({type:"paragraph",text:"\n"===a[1].charAt(a[1].length-1)?a[1].slice(0,-1):a[1]});else if(a=this.rules.text.exec(e))e=e.substring(a[0].length),this.tokens.push({type:"text",text:a[0]});else if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0));return this.tokens};var p={escape:/^\\([\\`*{}\[\]()#+\-.!_>])/,autolink:/^<([^ >]+(@|:\/)[^ >]+)>/,url:s,tag:/^<!--[\s\S]*?-->|^<\/?\w+(?:"[^"]*"|'[^']*'|[^'">])*?>/,link:/^!?\[(inside)\]\(href\)/,reflink:/^!?\[(inside)\]\s*\[([^\]]*)\]/,nolink:/^!?\[((?:\[[^\]]*\]|[^\[\]])*)\]/,strong:/^__([\s\S]+?)__(?!_)|^\*\*([\s\S]+?)\*\*(?!\*)/,em:/^\b_((?:[^_]|__)+?)_\b|^\*((?:\*\*|[\s\S])+?)\*(?!\*)/,code:/^(`+)\s*([\s\S]*?[^`])\s*\1(?!`)/,br:/^ {2,}\n(?!\s*$)/,del:s,text:/^[\s\S]+?(?=[\\<!\[_*`]| {2,}\n|$)/};p._inside=/(?:\[[^\]]*\]|[^\[\]]|\](?=[^\[]*\]))*/,p._href=/\s*<?([\s\S]*?)>?(?:\s+['"]([\s\S]*?)['"])?\s*/,p.link=l(p.link)("inside",p._inside)("href",p._href)(),p.reflink=l(p.reflink)("inside",p._inside)(),p.normal=u({},p),p.pedantic=u({},p.normal,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/}),p.gfm=u({},p.normal,{escape:l(p.escape)("])","~|])")(),url:/^(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/,del:/^~~(?=\S)([\s\S]*?\S)~~/,text:l(p.text)("]|","~]|")("|","|https?://|")()}),p.breaks=u({},p.gfm,{br:l(p.br)("{2,}","*")(),text:l(p.gfm.text)("{2,}","*")()}),n.rules=p,n.output=function(e,t,r){
var o=new n(t,r);return o.output(e)},n.prototype.output=function(e){for(var t,n,r,o,i="";e;)if(o=this.rules.escape.exec(e))e=e.substring(o[0].length),i+=o[1];else if(o=this.rules.autolink.exec(e))e=e.substring(o[0].length),"@"===o[2]?(n=":"===o[1].charAt(6)?this.mangle(o[1].substring(7)):this.mangle(o[1]),r=this.mangle("mailto:")+n):(n=a(o[1]),r=n),i+=this.renderer.link(r,null,n);else if(this.inLink||!(o=this.rules.url.exec(e))){if(o=this.rules.tag.exec(e))!this.inLink&&/^<a /i.test(o[0])?this.inLink=!0:this.inLink&&/^<\/a>/i.test(o[0])&&(this.inLink=!1),e=e.substring(o[0].length),i+=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(o[0]):a(o[0]):o[0];else if(o=this.rules.link.exec(e))e=e.substring(o[0].length),this.inLink=!0,i+=this.outputLink(o,{href:o[2],title:o[3]}),this.inLink=!1;else if((o=this.rules.reflink.exec(e))||(o=this.rules.nolink.exec(e))){if(e=e.substring(o[0].length),t=(o[2]||o[1]).replace(/\s+/g," "),t=this.links[t.toLowerCase()],!t||!t.href){i+=o[0].charAt(0),e=o[0].substring(1)+e;continue}this.inLink=!0,i+=this.outputLink(o,t),this.inLink=!1}else if(o=this.rules.strong.exec(e))e=e.substring(o[0].length),i+=this.renderer.strong(this.output(o[2]||o[1]));else if(o=this.rules.em.exec(e))e=e.substring(o[0].length),i+=this.renderer.em(this.output(o[2]||o[1]));else if(o=this.rules.code.exec(e))e=e.substring(o[0].length),i+=this.renderer.codespan(a(o[2],!0));else if(o=this.rules.br.exec(e))e=e.substring(o[0].length),i+=this.renderer.br();else if(o=this.rules.del.exec(e))e=e.substring(o[0].length),i+=this.renderer.del(this.output(o[1]));else if(o=this.rules.text.exec(e))e=e.substring(o[0].length),i+=this.renderer.text(a(this.smartypants(o[0])));else if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0))}else e=e.substring(o[0].length),n=a(o[1]),r=n,i+=this.renderer.link(r,null,n);return i},n.prototype.outputLink=function(e,t){var n=a(t.href),r=t.title?a(t.title):null;return"!"!==e[0].charAt(0)?this.renderer.link(n,r,this.output(e[1])):this.renderer.image(n,r,a(e[1]))},n.prototype.smartypants=function(e){return this.options.smartypants?e.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014\/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014\/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…"):e},n.prototype.mangle=function(e){if(!this.options.mangle)return e;for(var t,n="",r=e.length,o=0;o<r;o++)t=e.charCodeAt(o),Math.random()>.5&&(t="x"+t.toString(16)),n+="&#"+t+";";return n},r.prototype.code=function(e,t,n){if(this.options.highlight){var r=this.options.highlight(e,t);null!=r&&r!==e&&(n=!0,e=r)}return t?'<pre><code class="'+this.options.langPrefix+a(t,!0)+'">'+(n?e:a(e,!0))+"\n</code></pre>\n":"<pre><code>"+(n?e:a(e,!0))+"\n</code></pre>"},r.prototype.blockquote=function(e){return"<blockquote>\n"+e+"</blockquote>\n"},r.prototype.html=function(e){return e},r.prototype.heading=function(e,t,n){return"<h"+t+' id="'+this.options.headerPrefix+n.toLowerCase().replace(/[^\w]+/g,"-")+'">'+e+"</h"+t+">\n"},r.prototype.hr=function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"},r.prototype.list=function(e,t){var n=t?"ol":"ul";return"<"+n+">\n"+e+"</"+n+">\n"},r.prototype.listitem=function(e){return"<li>"+e+"</li>\n"},r.prototype.paragraph=function(e){return"<p>"+e+"</p>\n"},r.prototype.table=function(e,t){return"<table>\n<thead>\n"+e+"</thead>\n<tbody>\n"+t+"</tbody>\n</table>\n"},r.prototype.tablerow=function(e){return"<tr>\n"+e+"</tr>\n"},r.prototype.tablecell=function(e,t){var n=t.header?"th":"td",r=t.align?"<"+n+' style="text-align:'+t.align+'">':"<"+n+">";return r+e+"</"+n+">\n"},r.prototype.strong=function(e){return"<strong>"+e+"</strong>"},r.prototype.em=function(e){return"<em>"+e+"</em>"},r.prototype.codespan=function(e){return"<code>"+e+"</code>"},r.prototype.br=function(){return this.options.xhtml?"<br/>":"<br>"},r.prototype.del=function(e){return"<del>"+e+"</del>"},r.prototype.link=function(e,t,n){if(this.options.sanitize){try{var r=decodeURIComponent(i(e)).replace(/[^\w:]/g,"").toLowerCase()}catch(o){return""}if(0===r.indexOf("javascript:")||0===r.indexOf("vbscript:"))return""}var a='<a href="'+e+'"';return t&&(a+=' title="'+t+'"'),a+=">"+n+"</a>"},r.prototype.image=function(e,t,n){var r='<img src="'+e+'" alt="'+n+'"';return t&&(r+=' title="'+t+'"'),r+=this.options.xhtml?"/>":">"},r.prototype.text=function(e){return e},o.parse=function(e,t,n){var r=new o(t,n);return r.parse(e)},o.prototype.parse=function(e){this.inline=new n(e.links,this.options,this.renderer),this.tokens=e.reverse();for(var t="";this.next();)t+=this.tok();return t},o.prototype.next=function(){return this.token=this.tokens.pop()},o.prototype.peek=function(){return this.tokens[this.tokens.length-1]||0},o.prototype.parseText=function(){for(var e=this.token.text;"text"===this.peek().type;)e+="\n"+this.next().text;return this.inline.output(e)},o.prototype.tok=function(){switch(this.token.type){case"space":return"";case"hr":return this.renderer.hr();case"heading":return this.renderer.heading(this.inline.output(this.token.text),this.token.depth,this.token.text);case"code":return this.renderer.code(this.token.text,this.token.lang,this.token.escaped);case"table":var e,t,n,r,o,a="",i="";for(n="",e=0;e<this.token.header.length;e++)r={header:!0,align:this.token.align[e]},n+=this.renderer.tablecell(this.inline.output(this.token.header[e]),{header:!0,align:this.token.align[e]});for(a+=this.renderer.tablerow(n),e=0;e<this.token.cells.length;e++){for(t=this.token.cells[e],n="",o=0;o<t.length;o++)n+=this.renderer.tablecell(this.inline.output(t[o]),{header:!1,align:this.token.align[o]});i+=this.renderer.tablerow(n)}return this.renderer.table(a,i);case"blockquote_start":for(var i="";"blockquote_end"!==this.next().type;)i+=this.tok();return this.renderer.blockquote(i);case"list_start":for(var i="",l=this.token.ordered;"list_end"!==this.next().type;)i+=this.tok();return this.renderer.list(i,l);case"list_item_start":for(var i="";"list_item_end"!==this.next().type;)i+="text"===this.token.type?this.parseText():this.tok();return this.renderer.listitem(i);case"loose_item_start":for(var i="";"list_item_end"!==this.next().type;)i+=this.tok();return this.renderer.listitem(i);case"html":var s=this.token.pre||this.options.pedantic?this.token.text:this.inline.output(this.token.text);return this.renderer.html(s);case"paragraph":return this.renderer.paragraph(this.inline.output(this.token.text));case"text":return this.renderer.paragraph(this.parseText())}},s.exec=s,c.options=c.setOptions=function(e){return u(c.defaults,e),c},c.defaults={gfm:!0,tables:!0,breaks:!1,pedantic:!1,sanitize:!1,sanitizer:null,mangle:!0,smartLists:!1,silent:!1,highlight:null,langPrefix:"lang-",smartypants:!1,headerPrefix:"",renderer:new r,xhtml:!1},c.Parser=o,c.parser=o.parse,c.Renderer=r,c.Lexer=t,c.lexer=t.lex,c.InlineLexer=n,c.inlineLexer=n.output,c.parse=c,e.exports=c}).call(function(){return this||("undefined"!=typeof window?window:t)}())}).call(t,function(){return this}())},95:function(e,t){e.exports=window.inlineAttachment2},97:function(e,t,n){try{(function(){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function(e,t,n){for(var r=!0;r;){var o=e,a=t,i=n;r=!1,null===o&&(o=Function.prototype);var l=Object.getOwnPropertyDescriptor(o,a);if(void 0!==l){if("value"in l)return l.value;var s=l.get;if(void 0===s)return;return s.call(i)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=a,n=i,r=!0,l=u=void 0}},s=n(1),u=r(s),c=n(2),d=n(3),p=r(d),f=n(102).mermaidAPI,m=function(e){function t(e){o(this,t),l(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),f.initialize({startOnLoad:!1})}return a(t,e),i(t,[{key:"componentDidMount",value:function(){for(var e=this.props,t=e.collection,n=e.state,r=t.length,o="graph LR;S(( ))-->"+(t.length>0?t[0].id+'["'+t[0].name+'"]':"-")+";",a=function(e){var n=p.default.escape(t[e].name);return t[e].actions&&t[e].actions.length<=0?(o+=t[e].id+'["'+n+'"];',"continue"):void p.default.map(t[e].actions,function(r){p.default.map(r.results,function(a){o+=t[e].id+'["'+n+'"]',o+='--"'+p.default.escape(r.name)+"("+r.id+')"-->';var i=p.default.find(t,{id:a.step});o+=i.id+'["'+p.default.escape(i.name)+'"];'})})},i=0;i<r;i++){a(i)}if(n){var l=p.default.find(t,{state:n});l&&(o+=" style "+l.id+" fill:#ffffbd;")}f.render("div",o,null,document.getElementById("chart"))}},{key:"render",value:function(){var e=this.props,t=e.name,n=(e.collection,e.close);return u.default.createElement(c.Modal,{show:!0,onHide:n,backdrop:"static",dialogClassName:"custom-modal-90","aria-labelledby":"contained-modal-title-sm"},u.default.createElement(c.Modal.Header,{closeButton:!0},u.default.createElement(c.Modal.Title,{id:"contained-modal-title-la"},"工作流预览",t?" - "+t:"")),u.default.createElement(c.Modal.Body,{style:{maxHeight:"580px",overflow:"auto"}},u.default.createElement("div",{className:"mermaid",id:"chart"})),u.default.createElement(c.Modal.Footer,null,u.default.createElement("span",{style:{"float":"left",marginTop:"7px"}},"提示：预览不支持IE"),u.default.createElement(c.Button,{onClick:n},"关闭")))}}],[{key:"propTypes",value:{name:s.PropTypes.string,state:s.PropTypes.string,collection:s.PropTypes.array.isRequired,close:s.PropTypes.func.isRequired},enumerable:!0}]),t}(s.Component);t.default=m,e.exports=t.default}).call(this)}finally{}},102:function(e,t){e.exports=window.mermaid},106:function(e,t,n){try{(function(){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(e,t,n){for(var r=!0;r;){var o=e,a=t,i=n;r=!1,null===o&&(o=Function.prototype);var l=Object.getOwnPropertyDescriptor(o,a);if(void 0!==l){if("value"in l)return l.value;var s=l.get;if(void 0===s)return;return s.call(i)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=a,n=i,r=!0,l=u=void 0}},u=n(1),c=r(u),d=n(2),p=n(7),f=r(p),m=n(140),h=r(m),y=n(41),g=n(88),v=n(52),b=r(v),w=n(61),E=r(w),k=n(3),_=r(k),x=n(5),C=n(12),S=n(108),T=n(107),P=n(20),O=(n(15),n(6)),R=n(4),M=function(e){function t(e){a(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e);var n=this.props,r=n.options,o=n.data,i=void 0===o?{}:o,l=n.isSubtask,u=void 0!==l&&l,c=n.isFromWorkflow,d=void 0!==c&&c,p=n.action_id,f=void 0===p?"":p,m=[];d||(u?_.default.forEach(r.types||[],function(e){"subtask"==e.type&&m.push(e)}):_.default.forEach(r.types||[],function(e){"subtask"!=e.type&&m.push(e)}));var h=-1,y=[],g={},v={},b={},w={},E=[];if(!_.default.isEmpty(i)&&i.id){if(d){var k=_.default.find(i.wfactions,{id:f});k&&k.schema&&(y=k.schema)}else _.default.forEach(m||[],function(e){e.disabled&&i.type!=e.id||E.push(e)}),h=_.default.findIndex(E,{id:i.type}),y=h!==-1?E[h].schema:[];_.default.forEach(y,function(e){_.default.isUndefined(i[e.key])||("assignee"==e.key&&i[e.key].id?w[e.key]=v[e.key]=i[e.key].id:"SingleUser"==e.type&&i[e.key].id?w[e.key]=v[e.key]=i[e.key].id:"MultiUser"==e.type&&_.default.isArray(i[e.key])?w[e.key]=v[e.key]=_.default.map(i[e.key],function(e){return e.id}).join(","):"MultiSelect"!=e.type&&"MultiVersion"!=e.type||!_.default.isArray(i[e.key])?"CheckboxGroup"==e.type&&_.default.isString(i[e.key])?w[e.key]=v[e.key]=i[e.key].split(","):"labels"==e.key?r.permissions&&r.permissions.indexOf("manage_project")!==-1?w[e.key]=v[e.key]=_.default.map(i[e.key]||[],function(e){return{value:e,label:e}}):w[e.key]=v[e.key]=(i[e.key]||[]).join(","):"File"==e.type&&_.default.isArray(i[e.key])?w[e.key]=v[e.key]=_.default.map(i[e.key],function(e){return e.id||e}):"DatePicker"===e.type||"DateTimePicker"===e.type?w[e.key]=v[e.key]=i[e.key]&&O.unix(i[e.key]):"Number"===e.type||"Integer"===e.type?w[e.key]=v[e.key]=i[e.key]+"":w[e.key]=v[e.key]=i[e.key]:w[e.key]=v[e.key]=i[e.key].join(",")),e.required&&(0!==i[e.key]&&!i[e.key]||_.default.isArray(i[e.key])&&i[e.key].length<=0)&&(g[e.key]="必填")}),_.default.extend(v,{type:i.type}),_.default.extend(w,{type:i.type})}else _.default.forEach(m||[],function(e){e.disabled||E.push(e)}),h=_.default.findIndex(E,{"default":!0}),h===-1&&(h=0),E[h]?(b.type=v.type=E[h].id,y=E[h].schema):(b.type=v.type="",y=[]),_.default.forEach(y||[],function(e){e.defaultValue&&("MultiSelect"===e.type&&_.default.isArray(e.defaultValue)?b[e.key]=v[e.key]=e.defaultValue.join(","):"CheckboxGroup"===e.type&&_.default.isString(e.defaultValue)?b[e.key]=v[e.key]=e.defaultValue.split(","):"DatePicker"===e.type?b[e.key]=v[e.key]=O.unix(e.defaultValue):b[e.key]=v[e.key]=e.defaultValue),e.required&&!e.defaultValue&&(g[e.key]="必填")});d?this.state={ecode:0,errors:g,touched:{},schema:y,values:v,originalValues:b,oldValues:w,createOther:!1,preCreated:!1}:this.state={ecode:0,errors:g,touched:{},typeOptions:E,schema:y,values:v,originalValues:b,oldValues:w,createOther:!1,preCreated:!1},this.getChangedKeys=this.getChangedKeys.bind(this),this.getChangedKeysForOriginal=this.getChangedKeysForOriginal.bind(this),this.handleSubmit=this.handleSubmit.bind(this),this.handleCancel=this.handleCancel.bind(this),this.onChange=this.onChange.bind(this)}return i(t,e),l(t,[{key:"componentDidMount",value:function(){var e=(0,C.findDOMNode)(this.refs.createModal),t=e.getBoundingClientRect();t.height<579&&(e.style.overflow="visible")}},{key:"getChangedKeys",value:function(){var e=this,t=[];return _.default.forEach(this.state.values,function(n,r){_.default.isEmpty(e.state.oldValues[r])&&_.default.isEmpty(n)||(n instanceof O&&e.state.oldValues[r]instanceof O?n.isSame(e.state.oldValues[r])||t.push(r):_.default.isEqual(n,e.state.oldValues[r])||t.push(r))}),t}},{key:"getChangedKeysForOriginal",value:function(){var e=this,t=[];return _.default.forEach(this.state.values,function(n,r){_.default.isEmpty(e.state.originalValues[r])&&_.default.isEmpty(n)||(n instanceof O&&e.state.originalValues[r]instanceof O?n.isSame(e.state.originalValues[r])||t.push(r):_.default.isEqual(n,e.state.originalValues[r])||t.push(r))}),t}},{key:"handleSubmit",value:function(){var e,t,n,r,o,a,i,l,s,u,c,d,p,f,m,h,y,g,v,b,w;return regeneratorRuntime.async(function(E){for(;;)switch(E.prev=E.next){case 0:if(e=this.props,t=e.create,n=e.edit,r=e.addLabels,o=e.close,a=e.options,i=e.data,l=void 0===i?{}:i,s=e.parent,u=void 0===s?{}:s,c=e.doAction,d=void 0===c?void 0:c,p=e.action_id,f=void 0===p?"":p,m=this.state,h=m.schema,y=m.createOther,this.setState({preCreated:!1}),g={},!_.default.isEmpty(l)&&l.id?(v=this.getChangedKeys(),g=v.length>0?_.default.pick(this.state.values,v):{}):_.default.extend(g,this.state.values),b=[],_.default.forEach(g,function(e,t){var n=_.default.findIndex(h,{key:t}),r=n===-1?{}:h[n];e?"labels"===r.key?_.default.isArray(e)?(b=_.default.uniq(_.default.map(_.default.filter(e,function(e){return!!e.className}),function(e){return _.default.trim(e.value)})),g[t]=_.default.uniq(_.default.map(e,function(e){return _.default.trim(e.value)}))):g[t]=e.split(","):["MultiSelect","MultiVersion","MultiUser"].indexOf(r.type)!==-1?g[t]=e.split(","):"DatePicker"===r.type?g[t]=parseInt(O(e).startOf("day").format("X")):"DateTimePicker"===r.type?g[t]=parseInt(O(e).format("X")):"Number"===r.type?g[t]=parseFloat(e):"Integer"===r.type?g[t]=parseInt(e):g[t]=e:g[t]=""}),w=0,_.default.isEmpty(l)||!l.id){E.next=37;break}if(!d||!f){E.next=31;break}return E.next=27,regeneratorRuntime.awrap(d(l.id,l.entry_id,{action_id:f,comments:g.comments||""},!0));case 27:if(w=E.sent,0===w){E.next=31;break}return this.setState({ecode:w}),E.abrupt("return");case 31:return E.next=33,regeneratorRuntime.awrap(n(l.id,g));case 33:w=E.sent,0===w&&(o(),d&&f?x.notify.show("提交完成。","success",2e3):x.notify.show("问题已更新。","success",2e3)),E.next=42;break;case 37:return u.id&&_.default.extend(g,{parent_id:u.id}),E.next=40,regeneratorRuntime.awrap(t(g));case 40:w=E.sent,0===w&&(y?this.setState({preCreated:!0}):(o(),x.notify.show("问题已创建。","success",2e3)));case 42:0===w&&b.length>0&&r(b),this.setState({ecode:w});case 44:case"end":return E.stop()}},null,this)}},{key:"handleCancel",value:function(){var e=this.props,t=e.close,n=e.loading,r=e.data,o=void 0===r?{}:r,a=e.isFromWorkflow,i=void 0!==a&&a;if(!n){var l=!i&&(o.id&&this.getChangedKeys().length>0||!o.id&&this.getChangedKeysForOriginal().length>0);l&&!confirm("确认要关闭该页面？")||(this.setState({ecode:0}),t())}}},{key:"typeChange",value:function(e){var t=this;this.setState({preCreated:!1});var n=this.props.options,r=_.default.find(n.types,{id:e}).schema;if(r){var o={},a={};_.default.forEach(r,function(e){t.state.errors[e.key]?a[e.key]="":!t.state.values[e.key]&&e.defaultValue?"MultiSelect"===e.type&&_.default.isArray(e.defaultValue)?a[e.key]=e.defaultValue.join(","):"CheckboxGroup"===e.type&&_.default.isString(e.defaultValue)?a[e.key]=e.defaultValue.split(","):"DatePicker"===e.type||"DateTimePicker"===e.type?a[e.key]=O.unix(e.defaultValue):a[e.key]=e.defaultValue:t.state.values[e.key]&&(a[e.key]=t.state.values[e.key]),e.required&&!a[e.key]&&(o[e.key]="必填")}),a.type=e,this.setState({errors:o,touched:{},schema:r,values:a})}}},{key:"success",value:function(e,t){if(0!==t.ecode)return void x.notify.show("文档上传失败。","error",2e3);var n=t.data,r=n.field,a=void 0===r?"":r,i=n.file,l=void 0===i?{}:i;this.state.values[a]=this.state.values[a]||[],this.state.values[a]=[].concat(o(this.state.values[a]),[l.id]),e.field=a,e.fid=l.id,a&&this.state.errors[a]?(delete this.state.errors[a],this.setState({errors:this.state.errors})):this.setState({values:this.state.values})}},{key:"removedfile",value:function(e){var t=e.field||"",n=e.fid||"";t&&n&&(this.state.values[t]=_.default.reject(this.state.values[t],function(e){return e===n}),this.setState({values:this.state.values}));var r=_.default.find(this.state.schema,{key:t});r&&r.required&&t&&this.state.values[t].length<=0&&(this.state.errors[t]="必传",this.setState({errors:this.state.errors}))}},{key:"urlTest",value:function(e){var t="^(?:(?:https?|ftp)://)(?:\\S+(?::\\S*)?@)?(?:(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))(?::\\d{2,5})?(?:/\\S*)?$",n=new RegExp(t);return n.test(e)}},{key:"ttTest",value:function(e){var t=_.default.trim(e),n=t.split(" "),r=!0;return _.default.forEach(n,function(e){if(e){_.default.endsWith(e.toLowerCase(),"w")||_.default.endsWith(e.toLowerCase(),"d")||_.default.endsWith(e.toLowerCase(),"h")||_.default.endsWith(e.toLowerCase(),"m")||(r=!1);var t=e.substr(0,e.length-1);t&&isNaN(t)&&(r=!1)}}),r}},{key:"onChange",value:function(e,t){if(this.setState({preCreated:!1}),this.state.values[t.key]=e,["Text","TextArea","RichTextEditor","Number","Integer","Url","TimeTracking"].indexOf(t.type)===-1&&(this.state.touched[t.key]=!0),t.required&&(!e||_.default.isArray(e)&&0==e.length))return this.state.errors[t.key]="必填",void this.setState({values:this.state.values});if(["Text","TextArea","RichTextEditor"].indexOf(t.type)!==-1){if(e&&t.maxLength&&_.default.trim(e).length>t.maxLength)return this.state.errors[t.key]="字数必须在"+t.maxLength+"字之内",void this.setState({values:this.state.values})}else if("Number"==t.type||"Integer"==t.type){if(e||0===e){if(isNaN(e)||"Integer"===t.type&&!/^-?\d+$/.test(e))return this.state.errors[t.key]="格式有误",void this.setState({values:this.state.values});if(!t.minValue&&0!==t.minValue||!t.maxValue&&0!==t.maxValue){if(t.minValue||0===t.minValue){if(parseFloat(t.minValue)>parseFloat(e))return this.state.errors[t.key]="输入值必须大于"+t.minValue,void this.setState({values:this.state.values})}else if((t.maxValue||0===t.maxValue)&&parseFloat(e)>parseFloat(t.maxValue))return this.state.errors[t.key]="输入值必须小于"+t.maxValue,void this.setState({values:this.state.values})}else if(parseFloat(e)>parseFloat(t.maxValue)||parseFloat(t.minValue)>parseFloat(e))return this.state.errors[t.key]="输入值必须在"+t.minValue+"~"+t.maxValue+"之间",void this.setState({values:this.state.values})}}else if("DatePicker"===t.type||"DateTimePicker"===t.type){if(e&&!O(e).isValid())return this.state.errors[t.key]="格式有误",void this.setState({values:this.state.values})}else if("Url"===t.type){if(e&&!this.urlTest(e))return this.state.errors[t.key]="格式有误",void this.setState({values:this.state.values})}else if("TimeTracking"===t.type&&e&&!this.ttTest(e))return this.state.errors[t.key]="格式有误",void this.setState({values:this.state.values});delete this.state.errors[t.key],this.setState({values:this.state.values})}},{key:"getPlaceholder",value:function(e){var t="输入"+e.name;return"Text"==e.type||"TextArea"==e.type||"RichTextEditor"==e.type?e.maxLength&&(t+="(字数"+e.maxLength+"字之内)"):"Number"!=e.type&&"Integer"!=e.type||(!e.minValue&&0!==e.minValue||!e.maxValue&&0!==e.maxValue?e.minValue||0===e.minValue?t="输入大于"+e.minValue+("Integer"==e.type?"整数":"数值"):(e.maxValue||0===e.maxValue)&&(t="输入小于"+e.minValue+("Integer"==e.type?"整数":"数值")):t="输入"+e.minValue+"~"+e.maxValue+"之间"+("Integer"==e.type?"整数":"数值")),t}},{key:"render",value:function(){var e=this,t=this.props,n=t.i18n.errMsg,r=t.options,o=t.loading,a=t.project,i=t.data,l=void 0===i?{}:i,s=t.parent,u=void 0===s?{}:s,p=t.isSubtask,m=void 0!==p&&p,v=t.isFromWorkflow,w=void 0!==v&&v,k=this.state,x=k.schema,C=k.createOther,O=k.preCreated,M=_.default.map(this.state.typeOptions,function(e){return{label:c.default.createElement("span",null,c.default.createElement("span",{className:"type-abb"},e.abb),e.name),value:e.id}}),j={height:"580px",overflow:"auto"};return w&&(j={maxHeight:"580px",overflow:"auto"}),c.default.createElement(d.Modal,{show:!0,id:"create-issue-dialog",backdrop:"static","aria-labelledby":"contained-modal-title-sm",onHide:this.handleCancel,bsSize:"large"},c.default.createElement(d.Modal.Header,{closeButton:!0},c.default.createElement(d.Modal.Title,{id:"contained-modal-title-la"},l.id?w?"流程页面":"编辑问题 - "+l.no:m?"创建子问题":"创建问题")),c.default.createElement(d.Form,{horizontal:!0},c.default.createElement(d.Modal.Body,{style:j,ref:"createModal"},!w&&!m&&c.default.createElement(d.FormGroup,null,c.default.createElement(d.Col,{sm:2,componentClass:d.ControlLabel},"项目名称"),c.default.createElement(d.Col,{sm:9},c.default.createElement("div",{style:{marginTop:"7px",marginBottom:"6px"}},c.default.createElement("span",null,a.name||"-")))),!w&&m&&c.default.createElement(d.FormGroup,null,c.default.createElement(d.Col,{sm:2,componentClass:d.ControlLabel},"父任务"),c.default.createElement(d.Col,{sm:9},c.default.createElement("div",{style:{marginTop:"7px",marginBottom:"6px"}},c.default.createElement("span",null,u.title?u.no+"-"+u.title:l.parent&&l.parent.title?l.parent.no+"-"+l.parent.title:"-")))),!w&&c.default.createElement(d.FormGroup,{style:{height:"68px",borderBottom:"1px solid #ddd"}},c.default.createElement(d.Col,{sm:2,componentClass:d.ControlLabel},c.default.createElement("span",{className:"txt-impt"},"*"),"类型"),c.default.createElement(d.Col,{sm:7},c.default.createElement(f.default,{options:M,disabled:o,simpleValue:!0,searchable:!1,clearable:!1,value:this.state.values.type,onChange:this.typeChange.bind(this),placeholder:"请选择问题类型"}),c.default.createElement("div",null,c.default.createElement("span",{style:{fontSize:"12px"}},"改变问题类型可能造成已填写部分信息的丢失，建议填写信息前先确定问题类型。")))),_.default.map(x,function(t,n){var i=e.state.values.type,l=c.default.createElement(d.Col,{sm:2,componentClass:d.ControlLabel},t.required&&c.default.createElement("span",{className:"txt-impt"},"*"),t.name);if("Text"===t.type)return c.default.createElement(d.FormGroup,{key:i+n,validationState:e.state.touched[t.key]&&e.state.errors[t.key]?"error":null},l,c.default.createElement(d.Col,{sm:9},c.default.createElement(d.FormControl,{type:"text",disabled:o,value:e.state.values[t.key]||"",onChange:function(n){e.onChange(n.target.value,t)},onBlur:function(n){e.state.touched[t.key]=!0,e.setState({touched:e.state.touched})},placeholder:e.getPlaceholder(t)})),c.default.createElement(d.Col,{sm:1,componentClass:d.ControlLabel,style:{textAlign:"left"}},e.state.touched[t.key]&&(e.state.errors[t.key]||"")));if("Number"===t.type||"Integer"==t.type)return c.default.createElement(d.FormGroup,{key:i+n,validationState:e.state.touched[t.key]&&e.state.errors[t.key]?"error":null},l,c.default.createElement(d.Col,{sm:3},c.default.createElement(d.FormControl,{type:"number",max:t.maxValue||0===t.maxValue?t.maxValue:"",min:t.minValue||0===t.minValue?t.minValue:"",disabled:o,value:e.state.values[t.key]||"",onChange:function(n){e.onChange(n.target.value,t)},onBlur:function(n){e.state.touched[t.key]=!0,e.setState({touched:e.state.touched})},placeholder:e.getPlaceholder(t)})),c.default.createElement(d.Col,{sm:7,componentClass:d.ControlLabel,style:{textAlign:"left"}},e.state.touched[t.key]&&(e.state.errors[t.key]||"")));if("RichTextEditor"===t.type)return c.default.createElement(d.FormGroup,{key:i+n,validationState:e.state.touched[t.key]&&e.state.errors[t.key]?"error":null},l,c.default.createElement(d.Col,{sm:9},c.default.createElement(S.RichTextEditor,{id:i+"-field-richeditor-"+t.key,value:e.state.values[t.key]||"",disabled:o,placeholder:e.getPlaceholder(t),uploadUrl:(0,P.urlWrapper)("/project/"+a.key+"/file"),onBlur:function(n){e.state.touched[t.key]=!0,e.setState({touched:e.state.touched})},onChange:function(n){e.onChange(n,t)}})),c.default.createElement(d.Col,{sm:1,componentClass:d.ControlLabel,style:{textAlign:"left"}},e.state.touched[t.key]&&(e.state.errors[t.key]||"")));if("TextArea"===t.type)return c.default.createElement(d.FormGroup,{key:i+n,validationState:e.state.touched[t.key]&&e.state.errors[t.key]?"error":null},l,c.default.createElement(d.Col,{sm:9},c.default.createElement(T.MultiRowsTextEditor,{id:i+"-field-textarea-"+t.key,disabled:o,value:e.state.values[t.key]||"",onChange:function(n){e.onChange(n,t)},onBlur:function(){e.state.touched[t.key]=!0,e.setState({touched:e.state.touched})},uploadUrl:(0,P.urlWrapper)("/project/"+a.key+"/file"),style:{height:"180px"},placeholder:e.getPlaceholder(t)})),c.default.createElement(d.Col,{sm:1,componentClass:d.ControlLabel,style:{textAlign:"left"}},e.state.touched[t.key]&&(e.state.errors[t.key]||"")));if("labels"===t.key&&r.permissions&&r.permissions.indexOf("manage_project")!==-1)return c.default.createElement(d.FormGroup,{key:i+n},l,c.default.createElement(d.Col,{sm:7},c.default.createElement(h.default,{multi:!0,disabled:o,value:e.state.values[t.key]||[],clearable:!1,onChange:function(n){e.state.values[t.key]=n,e.setState({values:e.state.values,preCreated:!1})},options:_.default.map(r.labels||[],function(e){return{label:e.name,value:e.name}}),placeholder:"选择或输入标签"})));if(["Select","MultiSelect","SingleVersion","MultiVersion","SingleUser","MultiUser"].indexOf(t.type)!==-1)return c.default.createElement(d.FormGroup,{key:i+n,validationState:e.state.touched[t.key]&&e.state.errors[t.key]?"error":null},l,c.default.createElement(d.Col,{sm:7},c.default.createElement(f.default,{simpleValue:!0,disabled:o,multi:"MultiSelect"===t.type||"MultiVersion"===t.type||"MultiUser"===t.type,clearable:!t.required&&"assignee"!==t.key&&"resolution"!==t.key,value:e.state.values[t.key]||null,options:_.default.map(t.optionValues,function(e){return{label:e.name,value:e.id}}),onChange:function(n){e.onChange(n,t)},className:e.state.touched[t.key]&&e.state.errors[t.key]&&"select-error",placeholder:"选择"+t.name}),"labels"===t.key&&c.default.createElement("div",null,c.default.createElement("span",{style:{fontSize:"12px"}},"拥有项目管理权限的用户才可创建新的标签。"))),c.default.createElement(d.Col,{sm:1,componentClass:d.ControlLabel,style:{textAlign:"left"}},e.state.touched[t.key]&&(e.state.errors[t.key]||"")));if("CheckboxGroup"===t.type)return c.default.createElement(d.FormGroup,{key:i+n,validationState:e.state.errors[t.key]?"error":null},l,c.default.createElement(d.Col,{sm:9},c.default.createElement(y.CheckboxGroup,{style:{marginTop:"7px"},name:t.name,value:e.state.values[t.key]||[],onChange:function(n){e.onChange(n,t)}},_.default.map(t.optionValues||[],function(e,t){return c.default.createElement("span",{style:{marginLeft:"6px"},key:t},c.default.createElement("label",{style:{fontWeight:400}},c.default.createElement(y.Checkbox,{disabled:o,value:e.id})," "+e.name+" "))}),e.state.touched[t.key]&&e.state.errors[t.key]&&c.default.createElement("div",null,c.default.createElement(d.ControlLabel,null,e.state.errors[t.key]||"")))));if("RadioGroup"===t.type)return c.default.createElement(d.FormGroup,{key:i+n},l,c.default.createElement(d.Col,{sm:9},c.default.createElement(g.RadioGroup,{style:{marginTop:"7px"},name:t.name,selectedValue:e.state.values[t.key]||"",onChange:function(n){e.onChange(n,t)}},_.default.map(t.optionValues||[],function(e,t){return c.default.createElement("span",{style:{marginLeft:"6px"},key:t},c.default.createElement(g.Radio,{disabled:o,value:e.id})," "+e.name+" ")}))));if("DatePicker"===t.type||"DateTimePicker"===t.type)return c.default.createElement(d.FormGroup,{key:i+n,validationState:e.state.touched[t.key]&&e.state.errors[t.key]?"error":null},l,c.default.createElement(d.Col,{sm:4},c.default.createElement(b.default,{mode:"date",locale:"zh-cn",dateFormat:"YYYY/MM/DD",timeFormat:"DateTimePicker"===t.type&&"HH:mm",closeOnSelect:"DatePicker"===t.type,inputProps:{placeholder:"选择"+("DatePicker"===t.type?"日期":"时间")},value:e.state.values[t.key]||"",onChange:function(n){e.onChange(n,t)}})),c.default.createElement(d.Col,{sm:2,componentClass:d.ControlLabel,style:{textAlign:"left"}},e.state.touched[t.key]&&(e.state.errors[t.key]||"")));if("File"===t.type&&r.permissions&&r.permissions.indexOf("upload_file")!==-1){var s={showFiletypeIcon:!0,postUrl:(0,P.urlWrapper)("/project/"+a.key+"/file")},u={dictDefaultMessage:"点击或拖拽文件至此",addRemoveLinks:!0,paramName:t.key},p={init:function(t){return e.dropzone=t},success:e.success.bind(e),error:function(t){e.dropzone.removeFile(t)},removedfile:e.removedfile.bind(e)};return c.default.createElement(d.FormGroup,{key:i+n},l,c.default.createElement(d.Col,{sm:7},c.default.createElement("div",{style:{marginTop:"7px"}},c.default.createElement(E.default,{config:s,eventHandlers:p,djsConfig:u}))))}return"Url"===t.type?c.default.createElement(d.FormGroup,{key:i+n,validationState:e.state.touched[t.key]&&e.state.errors[t.key]?"error":null},l,c.default.createElement(d.Col,{sm:7},c.default.createElement(d.FormControl,{type:"text",disabled:o,value:e.state.values[t.key]||"",onChange:function(n){e.onChange(n.target.value,t)},onBlur:function(n){e.state.touched[t.key]=!0,e.setState({touched:e.state.touched})},placeholder:"输入"+t.name})),c.default.createElement(d.Col,{
sm:3,componentClass:d.ControlLabel,style:{textAlign:"left"}},e.state.touched[t.key]&&(e.state.errors[t.key]||""))):"TimeTracking"===t.type?c.default.createElement(d.FormGroup,{key:i+n,validationState:e.state.touched[t.key]&&e.state.errors[t.key]?"error":null},l,c.default.createElement(d.Col,{sm:4},c.default.createElement(d.FormControl,{type:"text",disabled:o,value:e.state.values[t.key]||"",onChange:function(n){e.onChange(n.target.value,t)},onBlur:function(n){e.state.touched[t.key]=!0,e.setState({touched:e.state.touched})},placeholder:"例如：3w 4d 12h 30m"})),c.default.createElement(d.Col,{sm:6,componentClass:d.ControlLabel,style:{textAlign:"left"}},e.state.touched[t.key]&&(e.state.errors[t.key]||""))):void 0}))),c.default.createElement(d.Modal.Footer,null,0!==this.state.ecode&&!o&&c.default.createElement("span",{className:"ralign"},n[this.state.ecode]),O&&c.default.createElement("span",{className:"ok-ralign"},c.default.createElement("i",{className:"fa fa-check"})," 问题已创建"),c.default.createElement("img",{src:R,className:o?"loading":"hide"}),!l.id&&c.default.createElement(d.Checkbox,{disabled:o,checked:C,onClick:function(){e.setState({createOther:!C})},style:{display:"inline-block",marginRight:"20px",marginLeft:"10px"}},"创建另外一个"),c.default.createElement(d.Button,{type:"submit",disabled:l.id&&this.getChangedKeys().length<=0&&w===!1||_.default.isEmpty(x)||!_.default.isEmpty(this.state.errors)||o||O,onClick:this.handleSubmit},"确定"),c.default.createElement(d.Button,{bsStyle:"link",onClick:this.handleCancel},"取消")))}}],[{key:"propTypes",value:{i18n:u.PropTypes.object.isRequired,close:u.PropTypes.func.isRequired,addLabels:u.PropTypes.func.isRequired,data:u.PropTypes.object,project:u.PropTypes.object,options:u.PropTypes.object,loading:u.PropTypes.bool,isSubtask:u.PropTypes.bool,parent:u.PropTypes.object,create:u.PropTypes.func,edit:u.PropTypes.func,doAction:u.PropTypes.func,action_id:u.PropTypes.string,isFromWorkflow:u.PropTypes.bool},enumerable:!0}]),t}(u.Component);t.default=M,e.exports=t.default}).call(this)}finally{}},107:function(e,t,n){try{(function(){"use strict";function t(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(e,t,n){for(var r=!0;r;){var o=e,a=t,i=n;r=!1,null===o&&(o=Function.prototype);var l=Object.getOwnPropertyDescriptor(o,a);if(void 0!==l){if("value"in l)return l.value;var s=l.get;if(void 0===s)return;return s.call(i)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=a,n=i,r=!0,l=u=void 0}},l=n(1),s=t(l),u=n(2),c=n(5),d=n(3),p=t(d),f=n(45),m=t(f),h=n(15),y=(n(95),function(e){function t(e){r(this,t),i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={value:e.value}}return o(t,e),a(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.id,n=e.uploadUrl,r=e.onChange,o=this;h("#"+t).inlineattachment({allowedTypes:["image/jpeg","image/png","image/jpg","image/gif"],uploadUrl:n,onFileUploaded:function(e,t){o.setState({value:e.getValue()}),r(e.getValue())},onFileReceived:function(e,t){o.setState({value:e.getValue()}),r(e.getValue())}})}},{key:"render",value:function(){var e=this,t=this.props,n=t.id,r=(t.value,t.disabled),o=t.onChange,a=t.onBlur,i=t.placeholder;return s.default.createElement(u.FormControl,{id:n,componentClass:"textarea",disabled:r,value:this.state.value,onChange:function(t){e.setState({value:t.target.value}),o(t.target.value)},onBlur:a,style:{height:"180px"},placeholder:i})}}],[{key:"propTypes",value:{id:l.PropTypes.string.isRequired,placeholder:l.PropTypes.string.isRequired,uploadUrl:l.PropTypes.string.isRequired,onChange:l.PropTypes.func,onBlur:l.PropTypes.func,defaultValue:l.PropTypes.string,disabled:l.PropTypes.bool,value:l.PropTypes.string.isRequired},enumerable:!0}]),t}(s.default.Component)),g=function(e){function t(e){r(this,t),i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={photoIndex:0,inlinePreviewShow:!1},this.previewInlineImg=this.previewInlineImg.bind(this)}return o(t,e),a(t,[{key:"extractImg",value:function(e,t){var n=t.match(/!\[(.*?)\]\((.*?)\)/gi),r=[];n&&(p.default.forEach(n,function(n,o){var a=new RegExp("^!\\[(.*?)\\]\\((.*?)\\)$");if(a.exec(n)){var i=RegExp.$2;if(!i)return;var l=RegExp.$1||"";t=t.replace(n,'<div><img class="inline-img" id="inlineimg-'+e+"-"+o+'" src="'+(0===i.indexOf("http")?i:i+"/thumbnail")+'" alt="'+l+'"/></div>'),r.push(i)}}),t=t.replace(/<\/div>(\s*?)<div>/gi,""));var o=t.match(/\[.*?\]\(.*?\)/gi);return o&&p.default.forEach(o,function(e,n){var r=new RegExp("^\\[(.*?)\\]\\((.*?)\\)$");r.exec(e),t=t.replace(e,'<a target="_blank" href="'+RegExp.$2+'">'+RegExp.$1+"</a>")}),{html:t.replace(/(\r\n)|(\n)/g,"<br/>"),imgFiles:r}}},{key:"previewInlineImg",value:function(e){var t=this.props.isImgPreviewed;if(!t)return void c.notify.show("权限不足。","error",2e3);var n=e.target.id;if(n){var r=-1;0===n.indexOf("inlineimg-")&&(r=n.substr(n.lastIndexOf("-")+1)-0,this.setState({inlinePreviewShow:!0,photoIndex:r}))}}},{key:"render",value:function(){var e=this,t=this.props,n=t.isEditable,r=t.onEdit,o=t.fieldKey,a=t.value,i=void 0===a?"":a,l=this.state,u=l.inlinePreviewShow,c=l.photoIndex,d=this.extractImg(o,i),p=d.html,f=d.imgFiles;return s.default.createElement("div",{className:"issue-text-field"},n&&s.default.createElement("div",{className:"edit-button",onClick:function(){r&&r()}},s.default.createElement("i",{className:"fa fa-edit"})),s.default.createElement("div",{onClick:this.previewInlineImg.bind(this),dangerouslySetInnerHTML:{__html:p||'<span style="color: #909090">未设置</span>'}}),u&&s.default.createElement(m.default,{mainSrc:f[c],nextSrc:f[(c+1)%f.length],prevSrc:f[(c+f.length-1)%f.length],imageTitle:"",imageCaption:"",onCloseRequest:function(){e.setState({inlinePreviewShow:!1})},onMovePrevRequest:function(){return e.setState({photoIndex:(c+f.length-1)%f.length})},onMoveNextRequest:function(){return e.setState({photoIndex:(c+1)%f.length})}}))}}],[{key:"propTypes",value:{isImgPreviewed:l.PropTypes.bool,isEditable:l.PropTypes.bool,onEdit:l.PropTypes.func,fieldKey:l.PropTypes.string.isRequired,value:l.PropTypes.string.isRequired},enumerable:!0}]),t}(s.default.Component);e.exports={MultiRowsTextEditor:y,MultiRowsTextReader:g}}).call(this)}finally{}},108:function(e,t,n){try{(function(){"use strict";function t(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(e,t,n){for(var r=!0;r;){var o=e,a=t,i=n;r=!1,null===o&&(o=Function.prototype);var l=Object.getOwnPropertyDescriptor(o,a);if(void 0!==l){if("value"in l)return l.value;var s=l.get;if(void 0===s)return;return s.call(i)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=a,n=i,r=!0,l=u=void 0}},l=n(1),s=t(l),u=n(3),c=t(u),d=n(5),p=n(45),f=t(p),m=n(20),h=n(95),y=n(129),g=n(91),v=function(e){function t(e){r(this,t),i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.editor=null}return o(t,e),a(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.id,r=t.uploadUrl,o=t.onChange,a=t.onBlur,i=t.value,l=(t.disabled,t.placeholder),s=document.getElementById(n);this.editor=new y({element:s,placeholder:l,previewRender:function(t){return e.editor.markdown(t)},autoDownloadFontAwesome:!1,showIcons:["table"],hideIcons:["side-by-side","fullscreen"],spellChecker:!1,status:!1});var u=this;this.editor.codemirror.on("change",function(){o(u.editor.value())}),this.editor.codemirror.on("blur",function(){a&&a()}),this.editor.value(i||"");var c={allowedTypes:["image/jpeg","image/png","image/jpg","image/gif"],uploadUrl:r};h.editors.codemirror4.attach(this.editor.codemirror,c)}},{key:"componentWillReceiveProps",value:function(e){this.editor&&this.editor.codemirror&&(this.editor.codemirror.options.readOnly=e.disabled&&!0)}},{key:"componentWillUnmount",value:function(){delete this.editor.codemirror,delete this.editor}},{key:"render",value:function(){var e=this.props.id;return s.default.createElement("div",{className:"rich-text-editor markdown-body"},s.default.createElement("textarea",{id:e}))}}],[{key:"propTypes",value:{id:l.PropTypes.string.isRequired,placeholder:l.PropTypes.string.isRequired,uploadUrl:l.PropTypes.string.isRequired,onChange:l.PropTypes.func,onBlur:l.PropTypes.func,defaultValue:l.PropTypes.string,disabled:l.PropTypes.bool,value:l.PropTypes.string.isRequired},enumerable:!0}]),t}(s.default.Component),b=function(e){function t(e){r(this,t),i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={photoIndex:0,inlinePreviewShow:!1},this.previewInlineImg=this.previewInlineImg.bind(this)}return o(t,e),a(t,[{key:"extractImg",value:function(e,t){g.setOptions({breaks:!0});var n=g(t),r=n.match(/<img(.*?)>/gi),o=[];return r&&c.default.forEach(r,function(t,r){var a=new RegExp('^<img src="(.*?)"(.*?)>$');if(a.exec(t)){var i=RegExp.$1;if(!i)return;n=n.replace(t,'<img class="inline-img" id="inlineimg-'+e+"-"+r+'" src="'+(0===i.indexOf("http")?i:(0,m.urlWrapper)(i+"/thumbnail"))+'"/>'),o.push(i)}}),{html:n,imgFiles:o}}},{key:"previewInlineImg",value:function(e){var t=this.props.isImgPreviewed;if(!t)return void d.notify.show("权限不足。","error",2e3);var n=e.target.id;if(n){var r=-1;0===n.indexOf("inlineimg-")&&(r=n.substr(n.lastIndexOf("-")+1)-0,this.setState({inlinePreviewShow:!0,photoIndex:r}))}}},{key:"render",value:function(){var e=this,t=this.props,n=t.isEditable,r=t.onEdit,o=t.fieldKey,a=t.value,i=this.state,l=i.inlinePreviewShow,u=i.photoIndex,c=this.extractImg(o,a||""),d=c.html,p=c.imgFiles;return s.default.createElement("div",{className:"issue-text-field markdown-body"},n&&s.default.createElement("div",{className:"edit-button",onClick:function(){r&&r()}},s.default.createElement("i",{className:"fa fa-edit"})),s.default.createElement("div",{onClick:this.previewInlineImg.bind(this),dangerouslySetInnerHTML:{__html:d||'<span style="color: #909090">未设置</span>'}}),l&&s.default.createElement(f.default,{mainSrc:(0,m.urlWrapper)(p[u]),nextSrc:(0,m.urlWrapper)(p[(u+1)%p.length]),prevSrc:(0,m.urlWrapper)(p[(u+p.length-1)%p.length]),imageTitle:"",imageCaption:"",onCloseRequest:function(){e.setState({inlinePreviewShow:!1})},onMovePrevRequest:function(){return e.setState({photoIndex:(u+p.length-1)%p.length})},onMoveNextRequest:function(){return e.setState({photoIndex:(u+1)%p.length})}}))}}],[{key:"propTypes",value:{isImgPreviewed:l.PropTypes.bool,isEditable:l.PropTypes.bool,onEdit:l.PropTypes.func,fieldKey:l.PropTypes.string.isRequired,value:l.PropTypes.string.isRequired},enumerable:!0}]),t}(s.default.Component);e.exports={RichTextEditor:v,RichTextReader:b}}).call(this)}finally{}},114:function(e,t,n){var r;!function(){"use strict";var o=!("undefined"==typeof window||!window.document||!window.document.createElement),a={canUseDOM:o,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:o&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:o&&!!window.screen};r=function(){return a}.call(t,n,t,e),!(void 0!==r&&(e.exports=r))}()},116:function(e,t,n){try{(function(){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function(e,t,n){for(var r=!0;r;){var o=e,a=t,i=n;r=!1,null===o&&(o=Function.prototype);var l=Object.getOwnPropertyDescriptor(o,a);if(void 0!==l){if("value"in l)return l.value;var s=l.get;if(void 0===s)return;return s.call(i)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=a,n=i,r=!0,l=u=void 0}},s=n(1),u=r(s),c=n(2),d=n(56),p=r(d),f=n(35),m=n(86),h=r(m),y=n(3),g=r(y),v=n(49),b=r(v),w=n(5),E=n(4),k={width:"100%"},_=function(e){function t(e){o(this,n),l(Object.getPrototypeOf(n.prototype),"constructor",this).call(this,e),this.moveCard=this.moveCard.bind(this),this.state={cards:[],ecode:0};for(var t=this.props.cards.length,r=0;r<t;r++)this.state.cards.push({id:this.props.cards[r].id,text:this.props.cards[r].name});this.state.strCards=JSON.stringify(this.state.cards)}a(t,e),i(t,[{key:"moveCard",value:function(e,t){var n=this.state.cards,r=n[e];this.setState((0,p.default)(this.state,{cards:{$splice:[[e,1],[t,0,r]]}}))}},{key:"save",value:function(){var e,t,n,r,o;return regeneratorRuntime.async(function(a){for(;;)switch(a.prev=a.next){case 0:return e=this.props,t=e.close,n=e.setSort,r={sequence:g.default.map(this.state.cards,g.default.iteratee("id"))},a.next=6,regeneratorRuntime.awrap(n(r));case 6:o=a.sent,0===o?(this.setState({ecode:0}),t(),w.notify.show("保存完成。","success",2e3)):this.setState({ecode:o});case 8:case"end":return a.stop()}},null,this)}},{key:"cancel",value:function(){var e=this.props,t=e.close,n=e.sortLoading;n||t()}},{key:"render",value:function(){var e=this,t=this.state,n=t.cards,r=t.strCards,o=this.props,a=o.model,i=o.i18n.errMsg,l=o.sortLoading;return u.default.createElement(c.Modal,{show:!0,onHide:this.cancel.bind(this),backdrop:"static","aria-labelledby":"contained-modal-title-sm"},u.default.createElement(c.Modal.Header,{closeButton:!0},u.default.createElement(c.Modal.Title,{id:"contained-modal-title-la"},"编辑"+a+"顺序")),u.default.createElement(c.Modal.Body,{style:{maxHeight:"420px",overflow:"auto"}},u.default.createElement("div",{style:{marginBottom:"8px"}},"通过上下拖拽改变显示顺序。"),u.default.createElement("div",{style:k},n.map(function(t,n){return u.default.createElement(b.default,{key:t.id,index:n,id:t.id,text:t.text,moveCard:e.moveCard})}))),u.default.createElement(c.Modal.Footer,null,u.default.createElement("span",{className:"ralign"},0!==this.state.ecode&&i[this.state.ecode]),u.default.createElement("img",{src:E,className:l?"loading":"hide"}),u.default.createElement(c.Button,{disabled:l||r==JSON.stringify(n),onClick:this.save.bind(this)},"确定"),u.default.createElement(c.Button,{bsStyle:"link",disabled:l,onClick:this.cancel.bind(this)},"取消")))}}],[{key:"propTypes",value:{i18n:s.PropTypes.object.isRequired,model:s.PropTypes.string.isRequired,cards:s.PropTypes.array,sortLoading:s.PropTypes.bool,setSort:s.PropTypes.func,close:s.PropTypes.func.isRequired},enumerable:!0}]);var n=t;return t=(0,f.DragDropContext)(h.default)(t)||t}(s.Component);t.default=_,e.exports=t.default}).call(this)}finally{}},117:function(e,t,n){function r(e){return e()}var o=n(1),a=n(12),i=n(72),l=n(26),s=n(114),u=o.createFactory(n(118)),c=n(119),d=n(121),p=n(211),f=n(12).unstable_renderSubtreeIntoContainer,m=n(71),h=n(70),y=s.canUseDOM?window.HTMLElement:{},g=s.canUseDOM?document.body:{appendChild:function(){}},v=h({displayName:"Modal",statics:{setAppElement:function(e){g=c.setElement(e)},injectCSS:function(){}},propTypes:{isOpen:l.bool.isRequired,style:l.shape({content:l.object,overlay:l.object}),portalClassName:l.string,bodyOpenClassName:l.string,appElement:l.instanceOf(y),onAfterOpen:l.func,onRequestClose:l.func,closeTimeoutMS:l.number,ariaHideApp:l.bool,shouldCloseOnOverlayClick:l.bool,parentSelector:l.func,role:l.string,contentLabel:l.string.isRequired},getDefaultProps:function(){return{isOpen:!1,portalClassName:"ReactModalPortal",bodyOpenClassName:"ReactModal__Body--open",ariaHideApp:!0,closeTimeoutMS:0,shouldCloseOnOverlayClick:!0,parentSelector:function(){return document.body}}},componentDidMount:function(){this.node=document.createElement("div"),this.node.className=this.props.portalClassName,this.props.isOpen&&d.add(this);var e=r(this.props.parentSelector);e.appendChild(this.node),this.renderPortal(this.props)},componentWillUpdate:function(e){e.portalClassName!==this.props.portalClassName&&(this.node.className=e.portalClassName)},componentWillReceiveProps:function(e){e.isOpen&&d.add(this),e.isOpen||d.remove(this);var t=r(this.props.parentSelector),n=r(e.parentSelector);n!==t&&(t.removeChild(this.node),n.appendChild(this.node)),this.renderPortal(e)},componentWillUnmount:function(){if(this.node){d.remove(this),this.props.ariaHideApp&&c.show(this.props.appElement);var e=this.portal.state,t=Date.now(),n=e.isOpen&&this.props.closeTimeoutMS&&(e.closesAt||t+this.props.closeTimeoutMS);if(n){e.beforeClose||this.portal.closeWithTimeout();var r=this;setTimeout(function(){r.removePortal()},n-t)}else this.removePortal()}},removePortal:function(){a.unmountComponentAtNode(this.node);var e=r(this.props.parentSelector);e.removeChild(this.node),0===d.count()&&p(document.body).remove(this.props.bodyOpenClassName)},renderPortal:function(e){e.isOpen||d.count()>0?p(document.body).add(this.props.bodyOpenClassName):p(document.body).remove(this.props.bodyOpenClassName),e.ariaHideApp&&c.toggle(e.isOpen,e.appElement),this.portal=f(this,u(m({},e,{defaultStyles:v.defaultStyles})),this.node)},render:function(){return i.noscript()}});v.defaultStyles={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(255, 255, 255, 0.75)"},content:{position:"absolute",top:"40px",left:"40px",right:"40px",bottom:"40px",border:"1px solid #ccc",background:"#fff",overflow:"auto",WebkitOverflowScrolling:"touch",borderRadius:"4px",outline:"none",padding:"20px"}},e.exports=v},118:function(e,t,n){var r=(n(1),n(72)),o=n(120),a=n(122),i=n(71),l=n(70),s=r.div,u={overlay:"ReactModal__Overlay",content:"ReactModal__Content"};e.exports=l({displayName:"ModalPortal",shouldClose:null,getDefaultProps:function(){return{style:{overlay:{},content:{}}}},getInitialState:function(){return{afterOpen:!1,beforeClose:!1}},componentDidMount:function(){this.props.isOpen&&(this.setFocusAfterRender(!0),this.open())},componentWillUnmount:function(){clearTimeout(this.closeTimer)},componentWillReceiveProps:function(e){!this.props.isOpen&&e.isOpen?(this.setFocusAfterRender(!0),this.open()):this.props.isOpen&&!e.isOpen&&this.close()},componentDidUpdate:function(){this.focusAfterRender&&(this.focusContent(),this.setFocusAfterRender(!1))},setFocusAfterRender:function(e){this.focusAfterRender=e},afterClose:function(){o.returnFocus(),o.teardownScopedFocus()},open:function(){this.state.afterOpen&&this.state.beforeClose?(clearTimeout(this.closeTimer),this.setState({beforeClose:!1})):(o.setupScopedFocus(this.node),o.markForFocusLater(),this.setState({isOpen:!0},function(){this.setState({afterOpen:!0}),this.props.isOpen&&this.props.onAfterOpen&&this.props.onAfterOpen()}.bind(this)))},close:function(){this.props.closeTimeoutMS>0?this.closeWithTimeout():this.closeWithoutTimeout()},focusContent:function(){this.contentHasFocus()||this.refs.content.focus()},closeWithTimeout:function(){var e=Date.now()+this.props.closeTimeoutMS;this.setState({beforeClose:!0,closesAt:e},function(){this.closeTimer=setTimeout(this.closeWithoutTimeout,this.state.closesAt-Date.now())}.bind(this))},closeWithoutTimeout:function(){this.setState({beforeClose:!1,isOpen:!1,afterOpen:!1,closesAt:null},this.afterClose)},handleKeyDown:function(e){9==e.keyCode&&a(this.refs.content,e),27==e.keyCode&&(e.preventDefault(),this.requestClose(e))},handleOverlayOnClick:function(e){null===this.shouldClose&&(this.shouldClose=!0),this.shouldClose&&this.props.shouldCloseOnOverlayClick&&(this.ownerHandlesClose()?this.requestClose(e):this.focusContent()),this.shouldClose=null},handleContentOnClick:function(){this.shouldClose=!1},requestClose:function(e){this.ownerHandlesClose()&&this.props.onRequestClose(e)},ownerHandlesClose:function(){return this.props.onRequestClose},shouldBeClosed:function(){return!this.state.isOpen&&!this.state.beforeClose},contentHasFocus:function(){return document.activeElement===this.refs.content||this.refs.content.contains(document.activeElement)},buildClassName:function(e,t){var n="object"==typeof t?t:{base:u[e],afterOpen:u[e]+"--after-open",beforeClose:u[e]+"--before-close"},r=n.base;return this.state.afterOpen&&(r+=" "+n.afterOpen),this.state.beforeClose&&(r+=" "+n.beforeClose),"string"==typeof t&&t?[r,t].join(" "):r},render:function(){var e=this.props.className?{}:this.props.defaultStyles.content,t=this.props.overlayClassName?{}:this.props.defaultStyles.overlay;return this.shouldBeClosed()?s():s({ref:"overlay",className:this.buildClassName("overlay",this.props.overlayClassName),style:i({},t,this.props.style.overlay||{}),onClick:this.handleOverlayOnClick},s({ref:"content",style:i({},e,this.props.style.content||{}),className:this.buildClassName("content",this.props.className),tabIndex:"-1",onKeyDown:this.handleKeyDown,onClick:this.handleContentOnClick,role:this.props.role,"aria-label":this.props.contentLabel},this.props.children))}})},119:function(e,t){function n(e){if("string"==typeof e){var t=document.querySelectorAll(e);e="length"in t?t[0]:t}return s=e||s}function r(e){i(e),(e||s).setAttribute("aria-hidden","true")}function o(e){i(e),(e||s).removeAttribute("aria-hidden")}function a(e,t){e?r(t):o(t)}function i(e){if(!e&&!s)throw new Error("react-modal: You must set an element with `Modal.setAppElement(el)` to make this accessible")}function l(){s=document.body}var s="undefined"!=typeof document?document.body:null;t.toggle=a,t.setElement=n,t.show=o,t.hide=r,t.resetForTesting=l},120:function(e,t,n){function r(e){s=!0}function o(e){if(s){if(s=!1,!l)return;setTimeout(function(){if(!l.contains(document.activeElement)){var e=a(l)[0]||l;e.focus()}},0)}}var a=n(73),i=[],l=null,s=!1;t.markForFocusLater=function(){i.push(document.activeElement)},t.returnFocus=function(){var e=null;try{return e=i.pop(),void e.focus()}catch(t){}},t.setupScopedFocus=function(e){l=e,window.addEventListener?(window.addEventListener("blur",r,!1),document.addEventListener("focus",o,!0)):(window.attachEvent("onBlur",r),document.attachEvent("onFocus",o))},t.teardownScopedFocus=function(){l=null,window.addEventListener?(window.removeEventListener("blur",r),document.removeEventListener("focus",o)):(window.detachEvent("onBlur",r),document.detachEvent("onFocus",o))}},121:function(e,t){var n=[];e.exports={add:function(e){n.indexOf(e)===-1&&n.push(e)},remove:function(e){var t=n.indexOf(e);t!==-1&&n.splice(t,1)},count:function(){return n.length}}},122:function(e,t,n){var r=n(73);e.exports=function(e,t){var n=r(e);if(!n.length)return void t.preventDefault();var o=n[t.shiftKey?0:n.length-1],a=o===document.activeElement||e===document.activeElement;if(a){t.preventDefault();var i=n[t.shiftKey?n.length-1:0];i.focus()}}},123:function(e,t,n){e.exports=n(117)},129:function(e,t){e.exports=window.SimpleMDE},137:function(e,t,n){try{(function(){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(e,t,n){for(var r=!0;r;){var o=e,a=t,i=n;r=!1,null===o&&(o=Function.prototype);var l=Object.getOwnPropertyDescriptor(o,a);if(void 0!==l){if("value"in l)return l.value;var s=l.get;if(void 0===s)return;return s.call(i)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=a,n=i,r=!0,l=u=void 0}},u=n(1),c=r(u),d=n(20),p=n(94),f=["#815b3a","#f79232","#3b7fc4","#654982","#4a6785","#8eb021","#d39c3f","#f15c75","#ac707a"],m=function(e){function t(e){o(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.getBgColor=this.getBgColor.bind(this)}return a(t,e),l(t,[{key:"getBgColor",value:function(){var e=this.props.data,t=0,n=!0,r=!1,o=void 0;try{for(var a,i=e.id[Symbol.iterator]();!(n=(a=i.next()).done);n=!0){var l=a.value;t+=l.charCodeAt()}}catch(s){r=!0,o=s}finally{try{!n&&i.return&&i.return()}finally{if(r)throw o}}var u=t%9;return f[u]}},{key:"render",value:function(){var e=this.props,t=e.data,n=void 0===t?{}:t,r=e.circle,o=void 0!==r&&r,a=o?{borderRadius:"50%"}:{borderRadius:"4px"};if(n.avatar)return c.default.createElement("div",{title:n.name||""},c.default.createElement("img",{src:(0,d.urlWrapper)("/getavatar?fid="+n.avatar),className:"default-avatar",style:a}));if(!n.id)return c.default.createElement("div",{title:n.name||""},c.default.createElement("img",{src:p,className:"default-avatar",style:a}));var l=i({backgroundColor:this.getBgColor(),color:"#fff",lineHeight:2.3,textAlign:"center",fontSize:"12px"},a),s=(n.name||n.first_name).substr(0,3).substr(-2);return c.default.createElement("div",{className:"default-avatar",style:l,title:n.name||""},s)}}],[{key:"propTypes",value:{size:u.PropTypes.string,circle:u.PropTypes.bool,data:u.PropTypes.object.isRequired},enumerable:!0}]),t}(u.Component);t.default=m,e.exports=t.default}).call(this)}finally{}},155:function(e,t,n){try{(function(){"use strict";function e(e){return(0,c.asyncFuncCreator)({constant:"WORKFLOW_INDEX",promise:function(t){return t.request({url:"/project/"+e+"/workflow"})}})}function r(e,t){return(0,c.asyncFuncCreator)({constant:"WORKFLOW_CREATE",promise:function(n){return n.request({url:"/project/"+e+"/workflow",method:"post",data:t})}})}function o(e,t){return(0,c.asyncFuncCreator)({constant:"WORKFLOW_UPDATE",promise:function(n){return n.request({url:"/project/"+e+"/workflow/"+t.id,method:"put",data:t})}})}function a(e){return{type:"WORKFLOW_SELECT",id:e}}function i(e){return{type:"WORKFLOW_DELETE_NOTIFY",id:e}}function l(e,t){return(0,c.asyncFuncCreator)({constant:"WORKFLOW_DELETE",id:t,promise:function(n){return n.request({url:"/project/"+e+"/workflow/"+t,method:"delete"})}})}function s(e,t){return(0,c.asyncFuncCreator)({constant:"WORKFLOW_PREVIEW",id:t,promise:function(n){return n.request({url:"/project/"+e+"/workflow/"+t+"/preview"})}})}function u(e,t){return(0,c.asyncFuncCreator)({constant:"WORKFLOW_VIEW_USED",id:t,promise:function(n){return n.request({url:"/project/"+e+"/workflow/"+t+"/used"})}})}Object.defineProperty(t,"__esModule",{value:!0}),t.index=e,t.create=r,t.update=o,t.select=a,t.delNotify=i,t.del=l,t.preview=s,t.viewUsed=u;var c=n(27)}).call(this)}finally{}},181:function(e,t,n){try{(function(){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(e,t,n){for(var r=!0;r;){var o=e,a=t,i=n;r=!1,null===o&&(o=Function.prototype);var l=Object.getOwnPropertyDescriptor(o,a);if(void 0!==l){if("value"in l)return l.value;var s=l.get;if(void 0===s)return;return s.call(i)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=a,n=i,r=!0,l=u=void 0}},u=n(1),c=r(u),d=n(8),p=n(2),f=n(3),m=r(f),h=n(52),y=r(h),g=n(5),v=n(6),b=n(4),w=function(e,t){var n={};return e.expect_start_time&&(v(e.expect_start_time).isValid()||(n.expect_start_time="格式错误")),e.expect_complete_time&&(v(e.expect_complete_time).isValid()||(n.expect_complete_time="格式错误")),e.expect_start_time&&e.expect_complete_time&&e.expect_start_time>e.expect_complete_time&&(n.expect_start_time="开始时间要早于结束时间"),e.progress&&(isNaN(e.progress)?n.progress="格式错误":(e.progress<0||e.progress>100)&&(n.progress="数值必须在0～100之间")),n},E=function(e){function t(e){o(this,n),s(Object.getPrototypeOf(n.prototype),"constructor",this).call(this,e),this.state={ecode:0},this.handleSubmit=this.handleSubmit.bind(this),this.handleCancel=this.handleCancel.bind(this)}a(t,e),l(t,[{key:"handleSubmit",value:function(){var e,t,n,r,o,a,i;return regeneratorRuntime.async(function(l){for(;;)switch(l.prev=l.next){case 0:return e=this.props,t=e.values,n=e.edit,r=e.close,o=e.data,a={},t.expect_start_time?a.expect_start_time=parseInt(v(t.expect_start_time).startOf("day").format("X")):a.expect_start_time="",t.expect_complete_time?a.expect_complete_time=parseInt(v(t.expect_complete_time).startOf("day").format("X")):a.expect_complete_time="",t.progress||0===t.progress?a.progress=t.progress-0:a.progress="",l.next=11,regeneratorRuntime.awrap(n(o.id,a));case 11:i=l.sent,0===i?(this.setState({ecode:0}),g.notify.show("编辑完成。","success",2e3),r()):this.setState({ecode:i});case 13:case"end":return l.stop()}},null,this)}},{key:"handleCancel",value:function(){var e=this.props,t=e.close,n=e.submitting;n||(this.setState({ecode:0}),t())}},{key:"componentWillMount",value:function(){var e=this.props,t=e.initializeForm,n=e.data;t({expect_start_time:v.unix(n.expect_start_time||n.expect_complete_time||n.created_at).startOf("day"),expect_complete_time:v.unix(n.expect_complete_time||n.expect_start_time||n.created_at),progress:m.default.isNumber(n.progress)?n.progress+"":""})}},{key:"render",value:function(){var e=this.props,t=e.i18n.errMsg,n=e.fields,r=n.expect_start_time,o=n.expect_complete_time,a=n.progress,l=e.handleSubmit,s=e.invalid,u=e.submitting,d=e.data;return c.default.createElement(p.Modal,{show:!0,onHide:this.handleCancel,backdrop:"static","aria-labelledby":"contained-modal-title-sm"},c.default.createElement(p.Modal.Header,{closeButton:!0},c.default.createElement(p.Modal.Title,{id:"contained-modal-title-la"},"周期进度 - "+d.no)),c.default.createElement("form",{onSubmit:l(this.handleSubmit),onKeyDown:function(e){13==e.keyCode&&e.preventDefault()}},c.default.createElement(p.Modal.Body,null,c.default.createElement("div",null,c.default.createElement(p.FormGroup,{style:{width:"47%",
display:"inline-block"},validationState:r.value&&r.error?"error":null},c.default.createElement(p.ControlLabel,null,"计划开始时间"),c.default.createElement(y.default,{locale:"zh-cn",mode:"date",closeOnSelect:!0,dateFormat:"YYYY/MM/DD",timeFormat:!1,value:r.value,onChange:function(e){r.onChange(e)}}),r.value&&r.error&&c.default.createElement(p.HelpBlock,{style:{"float":"right"}},r.error)),c.default.createElement(p.FormGroup,{style:{width:"47%",display:"inline-block","float":"right"},validationState:o.value&&o.error?"error":null},c.default.createElement(p.ControlLabel,null,"计划完成时间"),c.default.createElement(y.default,{locale:"zh-cn",mode:"date",closeOnSelect:!0,dateFormat:"YYYY/MM/DD",timeFormat:!1,value:o.value,onChange:function(e){o.onChange(e)}}),o.value&&o.error&&c.default.createElement(p.HelpBlock,{style:{"float":"right"}},o.error))),c.default.createElement(p.FormGroup,{style:{marginBottom:"0px"},validationState:a.touched&&a.error?"error":null},c.default.createElement(p.ControlLabel,null,"进度"),c.default.createElement(p.FormControl,i({disabled:u,type:"number",min:"0",max:"100",style:{width:"80px",display:"inline-block",marginLeft:"10px"}},a,{placeholder:"进度"}))," %",a.value&&a.touched&&a.error?c.default.createElement(p.HelpBlock,null,a.error):"")),c.default.createElement(p.Modal.Footer,null,c.default.createElement("span",{className:"ralign"},0!==this.state.ecode&&!u&&t[this.state.ecode]),c.default.createElement("img",{src:b,className:u?"loading":"hide"}),c.default.createElement(p.Button,{disabled:u||s,type:"submit"},"确定"),c.default.createElement(p.Button,{bsStyle:"link",disabled:u,onClick:this.handleCancel},"取消"))))}}],[{key:"propTypes",value:{i18n:u.PropTypes.object.isRequired,submitting:u.PropTypes.bool,invalid:u.PropTypes.bool,values:u.PropTypes.object,fields:u.PropTypes.object,data:u.PropTypes.object,handleSubmit:u.PropTypes.func.isRequired,close:u.PropTypes.func.isRequired,initializeForm:u.PropTypes.func.isRequired,edit:u.PropTypes.func.isRequired},enumerable:!0}]);var n=t;return t=(0,d.reduxForm)({form:"ganttedit",fields:["expect_start_time","expect_complete_time","progress"],validate:w})(t)||t}(u.Component);t.default=E,e.exports=t.default}).call(this)}finally{}},182:function(e,t,n){try{(function(){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function(e,t,n){for(var r=!0;r;){var o=e,a=t,i=n;r=!1,null===o&&(o=Function.prototype);var l=Object.getOwnPropertyDescriptor(o,a);if(void 0!==l){if("value"in l)return l.value;var s=l.get;if(void 0===s)return;return s.call(i)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=a,n=i,r=!0,l=u=void 0}},s=n(1),u=r(s),c=n(8),d=n(2),p=n(7),f=r(p),m=n(3),h=r(m),y=n(5),g=n(4),v=function(e,t){var n={};return e.assignee||(n.assignee="必填"),n},b=function(e){function t(e){o(this,n),l(Object.getPrototypeOf(n.prototype),"constructor",this).call(this,e),this.state={ecode:0},this.handleSubmit=this.handleSubmit.bind(this),this.handleCancel=this.handleCancel.bind(this)}a(t,e),i(t,[{key:"handleSubmit",value:function(){var e,t,n,r,o,a;return regeneratorRuntime.async(function(i){for(;;)switch(i.prev=i.next){case 0:return e=this.props,t=e.values,n=e.setAssignee,r=e.close,o=e.issue,i.next=7,regeneratorRuntime.awrap(n(o.id,t,!0));case 7:a=i.sent,0===a?(this.setState({ecode:0}),r(),y.notify.show("已分配。","success",2e3)):this.setState({ecode:a});case 9:case"end":return i.stop()}},null,this)}},{key:"handleCancel",value:function(){var e=this.props,t=e.close,n=e.submitting;n||(this.setState({ecode:0}),t())}},{key:"render",value:function(){var e=this.props,t=e.i18n.errMsg,n=e.fields.assignee,r=e.handleSubmit,o=e.invalid,a=e.submitting,i=e.issue,l=e.options,s=h.default.map(l.assignees||[],function(e){return{label:e.name+"("+e.email+")",value:e.id}});return u.default.createElement(d.Modal,{show:!0,onHide:this.handleCancel,backdrop:"static","aria-labelledby":"contained-modal-title-sm"},u.default.createElement(d.Modal.Header,{closeButton:!0},u.default.createElement(d.Modal.Title,{id:"contained-modal-title-la"},"分配负责人 - "+i.no)),u.default.createElement("form",{onSubmit:r(this.handleSubmit),onKeyDown:function(e){13==e.keyCode&&e.preventDefault()}},u.default.createElement(d.Modal.Body,null,u.default.createElement(d.FormGroup,{controlId:"formControlsText",validationState:n.touched&&n.error?"error":null},u.default.createElement(d.ControlLabel,null,u.default.createElement("span",{className:"txt-impt"},"*"),"分配给"),u.default.createElement(f.default,{simpleValue:!0,clearable:!1,disabled:a,options:s,value:n.value,onChange:function(e){n.onChange(e)},placeholder:"选择负责人"}),n.touched&&n.error&&u.default.createElement(d.HelpBlock,{style:{"float":"right"}},n.error))),u.default.createElement(d.Modal.Footer,null,u.default.createElement("span",{className:"ralign"},0!==this.state.ecode&&!a&&t[this.state.ecode]),u.default.createElement("img",{src:g,className:a?"loading":"hide"}),u.default.createElement(d.Button,{disabled:a||o,type:"submit"},"确定"),u.default.createElement(d.Button,{bsStyle:"link",disabled:a,onClick:this.handleCancel},"取消"))))}}],[{key:"propTypes",value:{i18n:s.PropTypes.object.isRequired,options:s.PropTypes.object.isRequired,issue:s.PropTypes.object.isRequired,submitting:s.PropTypes.bool,invalid:s.PropTypes.bool,values:s.PropTypes.object,fields:s.PropTypes.object,handleSubmit:s.PropTypes.func.isRequired,setAssignee:s.PropTypes.func.isRequired,close:s.PropTypes.func.isRequired},enumerable:!0}]);var n=t;return t=(0,c.reduxForm)({form:"assign",fields:["assignee"],validate:v})(t)||t}(s.Component);t.default=b,e.exports=t.default}).call(this)}finally{}},183:function(e,t,n){try{(function(){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(e,t,n){for(var r=!0;r;){var o=e,a=t,i=n;r=!1,null===o&&(o=Function.prototype);var l=Object.getOwnPropertyDescriptor(o,a);if(void 0!==l){if("value"in l)return l.value;var s=l.get;if(void 0===s)return;return s.call(i)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=a,n=i,r=!0,l=u=void 0}},u=n(1),c=r(u),d=n(8),p=n(2),f=n(7),m=r(f),h=n(3),y=r(h),g=n(5),v=n(38),b=r(v),w=n(4),E=function(e,t){var n={};return e.parent_id||(n.parent_id="必填"),e.type||(n.type="必填"),n},k=function(e){function t(e){o(this,n),s(Object.getPrototypeOf(n.prototype),"constructor",this).call(this,e),this.state={ecode:0},this.handleSubmit=this.handleSubmit.bind(this),this.handleCancel=this.handleCancel.bind(this)}a(t,e),l(t,[{key:"handleSubmit",value:function(){var e,t,n,r,o,a;return regeneratorRuntime.async(function(l){for(;;)switch(l.prev=l.next){case 0:return e=this.props,t=e.values,n=e.convert,r=e.close,o=e.issue,l.next=7,regeneratorRuntime.awrap(n(o.id,i({},t,{parent_id:t.parent_id&&t.parent_id.id||""})));case 7:a=l.sent,this.setState({ecode:a}),0===a&&(r(),g.notify.show("问题已转换。","success",2e3));case 10:case"end":return l.stop()}},null,this)}},{key:"handleCancel",value:function(){var e=this.props,t=e.close,n=e.submitting;n||(this.setState({ecode:0}),t())}},{key:"searchIssue",value:function(e){var t,n,r,o,a,i,l,s,u;return regeneratorRuntime.async(function(c){for(;;)switch(c.prev=c.next){case 0:if(e=e.toLowerCase()){c.next=3;break}return c.abrupt("return",{options:[]});case 3:return t=this.props,n=t.issue,r=t.options.types,o=void 0===r?[]:r,a=t.project,i=new b.default,l=10,c.next=12,regeneratorRuntime.awrap(i.request({url:"/project/"+a.key+"/issue/search?s="+e+"&type=standard&limit="+l}));case 12:return s=c.sent,u=[],s.data.length>0&&y.default.map(s.data,function(e){e.id!=n.id&&u.push({id:e.id,name:y.default.find(o,{id:e.type}).name+"/"+e.no+" - "+e.title})}),c.abrupt("return",{options:u});case 16:case"end":return c.stop()}},null,this)}},{key:"render",value:function(){var e=this.props,t=e.i18n.errMsg,n=e.fields,r=n.parent_id,o=n.type,a=e.handleSubmit,i=e.invalid,l=e.submitting,s=e.options,u=e.issue,d=[];return y.default.map(s.types||[],function(e){"subtask"!=e.type||e.disabled||d.push({label:e.name,value:e.id})}),c.default.createElement(p.Modal,{show:!0,onHide:this.handleCancel,backdrop:"static","aria-labelledby":"contained-modal-title-sm"},c.default.createElement(p.Modal.Header,{closeButton:!0},c.default.createElement(p.Modal.Title,{id:"contained-modal-title-la"},"转换类型 - "+u.no)),c.default.createElement("form",{onSubmit:a(this.handleSubmit),onKeyDown:function(e){13==e.keyCode&&e.preventDefault()}},c.default.createElement(p.Modal.Body,null,c.default.createElement(p.FormGroup,{controlId:"formControlsText",validationState:name.touched&&name.error?"error":null},c.default.createElement(p.ControlLabel,null,c.default.createElement("span",{className:"txt-impt"},"*"),"移动到父任务"),c.default.createElement(m.default.Async,{clearable:!1,disabled:l,options:[],value:r.value,onChange:function(e){r.onChange(e)},valueKey:"id",labelKey:"name",loadOptions:this.searchIssue.bind(this),placeholder:"输入问题号或名称"}),r.touched&&r.error&&c.default.createElement(p.HelpBlock,{style:{"float":"right"}},r.error)),c.default.createElement(p.FormGroup,{controlId:"formControlsText",validationState:name.touched&&name.error?"error":null},c.default.createElement(p.ControlLabel,null,c.default.createElement("span",{className:"txt-impt"},"*"),"子问题类型"),c.default.createElement(m.default,{disabled:l,options:d,simpleValue:!0,clearable:!1,value:o.value,onChange:function(e){o.onChange(e)},placeholder:"选择问题类型"}),o.touched&&o.error&&c.default.createElement(p.HelpBlock,{style:{"float":"right"}},o.error))),c.default.createElement(p.Modal.Footer,null,c.default.createElement("span",{className:"ralign"},0!==this.state.ecode&&!l&&t[this.state.ecode]),c.default.createElement("img",{src:w,className:l?"loading":"hide"}),c.default.createElement(p.Button,{disabled:l||i,type:"submit"},"确定"),c.default.createElement(p.Button,{bsStyle:"link",disabled:l,onClick:this.handleCancel},"取消"))))}}],[{key:"propTypes",value:{i18n:u.PropTypes.object.isRequired,project:u.PropTypes.object.isRequired,options:u.PropTypes.object,issue:u.PropTypes.object.isRequired,submitting:u.PropTypes.bool,invalid:u.PropTypes.bool,values:u.PropTypes.object,fields:u.PropTypes.object,handleSubmit:u.PropTypes.func.isRequired,convert:u.PropTypes.func.isRequired,close:u.PropTypes.func.isRequired},enumerable:!0}]);var n=t;return t=(0,d.reduxForm)({form:"convert2",fields:["parent_id","type"],validate:E})(t)||t}(u.Component);t.default=k,e.exports=t.default}).call(this)}finally{}},184:function(e,t,n){try{(function(){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function(e,t,n){for(var r=!0;r;){var o=e,a=t,i=n;r=!1,null===o&&(o=Function.prototype);var l=Object.getOwnPropertyDescriptor(o,a);if(void 0!==l){if("value"in l)return l.value;var s=l.get;if(void 0===s)return;return s.call(i)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=a,n=i,r=!0,l=u=void 0}},s=n(1),u=r(s),c=n(8),d=n(2),p=n(7),f=r(p),m=n(3),h=r(m),y=n(5),g=n(4),v=function(e,t){var n={};return e.type||(n.type="必填"),n},b=function(e){function t(e){o(this,n),l(Object.getPrototypeOf(n.prototype),"constructor",this).call(this,e),this.state={ecode:0},this.handleSubmit=this.handleSubmit.bind(this),this.handleCancel=this.handleCancel.bind(this)}a(t,e),i(t,[{key:"handleSubmit",value:function(){var e,t,n,r,o,a;return regeneratorRuntime.async(function(i){for(;;)switch(i.prev=i.next){case 0:return e=this.props,t=e.values,n=e.convert,r=e.close,o=e.issue,t.parent_id="",i.next=8,regeneratorRuntime.awrap(n(o.id,t));case 8:a=i.sent,this.setState({ecode:a}),0===a&&(r(),y.notify.show("问题已转换。","success",2e3));case 11:case"end":return i.stop()}},null,this)}},{key:"handleCancel",value:function(){var e=this.props,t=e.close,n=e.submitting;n||(this.setState({ecode:0}),t())}},{key:"render",value:function(){var e=this.props,t=e.i18n.errMsg,n=e.fields.type,r=e.handleSubmit,o=e.invalid,a=e.submitting,i=e.options,l=e.issue,s=[];return h.default.map(i.types||[],function(e){"subtask"==e.type||e.disabled||s.push({label:e.name,value:e.id})}),u.default.createElement(d.Modal,{show:!0,onHide:this.handleCancel,backdrop:"static","aria-labelledby":"contained-modal-title-sm"},u.default.createElement(d.Modal.Header,{closeButton:!0},u.default.createElement(d.Modal.Title,{id:"contained-modal-title-la"},"转换类型 - "+l.no)),u.default.createElement("form",{onSubmit:r(this.handleSubmit),onKeyDown:function(e){13==e.keyCode&&e.preventDefault()}},u.default.createElement(d.Modal.Body,null,u.default.createElement(d.FormGroup,{controlId:"formControlsText",validationState:name.touched&&name.error?"error":null},u.default.createElement(d.ControlLabel,null,u.default.createElement("span",{className:"txt-impt"},"*"),"标准问题类型"),u.default.createElement(f.default,{disabled:a,options:s,simpleValue:!0,clearable:!1,value:n.value,onChange:function(e){n.onChange(e)},placeholder:"选择问题类型"}),n.touched&&n.error&&u.default.createElement(d.HelpBlock,{style:{"float":"right"}},n.error))),u.default.createElement(d.Modal.Footer,null,u.default.createElement("span",{className:"ralign"},0!==this.state.ecode&&!a&&t[this.state.ecode]),u.default.createElement("img",{src:g,className:a?"loading":"hide"}),u.default.createElement(d.Button,{disabled:a||o,type:"submit"},"确定"),u.default.createElement(d.Button,{bsStyle:"link",disabled:a,onClick:this.handleCancel},"取消"))))}}],[{key:"propTypes",value:{i18n:s.PropTypes.object.isRequired,options:s.PropTypes.object,issue:s.PropTypes.object.isRequired,submitting:s.PropTypes.bool,invalid:s.PropTypes.bool,values:s.PropTypes.object,fields:s.PropTypes.object,handleSubmit:s.PropTypes.func.isRequired,convert:s.PropTypes.func.isRequired,close:s.PropTypes.func.isRequired},enumerable:!0}]);var n=t;return t=(0,c.reduxForm)({form:"convert",fields:["type"],validate:v})(t)||t}(s.Component);t.default=b,e.exports=t.default}).call(this)}finally{}},185:function(e,t,n){try{(function(){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(e,t,n){for(var r=!0;r;){var o=e,a=t,i=n;r=!1,null===o&&(o=Function.prototype);var l=Object.getOwnPropertyDescriptor(o,a);if(void 0!==l){if("value"in l)return l.value;var s=l.get;if(void 0===s)return;return s.call(i)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=a,n=i,r=!0,l=u=void 0}},u=n(1),c=r(u),d=n(8),p=n(2),f=n(7),m=r(f),h=n(3),y=r(h),g=n(5),v=n(15),b=n(4),w=function(e){var t={};return e.title||(t.title="必填"),t},E=function(e){function t(e){o(this,n),s(Object.getPrototypeOf(n.prototype),"constructor",this).call(this,e),this.state={ecode:0,initilizedFlag:!1},this.handleSubmit=this.handleSubmit.bind(this),this.handleCancel=this.handleCancel.bind(this)}a(t,e),l(t,[{key:"componentWillMount",value:function(){var e=this.props,t=e.initializeForm,n=e.data,r=y.default.clone(n);y.default.extend(r,{title:"复制 - "+n.title,assignee:n.assignee&&n.assignee.id||null}),t(r)}},{key:"handleSubmit",value:function(){var e,t,n,r,o;return regeneratorRuntime.async(function(a){for(;;)switch(a.prev=a.next){case 0:return e=this.props,t=e.values,n=e.copy,r=e.close,a.next=6,regeneratorRuntime.awrap(n(y.default.mapKeys(t,function(e,t){return"id"==t?"source_id":t})));case 6:o=a.sent,0===o?(this.setState({ecode:0}),r(),g.notify.show("复制完成。","success",2e3)):this.setState({ecode:o});case 8:case"end":return a.stop()}},null,this)}},{key:"handleEntry",value:function(){v("input[name=title]").select()}},{key:"handleCancel",value:function(){var e=this.props,t=e.close,n=e.submitting;n||(this.setState({ecode:0}),t())}},{key:"render",value:function(){var e=this.props,t=e.i18n.errMsg,n=e.fields,r=n.id,o=n.title,a=n.assignee,l=n.resolution,s=e.options,u=e.handleSubmit,d=e.invalid,f=e.submitting,h=e.data,g=y.default.map(s.assignees||[],function(e){return{label:e.name+"("+e.email+")",value:e.id}}),v=y.default.map(s.resolutions,function(e){return{label:e.name,value:e.id}});return c.default.createElement(p.Modal,{show:!0,onHide:this.handleCancel,onEntered:this.handleEntry,backdrop:"static","aria-labelledby":"contained-modal-title-sm"},c.default.createElement(p.Modal.Header,{closeButton:!0},c.default.createElement(p.Modal.Title,{id:"contained-modal-title-la"},"复制问题 - "+h.no)),c.default.createElement("form",{onSubmit:u(this.handleSubmit),onKeyDown:function(e){13==e.keyCode&&e.preventDefault()}},c.default.createElement(p.Modal.Body,null,c.default.createElement(p.FormControl,i({type:"hidden"},r)),c.default.createElement(p.FormGroup,{controlId:"formControlsText",validationState:o.touched&&o.error?"error":null},c.default.createElement(p.ControlLabel,null,c.default.createElement("span",{className:"txt-impt"},"*"),"主题"),c.default.createElement(p.FormControl,i({disabled:f,type:"text"},o,{placeholder:"主题"})),name.touched&&name.error&&c.default.createElement(p.HelpBlock,{style:{"float":"right"}},name.error)),c.default.createElement(p.FormGroup,{controlId:"formControlsText",validationState:a.touched&&a.error?"error":null},c.default.createElement(p.ControlLabel,null,c.default.createElement("span",{className:"txt-impt"},"*"),"分配给"),c.default.createElement(m.default,{simpleValue:!0,clearable:!1,disabled:f,options:g,value:a.value||null,onChange:function(e){a.onChange(e)},placeholder:"选择负责人"}),a.touched&&a.error&&c.default.createElement(p.HelpBlock,{style:{"float":"right"}},a.error)),c.default.createElement(p.FormGroup,{controlId:"formControlsText",validationState:l.touched&&l.error?"error":null},c.default.createElement(p.ControlLabel,null,"解决结果"),c.default.createElement(m.default,{simpleValue:!0,clearable:!1,disabled:f,options:v,value:l.value||null,onChange:function(e){l.onChange(e)},placeholder:"选择解决结果"}),a.touched&&a.error&&c.default.createElement(p.HelpBlock,{style:{"float":"right"}},a.error))),c.default.createElement(p.Modal.Footer,null,c.default.createElement("span",{className:"ralign"},0!==this.state.ecode&&!f&&t[this.state.ecode]),c.default.createElement("img",{src:b,className:f?"loading":"hide"}),c.default.createElement(p.Button,{disabled:f||d,type:"submit"},"确定"),c.default.createElement(p.Button,{bsStyle:"link",disabled:f,onClick:this.handleCancel},"取消"))))}}],[{key:"propTypes",value:{i18n:u.PropTypes.object.isRequired,options:u.PropTypes.object.isRequired,submitting:u.PropTypes.bool,invalid:u.PropTypes.bool,values:u.PropTypes.object,fields:u.PropTypes.object,handleSubmit:u.PropTypes.func.isRequired,close:u.PropTypes.func.isRequired,data:u.PropTypes.object.isRequired,initializeForm:u.PropTypes.func.isRequired,copy:u.PropTypes.func.isRequired},enumerable:!0}]);var n=t;return t=(0,d.reduxForm)({form:"copy_issue",fields:["id","title","assignee","resolution"],validate:w})(t)||t}(u.Component);t.default=E,e.exports=t.default}).call(this)}finally{}},186:function(e,t,n){try{(function(){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function(e,t,n){for(var r=!0;r;){var o=e,a=t,i=n;r=!1,null===o&&(o=Function.prototype);var l=Object.getOwnPropertyDescriptor(o,a);if(void 0!==l){if("value"in l)return l.value;var s=l.get;if(void 0===s)return;return s.call(i)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=a,n=i,r=!0,l=u=void 0}},s=n(1),u=r(s),c=n(2),d=n(5),p=n(4),f=function(e){function t(e){o(this,t),l(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={ecode:0},this.confirm=this.confirm.bind(this),this.cancel=this.cancel.bind(this)}return a(t,e),i(t,[{key:"confirm",value:function(){var e,t,n,r,o,a,i;return regeneratorRuntime.async(function(l){for(;;)switch(l.prev=l.next){case 0:return e=this.props,t=e.close,n=e.del,r=e.data,o=e.detailClose,a=void 0===o?null:o,l.next=8,regeneratorRuntime.awrap(n(r.id));case 8:i=l.sent,this.setState({ecode:i}),0===i&&(t(),a&&a(),d.notify.show("问题已删除。","success",2e3));case 11:case"end":return l.stop()}},null,this)}},{key:"cancel",value:function(){var e=this.props.close;e()}},{key:"render",value:function(){var e=this.props,t=e.i18n.errMsg,n=e.data,r=e.loading;return u.default.createElement(c.Modal,{show:!0,onHide:this.cancel,backdrop:"static","aria-labelledby":"contained-modal-title-sm"},u.default.createElement(c.Modal.Header,{closeButton:!0},u.default.createElement(c.Modal.Title,{id:"contained-modal-title-la"},"删除问题 - ",n.no)),u.default.createElement(c.Modal.Body,null,"确认要删除此问题？",u.default.createElement("br",null),u.default.createElement("br",null),'如果您完成了这个问题，通常是"解决"或者"关闭"此问题，而不是删除。',u.default.createElement("br",null),"如果此问题有子问题也将一并被删除。",u.default.createElement("br",null)),u.default.createElement(c.Modal.Footer,null,u.default.createElement("span",{className:"ralign"},0!==this.state.ecode&&!r&&t[this.state.ecode]),u.default.createElement("img",{src:p,className:r?"loading":"hide"}),u.default.createElement(c.Button,{disabled:r,onClick:this.confirm},"确定"),u.default.createElement(c.Button,{bsStyle:"link",disabled:r,onClick:this.cancel},"取消")))}}],[{key:"propTypes",value:{i18n:s.PropTypes.object.isRequired,close:s.PropTypes.func.isRequired,detailClose:s.PropTypes.func,loading:s.PropTypes.bool.isRequired,del:s.PropTypes.func.isRequired,data:s.PropTypes.object.isRequired},enumerable:!0}]),t}(s.Component);t.default=f,e.exports=t.default}).call(this)}finally{}},187:function(e,t,n){try{(function(){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(e,t,n){for(var r=!0;r;){var o=e,a=t,i=n;r=!1,null===o&&(o=Function.prototype);var l=Object.getOwnPropertyDescriptor(o,a);if(void 0!==l){if("value"in l)return l.value;var s=l.get;if(void 0===s)return;return s.call(i)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=a,n=i,r=!0,l=u=void 0}},u=n(1),c=r(u),d=n(8),p=n(2),f=n(7),m=r(f),h=n(3),y=r(h),g=n(38),v=r(g),b=n(5),w=n(4),E=function(e,t){var n={};return e.parent_id||(n.parent_id="必填"),n},k=function(e){function t(e){o(this,n),s(Object.getPrototypeOf(n.prototype),"constructor",this).call(this,e),this.state={ecode:0},this.handleSubmit=this.handleSubmit.bind(this),this.handleCancel=this.handleCancel.bind(this)}a(t,e),l(t,[{key:"handleSubmit",value:function(){var e,t,n,r,o,a;return regeneratorRuntime.async(function(l){for(;;)switch(l.prev=l.next){case 0:return e=this.props,t=e.values,n=e.move,r=e.close,o=e.issue,l.next=7,regeneratorRuntime.awrap(n(o.id,i({},t,{parent_id:t.parent_id&&t.parent_id.id||""})));case 7:a=l.sent,0===a?(this.setState({ecode:0}),r(),b.notify.show("移动完成。","success",2e3)):this.setState({ecode:a});case 9:case"end":return l.stop()}},null,this)}},{key:"handleCancel",value:function(){var e=this.props,t=e.close,n=e.submitting;n||(this.setState({ecode:0}),t())}},{key:"searchIssue",value:function(e){var t,n,r,o,a,i,l,s,u;return regeneratorRuntime.async(function(c){for(;;)switch(c.prev=c.next){case 0:if(e=e.toLowerCase()){c.next=3;break}return c.abrupt("return",{options:[]});case 3:return t=this.props,n=t.issue,r=t.options.types,o=void 0===r?[]:r,a=t.project,i=new v.default,l=10,c.next=12,regeneratorRuntime.awrap(i.request({url:"/project/"+a.key+"/issue/search?s="+e+"&type=standard&limit="+l}));case 12:return s=c.sent,u=[],s.data.length>0&&y.default.map(s.data,function(e){e.id!=n.parent_id&&u.push({id:e.id,name:y.default.find(o,{id:e.type}).name+"/"+e.no+" - "+e.title})}),c.abrupt("return",{options:u});case 16:case"end":return c.stop()}},null,this)}},{key:"render",value:function(){var e=this.props,t=e.i18n.errMsg,n=e.fields.parent_id,r=e.handleSubmit,o=e.invalid,a=e.submitting,i=e.issue;return c.default.createElement(p.Modal,{show:!0,onHide:this.handleCancel,backdrop:"static","aria-labelledby":"contained-modal-title-sm"},c.default.createElement(p.Modal.Header,{closeButton:!0},c.default.createElement(p.Modal.Title,{id:"contained-modal-title-la"},"移动子问题 - "+i.no)),c.default.createElement("form",{onSubmit:r(this.handleSubmit),onKeyDown:function(e){13==e.keyCode&&e.preventDefault()}},c.default.createElement(p.Modal.Body,null,c.default.createElement("div",{className:"info-col",style:{marginBottom:"15px",marginTop:"5px"}},c.default.createElement("div",{className:"info-icon"},c.default.createElement("i",{className:"fa fa-info-circle"})),c.default.createElement("div",{className:"info-content"},"仅支持子项目在不同父项目间的移动。")),c.default.createElement(p.FormGroup,{controlId:"formControlsText",validationState:n.touched&&n.error?"error":null},c.default.createElement(p.ControlLabel,null,c.default.createElement("span",{className:"txt-impt"},"*"),"移动到"),c.default.createElement(m.default.Async,{clearable:!1,disabled:a,options:[],value:n.value,onChange:function(e){n.onChange(e)},valueKey:"id",labelKey:"name",loadOptions:this.searchIssue.bind(this),placeholder:"输入问题号或名称"}),n.touched&&n.error&&c.default.createElement(p.HelpBlock,{style:{"float":"right"}},n.error))),c.default.createElement(p.Modal.Footer,null,c.default.createElement("span",{className:"ralign"},0!==this.state.ecode&&!a&&t[this.state.ecode]),c.default.createElement("img",{src:w,className:a?"loading":"hide"}),c.default.createElement(p.Button,{disabled:a||o,type:"submit"},"确定"),c.default.createElement(p.Button,{bsStyle:"link",disabled:a,onClick:this.handleCancel},"取消"))))}}],[{key:"propTypes",value:{i18n:u.PropTypes.object.isRequired,options:u.PropTypes.object.isRequired,project:u.PropTypes.object.isRequired,issue:u.PropTypes.object.isRequired,submitting:u.PropTypes.bool,invalid:u.PropTypes.bool,values:u.PropTypes.object,fields:u.PropTypes.object,handleSubmit:u.PropTypes.func.isRequired,move:u.PropTypes.func.isRequired,close:u.PropTypes.func.isRequired},enumerable:!0}]);var n=t;return t=(0,d.reduxForm)({form:"move",fields:["parent_id"],validate:E})(t)||t}(u.Component);t.default=k,e.exports=t.default}).call(this)}finally{}},188:function(e,t,n){try{(function(){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function(e,t,n){for(var r=!0;r;){var o=e,a=t,i=n;r=!1,null===o&&(o=Function.prototype);var l=Object.getOwnPropertyDescriptor(o,a);if(void 0!==l){if("value"in l)return l.value;var s=l.get;if(void 0===s)return;return s.call(i)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=a,n=i,r=!0,l=u=void 0}},s=n(1),u=r(s),c=n(8),d=n(2),p=n(7),f=r(p),m=n(3),h=r(m),y=n(5),g=n(4),v=function(e,t){var n={};return e.assignee||(n.assignee="必填"),n},b=function(e){function t(e){o(this,n),l(Object.getPrototypeOf(n.prototype),"constructor",this).call(this,e),this.state={ecode:0},this.handleSubmit=this.handleSubmit.bind(this),this.cancel=this.cancel.bind(this)}a(t,e),i(t,[{key:"handleSubmit",value:function(){var e,t,n,r,o,a;return regeneratorRuntime.async(function(i){for(;;)switch(i.prev=i.next){case 0:return e=this.props,t=e.close,n=e.values,r=e.resetState,o=e.issue,i.next=7,regeneratorRuntime.awrap(r(o.id,n));case 7:a=i.sent,0===a?(this.setState({ecode:0}),t(),y.notify.show("问题已重置。","success",2e3)):this.setState({ecode:a});case 9:case"end":return i.stop()}},null,this)}},{key:"cancel",value:function(){var e=this.props.close;e()}},{key:"componentWillMount",
value:function(){var e=this.props,t=e.initializeForm,n=e.issue,r={resolution:n.resolution,assignee:n.assignee.id};t(r)}},{key:"render",value:function(){var e=this.props,t=e.i18n.errMsg,n=e.fields,r=n.assignee,o=n.resolution,a=e.options,i=e.issue,l=e.handleSubmit,s=e.invalid,c=e.submitting,p=h.default.map(a.assignees||[],function(e){return{label:e.name+"("+e.email+")",value:e.id}}),m=h.default.map(a.resolutions,function(e){return{label:e.name,value:e.id}});return u.default.createElement(d.Modal,{show:!0,onHide:this.cancel,backdrop:"static","aria-labelledby":"contained-modal-title-sm"},u.default.createElement(d.Modal.Header,{closeButton:!0},u.default.createElement(d.Modal.Title,{id:"contained-modal-title-la"},"重置状态 - "+i.no)),u.default.createElement("form",{onSubmit:l(this.handleSubmit),onKeyDown:function(e){13==e.keyCode&&e.preventDefault()}},u.default.createElement(d.Modal.Body,null,u.default.createElement("div",{className:"info-col",style:{marginTop:"5px"}},u.default.createElement("div",{className:"info-icon"},u.default.createElement("i",{className:"fa fa-info-circle"})),u.default.createElement("div",{className:"info-content"},"如重置此问题，原来的流程信息将会丢失，状态被初始化为开始值。")),u.default.createElement(d.FormGroup,{controlId:"formControlsText",validationState:r.touched&&r.error?"error":null},u.default.createElement(d.ControlLabel,null,u.default.createElement("span",{className:"txt-impt"},"*"),"分配给"),u.default.createElement(f.default,{simpleValue:!0,clearable:!1,disabled:c,options:p,value:r.value||null,onChange:function(e){r.onChange(e)},placeholder:"选择负责人"}),r.touched&&r.error&&u.default.createElement(d.HelpBlock,{style:{"float":"right"}},r.error)),u.default.createElement(d.FormGroup,{controlId:"formControlsText",validationState:o.touched&&o.error?"error":null},u.default.createElement(d.ControlLabel,null,"解决结果"),u.default.createElement(f.default,{simpleValue:!0,clearable:!1,disabled:c,options:m,value:o.value||null,onChange:function(e){o.onChange(e)},placeholder:"选择解决结果"}),r.touched&&r.error&&u.default.createElement(d.HelpBlock,{style:{"float":"right"}},r.error))),u.default.createElement(d.Modal.Footer,null,u.default.createElement("span",{className:"ralign"},0!==this.state.ecode&&!c&&t[this.state.ecode]),u.default.createElement("img",{src:g,className:c?"loading":"hide"}),u.default.createElement(d.Button,{disabled:c||s,type:"submit"},"确定"),u.default.createElement(d.Button,{bsStyle:"link",disabled:c,onClick:this.cancel},"取消"))))}}],[{key:"propTypes",value:{i18n:s.PropTypes.object.isRequired,options:s.PropTypes.object.isRequired,submitting:s.PropTypes.bool,invalid:s.PropTypes.bool,values:s.PropTypes.object,fields:s.PropTypes.object,handleSubmit:s.PropTypes.func.isRequired,initializeForm:s.PropTypes.func.isRequired,close:s.PropTypes.func.isRequired,resetState:s.PropTypes.func.isRequired,issue:s.PropTypes.object.isRequired},enumerable:!0}]);var n=t;return t=(0,c.reduxForm)({form:"resetstate",fields:["assignee","resolution"],validate:v})(t)||t}(s.Component);t.default=b,e.exports=t.default}).call(this)}finally{}},189:function(e,t,n){try{(function(){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function(e,t,n){for(var r=!0;r;){var o=e,a=t,i=n;r=!1,null===o&&(o=Function.prototype);var l=Object.getOwnPropertyDescriptor(o,a);if(void 0!==l){if("value"in l)return l.value;var s=l.get;if(void 0===s)return;return s.call(i)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=a,n=i,r=!0,l=u=void 0}},s=n(1),u=r(s),c=n(8),d=n(2),p=n(7),f=r(p),m=n(140),h=r(m),y=n(3),g=r(y),v=n(5),b=n(4),w=function(e){function t(e){o(this,n),l(Object.getPrototypeOf(n.prototype),"constructor",this).call(this,e),this.state={ecode:0},this.handleSubmit=this.handleSubmit.bind(this),this.handleCancel=this.handleCancel.bind(this)}a(t,e),i(t,[{key:"handleSubmit",value:function(){var e,t,n,r,o,a,i,l,s;return regeneratorRuntime.async(function(u){for(;;)switch(u.prev=u.next){case 0:return e=this.props,t=e.values,n=e.addLabels,r=e.setLabels,o=e.close,a=e.issue,i=[],l=[],g.default.isArray(t.labels)?(i=g.default.uniq(g.default.map(g.default.filter(t.labels,function(e){return!!e.className}),function(e){return g.default.trim(e.value)})),l=g.default.uniq(g.default.map(t.labels,function(e){return g.default.trim(e.value)}))):l=t.labels?t.labels.split(","):[],u.next=11,regeneratorRuntime.awrap(r(a.id,{labels:l}));case 11:s=u.sent,0===s&&(i.length>0&&n(i),o(),v.notify.show("已设置。","success",2e3)),this.setState({ecode:s});case 14:case"end":return u.stop()}},null,this)}},{key:"handleCancel",value:function(){var e=this.props,t=e.close,n=e.submitting;n||(this.setState({ecode:0}),t())}},{key:"componentWillMount",value:function(){var e=this.props,t=e.initializeForm,n=e.options,r=e.issue;t(n.permissions&&n.permissions.indexOf("manage_project")!==-1?{labels:g.default.map(r.labels||[],function(e){return{value:e,label:e}})}:{labels:(r.labels||[]).join(",")})}},{key:"render",value:function(){var e=this.props,t=e.i18n.errMsg,n=e.fields.labels,r=e.handleSubmit,o=e.invalid,a=e.submitting,i=e.issue,l=e.options,s=g.default.map(l.labels||[],function(e){return{label:e.name,value:e.name}});return u.default.createElement(d.Modal,{show:!0,onHide:this.handleCancel,backdrop:"static","aria-labelledby":"contained-modal-title-sm"},u.default.createElement(d.Modal.Header,{closeButton:!0},u.default.createElement(d.Modal.Title,{id:"contained-modal-title-la"},"设置标签 - "+i.no)),u.default.createElement("form",{onSubmit:r(this.handleSubmit),onKeyDown:function(e){13==e.keyCode&&e.preventDefault()}},u.default.createElement(d.Modal.Body,null,u.default.createElement(d.FormGroup,{controlId:"formControlsText"},u.default.createElement(d.ControlLabel,null,"标签"),l.permissions&&l.permissions.indexOf("manage_project")!==-1?u.default.createElement(h.default,{multi:!0,value:n.value,clearable:!1,onChange:function(e){n.onChange(e)},options:s,placeholder:"选择或输入标签"}):u.default.createElement("div",null,u.default.createElement(f.default,{multi:!0,simpleValue:!0,clearable:!1,disabled:a,options:s,value:n.value,onChange:function(e){n.onChange(e)},placeholder:"选择标签"}),u.default.createElement("div",null,u.default.createElement("span",{style:{fontSize:"12px"}},"拥有项目管理权限的用户才可创建新的标签。"))))),u.default.createElement(d.Modal.Footer,null,u.default.createElement("span",{className:"ralign"},0!==this.state.ecode&&!a&&t[this.state.ecode]),u.default.createElement("img",{src:b,className:a?"loading":"hide"}),u.default.createElement(d.Button,{disabled:a||o,type:"submit"},"确定"),u.default.createElement(d.Button,{bsStyle:"link",disabled:a,onClick:this.handleCancel},"取消"))))}}],[{key:"propTypes",value:{i18n:s.PropTypes.object.isRequired,options:s.PropTypes.object.isRequired,issue:s.PropTypes.object.isRequired,submitting:s.PropTypes.bool,invalid:s.PropTypes.bool,values:s.PropTypes.object,fields:s.PropTypes.object,handleSubmit:s.PropTypes.func.isRequired,initializeForm:s.PropTypes.func.isRequired,setLabels:s.PropTypes.func.isRequired,addLabels:s.PropTypes.func.isRequired,close:s.PropTypes.func.isRequired},enumerable:!0}]);var n=t;return t=(0,c.reduxForm)({form:"lables",fields:["labels"]})(t)||t}(s.Component);t.default=w,e.exports=t.default}).call(this)}finally{}},190:function(e,t,n){try{(function(){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function(e,t,n){for(var r=!0;r;){var o=e,a=t,i=n;r=!1,null===o&&(o=Function.prototype);var l=Object.getOwnPropertyDescriptor(o,a);if(void 0!==l){if("value"in l)return l.value;var s=l.get;if(void 0===s)return;return s.call(i)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=a,n=i,r=!0,l=u=void 0}},s=n(1),u=r(s),c=n(2),d="/actionview",p=function(e){function t(e){o(this,t),l(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e);var n=window.location.protocol,r=window.location.host;this.state={url:n+"//"+r+d+"/project/"+e.project.key+"/issue?no="+e.issue.no}}return a(t,e),i(t,[{key:"copy",value:function(){document.getElementById("url").select(),document.execCommand("Copy");var e=this.props.close;e()}},{key:"render",value:function(){var e=this.props,t=e.issue,n=e.close;return u.default.createElement(c.Modal,{show:!0,onHide:n,backdrop:"static","aria-labelledby":"contained-modal-title-sm"},u.default.createElement(c.Modal.Header,{closeButton:!0},u.default.createElement(c.Modal.Title,{id:"contained-modal-title-la"},"分享链接 - ",t.no)),u.default.createElement(c.Modal.Body,null,u.default.createElement(c.FormControl,{id:"url",componentClass:"textarea",style:{height:"100px"},value:this.state.url})),u.default.createElement(c.Modal.Footer,null,u.default.createElement("span",{style:{marginRight:"20px",fontSize:"12px"}},"若当前浏览器不支持此复制功能，可手动复制以上链接。"),u.default.createElement(c.Button,{onClick:this.copy.bind(this)},"复制"),u.default.createElement(c.Button,{bsStyle:"link",onClick:n},"关闭")))}}],[{key:"propTypes",value:{close:s.PropTypes.func.isRequired,project:s.PropTypes.object.isRequired,issue:s.PropTypes.object.isRequired},enumerable:!0}]),t}(s.Component);t.default=p,e.exports=t.default}).call(this)}finally{}},191:function(e,t,n){try{(function(){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function(e,t,n){for(var r=!0;r;){var o=e,a=t,i=n;r=!1,null===o&&(o=Function.prototype);var l=Object.getOwnPropertyDescriptor(o,a);if(void 0!==l){if("value"in l)return l.value;var s=l.get;if(void 0===s)return;return s.call(i)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=a,n=i,r=!0,l=u=void 0}},s=n(1),u=r(s),c=n(2),d=n(88),p=n(52),f=r(p),m=n(3),h=r(m),y=n(5),g=n(6),v=n(4),b=function(e){function t(e){o(this,t),l(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e);var n=this.props.data,r=void 0===n?{}:n,a={};r.id?(r.started_at||(a.started_at="必填"),r.spend||(a.spend="必填"),"3"!=r.adjust_type||r.leave_estimate&&""!=h.default.trim(r.leave_estimate)?"4"!=r.adjust_type||r.cut||(a.cut="必填"):a.leave_estimate="必填"):a.spend="必填";var i={},s={};s.started_at=i.started_at=r.started_at?g.unix(r.started_at):g(),s.spend=i.spend=r.spend||"",s.adjust_type=i.adjust_type=r.adjust_type||"1",s.leave_estimate=i.leave_estimate=r.leave_estimate||"",s.cut=i.cut=r.cut||"",s.comments=i.comments=r.comments||"",this.state={ecode:0,errors:a,values:i,oldValues:s,touched:{}},this.changeStartedAt=this.changeStartedAt.bind(this),this.changeType=this.changeType.bind(this),this.changeTT=this.changeTT.bind(this),this.confirm=this.confirm.bind(this),this.cancel=this.cancel.bind(this)}return a(t,e),i(t,[{key:"confirm",value:function(){var e,t,n,r,o,a,i,l,s;return regeneratorRuntime.async(function(u){for(var c=this;;)switch(u.prev=u.next){case 0:if(e=this.props,t=e.issue,n=e.close,r=e.add,o=e.edit,a=e.data,i=void 0===a?{}:a,l=0,!i.id){u.next=13;break}return u.next=11,regeneratorRuntime.awrap(function(){var e;return regeneratorRuntime.async(function(r){for(var a=this;;)switch(r.prev=r.next){case 0:return e={},h.default.mapKeys(this.state.values,function(t,n){"started_at"==n?t.isSame(a.state.oldValues[n])||(e[n]=a.state.values[n]):h.default.isEqual(t,a.state.oldValues[n])||(e[n]=a.state.values[n])}),e.started_at&&(e.started_at=parseInt(g(this.state.values.started_at).format("X"))),(e.leave_estimate||e.cut)&&(e.adjust_type=this.state.values.adjust_type),r.next=6,regeneratorRuntime.awrap(o(t.id,i.id,e));case 6:l=r.sent,this.setState({ecode:l}),0===l&&(n(),y.notify.show("日志已更新。","success",2e3));case 9:case"end":return r.stop()}},null,c)}());case 11:u.next=20;break;case 13:return s=h.default.clone(this.state.values),s.started_at=parseInt(g(this.state.values.started_at).format("X")),u.next=17,regeneratorRuntime.awrap(r(t.id,s));case 17:l=u.sent,this.setState({ecode:l}),0===l&&(n(),y.notify.show("已添加日志。","success",2e3));case 20:case"end":return u.stop()}},null,this)}},{key:"ttTest",value:function(e){var t=h.default.trim(e),n=t.split(" "),r=!0;return h.default.map(n,function(e){if(e){h.default.endsWith(e.toLowerCase(),"w")||h.default.endsWith(e.toLowerCase(),"d")||h.default.endsWith(e.toLowerCase(),"h")||h.default.endsWith(e.toLowerCase(),"m")||(r=!1);var t=e.substr(0,e.length-1);(t&&isNaN(t)||t<0)&&(r=!1)}}),r}},{key:"changeTT",value:function(e,t){e.target.value?this.ttTest(e.target.value)?delete this.state.errors[t]:this.state.errors[t]="格式有误":this.state.errors[t]="必填",this.state.values[t]=e.target.value,this.setState({values:this.state.values,errors:this.state.errors,touched:this.state.touched})}},{key:"changeStartedAt",value:function(e){e?g(e).isValid()?delete this.state.errors.started_at:this.state.errors.started_at="格式有误":this.state.errors.started_at="必填",this.state.touched.started_at=!0,this.state.values.started_at=e,this.setState({values:this.state.values,errors:this.state.errors,touched:this.state.touched})}},{key:"changeType",value:function(e){this.state.values.adjust_type=e,this.state.values.leave_estimate="",delete this.state.touched.leave_estimate,delete this.state.errors.leave_estimate,this.state.values.cut="",delete this.state.touched.cut,delete this.state.errors.cut,"3"==e?this.state.errors.leave_estimate="必填":"4"==e&&(this.state.errors.cut="必填"),this.setState({values:this.state.values,errors:this.state.errors,touched:this.state.touched})}},{key:"cancel",value:function(){var e=this.props.close;e()}},{key:"render",value:function(){var e=this,t=this.props,n=t.i18n.errMsg,r=t.data,o=void 0===r?{}:r,a=t.loading,i=t.issue,l={display:"inline-block",width:"40%"},s={display:"inline-block",width:"40%",borderColor:"#a94442"};return u.default.createElement(c.Modal,{show:!0,onHide:this.cancel,backdrop:"static","aria-labelledby":"contained-modal-title-sm"},u.default.createElement(c.Modal.Header,{closeButton:!0},u.default.createElement(c.Modal.Title,{id:"contained-modal-title-la"},o.id?"编辑工作日志":"添加工作日志"+(i.no?" - "+i.no:""))),u.default.createElement(c.Modal.Body,null,u.default.createElement(c.Form,{horizontal:!0,style:{marginTop:"15px"}},u.default.createElement(c.FormGroup,{validationState:this.state.touched.started_at&&this.state.errors.started_at?"error":null},u.default.createElement(c.Col,{sm:3,componentClass:c.ControlLabel},u.default.createElement("span",{className:"txt-impt"},"*")," 开始时间"),u.default.createElement(c.Col,{sm:6},u.default.createElement(f.default,{type:"text",mode:"date",locale:"zh-cn",dateFormat:"YYYY/MM/DD",timeFormat:"HH:mm",value:this.state.values.started_at,onChange:function(t){e.changeStartedAt(t)}})),u.default.createElement(c.Col,{sm:2,componentClass:c.ControlLabel,style:{textAlign:"left"}},this.state.touched.started_at&&(this.state.errors.started_at||""))),u.default.createElement(c.FormGroup,{controlId:"formControlsLabel",validationState:this.state.touched.spend&&this.state.errors.spend?"error":null},u.default.createElement(c.Col,{sm:3,componentClass:c.ControlLabel},u.default.createElement("span",{className:"txt-impt"},"*")," 耗费时间"),u.default.createElement(c.Col,{sm:5},u.default.createElement(c.FormControl,{type:"text",value:this.state.values.spend,onChange:function(t){e.changeTT(t,"spend")},onBlur:function(t){e.state.touched.spend=!0,e.setState({touched:e.state.touched})},placeholder:"例如：3w 4d 5h"})),u.default.createElement(c.Col,{sm:2,componentClass:c.ControlLabel,style:{textAlign:"left"}},this.state.touched.spend&&(this.state.errors.spend||""))),u.default.createElement(c.FormGroup,{controlId:"formControlsLabel"},u.default.createElement(c.Col,{sm:3,componentClass:c.ControlLabel},"剩余时间"),u.default.createElement(c.Col,{sm:9},u.default.createElement(d.RadioGroup,{style:{marginTop:"6px"},selectedValue:this.state.values.adjust_type,onChange:function(t){e.changeType(t)},name:"adjust_type"},u.default.createElement("ul",{className:"list-unstyled clearfix",style:{lineHeight:"40px"}},u.default.createElement("li",null,u.default.createElement(d.Radio,{value:"1"})," 自动调整"),u.default.createElement("li",null,u.default.createElement(d.Radio,{value:"2"})," 现有剩余预估时间不变"),u.default.createElement("li",null,u.default.createElement(d.Radio,{value:"3"}),u.default.createElement("span",null," 设置为 "),u.default.createElement(c.FormControl,{type:"text",value:this.state.values.leave_estimate,disabled:"3"!=this.state.values.adjust_type,placeholder:"例如：3w 4d 5h",style:this.state.touched.leave_estimate&&this.state.errors.leave_estimate?s:l,onBlur:function(t){e.state.touched.leave_estimate=!0,e.setState({touched:e.state.touched})},onChange:function(t){e.changeTT(t,"leave_estimate")}}),u.default.createElement("span",{style:{marginLeft:"10px",color:"#a94442",fontWeight:"bold"}},this.state.touched.leave_estimate&&(this.state.errors.leave_estimate||""))),u.default.createElement("li",null,u.default.createElement(d.Radio,{value:"4"}),u.default.createElement("span",null," 缩减 "),u.default.createElement(c.FormControl,{type:"text",disabled:"4"!=this.state.values.adjust_type,value:this.state.values.cut,onBlur:function(t){e.state.touched.cut=!0,e.setState({touched:e.state.touched})},onChange:function(t){e.changeTT(t,"cut")},placeholder:"例如：3w 4d 5h",style:{display:"inline-block",width:"40%"}}),u.default.createElement("span",{style:{marginLeft:"10px",color:"#a94442",fontWeight:"bold"}},this.state.touched.cut&&(this.state.errors.cut||""))))))),u.default.createElement(c.FormGroup,{controlId:"formControlsLabel"},u.default.createElement(c.Col,{sm:3,componentClass:c.ControlLabel},"备注"),u.default.createElement(c.Col,{sm:8},u.default.createElement(c.FormControl,{componentClass:"textarea",style:{height:"120px"},value:this.state.values.comments,onChange:function(t){e.state.values.comments=t.target.value,e.setState({values:e.state.values})}}))))),u.default.createElement(c.Modal.Footer,null,u.default.createElement("span",{className:"ralign"},0!==this.state.ecode&&!a&&n[this.state.ecode]),u.default.createElement("img",{src:v,className:a?"loading":"hide"}),u.default.createElement(c.Button,{disabled:h.default.isEqual(this.state.oldValues,this.state.values)||a||!h.default.isEmpty(this.state.errors),onClick:this.confirm},"确定"),u.default.createElement(c.Button,{bsStyle:"link",disabled:a,onClick:this.cancel},"取消")))}}],[{key:"propTypes",value:{i18n:s.PropTypes.object.isRequired,issue:s.PropTypes.object.isRequired,close:s.PropTypes.func.isRequired,add:s.PropTypes.func,edit:s.PropTypes.func,loading:s.PropTypes.bool.isRequired,data:s.PropTypes.object},enumerable:!0}]),t}(s.Component);t.default=b,e.exports=t.default}).call(this)}finally{}},221:function(e,t,n){try{(function(){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function(e,t,n){for(var r=!0;r;){var o=e,a=t,i=n;r=!1,null===o&&(o=Function.prototype);var l=Object.getOwnPropertyDescriptor(o,a);if(void 0!==l){if("value"in l)return l.value;var s=l.get;if(void 0===s)return;return s.call(i)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=a,n=i,r=!0,l=u=void 0}},s=n(1),u=r(s),c=n(2),d=n(4),p=function(e){function t(e){o(this,t),l(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={ecode:0},this.confirm=this.confirm.bind(this),this.cancel=this.cancel.bind(this)}return a(t,e),i(t,[{key:"confirm",value:function(){var e,t,n,r,o;return regeneratorRuntime.async(function(a){for(;;)switch(a.prev=a.next){case 0:return e=this.props,t=e.close,n=e.del,r=e.data,a.next=6,regeneratorRuntime.awrap(n(r.field_key,r.id));case 6:o=a.sent,0===o?(this.setState({ecode:0}),t()):this.setState({ecode:o});case 8:case"end":return a.stop()}},null,this)}},{key:"cancel",value:function(){var e=this.props.close;e()}},{key:"render",value:function(){var e=this.props,t=e.i18n.errMsg,n=e.data,r=e.loading;return u.default.createElement(c.Modal,{show:!0,onHide:this.cancel,backdrop:"static","aria-labelledby":"contained-modal-title-sm"},u.default.createElement(c.Modal.Header,{closeButton:!0},u.default.createElement(c.Modal.Title,{id:"contained-modal-title-la"},"删除文件")),u.default.createElement(c.Modal.Body,null,"确认要删除【",n.name,"】此文件？"),u.default.createElement(c.Modal.Footer,null,u.default.createElement("span",{className:"ralign"},0!==this.state.ecode&&!r&&t[this.state.ecode]),u.default.createElement("img",{src:d,className:r?"loading":"hide"}),u.default.createElement(c.Button,{disabled:r,onClick:this.confirm},"确定"),u.default.createElement(c.Button,{bsStyle:"link",disabled:r,onClick:this.cancel},"取消")))}}],[{key:"propTypes",value:{i18n:s.PropTypes.object.isRequired,close:s.PropTypes.func.isRequired,del:s.PropTypes.func.isRequired,loading:s.PropTypes.bool.isRequired,data:s.PropTypes.object.isRequired},enumerable:!0}]),t}(s.Component);t.default=p,e.exports=t.default}).call(this)}finally{}},222:function(e,t,n){try{(function(){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function(e,t,n){for(var r=!0;r;){var o=e,a=t,i=n;r=!1,null===o&&(o=Function.prototype);var l=Object.getOwnPropertyDescriptor(o,a);if(void 0!==l){if("value"in l)return l.value;var s=l.get;if(void 0===s)return;return s.call(i)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=a,n=i,r=!0,l=u=void 0}},s=n(1),u=r(s),c=n(2),d=n(5),p=n(4),f=function(e){function t(e){o(this,t),l(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={ecode:0},this.confirm=this.confirm.bind(this),this.cancel=this.cancel.bind(this)}return a(t,e),i(t,[{key:"confirm",value:function(){var e,t,n,r,o;return regeneratorRuntime.async(function(a){for(;;)switch(a.prev=a.next){case 0:return e=this.props,t=e.close,n=e.delLink,r=e.data,a.next=6,regeneratorRuntime.awrap(n(r.id));case 6:o=a.sent,0===o?(this.setState({ecode:0}),t(),d.notify.show("链接已删除。","success",2e3)):this.setState({ecode:o});case 8:case"end":return a.stop()}},null,this)}},{key:"cancel",value:function(){var e=this.props.close;e()}},{key:"render",value:function(){var e=this.props,t=e.i18n.errMsg,n=e.data,r=e.loading;return u.default.createElement(c.Modal,{show:!0,onHide:this.cancel,backdrop:"static","aria-labelledby":"contained-modal-title-sm"},u.default.createElement(c.Modal.Header,{closeButton:!0},u.default.createElement(c.Modal.Title,{id:"contained-modal-title-la"},"删除链接")),u.default.createElement(c.Modal.Body,null,n.title,u.default.createElement("br",null),u.default.createElement("br",null),"确认要删除此链接？"),u.default.createElement(c.Modal.Footer,null,u.default.createElement("span",{className:"ralign"},0!==this.state.ecode&&!r&&t[this.state.ecode]),u.default.createElement("img",{src:p,className:r?"loading":"hide"}),u.default.createElement(c.Button,{disabled:r,onClick:this.confirm},"确定"),u.default.createElement(c.Button,{bsStyle:"link",disabled:r,onClick:this.cancel},"取消")))}}],[{key:"propTypes",value:{i18n:s.PropTypes.object.isRequired,close:s.PropTypes.func.isRequired,delLink:s.PropTypes.func.isRequired,loading:s.PropTypes.bool.isRequired,data:s.PropTypes.object.isRequired},enumerable:!0}]),t}(s.Component);t.default=f,e.exports=t.default}).call(this)}finally{}},223:function(e,t,n){try{(function(){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(e,t,n){for(var r=!0;r;){var o=e,a=t,i=n;r=!1,null===o&&(o=Function.prototype);var l=Object.getOwnPropertyDescriptor(o,a);if(void 0!==l){if("value"in l)return l.value;var s=l.get;if(void 0===s)return;return s.call(i)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=a,n=i,r=!0,l=u=void 0}},u=n(1),c=r(u),d=n(2),p=n(21),f=n(61),m=r(f),h=n(45),y=r(h),g=n(7),v=r(g),b=n(3),w=r(b),E=n(5),k=n(20),_=n(19),x=n(108),C=n(107),S=n(15),T=n(6),P=(n(91),n(106)),O=n(227),R=n(232),M=n(231),j=n(234),F=n(137),N=n(4),q=n(97),I=n(221),L=n(224),A=n(222),D=n(184),B=n(183),H=n(187),W=n(182),z=n(189),V=n(190),G=n(188),K=n(226),U=n(186),Y=n(185),Z=n(225),X=n(181),$=function(e){function t(e){a(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={tabKey:1,delFileShow:!1,selectedFile:{},inlinePreviewShow:{},previewShow:{},photoIndex:0,newAssignee:null,editAssignee:!1,editModalShow:!1,previewModalShow:!1,subtaskShow:!0,linkShow:!0,linkIssueModalShow:!1,delLinkModalShow:!1,delLinkData:{},createSubtaskModalShow:!1,moveModalShow:!1,convertTypeModalShow:!1,convertType2ModalShow:!1,assignModalShow:!1,setLabelsModalShow:!1,shareModalShow:!1,resetModalShow:!1,workflowScreenShow:!1,workflowCommentsShow:!1,delNotifyShow:!1,copyModalShow:!1,watchersModalShow:!1,periodModalShow:!1,newItemValues:[],editingItems:[],action_id:""},this.isAllowable=this.isAllowable.bind(this),this.delFileModalClose=this.delFileModalClose.bind(this),this.uploadSuccess=this.uploadSuccess.bind(this),this.goTo=this.goTo.bind(this),this.watch=this.watch.bind(this),this.getLabelStyle=this.getLabelStyle.bind(this),this.createLightbox=this.createLightbox.bind(this),this.getRichTextItemContents=this.getRichTextItemContents.bind(this),this.getTextAreaItemContents=this.getTextAreaItemContents.bind(this)}return i(t,e),l(t,[{key:"componentWillReceiveProps",value:function(e){e.itemLoading&&this.setState({tabKey:1,editAssignee:!1,editingItems:[]})}},{key:"isAllowable",value:function(e,t){var n=this.props,r=n.options,o=n.user;return!!r.permissions&&(e.indexOf("_self_")!==-1?t==o.id&&r.permissions.indexOf(e)!==-1:r.permissions.indexOf(e)!==-1)}},{key:"handleTabSelect",value:function(e){var t=this.props,n=t.indexComments,r=t.indexHistory,o=t.indexGitCommits,a=t.indexWorklog,i=t.commentsLoaded,l=t.historyLoaded,s=t.gitCommitsLoaded,u=t.worklogLoaded,c=t.data;this.setState({tabKey:e}),2!==e||i?3!==e||l?4!==e||u?5!==e||s||o(c.id):a(c.id):r(c.id):n(c.id)}},{key:"delFileNotify",value:function(e,t,n){this.setState({delFileShow:!0,selectedFile:{field_key:e,id:t,name:n}})}},{key:"delFileModalClose",value:function(){this.setState({delFileShow:!1})}},{key:"uploadSuccess",value:function(e,t){var n=this.props.addFile;if(0===t.ecode&&t.data){var r=t.data,o=r.field,a=void 0===o?"":o,i=r.file,l=void 0===i?{}:i;n(a,l)}else E.notify.show("文档上传失败。","error",2e3)}},{key:"openPreview",value:function(e,t){this.props.options;this.isAllowable("download_file")?(this.state.previewShow[t]=!0,this.setState({previewShow:this.state.previewShow,photoIndex:e})):E.notify.show("权限不足。","error",2e3)}},{key:"viewWorkflow",value:function n(e){var t,r,n,o;return regeneratorRuntime.async(function(a){for(;;)switch(a.prev=a.next){case 0:if(e.preventDefault(),t=this.props,r=t.data,n=t.viewWorkflow,r.definition_id){a.next=6;break}return a.abrupt("return");case 6:return a.next=8,regeneratorRuntime.awrap(n(r.definition_id));case 8:o=a.sent,0===o?this.setState({previewModalShow:!0}):E.notify.show("预览失败。","error",2e3);case 10:case"end":return a.stop()}},null,this)}},{key:"assignToMe",value:function(e){var t,n,r,o;return regeneratorRuntime.async(function(a){for(;;)switch(a.prev=a.next){case 0:return e.preventDefault(),t=this.props,n=t.setAssignee,r=t.data,a.next=6,regeneratorRuntime.awrap(n(r.id,{assignee:"me"}));case 6:o=a.sent,0===o?E.notify.show("已分配给我。","success",2e3):E.notify.show("问题分配失败。","error",2e3);case 8:case"end":return a.stop()}},null,this)}},{key:"editAssignee",value:function(){this.setState({editAssignee:!0,newAssignee:null})}},{key:"setAssignee",value:function r(){var e,r,t,n;return regeneratorRuntime.async(function(o){for(;;)switch(o.prev=o.next){case 0:return e=this.props,r=e.setAssignee,t=e.data,o.next=5,regeneratorRuntime.awrap(r(t.id,{assignee:this.state.newAssignee}));case 5:n=o.sent,0===n?(this.setState({editAssignee:!1,newAssignee:null}),E.notify.show("问题已分配。","success",2e3)):E.notify.show("问题分配失败。","error",2e3);case 7:case"end":return o.stop()}},null,this)}},{key:"cancelSetAssignee",value:function(){this.setState({editAssignee:!1,newAssignee:null})}},{key:"setItemValue",value:function f(e,t){var n,f,r,a,i,l,s;return regeneratorRuntime.async(function(u){for(;;)switch(u.prev=u.next){case 0:return n=this.props,f=n.setItemValue,r=n.data,a=this.state,i=a.editingItems,l=a.newItemValues,u.next=8,regeneratorRuntime.awrap(f(r.id,o({},e,t)));
case 8:s=u.sent,0===s?(i[e]=!1,l[e]="",this.setState({editingItems:i,newItemValues:l}),E.notify.show("已更新。","success",2e3)):E.notify.show("更新失败。","error",2e3);case 10:case"end":return u.stop()}},null,this)}},{key:"cancelSetItem",value:function(e){var t=this.state,n=t.editingItems,r=t.newItemValues;n[e]=!1,r[e]="",this.setState({editingItems:n,newItemValues:r})}},{key:"handleAssigneeSelectChange",value:function(e){this.setState({newAssignee:e})}},{key:"editModalClose",value:function(){this.setState({editModalShow:!1})}},{key:"workflowScreenModalClose",value:function(){this.setState({workflowScreenShow:!1})}},{key:"workflowCommentsModalClose",value:function(){this.setState({workflowCommentsShow:!1})}},{key:"createSubtaskModalClose",value:function(){this.setState({createSubtaskModalShow:!1})}},{key:"next",value:function(e){var t,n,r,o,a,i,l,s;return regeneratorRuntime.async(function(u){for(;;)switch(u.prev=u.next){case 0:if(t=this.props,n=t.show,r=t.record,o=t.issueCollection,a=void 0===o?[]:o,!(e<a.length-1)){u.next=12;break}return i=w.default.add(e,1),l=a[i].id,u.next=10,regeneratorRuntime.awrap(n(l));case 10:s=u.sent,0===s?r():E.notify.show("问题信息获取失败。","error",2e3);case 12:case"end":return u.stop()}},null,this)}},{key:"previous",value:function(e){var t,n,r,o,a,i,l;return regeneratorRuntime.async(function(s){for(;;)switch(s.prev=s.next){case 0:if(t=this.props,n=t.show,r=t.record,o=t.issueCollection,a=void 0===o?[]:o,!(e>0)){s.next=11;break}return i=a[e-1].id,s.next=9,regeneratorRuntime.awrap(n(i));case 9:l=s.sent,0===l?r():E.notify.show("问题信息获取失败。","error",2e3);case 11:case"end":return s.stop()}},null,this)}},{key:"forward",value:function h(e){var t,n,h,r,o,a,i,l;return regeneratorRuntime.async(function(s){for(;;)switch(s.prev=s.next){case 0:if(t=this.props,n=t.show,h=t.forward,r=t.visitedIndex,o=t.visitedCollection,a=void 0===o?[]:o,i=w.default.add(r,e),!a[i]){s.next=12;break}return s.next=10,regeneratorRuntime.awrap(n(a[i]));case 10:l=s.sent,0===l&&h(e);case 12:case"end":return s.stop()}},null,this)}},{key:"operateSelect",value:function(e){var t,n,r,o,a,i;return regeneratorRuntime.async(function(l){for(;;)switch(l.prev=l.next){case 0:if(t=this.props,n=t.data,r=t.show,o=t.watch,a=0,"refresh"!=e){l.next=11;break}return l.next=8,regeneratorRuntime.awrap(r(n.id));case 8:a=l.sent,l.next=12;break;case 11:"assign"==e?this.setState({assignModalShow:!0}):"setLabels"==e?this.setState({setLabelsModalShow:!0}):"link"==e?this.setState({linkIssueModalShow:!0}):"createSubtask"==e?this.setState({createSubtaskModalShow:!0}):"convert2Subtask"==e?this.setState({convertType2ModalShow:!0}):"convert2Standard"==e?this.setState({convertTypeModalShow:!0}):"move"==e?this.setState({moveModalShow:!0}):"share"==e?this.setState({shareModalShow:!0}):"copy"==e?this.setState({copyModalShow:!0}):"reset"==e?this.setState({resetModalShow:!0}):"watch"==e?(i=n.watching,this.watch(n.id,!i)):"watchers"==e?this.setState({watchersModalShow:!0}):"del"==e&&this.setState({delNotifyShow:!0});case 12:case"end":return l.stop()}},null,this)}},{key:"watch",value:function g(e,t){var g,n;return regeneratorRuntime.async(function(r){for(;;)switch(r.prev=r.next){case 0:return g=this.props.watch,r.next=3,regeneratorRuntime.awrap(g(e,t));case 3:n=r.sent,0===n?t?E.notify.show("关注成功。","success",2e3):E.notify.show("已取消关注。","success",2e3):t?E.notify.show("关注失败。","error",2e3):E.notify.show("取消失败。","error",2e3);case 5:case"end":return r.stop()}},null,this)}},{key:"delLink",value:function(e){this.setState({delLinkModalShow:!0,delLinkData:e})}},{key:"goTo",value:function(e){var t,n,r,o;return regeneratorRuntime.async(function(a){for(;;)switch(a.prev=a.next){case 0:return t=this.props,n=t.show,r=t.record,a.next=5,regeneratorRuntime.awrap(n(e));case 5:o=a.sent,0===o?r():E.notify.show("问题信息获取失败。","error",2e3);case 7:case"end":return a.stop()}},null,this)}},{key:"doAction",value:function b(e){var t,b,n,r,o;return regeneratorRuntime.async(function(a){for(;;)switch(a.prev=a.next){case 0:if(t=this.props,b=t.doAction,n=t.data,r=w.default.find(n.wfactions||{},{id:e}),!r||!r.screen){a.next=8;break}this.setState({workflowScreenShow:!0,action_id:e}),a.next=12;break;case 8:return a.next=10,regeneratorRuntime.awrap(b(n.id,n.entry_id,{action_id:e}));case 10:o=a.sent,0===o?E.notify.show("提交完成。","success",2e3):E.notify.show("提交失败。","error",2e3);case 12:case"end":return a.stop()}},null,this)}},{key:"actionSelect",value:function(e){var t,n,r,o,a;return regeneratorRuntime.async(function(i){for(;;)switch(i.prev=i.next){case 0:if(t=this.props,n=t.data,r=t.doAction,o=w.default.find(n.wfactions||{},{id:e}),!o||!o.schema){i.next=8;break}this.setState({workflowScreenShow:!0,action_id:e}),i.next=12;break;case 8:return i.next=10,regeneratorRuntime.awrap(r(n.id,n.entry_id,{action_id:e}));case 10:a=i.sent,0===a?E.notify.show("提交完成。","success",2e3):E.notify.show("提交失败。","error",2e3);case 12:case"end":return i.stop()}},null,this)}},{key:"previewInlineImg",value:function(e){this.props.options;if(!this.isAllowable("download_file"))return void E.notify.show("权限不足。","error",2e3);var t=e.target.id;if(t){var n="",r=-1;0===t.indexOf("inlineimg-")&&(n=t.substring(10,t.lastIndexOf("-")),r=t.substr(t.lastIndexOf("-")+1)-0,this.state.inlinePreviewShow[n]=!0,this.setState({inlinePreviewShow:this.state.inlinePreviewShow,photoIndex:r}))}}},{key:"getLabelStyle",value:function(e){var t=this.props.options.labels,n=void 0===t?[]:t,r=w.default.find(n,{name:e}),o={};return r&&r.bgColor&&(o={backgroundColor:r.bgColor,borderColor:r.bgColor,border:"1px solid "+r.bgColor,color:"#fff"}),o}},{key:"createLightbox",value:function(e,t,n){var r=this,o=this.props.project;return c.default.createElement(y.default,{mainSrc:(0,k.urlWrapper)("/project/"+o.key+"/file/"+t[n].id),nextSrc:(0,k.urlWrapper)("/project/"+o.key+"/file/"+t[(n+1)%t.length].id),prevSrc:(0,k.urlWrapper)("/project/"+o.key+"/file/"+t[(n+t.length-1)%t.length].id),imageTitle:t[n].name,imageCaption:t[n].uploader.name+" 上传于 "+t[n].created_at,onCloseRequest:function(){r.state.previewShow[e]=!1,r.setState({previewShow:r.state.previewShow})},onMovePrevRequest:function(){return r.setState({photoIndex:(n+t.length-1)%t.length})},onMoveNextRequest:function(){return r.setState({photoIndex:(n+1)%t.length})}})}},{key:"getTextAreaItemContents",value:function(e,t,n,r,o){var a=this,i=this.state,l=i.editingItems,s=i.newItemValues,u=this.props,p=u.project,f=u.data;u.options;return l[t]?c.default.createElement("div",null,c.default.createElement(C.MultiRowsTextEditor,{id:"field-textarea-"+t,value:e||"",placeholder:"输入"+n+(o&&o>0?"(字数"+o+"字之内)":""),uploadUrl:(0,k.urlWrapper)("/project/"+p.key+"/file"),onChange:function(e){s[t]=e,a.setState({newItemValues:a.state.newItemValues})}}),c.default.createElement("div",{className:"edit-button-group"},c.default.createElement(d.Button,{className:"edit-ok-button",onClick:this.setItemValue.bind(this,t,s[t]),disabled:w.default.isEqual(e||"",s[t]||"")||r&&!s[t]||o&&o>0&&w.default.trim(s[t]||"").length>o},c.default.createElement("i",{className:"fa fa-check"})),c.default.createElement(d.Button,{className:"edit-cancel-button",onClick:function(){l[t]=!1,s[t]=e,a.setState({editingItems:l})}},c.default.createElement("i",{className:"fa fa-close"})))):c.default.createElement(C.MultiRowsTextReader,{isImgPreviewed:this.isAllowable("download_file"),isEditable:this.isAllowable("edit_issue")||this.isAllowable("edit_self_issue",f.reporter&&f.reporter.id||""),onEdit:function(){l[t]=!0,s[t]=e,a.setState({editingItems:l})},fieldKey:t,value:e})}},{key:"getRichTextItemContents",value:function(e,t,n,r,o){var a=this,i=this.state,l=i.editingItems,s=i.newItemValues,u=this.props,p=u.project,f=u.data;u.options;return l[t]?c.default.createElement("div",null,c.default.createElement(x.RichTextEditor,{id:"field-richeditor-"+t,value:e||"",placeholder:"输入"+n+(o&&o>0?"(字数"+o+"字之内)":""),uploadUrl:(0,k.urlWrapper)("/project/"+p.key+"/file"),onChange:function(e){s[t]=e,a.setState({newItemValues:a.state.newItemValues})}}),c.default.createElement("div",{className:"edit-button-group"},c.default.createElement(d.Button,{className:"edit-ok-button",onClick:this.setItemValue.bind(this,t,s[t]),disabled:w.default.isEqual(e||"",s[t]||"")||r&&!s[t]||o&&o>0&&w.default.trim(s[t]||"").length>o},c.default.createElement("i",{className:"fa fa-check"})),c.default.createElement(d.Button,{className:"edit-cancel-button",onClick:function(){l[t]=!1,a.setState({editingItems:l})}},c.default.createElement("i",{className:"fa fa-close"})))):c.default.createElement(x.RichTextReader,{isImgPreviewed:this.isAllowable("download_file"),isEditable:this.isAllowable("edit_issue")||this.isAllowable("edit_self_issue",f.reporter&&f.reporter.id||""),onEdit:function(){l[t]=!0,s[t]=e,a.setState({editingItems:l})},fieldKey:t,value:e})}},{key:"componentDidMount",value:function(){S(".animate-dialog .nav-tabs>li>a:first").css("border-left","0px");var e=this.props,t=e.detailFloatStyle,n=void 0===t?{}:t,r=e.layout,o=w.default.min([w.default.max([r.containerWidth/2,_.DetailMinWidth]),_.DetailMaxWidth]),a={width:o+"px"},i={};void 0!==n.left?(a.left=n.left-o,i.left=n.left):(a.right=-o,i.right=0),S(".animate-dialog").css(a),S(".animate-dialog").animate(i)}},{key:"render",value:function(){var e=this,t=this.props,n=t.i18n,r=t.layout,o=t.close,a=(t.detailFloatStyle,t.data),i=void 0===a?{}:a,l=(t.record,t.visitedIndex),s=t.visitedCollection,u=t.issueCollection,f=void 0===u?[]:u,h=t.loading,y=t.itemLoading,g=t.options,b=t.project,x=t.fileLoading,C=t.delFile,S=t.create,$=t.edit,Q=t.del,J=t.copy,ee=t.move,te=t.convert,ne=t.setAssignee,re=(t.setItemValue,t.setLabels),oe=t.addLabels,ae=t.resetState,ie=t.wfCollection,le=t.wfLoading,se=t.indexComments,ue=t.sortComments,ce=t.commentsCollection,de=t.commentsIndexLoading,pe=t.commentsLoading,fe=t.commentsItemLoading,me=t.addComments,he=t.editComments,ye=t.delComments,ge=t.indexHistory,ve=t.sortHistory,be=t.historyCollection,we=t.historyIndexLoading,Ee=t.indexGitCommits,ke=t.sortGitCommits,_e=t.gitCommitsCollection,xe=t.gitCommitsIndexLoading,Ce=t.indexWorklog,Se=t.worklogSort,Te=t.sortWorklog,Pe=t.worklogCollection,Oe=t.worklogIndexLoading,Re=t.worklogLoading,Me=t.addWorklog,je=t.editWorklog,Fe=t.delWorklog,Ne=t.createLink,qe=t.delLink,Ie=t.linkLoading,Le=t.doAction,Ae=t.user,De=this.state,Be=(De.inlinePreviewShow,De.previewShow),He=De.photoIndex,We=De.newAssignee,ze=De.editAssignee,Ve=De.editingItems,Ge=De.newItemValues,Ke=De.delFileShow,Ue=De.selectedFile,Ye=De.action_id,Ze=["title","resolution","priority","assignee","descriptions","epic","labels","expect_start_time","expect_complete_time","progress"],Xe={marginBottom:"0px",borderTop:"0px",borderRadius:"0px"},$e=w.default.map(g.assignees||[],function(e){return{label:e.name+"("+e.email+")",value:e.id}}),Qe=[];w.default.map(g.types,function(e){"subtask"!=e.type||e.disabled||Qe.push(e)});var Je=w.default.find(g.types,{id:i.type}),et=Je&&Je.schema?Je.schema:[],tt=w.default.findIndex(f,{id:i.id}),nt=i.priority?w.default.findIndex(g.priorities,{id:i.priority}):-1,rt={marginLeft:"5px",marginRight:"5px"};nt!==-1&&w.default.extend(rt,{backgroundColor:g.priorities[nt].color});var ot=i.state?w.default.findIndex(g.states,{id:i.state}):-1,at="";ot!==-1&&(at="state-"+g.states[ot].category+"-label");var it=!1,lt=w.default.findIndex(et,{key:"descriptions"});lt!==-1&&(it=et[lt].required&&!0);var st={};i.epic&&(st=w.default.find(g.epics,{id:i.epic}));var ut=c.default.createElement("div",null,c.default.createElement("span",{style:{paddingRight:"6px"}},"评论",!y&&"("+(i.comments_num>99?"99+":i.comments_num||0)+")")),ct=c.default.createElement("div",null,c.default.createElement("span",{style:{paddingRight:"6px"}},"工作日志",!y&&"("+(i.worklogs_num>99?"99+":i.worklogs_num||0)+")")),dt=c.default.createElement("div",null,c.default.createElement("span",{style:{paddingRight:"6px"}},"Git提交",!y&&"("+(i.gitcommits_num>99?"99+":i.gitcommits_num||0)+")")),pt=w.default.min([w.default.max([r.containerWidth/2,_.DetailMinWidth]),_.DetailMaxWidth])+"px";return c.default.createElement("div",{className:"animate-dialog",style:{width:pt},onClick:function(e){e.stopPropagation()},onMouseUp:function(e){e.stopPropagation()}},c.default.createElement(d.Button,{className:"close",onClick:o,title:"关闭"},c.default.createElement("i",{className:"fa fa-close"})),c.default.createElement(d.Button,{className:tt<0||tt>=f.length-1?"angle-disable":"angle",onClick:this.next.bind(this,tt),disabled:tt<0||tt>=f.length-1,title:"下一个"},c.default.createElement("i",{className:"fa fa-angle-down"})),c.default.createElement(d.Button,{className:tt<=0?"angle-disable":"angle",onClick:this.previous.bind(this,tt),disabled:tt<=0,title:"上一个"},c.default.createElement("i",{className:"fa fa-angle-up"})),c.default.createElement(d.Button,{className:l<0||l>=s.length-1?"angle-disable":"angle",onClick:this.forward.bind(this,1),disabled:l<0||l>=s.length-1,title:"前进"},c.default.createElement("i",{className:"fa fa-angle-right"})),c.default.createElement(d.Button,{className:l<=0?"angle-disable":"angle",onClick:this.forward.bind(this,-1),disabled:l<=0,title:"后退"},c.default.createElement("i",{className:"fa fa-angle-left"})),c.default.createElement(d.Button,{className:"angle",title:i.watching?"点击取消关注":"点击关注",onClick:function(){e.watch(i.id,!i.watching)}},i.watching?c.default.createElement("i",{className:"fa fa-eye-slash"}):c.default.createElement("i",{className:"fa fa-eye"})),c.default.createElement("div",{className:"panel panel-default",style:Xe},c.default.createElement(d.Tabs,{activeKey:this.state.tabKey,onSelect:this.handleTabSelect.bind(this),id:"issue-detail-tab"},c.default.createElement(d.Tab,{eventKey:1,title:"基本"},c.default.createElement("div",{className:"detail-view-blanket",style:{display:y||!i.no?"block":"none"}},y?c.default.createElement("img",{src:N,className:"loading detail-loading"}):c.default.createElement("div",{className:"detail-error"},"问题信息获取失败。")),c.default.createElement(d.Form,{horizontal:!0,className:(y||!i.no)&&"hide",style:{marginRight:"15px",marginBottom:"40px",marginLeft:"15px"}},c.default.createElement(d.ButtonToolbar,{style:{margin:"15px 0px 15px -5px"}},(this.isAllowable("edit_issue")||this.isAllowable("edit_self_issue",i.reporter&&i.reporter.id||""))&&c.default.createElement(d.Button,{onClick:function(){e.setState({editModalShow:!0})}},c.default.createElement("i",{className:"fa fa-edit"})," 编辑"),this.isAllowable("exec_workflow")&&(i.wfactions&&i.wfactions.length<=4?c.default.createElement(d.ButtonGroup,{style:{marginLeft:"10px"}},w.default.map(i.wfactions||[],function(t,n){return c.default.createElement(d.Button,{key:t.id,onClick:e.doAction.bind(e,t.id)},t.name)})):c.default.createElement("div",{style:{"float":"left",marginLeft:"10px"}},c.default.createElement(d.DropdownButton,{title:"动作",onSelect:this.actionSelect.bind(this)},w.default.map(i.wfactions||[],function(e,t){return c.default.createElement(d.MenuItem,{eventKey:e.id},e.name)})))),c.default.createElement("div",{style:{"float":"right"}},c.default.createElement(d.DropdownButton,{pullRight:!0,title:"更多",onSelect:this.operateSelect.bind(this)},c.default.createElement(d.MenuItem,{eventKey:"refresh"},"刷新"),this.isAllowable("assign_issue")&&c.default.createElement(d.MenuItem,{eventKey:"assign"},"分配"),(this.isAllowable("edit_issue")||this.isAllowable("edit_self_issue",i.reporter&&i.reporter.id||""))&&c.default.createElement(d.MenuItem,{eventKey:"setLabels"},"设置标签"),c.default.createElement(d.MenuItem,{divider:!0}),c.default.createElement(d.MenuItem,{eventKey:"watch"},i.watching?"取消关注":"关注"),c.default.createElement(d.MenuItem,{eventKey:"watchers",disabled:!i.watchers||i.watchers.length<=0},c.default.createElement("span",null,"查看关注者 ",c.default.createElement("span",{className:"badge-number"},i.watchers&&i.watchers.length))),c.default.createElement(d.MenuItem,{eventKey:"share"},"分享链接"),!i.parent_id&&Qe.length>0&&((this.isAllowable("edit_issue")||this.isAllowable("edit_self_issue",i.reporter&&i.reporter.id||""))&&!i.hasSubtasks||this.isAllowable("create_issue"))&&c.default.createElement(d.MenuItem,{divider:!0}),!i.parent_id&&Qe.length>0&&this.isAllowable("create_issue")&&c.default.createElement(d.MenuItem,{eventKey:"createSubtask"},"创建子问题"),!i.hasSubtasks&&!i.parent_id&&Qe.length>0&&(this.isAllowable("edit_issue")||this.isAllowable("edit_self_issue",i.reporter&&i.reporter.id||""))&&c.default.createElement(d.MenuItem,{eventKey:"convert2Subtask"},"转换为子问题"),i.parent_id&&(this.isAllowable("edit_issue")||this.isAllowable("edit_self_issue",i.reporter&&i.reporter.id||""))&&c.default.createElement(d.MenuItem,{divider:!0}),i.parent_id&&(this.isAllowable("edit_issue")||this.isAllowable("edit_self_issue",i.reporter&&i.reporter.id||""))&&c.default.createElement(d.MenuItem,{eventKey:"convert2Standard"},"转换为标准问题"),g.permissions&&(w.default.intersection(g.permissions,["link_issue","create_issue"]).length>0||g.permissions.indexOf("move_issue")!==-1&&i.parent_id)&&c.default.createElement(d.MenuItem,{divider:!0}),this.isAllowable("move_issue")&&i.parent_id&&c.default.createElement(d.MenuItem,{eventKey:"move"},"移动"),this.isAllowable("link_issue")&&c.default.createElement(d.MenuItem,{eventKey:"link"},"链接"),this.isAllowable("create_issue")&&c.default.createElement(d.MenuItem,{eventKey:"copy"},"复制"),(this.isAllowable("reset_issue")||this.isAllowable("delete_issue")||this.isAllowable("delete_self_issue",i.reporter&&i.reporter.id||""))&&c.default.createElement(d.MenuItem,{divider:!0}),this.isAllowable("reset_issue")&&c.default.createElement(d.MenuItem,{eventKey:"reset"},"重置状态"),(this.isAllowable("delete_issue")||this.isAllowable("delete_self_issue",i.reporter&&i.reporter.id||""))&&c.default.createElement(d.MenuItem,{eventKey:"del"},"删除")))),c.default.createElement(d.FormGroup,null,c.default.createElement(d.Col,{sm:3,componentClass:d.ControlLabel},"主题/NO"),c.default.createElement(d.Col,{sm:9},c.default.createElement("div",{style:{marginTop:"7px",whiteSpace:"pre-wrap",wordWrap:"break-word"}},i.no+"-"+(i.title||""),i.parent&&c.default.createElement("br",null),i.parent&&c.default.createElement("a",{href:"#",style:{fontSize:"12px"},onClick:function(t){t.preventDefault(),e.goTo(i.parent.id)}},"父:",i.parent.no+"-"+(i.parent.title||""))))),c.default.createElement(d.FormGroup,null,c.default.createElement(d.Col,{sm:3,componentClass:d.ControlLabel},"类型"),c.default.createElement(d.Col,{sm:3},c.default.createElement("div",{style:{marginTop:"7px"}},c.default.createElement("span",{className:"type-abb"},Je?Je.abb:"-"),Je?Je.name:"-")),c.default.createElement(d.Col,{sm:2,componentClass:d.ControlLabel},"状态"),c.default.createElement(d.Col,{sm:4},c.default.createElement("div",{style:{marginTop:"7px"}},ot!==-1?c.default.createElement("span",{className:at},g.states[ot].name):"-",le?c.default.createElement("img",{src:N,className:"small-loading"}):c.default.createElement("a",{href:"#",onClick:this.viewWorkflow.bind(this)},c.default.createElement("span",{style:{marginLeft:"5px"}},"(查看)"))))),c.default.createElement(d.FormGroup,null,c.default.createElement(d.Col,{sm:3,componentClass:d.ControlLabel},"优先级"),c.default.createElement(d.Col,{sm:3},c.default.createElement("div",{style:{marginTop:"7px"}},nt!==-1&&c.default.createElement("div",{className:"circle",style:rt}),nt!==-1?g.priorities[nt].name:c.default.createElement("span",{className:"issue-contents-nosetting"},"未设置"))),c.default.createElement(d.Col,{sm:2,componentClass:d.ControlLabel},"解决结果"),c.default.createElement(d.Col,{sm:4},c.default.createElement("div",{style:{marginTop:"7px"}},w.default.find(g.resolutions||[],{id:i.resolution})?w.default.find(g.resolutions,{id:i.resolution}).name:"-"))),c.default.createElement(d.FormGroup,null,c.default.createElement(d.Col,{sm:3,componentClass:d.ControlLabel},"负责人"),c.default.createElement(d.Col,{sm:ze?7:3},ze?c.default.createElement("div",{style:{marginTop:"0px"}},c.default.createElement(v.default,{simpleValue:!0,clearable:!1,options:$e,value:We||i.assignee.id,onChange:this.handleAssigneeSelectChange.bind(this),placeholder:"选择负责人"}),c.default.createElement("div",{className:"edit-button-group"},c.default.createElement(d.Button,{className:"edit-ok-button",onClick:this.setAssignee.bind(this)},c.default.createElement("i",{className:"fa fa-check"})),c.default.createElement(d.Button,{className:"edit-cancel-button",onClick:this.cancelSetAssignee.bind(this)},c.default.createElement("i",{className:"fa fa-close"})))):c.default.createElement("div",{style:{marginTop:"4px"}},this.isAllowable("assign_issue")?c.default.createElement("div",{className:"editable-list-field",style:{display:"table",width:"100%"}},c.default.createElement("span",null,c.default.createElement("div",{style:{display:"inline-block","float":"left",margin:"5px 0px 3px 5px"}},i.assignee&&i.assignee.name||"-")),c.default.createElement("span",{className:"edit-icon-zone edit-icon",onClick:this.editAssignee.bind(this)},c.default.createElement("i",{className:"fa fa-edit"}))):c.default.createElement("div",{style:{marginTop:"7px"}},c.default.createElement("span",null,i.assignee&&i.assignee.name||"-")),(!i.assignee||i.assignee.id!==Ae.id)&&this.isAllowable("assigned_issue")&&c.default.createElement("span",{style:{"float":"left",marginLeft:"5px",fontSize:"12px"}},c.default.createElement("a",{href:"#",onClick:this.assignToMe.bind(this)},"分配给我"))))),c.default.createElement(d.FormGroup,null,c.default.createElement(d.Col,{sm:3,componentClass:d.ControlLabel},"描述"),c.default.createElement(d.Col,{sm:9},c.default.createElement("div",{style:{marginTop:"7px"}},this.getRichTextItemContents(i.descriptions,"descriptions","描述",it)))),c.default.createElement(d.FormGroup,null,c.default.createElement(d.Col,{sm:3,componentClass:d.ControlLabel},"标签"),c.default.createElement(d.Col,{sm:9},c.default.createElement("div",{style:{marginTop:"7px"}},i.labels&&i.labels.length>0?w.default.map(i.labels,function(t,n){return c.default.createElement(p.Link,{to:"/project/"+b.key+"/issue?labels="+t,key:n},c.default.createElement("span",{title:t,className:"issue-label",style:e.getLabelStyle(t)},t))}):c.default.createElement("span",{className:"issue-contents-nosetting"},"未设置")))),i.resolve_version&&w.default.findIndex(et,{key:"resolve_version"})===-1&&c.default.createElement(d.FormGroup,null,c.default.createElement(d.Col,{sm:3,componentClass:d.ControlLabel},"解决版本"),c.default.createElement(d.Col,{sm:9},c.default.createElement("div",{style:{marginTop:"7px"}},w.default.find(g.versions,{id:i.resolve_version})?w.default.find(g.versions,{id:i.resolve_version}).name:c.default.createElement("span",{className:"issue-contents-nosetting"},"未设置")))),w.default.map(et,function(t,n){if(Ze.indexOf(t.key)===-1){if("File"===t.type){if(!e.isAllowable("upload_file")&&w.default.isEmpty(i[t.key]))return}else if(w.default.isEmpty(i[t.key])&&!w.default.isNumber(i[t.key]))return c.default.createElement(d.FormGroup,{key:"form-"+n},c.default.createElement(d.Col,{sm:3,componentClass:d.ControlLabel},t.name||"-"),c.default.createElement(d.Col,{sm:9},c.default.createElement("div",{style:{marginTop:"7px"}},c.default.createElement("span",{style:{color:"#909090"}},"未设置"))));var r="";if("SingleUser"===t.type)r=i[t.key]&&i[t.key].name||"-";else if("MultiUser"===t.type)r=w.default.map(i[t.key]||[],function(e){return e.name}).join(", ");else if("Select"===t.type||"RadioGroup"===t.type||"SingleVersion"===t.type){var o=t.optionValues||[];r=w.default.find(o,{id:i[t.key]})?w.default.find(o,{id:i[t.key]}).name:"-"}else if("MultiSelect"===t.type||"CheckboxGroup"===t.type||"MultiVersion"===t.type)!function(){var e=t.optionValues||[],n=w.default.isArray(i[t.key])?i[t.key]:i[t.key].split(","),o=[];w.default.map(n,function(t,n){w.default.find(e,{id:t})&&o.push(w.default.find(e,{id:t}).name)}),r=o.join(", ")||"-"}();else if("DatePicker"===t.type)r=T.unix(i[t.key]).format("YYYY/MM/DD");else if("DateTimePicker"===t.type)r=T.unix(i[t.key]).format("YYYY/MM/DD HH:mm");else if("File"===t.type){var a={showFiletypeIcon:!0,postUrl:(0,k.urlWrapper)("/project/"+b.key+"/file?issue_id="+i.id)},l={parallelUploads:1,addRemoveLinks:!1,dictDefaultMessage:"点击或拖拽文件至此",paramName:t.key},s={init:function(t){return e.dropzone=t},success:function(t,n){e.uploadSuccess(t,n),e.dropzone.removeFile(t)},error:function(t){E.notify.show("文档上传失败。","error",2e3),e.dropzone.removeFile(t)}},u=w.default.filter(i[t.key],function(e){return w.default.indexOf(["image/jpeg","image/jpg","image/png","image/gif"],e.type)!==-1}),p=w.default.filter(i[t.key],function(e){return w.default.indexOf(["image/jpeg","image/jpg","image/png","image/gif"],e.type)===-1});r=c.default.createElement("div",null,p.length>0&&c.default.createElement(d.Table,{condensed:!0,hover:!0,responsive:!0,style:{borderBottom:"1px solid #ddd"}},c.default.createElement("tbody",null,w.default.map(p,function(n,r){return c.default.createElement("tr",{key:r},c.default.createElement("td",null,c.default.createElement("span",{style:{marginRight:"5px",color:"#777"}},c.default.createElement("i",{className:(0,k.getFileIconCss)(n.name)})),e.isAllowable("download_file")?c.default.createElement("a",{target:"_blank",href:(0,k.urlWrapper)("/project/"+b.key+"/file/"+n.id+("application/pdf"==n.type?"/"+n.name:"")),download:"application/pdf"!=n.type&&n.name},n.name):c.default.createElement("span",null,n.name)),(e.isAllowable("remove_file")||e.isAllowable("remove_self_file",n.uploader&&n.uploader.id||""))&&c.default.createElement("td",{width:"2%"},c.default.createElement("span",{className:"remove-icon",onClick:e.delFileNotify.bind(e,t.key,n.id,n.name)},c.default.createElement("i",{className:"fa fa-trash"}))))}))),u.length>0&&c.default.createElement(d.Grid,{style:{paddingLeft:"0px"}},c.default.createElement(d.Row,null,w.default.map(u,function(n,r){return c.default.createElement(d.Col,{sm:6,key:r},c.default.createElement("div",{className:"attachment-content"},c.default.createElement("div",{className:"attachment-thumb",onClick:e.openPreview.bind(e,r,t.key)},c.default.createElement("img",{src:(0,k.urlWrapper)("/project/"+b.key+"/file/"+n.id+"/thumbnail")})),c.default.createElement("div",{className:"attachment-title-container"},c.default.createElement("div",{className:"attachment-title",title:n.name},n.name),(e.isAllowable("remove_file")||e.isAllowable("remove_self_file",n.uploader&&n.uploader.id||""))&&c.default.createElement("div",{className:"remove-icon",onClick:e.delFileNotify.bind(e,t.key,n.id,n.name)},c.default.createElement("i",{className:"fa fa-trash"})))))}))),e.isAllowable("upload_file")&&c.default.createElement("div",{style:{marginTop:"8px"}},c.default.createElement(m.default,{config:a,eventHandlers:s,djsConfig:l})),Be[t.key]&&e.createLightbox(t.key,u,He))}else r="TextArea"===t.type?e.getTextAreaItemContents(i[t.key],t.key,t.name,t.required,t.maxLength):"RichTextEditor"===t.type?e.getRichTextItemContents(i[t.key],t.key,t.name,t.required,t.maxLength):i[t.key];return c.default.createElement(d.FormGroup,{key:"form-"+n},c.default.createElement(d.Col,{sm:3,componentClass:d.ControlLabel},t.name||"-"),c.default.createElement(d.Col,{sm:9},c.default.createElement("div",{style:{marginTop:"7px"}},r)))}}),c.default.createElement("div",{className:"issue-contents-diviver"},c.default.createElement("span",{className:"issue-contents-diviver-title"},"迭代")),c.default.createElement(d.FormGroup,null,c.default.createElement(d.Col,{sm:3,componentClass:d.ControlLabel},"Epic"),c.default.createElement(d.Col,{sm:9},c.default.createElement("div",{style:{marginTop:"7px"}},st.name?c.default.createElement(p.Link,{to:"/project/"+b.key+"/issue?epic="+i.epic},c.default.createElement("span",{className:"epic-title",style:{borderColor:st.bgColor,backgroundColor:st.bgColor,maxWidth:"100%",marginRight:"5px",marginTop:"0px","float":"left"},title:st.name||"-"},st.name)):c.default.createElement("span",{className:"issue-contents-nosetting"},"未设置")))),c.default.createElement(d.FormGroup,null,c.default.createElement(d.Col,{sm:3,componentClass:d.ControlLabel},"Sprint"),c.default.createElement(d.Col,{sm:9},c.default.createElement("div",{style:{marginTop:"7px"}},i.sprints&&i.sprints.length>0?w.default.map(i.sprints,function(e){return w.default.find(g.sprints,{no:e}).name}).join(", "):c.default.createElement("span",{className:"issue-contents-nosetting"},"未设置")))),c.default.createElement("div",{className:"issue-contents-diviver"},c.default.createElement("span",{className:"issue-contents-diviver-title"},"周期进度"),this.isAllowable("edit_issue")&&c.default.createElement("span",{className:"comments-button issue-block-edit-button",title:"设置",onClick:function(){e.setState({periodModalShow:!0})}},c.default.createElement("i",{className:"fa fa-edit"}))),c.default.createElement(d.FormGroup,null,c.default.createElement(d.Col,{sm:3,componentClass:d.ControlLabel},"计划开始时间"),c.default.createElement(d.Col,{sm:2},c.default.createElement("div",{style:{marginTop:"7px"}},i.expect_start_time?T.unix(i.expect_start_time).format("YYYY/MM/DD"):c.default.createElement("span",{className:"issue-contents-nosetting"},"未设置"))),c.default.createElement(d.Col,{sm:3,componentClass:d.ControlLabel},"计划完成时间"),c.default.createElement(d.Col,{sm:2},c.default.createElement("div",{style:{marginTop:"7px"}},i.expect_complete_time?T.unix(i.expect_complete_time).format("YYYY/MM/DD"):c.default.createElement("span",{className:"issue-contents-nosetting"},"未设置")))),c.default.createElement(d.FormGroup,null,c.default.createElement(d.Col,{sm:3,componentClass:d.ControlLabel},"进度"),c.default.createElement(d.Col,{sm:3},Ve.progress?c.default.createElement("div",{style:{marginTop:"0px"}},c.default.createElement(d.FormControl,{type:"number",min:"0",value:Ge.progress||"",onChange:function(t){Ge.progress=t.target.value,e.setState({newItemValues:Ge})},placeholder:"进度值"}),c.default.createElement("div",{className:"edit-button-group"},c.default.createElement(d.Button,{className:"edit-ok-button",disabled:Ge.progress==i.progress+""||parseFloat(Ge.progress)>100||parseFloat(Ge.progress)<0,onClick:this.setItemValue.bind(this,"progress",""===Ge.progress?"":Ge.progress-0)},c.default.createElement("i",{className:"fa fa-check"})),c.default.createElement(d.Button,{className:"edit-cancel-button",onClick:this.cancelSetItem.bind(this,"progress")},c.default.createElement("i",{className:"fa fa-close"})))):c.default.createElement("div",{style:{marginTop:"4px"}},this.isAllowable("edit_issue")||this.isAllowable("edit_self_issue",i.reporter&&i.reporter.id||"")?c.default.createElement("div",{className:"editable-list-field",style:{display:"table",width:"100%"}},c.default.createElement("div",{style:{display:"inline-block","float":"left",margin:"5px 0px 3px 5px"}},w.default.isNumber(i.progress)?i.progress+"%":c.default.createElement("span",{className:"issue-contents-nosetting"},"未设置")),c.default.createElement("span",{className:"edit-icon-zone edit-icon",onClick:function(){Ve.progress=!0,Ge.progress=w.default.isNumber(i.progress)?i.progress+"":"",e.setState({editingItems:Ve,newItemValues:Ge})}},c.default.createElement("i",{className:"fa fa-edit"}))):c.default.createElement("div",{style:{marginTop:"7px"}},w.default.isNumber(i.progress)?i.progress+"%":c.default.createElement("span",{className:"issue-contents-nosetting"},"未设置"))))),!i.parent_id&&c.default.createElement("div",{className:"issue-contents-diviver"},c.default.createElement("div",{className:"issue-contents-diviver-title"},"子问题"),Qe.length>0&&this.isAllowable("create_issue")&&c.default.createElement("span",{className:"comments-button issue-block-edit-button",title:"创建子问题",onClick:function(){e.setState({createSubtaskModalShow:!0})}},c.default.createElement("i",{className:"fa fa-plus"}))),!i.parent_id&&(!i.subtasks||i.subtasks.length<=0)&&c.default.createElement("div",{className:"issue-block-emtpy"},"暂无子问题"),!i.parent_id&&i.subtasks&&i.subtasks.length>0&&c.default.createElement(d.FormGroup,null,c.default.createElement(d.Col,{sm:3,componentClass:d.ControlLabel},"子问题"),c.default.createElement(d.Col,{sm:9},i.subtasks.length>5&&c.default.createElement("div",{style:{marginTop:"7px"}},"共",i.subtasks.length,"个子问题",c.default.createElement("span",{
style:{marginLeft:"5px"}},c.default.createElement("a",{href:"#",onClick:function(t){t.preventDefault(),e.setState({subtaskShow:!e.state.subtaskShow})}},this.state.subtaskShow?"收起":"展开"))),c.default.createElement(d.Table,{condensed:!0,hover:!0,responsive:!0,className:!this.state.subtaskShow&&i.subtasks.length>5?"hide":"",style:{marginTop:"10px",marginBottom:"0px",borderBottom:"1px solid #ddd"}},c.default.createElement("tbody",null,w.default.map(i.subtasks,function(t,n){return c.default.createElement("tr",{key:"subtask"+n},c.default.createElement("td",{style:{verticalAlign:"middle"}},c.default.createElement("a",{href:"#",style:"Closed"==t.state?{textDecoration:"line-through"}:{},onClick:function(n){n.preventDefault(),e.goTo(t.id)}},t.no," - ",t.title)),c.default.createElement("td",{style:{width:"45px",verticalAlign:"middle"}},c.default.createElement(F,{data:t.assignee,circle:!0})),c.default.createElement("td",{style:{whiteSpace:"nowrap",width:"10px",textAlign:"center",verticalAlign:"middle"}},w.default.find(g.states||[],{id:t.state})?c.default.createElement("span",{className:"state-"+w.default.find(g.states,{id:t.state}).category+"-label"},w.default.find(g.states,{id:t.state}).name):"-"))}))))),c.default.createElement("div",{className:"issue-contents-diviver"},c.default.createElement("span",{className:"issue-contents-diviver-title"},"链接问题"),this.isAllowable("link_issue")&&c.default.createElement("span",{className:"comments-button issue-block-edit-button",title:"创建链接",onClick:function(){e.setState({linkIssueModalShow:!0})}},c.default.createElement("i",{className:"fa fa-plus"}))),(!i.links||i.links.length<=0)&&c.default.createElement("div",{className:"issue-block-emtpy"},"暂无链接问题"),i.links&&i.links.length>0&&c.default.createElement(d.FormGroup,null,c.default.createElement(d.Col,{sm:3,componentClass:d.ControlLabel},"链接问题"),c.default.createElement(d.Col,{sm:9},i.links.length>5&&c.default.createElement("div",{style:{marginTop:"7px"}},"共",i.links.length,"个问题",c.default.createElement("span",{style:{marginLeft:"5px"}},c.default.createElement("a",{href:"#",onClick:function(t){t.preventDefault(),e.setState({linkShow:!e.state.linkShow})}},this.state.linkShow?"收起":"展开"))),c.default.createElement(d.Table,{condensed:!0,hover:!0,responsive:!0,className:!this.state.linkShow&&i.links.length>5?"hide":"",style:{marginTop:"10px",marginBottom:"0px",borderBottom:"1px solid #ddd"}},c.default.createElement("tbody",null,w.default.map(i.links,function(t,n){var r={},o="",a="";if(t.src.id==i.id)r=t.dest,o=t.relation,a=t.dest.id;else if(t.dest.id==i.id){r=t.src,o=t.relation;var l=w.default.findIndex(g.relations||[],{out:o});if(l!==-1)o=g.relations[l].in||"";else{var s=w.default.findIndex(g.relations||[],{"in":o});s!==-1&&(o=g.relations[s].out||"")}a=t.src.id}return c.default.createElement("tr",{key:"link"+n},c.default.createElement("td",null,o,c.default.createElement("br",null),c.default.createElement("a",{href:"#",style:"Closed"==r.state?{textDecoration:"line-through"}:{},onClick:function(t){t.preventDefault(),e.goTo(a)}},r.no," - ",r.title)),c.default.createElement("td",{style:{width:"45px",verticalAlign:"middle"}},c.default.createElement(F,{data:r.assignee,circle:!0})),c.default.createElement("td",{style:{whiteSpace:"nowrap",verticalAlign:"middle",textAlign:"center",width:"10px"}},w.default.find(g.states||[],{id:r.state})?c.default.createElement("span",{className:"state-"+w.default.find(g.states,{id:r.state}).category+"-label"},w.default.find(g.states,{id:r.state}).name):"-"),c.default.createElement("td",{style:{verticalAlign:"middle",width:"10px",paddingRight:"8px"}},e.isAllowable("link_issue")?c.default.createElement("span",{className:"remove-icon",onClick:e.delLink.bind(e,{title:r.title,id:t.id})},c.default.createElement("i",{className:"fa fa-trash"})):""))}))))),c.default.createElement("div",{className:"issue-contents-diviver"},c.default.createElement("span",{className:"issue-contents-diviver-title"},"人员时间")),c.default.createElement(d.FormGroup,null,c.default.createElement(d.Col,{sm:3,componentClass:d.ControlLabel},"创建者"),c.default.createElement(d.Col,{sm:3},c.default.createElement("div",{style:{marginTop:"7px"}},c.default.createElement("span",null,i.reporter&&i.reporter.name||"-"))),c.default.createElement(d.Col,{sm:2,componentClass:d.ControlLabel},"创建时间"),c.default.createElement(d.Col,{sm:4},c.default.createElement("div",{style:{marginTop:"7px"}},i.created_at?T.unix(i.created_at).format("YYYY/MM/DD HH:mm"):"-"))),c.default.createElement(d.FormGroup,null,c.default.createElement(d.Col,{sm:3,componentClass:d.ControlLabel},"更新者"),c.default.createElement(d.Col,{sm:3},c.default.createElement("div",{style:{marginTop:"7px"}},c.default.createElement("span",null,i.modifier?i.modifier.name:i.reporter&&i.reporter.name||"-"))),c.default.createElement(d.Col,{sm:2,componentClass:d.ControlLabel},"更新时间"),c.default.createElement(d.Col,{sm:4},c.default.createElement("div",{style:{marginTop:"7px"}},i.updated_at?T.unix(i.updated_at).format("YYYY/MM/DD HH:mm"):i.created_at?T.unix(i.created_at).format("YYYY/MM/DD HH:mm"):"-"))),c.default.createElement(d.FormGroup,null,c.default.createElement(d.Col,{sm:3,componentClass:d.ControlLabel},"解决者"),c.default.createElement(d.Col,{sm:3},c.default.createElement("div",{style:{marginTop:"7px"}},c.default.createElement("span",null,i.resolver&&i.resolver.name||"-"))),c.default.createElement(d.Col,{sm:2,componentClass:d.ControlLabel},"解决时间"),c.default.createElement(d.Col,{sm:4},c.default.createElement("div",{style:{marginTop:"7px"}},i.resolved_at?T.unix(i.resolved_at).format("YYYY/MM/DD HH:mm"):"-"))),c.default.createElement(d.FormGroup,null,c.default.createElement(d.Col,{sm:3,componentClass:d.ControlLabel},"关闭者"),c.default.createElement(d.Col,{sm:3},c.default.createElement("div",{style:{marginTop:"7px"}},c.default.createElement("span",null,i.closer&&i.closer.name||"-"))),c.default.createElement(d.Col,{sm:2,componentClass:d.ControlLabel},"关闭时间"),c.default.createElement(d.Col,{sm:4},c.default.createElement("div",{style:{marginTop:"7px"}},i.closed_at?T.unix(i.closed_at).format("YYYY/MM/DD HH:mm"):"-"))))),c.default.createElement(d.Tab,{eventKey:3,title:"改动记录"},c.default.createElement(R,{issue_id:i.id,currentTime:g.current_time||0,currentUser:Ae,collection:be,indexHistory:ge,sortHistory:ve,indexLoading:we})),c.default.createElement(d.Tab,{eventKey:2,title:ut},c.default.createElement(O,{i18n:n,currentTime:g.current_time||0,currentUser:Ae,project:b,permissions:g.permissions||[],issue_id:i.id,collection:ce,indexComments:se,sortComments:ue,indexLoading:de,loading:pe,users:g.users||[],addComments:me,editComments:he,delComments:ye,itemLoading:fe})),c.default.createElement(d.Tab,{eventKey:4,title:ct},c.default.createElement(j,{i18n:n,currentTime:g.current_time||0,currentUser:Ae,permissions:g.permissions||[],issue:i,original_estimate:i.original_estimate,options:g.timetrack||{},collection:Pe,indexWorklog:Ce,sort:Se,sortWorklog:Te,indexLoading:Oe,loading:Re,addWorklog:Me,editWorklog:je,delWorklog:Fe})),i.gitcommits_num>0&&c.default.createElement(d.Tab,{eventKey:5,title:dt},c.default.createElement(M,{issue_id:i.id,currentTime:g.current_time||0,currentUser:Ae,collection:_e,indexGitCommits:Ee,sortGitCommits:ke,indexLoading:xe})))),Ke&&c.default.createElement(I,{show:!0,close:this.delFileModalClose,del:C,data:Ue,loading:x,i18n:n}),this.state.editModalShow&&c.default.createElement(P,{show:!0,close:this.editModalClose.bind(this),options:g,edit:$,loading:h,project:b,data:i,isSubtask:i.parent_id&&!0,addLabels:oe,i18n:n}),this.state.workflowScreenShow&&c.default.createElement(P,{show:!0,close:this.workflowScreenModalClose.bind(this),options:g,edit:$,loading:h,project:b,data:i,action_id:Ye,doAction:Le,isFromWorkflow:!0,i18n:n}),this.state.workflowCommentsShow&&c.default.createElement(K,{show:!0,close:this.workflowCommentsModalClose.bind(this),data:i,action_id:Ye,doAction:Le}),this.state.createSubtaskModalShow&&c.default.createElement(P,{show:!0,close:this.createSubtaskModalClose.bind(this),options:g,create:S,loading:h,project:b,parent:i,isSubtask:!0,i18n:n}),this.state.previewModalShow&&c.default.createElement(q,{show:!0,close:function(){e.setState({previewModalShow:!1})},state:i.state,collection:ie}),this.state.linkIssueModalShow&&c.default.createElement(L,{show:!0,close:function(){e.setState({linkIssueModalShow:!1})},options:g,loading:Ie,createLink:Ne,issue:i,types:g.types,project:b,i18n:n}),this.state.delLinkModalShow&&c.default.createElement(A,{show:!0,close:function(){e.setState({delLinkModalShow:!1})},loading:Ie,delLink:qe,data:this.state.delLinkData,i18n:n}),this.state.convertTypeModalShow&&c.default.createElement(D,{show:!0,close:function(){e.setState({convertTypeModalShow:!1})},options:g,convert:te,loading:h,issue:i,i18n:n}),this.state.convertType2ModalShow&&c.default.createElement(B,{show:!0,close:function(){e.setState({convertType2ModalShow:!1})},options:g,project:b,convert:te,loading:h,issue:i,i18n:n}),this.state.moveModalShow&&c.default.createElement(H,{show:!0,close:function(){e.setState({moveModalShow:!1})},options:g,project:b,move:ee,loading:h,issue:i,i18n:n}),this.state.assignModalShow&&c.default.createElement(W,{show:!0,close:function(){e.setState({assignModalShow:!1})},options:g,setAssignee:ne,issue:i,i18n:n}),this.state.setLabelsModalShow&&c.default.createElement(z,{show:!0,close:function(){e.setState({setLabelsModalShow:!1})},options:g,setLabels:re,addLabels:oe,issue:i,i18n:n}),this.state.shareModalShow&&c.default.createElement(V,{show:!0,project:b,close:function(){e.setState({shareModalShow:!1})},issue:i}),this.state.resetModalShow&&c.default.createElement(G,{show:!0,close:function(){e.setState({resetModalShow:!1})},options:g,resetState:ae,issue:i,i18n:n}),this.state.delNotifyShow&&c.default.createElement(U,{show:!0,close:function(){e.setState({delNotifyShow:!1})},data:i,del:Q,detailClose:o,i18n:n}),this.state.copyModalShow&&c.default.createElement(Y,{show:!0,close:function(){e.setState({copyModalShow:!1})},options:g,loading:h,copy:J,data:i,i18n:n}),this.state.watchersModalShow&&c.default.createElement(Z,{show:!0,close:function(){e.setState({watchersModalShow:!1})},issue_no:i.no,watchers:i.watchers||[],i18n:n}),this.state.periodModalShow&&c.default.createElement(X,{show:!0,close:function(){e.setState({periodModalShow:!1})},edit:$,data:i,i18n:n}))}}],[{key:"propTypes",value:{i18n:u.PropTypes.object.isRequired,layout:u.PropTypes.object.isRequired,options:u.PropTypes.object.isRequired,project:u.PropTypes.object.isRequired,data:u.PropTypes.object.isRequired,record:u.PropTypes.func.isRequired,forward:u.PropTypes.func.isRequired,visitedIndex:u.PropTypes.number.isRequired,visitedCollection:u.PropTypes.array.isRequired,issueCollection:u.PropTypes.array.isRequired,show:u.PropTypes.func.isRequired,detailFloatStyle:u.PropTypes.object,wfCollection:u.PropTypes.array.isRequired,wfLoading:u.PropTypes.bool.isRequired,viewWorkflow:u.PropTypes.func.isRequired,loading:u.PropTypes.bool.isRequired,itemLoading:u.PropTypes.bool.isRequired,fileLoading:u.PropTypes.bool.isRequired,delFile:u.PropTypes.func.isRequired,addFile:u.PropTypes.func.isRequired,setAssignee:u.PropTypes.func.isRequired,setItemValue:u.PropTypes.func.isRequired,setLabels:u.PropTypes.func.isRequired,addLabels:u.PropTypes.func.isRequired,create:u.PropTypes.func.isRequired,edit:u.PropTypes.func.isRequired,indexComments:u.PropTypes.func.isRequired,sortComments:u.PropTypes.func.isRequired,addComments:u.PropTypes.func.isRequired,editComments:u.PropTypes.func.isRequired,delComments:u.PropTypes.func.isRequired,commentsCollection:u.PropTypes.array.isRequired,commentsIndexLoading:u.PropTypes.bool.isRequired,commentsLoading:u.PropTypes.bool.isRequired,commentsItemLoading:u.PropTypes.bool.isRequired,commentsLoaded:u.PropTypes.bool.isRequired,indexWorklog:u.PropTypes.func.isRequired,worklogSort:u.PropTypes.string.isRequired,sortWorklog:u.PropTypes.func.isRequired,addWorklog:u.PropTypes.func.isRequired,editWorklog:u.PropTypes.func.isRequired,delWorklog:u.PropTypes.func.isRequired,worklogCollection:u.PropTypes.array.isRequired,worklogIndexLoading:u.PropTypes.bool.isRequired,worklogLoading:u.PropTypes.bool.isRequired,worklogLoaded:u.PropTypes.bool.isRequired,indexHistory:u.PropTypes.func.isRequired,sortHistory:u.PropTypes.func.isRequired,historyCollection:u.PropTypes.array.isRequired,historyIndexLoading:u.PropTypes.bool.isRequired,historyLoaded:u.PropTypes.bool.isRequired,indexGitCommits:u.PropTypes.func.isRequired,sortGitCommits:u.PropTypes.func.isRequired,gitCommitsCollection:u.PropTypes.array.isRequired,gitCommitsIndexLoading:u.PropTypes.bool.isRequired,gitCommitsLoaded:u.PropTypes.bool.isRequired,createLink:u.PropTypes.func.isRequired,delLink:u.PropTypes.func.isRequired,linkLoading:u.PropTypes.bool.isRequired,doAction:u.PropTypes.func.isRequired,watch:u.PropTypes.func.isRequired,copy:u.PropTypes.func.isRequired,move:u.PropTypes.func.isRequired,convert:u.PropTypes.func.isRequired,resetState:u.PropTypes.func.isRequired,del:u.PropTypes.func.isRequired,close:u.PropTypes.func.isRequired,user:u.PropTypes.object.isRequired},enumerable:!0}]),t}(u.Component);t.default=$,e.exports=t.default}).call(this)}finally{}},224:function(e,t,n){try{(function(){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function(e,t,n){for(var r=!0;r;){var o=e,a=t,i=n;r=!1,null===o&&(o=Function.prototype);var l=Object.getOwnPropertyDescriptor(o,a);if(void 0!==l){if("value"in l)return l.value;var s=l.get;if(void 0===s)return;return s.call(i)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=a,n=i,r=!0,l=u=void 0}},s=n(1),u=r(s),c=n(2),d=n(7),p=r(d),f=n(38),m=r(f),h=n(3),y=r(h),g=n(5),v=(n(19),n(4)),b=function(e){function t(e){o(this,t),l(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={ecode:0,relation:"",dest:""},this.confirm=this.confirm.bind(this),this.cancel=this.cancel.bind(this)}return a(t,e),i(t,[{key:"confirm",value:function(){var e,t,n,r,o,a;return regeneratorRuntime.async(function(i){for(;;)switch(i.prev=i.next){case 0:return e=this.props,t=e.close,n=e.createLink,r=e.issue,o={},o.src=r.id,o.relation=this.state.relation,o.dest=this.state.dest&&this.state.dest.id||"",i.next=10,regeneratorRuntime.awrap(n(o));case 10:a=i.sent,0===a?(this.setState({ecode:0}),t(),g.notify.show("链接已创建。","success",2e3)):this.setState({ecode:a});case 12:case"end":return i.stop()}},null,this)}},{key:"cancel",value:function(){var e=this.props.close;e()}},{key:"searchIssue",value:function(e){var t,n,r,o,a,i,l,s,u;return regeneratorRuntime.async(function(c){for(;;)switch(c.prev=c.next){case 0:if(e=e.toLowerCase()){c.next=3;break}return c.abrupt("return",{options:[]});case 3:return t=this.props,n=t.issue,r=t.types,o=t.project,n.links||(n.links=[]),a=[],y.default.forEach(n.links,function(e){a.push(e.src.id==n.id?e.dest.id:e.src.id)}),i=new m.default,l=10,n.links.length>0&&(l=n.links.length+10),c.next=15,regeneratorRuntime.awrap(i.request({url:"/project/"+o.key+"/issue/search?s="+e+"&limit="+l}));case 15:return s=c.sent,u=[],s.data.length>0&&y.default.forEach(s.data,function(e){y.default.indexOf(a,e.id)===-1&&n.id!==e.id&&u.push({id:e.id,name:y.default.find(r,{id:e.type}).name+"/"+e.no+" - "+e.title})}),c.abrupt("return",{options:u});case 19:case"end":return c.stop()}},null,this)}},{key:"render",value:function(){var e=this,t=this.props,n=t.i18n.errMsg,r=t.loading,o=t.issue,a=t.options.relations,i=void 0===a?[]:a,l=[];return y.default.forEach(i,function(e){e.out==e.in?l.push({value:e.out,label:e.out}):(l.push({value:e.out,label:e.out}),l.push({value:e.in,label:e.in}))}),u.default.createElement(c.Modal,{show:!0,onHide:this.cancel,backdrop:"static","aria-labelledby":"contained-modal-title-sm"},u.default.createElement(c.Modal.Header,{closeButton:!0},u.default.createElement(c.Modal.Title,{id:"contained-modal-title-la"},"链接问题 - "+o.no)),u.default.createElement(c.Modal.Body,null,u.default.createElement(c.FormGroup,{controlId:"formControlsSelect"},u.default.createElement(c.ControlLabel,null,u.default.createElement("span",{className:"txt-impt"},"*"),"此问题"),u.default.createElement(p.default,{simpleValue:!0,clearable:!1,searchable:!1,disabled:r,options:l,value:this.state.relation,onChange:function(t){e.setState({relation:t})},placeholder:"请选择关系"})),u.default.createElement(c.FormGroup,{controlId:"formControlsSelect"},u.default.createElement(c.ControlLabel,null,u.default.createElement("span",{className:"txt-impt"},"*"),"问题"),u.default.createElement(p.default.Async,{clearable:!1,disabled:r,options:[],value:this.state.dest,onChange:function(t){e.setState({dest:t})},valueKey:"id",labelKey:"name",loadOptions:this.searchIssue.bind(this),placeholder:"输入问题号或名称"}))),u.default.createElement(c.Modal.Footer,null,u.default.createElement("span",{className:"ralign"},0!==this.state.ecode&&!r&&n[this.state.ecode]),u.default.createElement("img",{src:v,className:r?"loading":"hide"}),u.default.createElement(c.Button,{disabled:r||!this.state.relation||!this.state.dest,onClick:this.confirm},"确定"),u.default.createElement(c.Button,{bsStyle:"link",disabled:r,onClick:this.cancel},"取消")))}}],[{key:"propTypes",value:{i18n:s.PropTypes.object.isRequired,options:s.PropTypes.object.isRequired,close:s.PropTypes.func.isRequired,types:s.PropTypes.array.isRequired,loading:s.PropTypes.bool.isRequired,createLink:s.PropTypes.func.isRequired,project:s.PropTypes.object.isRequired,issue:s.PropTypes.object.isRequired},enumerable:!0}]),t}(s.Component);t.default=b,e.exports=t.default}).call(this)}finally{}},225:function(e,t,n){try{(function(){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function(e,t,n){for(var r=!0;r;){var o=e,a=t,i=n;r=!1,null===o&&(o=Function.prototype);var l=Object.getOwnPropertyDescriptor(o,a);if(void 0!==l){if("value"in l)return l.value;var s=l.get;if(void 0===s)return;return s.call(i)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=a,n=i,r=!0,l=u=void 0}},s=n(1),u=r(s),c=n(2),d=n(3),p=r(d),f=n(20),m=n(94),h=function(e){function t(e){o(this,t),l(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.handleCancel=this.handleCancel.bind(this)}return a(t,e),i(t,[{key:"handleCancel",value:function(){var e=this.props.close;e()}},{key:"render",value:function(){var e=this.props,t=e.watchers,n=e.issue_no;return u.default.createElement(c.Modal,{show:!0,onHide:this.handleCancel,backdrop:"static","aria-labelledby":"contained-modal-title-sm"},u.default.createElement(c.Modal.Header,{closeButton:!0},u.default.createElement(c.Modal.Title,{id:"contained-modal-title-la"},"关注者列表 - ",n)),u.default.createElement(c.Modal.Body,{style:{height:"420px",overflow:"auto"}},t.length<=0&&u.default.createElement("div",{style:{marginBottom:"10px"}},u.default.createElement("span",null,"暂无关注者")),t.length>0&&u.default.createElement("div",{className:"users-grid-view"},u.default.createElement("div",{className:"grid-view-container"},p.default.map(t,function(e,t){return u.default.createElement("div",{key:t,className:"grid-view-item"},u.default.createElement("img",{src:e.avatar?(0,f.urlWrapper)("/getavatar?fid="+e.avatar):m,className:"middle-avatar",i:!0}),u.default.createElement("div",{className:"grid-view-item-name"},e.name))})))),u.default.createElement(c.Modal.Footer,null,t.length>0&&u.default.createElement("span",{style:{"float":"left",padding:"5px"}},"共有关注者 ",u.default.createElement("strong",null,t.length)," 人"),u.default.createElement(c.Button,{onClick:this.handleCancel},"关闭")))}}],[{key:"propTypes",value:{close:s.PropTypes.func.isRequired,issue_no:s.PropTypes.number.isRequired,watchers:s.PropTypes.object.isRequired},enumerable:!0}]),t}(s.Component);t.default=h,e.exports=t.default}).call(this)}finally{}},226:function(e,t,n){try{(function(){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function(e,t,n){for(var r=!0;r;){var o=e,a=t,i=n;r=!1,null===o&&(o=Function.prototype);var l=Object.getOwnPropertyDescriptor(o,a);if(void 0!==l){if("value"in l)return l.value;var s=l.get;if(void 0===s)return;return s.call(i)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=a,n=i,r=!0,l=u=void 0}},s=n(1),u=r(s),c=n(2),d=n(5),p=function(e){function t(e){o(this,t),l(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={comments:""},this.confirm=this.confirm.bind(this),this.cancel=this.cancel.bind(this)}return a(t,e),i(t,[{key:"confirm",value:function(){var e,t,n,r,o,a;return regeneratorRuntime.async(function(i){for(;;)switch(i.prev=i.next){case 0:return e=this.props,t=e.close,n=e.data,r=e.doAction,o=e.action_id,i.next=7,regeneratorRuntime.awrap(r(n.id,n.entry_id,{action_id:o,comments:this.state.comments}));case 7:a=i.sent,0===a?(t(),d.notify.show("提交完成。","success",2e3)):d.notify.show("提交失败。","error",2e3);case 9:case"end":return i.stop()}},null,this)}},{key:"cancel",value:function(){var e=this.props.close;e()}},{key:"render",value:function(){var e=this;return u.default.createElement(c.Modal,{show:!0,onHide:this.cancel,backdrop:"static","aria-labelledby":"contained-modal-title-sm"},u.default.createElement(c.Modal.Header,{closeButton:!0},u.default.createElement(c.Modal.Title,{id:"contained-modal-title-la"},"流程评论")),u.default.createElement(c.Modal.Body,null,u.default.createElement(c.FormControl,{componentClass:"textarea",style:{height:"150px"},onChange:function(t){e.setState({comments:t.target.value})},placeholder:"输入评论",value:this.state.comments})),u.default.createElement(c.Modal.Footer,null,u.default.createElement(c.Button,{disabled:!this.state.comments,onClick:this.confirm},"确定"),u.default.createElement(c.Button,{bsStyle:"link",onClick:this.cancel},"取消")))}}],[{key:"propTypes",value:{close:s.PropTypes.func.isRequired,doAction:s.PropTypes.func.isRequired,action_id:s.PropTypes.string.isRequired,data:s.PropTypes.object.isRequired},enumerable:!0}]),t}(s.Component);t.default=p,e.exports=t.default}).call(this)}finally{}},227:function(module,exports,__webpack_require__){try{(function(){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_get=function(e,t,n){for(var r=!0;r;){var o=e,a=t,i=n;r=!1,null===o&&(o=Function.prototype);var l=Object.getOwnPropertyDescriptor(o,a);if(void 0!==l){if("value"in l)return l.value;var s=l.get;if(void 0===s)return;return s.call(i)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=a,n=i,r=!0,l=u=void 0}},_react=__webpack_require__(1),_react2=_interopRequireDefault(_react),_reactDom=__webpack_require__(12),_reactDom2=_interopRequireDefault(_reactDom),_reactBootstrap=__webpack_require__(2),_reactImageLightbox=__webpack_require__(45),_reactImageLightbox2=_interopRequireDefault(_reactImageLightbox),_lodash=__webpack_require__(3),_lodash2=_interopRequireDefault(_lodash),_reactNotifyToast=__webpack_require__(5),_shareFuncs=__webpack_require__(20),$=__webpack_require__(15),img=__webpack_require__(4),moment=__webpack_require__(6),DelCommentsModal=__webpack_require__(228),DelReplyModal=__webpack_require__(229),EditCommentsModal=__webpack_require__(230),Comments=function(_Component){function Comments(e){_classCallCheck(this,Comments),_get(Object.getPrototypeOf(Comments.prototype),"constructor",this).call(this,e),this.state={ecode:0,photoIndex:0,inlinePreviewShow:{},addCommentsShow:!1,editCommentsShow:!1,delCommentsShow:!1,delReplyShow:!1,selectedComments:{},contents:"",atWho:[]},this.state.displayTimeFormat=window.localStorage&&window.localStorage.getItem("comments-displayTimeFormat")||"relative",this.addAtWho=this.addAtWho.bind(this),this.addComments=this.addComments.bind(this),this.previewInlineImg=this.previewInlineImg.bind(this),this.createLightbox=this.createLightbox.bind(this)}return _inherits(Comments,_Component),_createClass(Comments,[{key:"showCommentsInputor",value:function(){return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(this.setState({addCommentsShow:!0}));case 2:$(".comments-inputor textarea").focus();case 3:case"end":return e.stop()}},null,this)}},{key:"showDelComments",value:function(e){this.setState({delCommentsShow:!0,selectedComments:e})}},{key:"showEditComments",value:function(e){this.setState({editCommentsShow:!0,selectedComments:e})}},{key:"showDelReply",value:function(e,t){this.setState({delReplyShow:!0,selectedComments:_lodash2.default.extend(t,{parent_id:e})})}},{key:"showEditReply",value:function(e,t){this.setState({editCommentsShow:!0,selectedComments:_lodash2.default.extend(t,{parent_id:e})})}},{key:"showAddReply",value:function(e,t){this.setState({editCommentsShow:!0,selectedComments:{parent_id:e,to:t}})}},{key:"addComments",value:function e(){var t,e,n,r,o,a;return regeneratorRuntime.async(function(i){for(var l=this;;)switch(i.prev=i.next){case 0:return t=this.props,e=t.addComments,n=t.users,r=t.issue_id,o=[],_lodash2.default.map(_lodash2.default.uniq(this.state.atWho),function(e){var t=_lodash2.default.find(n,{id:e});t&&l.state.contents.indexOf("@"+t.name)!==-1&&o.push(e)}),i.next=8,regeneratorRuntime.awrap(e(r,{contents:this.state.contents,atWho:_lodash2.default.map(o,function(e){return _lodash2.default.find(n,{id:e})})}));case 8:a=i.sent,0===a?(this.setState({addCommentsShow:!1,contents:"",atWho:[]}),_reactNotifyToast.notify.show("已添加评论。","success",2e3)):_reactNotifyToast.notify.show("评论添加失败。","error",2e3);case 10:case"end":return i.stop()}},null,this)}},{key:"componentWillReceiveProps",value:function(e){e.indexLoading&&this.setState({addCommentsShow:!1,contents:"",atWho:[]})}},{key:"addAtWho",value:function(e){this.state.atWho.push(e.id)}},{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.project,r=t.permissions,o=void 0===r?[]:r;o.indexOf("upload_file")!==-1&&!function(){var t=e;$(function(){$(".comments-inputor textarea").inlineattachment({allowedTypes:["image/jpeg","image/png","image/jpg","image/gif"],uploadUrl:(0,_shareFuncs.urlWrapper)("/project/"+n.key+"/file"),onFileUploaded:function(e,n){t.setState({contents:e.getValue()})},onFileReceived:function(e,n){t.setState({contents:e.getValue()})}})})}()}},{key:"extractImg",value:function extractImg(txt,atWho,cid){var images=txt.match(/!\[(.*?)\]\((.*?)\)/gi),imgFileUrls=[];images&&(_lodash2.default.forEach(images,function(e,t){var n=new RegExp("^!\\[(.*?)\\]\\((.*?)\\)$");if(n.exec(e)){var r=RegExp.$2;if(!r)return;var o=RegExp.$1||"";txt=txt.replace(e,'<div><img class="inline-img" id="inlineimg-'+cid+"-"+t+'" src="'+(0===r.indexOf("http")?r:(0,_shareFuncs.urlWrapper)(r+"/thumbnail"))+'" alt="'+o+'"/></div>'),imgFileUrls.push(r)}}),txt=txt.replace(/<\/div>(\s*?)<div>/gi,""));var links=txt.match(/\[.*?\]\(.*?\)/gi);return links&&_lodash2.default.forEach(links,function(e,t){var n=new RegExp("^\\[(.*?)\\]\\((.*?)\\)$");n.exec(e),txt=txt.replace(e,'<a target="_blank" href="'+RegExp.$2+'">'+RegExp.$1+"</a>")}),_lodash2.default.map(atWho||[],function(v){txt=txt.replace(eval("/@"+v.name+"/"),'<a title="'+v.name+"("+v.email+')">@'+v.name+"</a>")}),{html:txt.replace(/(\r\n)|(\n)/g,"<br/>"),imgFileUrls:imgFileUrls}}},{key:"createLightbox",value:function(e,t,n){var r=this;return _react2.default.createElement(_reactImageLightbox2.default,{mainSrc:(0,_shareFuncs.urlWrapper)(t[n]),nextSrc:(0,_shareFuncs.urlWrapper)(t[(n+1)%t.length]),prevSrc:(0,_shareFuncs.urlWrapper)(t[(n+t.length-1)%t.length]),imageTitle:"",imageCaption:"",onCloseRequest:function(){r.state.inlinePreviewShow[e]=!1,r.setState({inlinePreviewShow:r.state.inlinePreviewShow})},onMovePrevRequest:function(){return r.setState({photoIndex:(n+t.length-1)%t.length})},onMoveNextRequest:function(){return r.setState({photoIndex:(n+1)%t.length})}})}},{key:"previewInlineImg",value:function(e){var t=e.target.id;if(t){var n="",r=-1;0===t.indexOf("inlineimg-")&&(n=t.substring(10,t.lastIndexOf("-")),r=t.substr(t.lastIndexOf("-")+1)-0),this.state.inlinePreviewShow[n]=!0,this.setState({inlinePreviewShow:this.state.inlinePreviewShow,photoIndex:r})}}},{key:"componentDidUpdate",value:function(){var e=this.props.users;_lodash2.default.map(e||[],function(e){return e.nameAndEmail=e.name+"("+e.email+")",e});var t=this;$(".comments-inputor textarea").atwho({at:"@",searchKey:"nameAndEmail",displayTpl:"<li>${nameAndEmail}</li>",insertTpl:"${nameAndEmail}",callbacks:{beforeInsert:function(n,r){var o=_lodash2.default.find(e,{nameAndEmail:n});return o&&t.state.atWho.push(o.id),"@"+o.name}},data:e}),$(".comments-inputor textarea").one("inserted.atwho",function(e,n,r){t.setState({contents:e.target.value})})}},{key:"swapTime",value:function(){"relative"==this.state.displayTimeFormat?(window.localStorage&&window.localStorage.setItem("comments-displayTimeFormat","absolute"),this.setState({displayTimeFormat:"absolute"})):(window.localStorage&&window.localStorage.setItem("comments-displayTimeFormat","relative"),this.setState({displayTimeFormat:"relative"}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.i18n,r=t.currentTime,o=t.permissions,a=t.currentUser,i=t.indexComments,l=t.sortComments,s=t.collection,u=t.indexLoading,c=t.loading,d=t.itemLoading,p=t.delComments,f=t.editComments,m=t.users,h=t.project,y=t.issue_id,g=this.state,v=g.inlinePreviewShow,b=g.photoIndex;return _react2.default.createElement(_reactBootstrap.Form,{
horizontal:!0,style:{padding:"0px 15px"}},_react2.default.createElement(_reactBootstrap.FormGroup,null,_react2.default.createElement(_reactBootstrap.Col,{sm:12,className:u&&"hide",style:{marginTop:"15px",marginBottom:"15px"}},_react2.default.createElement("div",null,_react2.default.createElement("span",{className:"comments-button",title:"刷新",style:{marginRight:"10px","float":"right"},onClick:function(){i(y)}},_react2.default.createElement("i",{className:"fa fa-refresh"})," 刷新"),s.length>1&&_react2.default.createElement("span",{className:"comments-button",title:"排序",style:{marginRight:"10px","float":"right"},onClick:function(){l()}},_react2.default.createElement("i",{className:"fa fa-sort"})," ",s[0].created_at<s[s.length-1].created_at?"最新":"最早"),o.indexOf("add_comments")!==-1&&_react2.default.createElement("span",{className:"comments-button",title:"添加",style:{marginRight:"10px","float":"right"},onClick:this.showCommentsInputor.bind(this)},_react2.default.createElement("i",{className:"fa fa-comment-o"})," 添加"),_react2.default.createElement("span",{style:{marginRight:"20px","float":"right"}},_react2.default.createElement(_reactBootstrap.Checkbox,{style:{paddingTop:"0px",minHeight:"18px"},checked:"absolute"==this.state.displayTimeFormat,onClick:this.swapTime.bind(this)},"显示绝对时间")))),_react2.default.createElement(_reactBootstrap.Col,{sm:12,className:this.state.addCommentsShow||"hide"},_react2.default.createElement("div",{className:"comments-inputor"},_react2.default.createElement(_reactBootstrap.FormControl,{componentClass:"textarea",disabled:c,style:{height:"150px"},onChange:function(t){e.setState({contents:t.target.value})},value:this.state.contents,onKeyDown:function(t){"13"==t.keyCode&&t.ctrlKey&&!_lodash2.default.isEmpty(_lodash2.default.trim(e.state.contents))&&e.addComments()},placeholder:"支持@项目成员，Ctrl+Enter发布评论。"})),_react2.default.createElement("div",{style:{textAlign:"right",marginBottom:"10px"}},_react2.default.createElement("img",{src:img,className:c?"loading":"hide"}),_react2.default.createElement(_reactBootstrap.Button,{style:{marginLeft:"10px"},onClick:this.addComments,disabled:c||_lodash2.default.isEmpty(_lodash2.default.trim(this.state.contents))},"添加"),_react2.default.createElement(_reactBootstrap.Button,{bsStyle:"link",style:{marginRight:"5px"},onClick:function(){e.setState({addCommentsShow:!1})},disabled:c},"取消"))),_react2.default.createElement(_reactBootstrap.Col,{sm:12},u&&_react2.default.createElement("div",{style:{width:"100%",textAlign:"center",marginTop:"15px"}},_react2.default.createElement("img",{src:img,className:"loading"})),s.length<=0&&!u?_react2.default.createElement("div",{style:{width:"100%",textAlign:"left",marginTop:"10px",marginLeft:"10px"}},"暂无评论。"):_lodash2.default.map(s,function(t,n){var i=_react2.default.createElement("div",{style:{fontSize:"12px"}},_react2.default.createElement("span",{dangerouslySetInnerHTML:{__html:'<a title="'+(t.creator&&t.creator.name+"("+t.creator.email+")")+'">'+(t.creator&&t.creator.id===a.id?"我":t.creator.name)+"</a> - "+("absolute"==e.state.displayTimeFormat?moment.unix(t.created_at).format("YYYY/MM/DD HH:mm:ss"):(0,_shareFuncs.getAgoAt)(t.created_at,r))+(1==t.edited_flag?'<span style="color:red"> - 已编辑</span>':"")}}),(t.creator&&a.id===t.creator.id&&o.indexOf("delete_self_comments")!==-1||o.indexOf("delete_comments")!==-1)&&_react2.default.createElement("span",{className:"comments-button comments-edit-button",style:{"float":"right",marginLeft:"7px"},onClick:e.showDelComments.bind(e,t),title:"删除"},_react2.default.createElement("i",{className:"fa fa-trash"})),(t.creator&&a.id===t.creator.id&&o.indexOf("edit_self_comments")!==-1||o.indexOf("edit_comments")!==-1)&&_react2.default.createElement("span",{className:"comments-button comments-edit-button",style:{marginLeft:"7px","float":"right"},onClick:e.showEditComments.bind(e,t),title:"编辑"},_react2.default.createElement("i",{className:"fa fa-edit"})),o.indexOf("add_comments")!==-1&&_react2.default.createElement("span",{className:"comments-button comments-edit-button",style:{marginLeft:"7px","float":"right"},onClick:e.showAddReply.bind(e,t.id,{}),title:"回复"},_react2.default.createElement("i",{className:"fa fa-reply"}))),l=t.contents?_lodash2.default.escape(t.contents):"-",s=e.extractImg(l,t.atWho,t.id),u=s.html,c=s.imgFileUrls;return _react2.default.createElement(_reactBootstrap.Panel,{header:i,key:n,style:{marginBottom:"15px"}},_react2.default.createElement("div",{onClick:e.previewInlineImg,style:{lineHeight:"24px",whiteSpace:"pre-wrap",wordWrap:"break-word"},dangerouslySetInnerHTML:{__html:u}}),v[t.id]&&e.createLightbox(t.id,c,b),t.reply&&t.reply.length>0&&_react2.default.createElement("div",{className:"reply-region"},_react2.default.createElement("ul",{className:"reply-contents"},_lodash2.default.map(t.reply,function(n,i){var l=n.contents?_lodash2.default.escape(n.contents):"-",s=e.extractImg(l,n.atWho,n.id),u=s.html,c=s.imgFileUrls;return _react2.default.createElement("li",{className:"reply-contents-item"},_react2.default.createElement("div",{className:"reply-item-header"},_react2.default.createElement("span",{dangerouslySetInnerHTML:{__html:'<a title="'+(n.creator&&n.creator.name+"("+n.creator.email+")")+'">'+(n.creator&&n.creator.id===a.id?"我":n.creator.name)+"</a> - "+("absolute"==e.state.displayTimeFormat?moment.unix(n.created_at).format("YYYY/MM/DD HH:mm:ss"):(0,_shareFuncs.getAgoAt)(n.created_at,r))+(1==n.edited_flag?'<span style="color:red"> - 已编辑</span>':"")}}),(n.creator&&a.id===n.creator.id&&o.indexOf("delete_self_comments")!==-1||o.indexOf("delete_comments")!==-1)&&_react2.default.createElement("span",{className:"comments-button comments-edit-button",style:{marginLeft:"7px","float":"right"},onClick:e.showDelReply.bind(e,t.id,n),title:"删除"},_react2.default.createElement("i",{className:"fa fa-trash"})),(n.creator&&a.id===n.creator.id&&o.indexOf("edit_self_comments")!==-1||o.indexOf("edit_comments")!==-1)&&_react2.default.createElement("span",{className:"comments-button comments-edit-button",style:{marginLeft:"7px","float":"right"},onClick:e.showEditReply.bind(e,t.id,n),title:"编辑"},_react2.default.createElement("i",{className:"fa fa-edit"})),o.indexOf("add_comments")!==-1&&_react2.default.createElement("span",{className:"comments-button comments-edit-button",style:{marginLeft:"7px","float":"right"},onClick:e.showAddReply.bind(e,t.id,n.creator),title:"回复"},_react2.default.createElement("i",{className:"fa fa-reply"}))),_react2.default.createElement("div",{onClick:e.previewInlineImg,style:{lineHeight:"24px",whiteSpace:"pre-wrap",wordWrap:"break-word"},dangerouslySetInnerHTML:{__html:u}}),v[n.id]&&e.createLightbox(n.id,c,b))}))))}))),this.state.editCommentsShow&&_react2.default.createElement(EditCommentsModal,{show:!0,close:function(){e.setState({editCommentsShow:!1})},data:this.state.selectedComments,loading:d,users:m,project:h,permissions:o,issue_id:y,edit:f,i18n:n}),this.state.delReplyShow&&_react2.default.createElement(DelReplyModal,{show:!0,close:function(){e.setState({delReplyShow:!1})},data:this.state.selectedComments,loading:d,issue_id:y,edit:f,i18n:n}),this.state.delCommentsShow&&_react2.default.createElement(DelCommentsModal,{show:!0,close:function(){e.setState({delCommentsShow:!1})},data:this.state.selectedComments,loading:d,issue_id:y,del:p,i18n:n}))}}],[{key:"propTypes",value:{i18n:_react.PropTypes.object.isRequired,currentTime:_react.PropTypes.number.isRequired,currentUser:_react.PropTypes.object.isRequired,project:_react.PropTypes.object.isRequired,permissions:_react.PropTypes.array.isRequired,indexLoading:_react.PropTypes.bool.isRequired,loading:_react.PropTypes.bool.isRequired,itemLoading:_react.PropTypes.bool.isRequired,indexComments:_react.PropTypes.func.isRequired,sortComments:_react.PropTypes.func.isRequired,addComments:_react.PropTypes.func.isRequired,editComments:_react.PropTypes.func.isRequired,delComments:_react.PropTypes.func.isRequired,users:_react.PropTypes.array.isRequired,collection:_react.PropTypes.array.isRequired,issue_id:_react.PropTypes.string},enumerable:!0}]),Comments}(_react.Component);exports.default=Comments,module.exports=exports.default}).call(this)}finally{}},228:function(e,t,n){try{(function(){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function(e,t,n){for(var r=!0;r;){var o=e,a=t,i=n;r=!1,null===o&&(o=Function.prototype);var l=Object.getOwnPropertyDescriptor(o,a);if(void 0!==l){if("value"in l)return l.value;var s=l.get;if(void 0===s)return;return s.call(i)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=a,n=i,r=!0,l=u=void 0}},s=n(1),u=r(s),c=n(2),d=n(5),p=n(6),f=n(4),m=function(e){function t(e){o(this,t),l(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={ecode:0},this.confirm=this.confirm.bind(this),this.cancel=this.cancel.bind(this)}return a(t,e),i(t,[{key:"confirm",value:function(){var e,t,n,r,o,a;return regeneratorRuntime.async(function(i){for(;;)switch(i.prev=i.next){case 0:return e=this.props,t=e.issue_id,n=e.close,r=e.del,o=e.data,i.next=7,regeneratorRuntime.awrap(r(t,o.id));case 7:a=i.sent,this.setState({ecode:a}),0===a&&(n(),d.notify.show("评论已删除。","success",2e3));case 10:case"end":return i.stop()}},null,this)}},{key:"cancel",value:function(){var e=this.props.close;e()}},{key:"render",value:function(){var e=this.props,t=e.i18n.errMsg,n=e.data,r=e.loading;return u.default.createElement(c.Modal,{show:!0,onHide:this.cancel,backdrop:"static","aria-labelledby":"contained-modal-title-sm"},u.default.createElement(c.Modal.Header,{closeButton:!0},u.default.createElement(c.Modal.Title,{id:"contained-modal-title-la"},"删除评论")),u.default.createElement(c.Modal.Body,null,"此评论添加于 ",p.unix(n.created_at).format("YYYY/MM/DD HH:mm"),u.default.createElement("br",null),u.default.createElement("br",null),"确认要删除吗？"),u.default.createElement(c.Modal.Footer,null,u.default.createElement("span",{className:"ralign"},0!==this.state.ecode&&!r&&t[this.state.ecode]),u.default.createElement("img",{src:f,className:r?"loading":"hide"}),u.default.createElement(c.Button,{disabled:r,onClick:this.confirm},"确定"),u.default.createElement(c.Button,{bsStyle:"link",disabled:r,onClick:this.cancel},"取消")))}}],[{key:"propTypes",value:{i18n:s.PropTypes.object.isRequired,issue_id:s.PropTypes.string.isRequired,close:s.PropTypes.func.isRequired,del:s.PropTypes.func.isRequired,loading:s.PropTypes.bool.isRequired,data:s.PropTypes.object.isRequired},enumerable:!0}]),t}(s.Component);t.default=m,e.exports=t.default}).call(this)}finally{}},229:function(e,t,n){try{(function(){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function(e,t,n){for(var r=!0;r;){var o=e,a=t,i=n;r=!1,null===o&&(o=Function.prototype);var l=Object.getOwnPropertyDescriptor(o,a);if(void 0!==l){if("value"in l)return l.value;var s=l.get;if(void 0===s)return;return s.call(i)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=a,n=i,r=!0,l=u=void 0}},s=n(1),u=r(s),c=n(2),d=n(5),p=n(4),f=function(e){function t(e){o(this,t),l(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={ecode:0},this.confirm=this.confirm.bind(this),this.cancel=this.cancel.bind(this)}return a(t,e),i(t,[{key:"confirm",value:function(){var e,t,n,r,o,a;return regeneratorRuntime.async(function(i){for(;;)switch(i.prev=i.next){case 0:return e=this.props,t=e.issue_id,n=e.close,r=e.edit,o=e.data,i.next=7,regeneratorRuntime.awrap(r(t,o.parent_id,{reply_id:o.id,operation:"delReply"}));case 7:a=i.sent,this.setState({ecode:a}),0===a&&(n(),d.notify.show("回复已删除。","success",2e3));case 10:case"end":return i.stop()}},null,this)}},{key:"cancel",value:function(){var e=this.props.close;e()}},{key:"render",value:function(){var e=this.props,t=e.i18n.errMsg,n=(e.data,e.loading);return u.default.createElement(c.Modal,{show:!0,onHide:this.cancel,backdrop:"static","aria-labelledby":"contained-modal-title-sm"},u.default.createElement(c.Modal.Header,{closeButton:!0},u.default.createElement(c.Modal.Title,{id:"contained-modal-title-la"},"删除回复")),u.default.createElement(c.Modal.Body,null,"确认要删除此回复？"),u.default.createElement(c.Modal.Footer,null,u.default.createElement("span",{className:"ralign"},0!==this.state.ecode&&!n&&t[this.state.ecode]),u.default.createElement("img",{src:p,className:n?"loading":"hide"}),u.default.createElement(c.Button,{disabled:n,onClick:this.confirm},"确定"),u.default.createElement(c.Button,{bsStyle:"link",disabled:n,onClick:this.cancel},"取消")))}}],[{key:"propTypes",value:{i18n:s.PropTypes.object.isRequired,issue_id:s.PropTypes.string.isRequired,close:s.PropTypes.func.isRequired,edit:s.PropTypes.func.isRequired,loading:s.PropTypes.bool.isRequired,data:s.PropTypes.object.isRequired},enumerable:!0}]),t}(s.Component);t.default=f,e.exports=t.default}).call(this)}finally{}},230:function(e,t,n){try{(function(){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function(e,t,n){for(var r=!0;r;){var o=e,a=t,i=n;r=!1,null===o&&(o=Function.prototype);var l=Object.getOwnPropertyDescriptor(o,a);if(void 0!==l){if("value"in l)return l.value;var s=l.get;if(void 0===s)return;return s.call(i)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=a,n=i,r=!0,l=u=void 0}},s=n(1),u=r(s),c=n(2),d=n(3),p=r(d),f=n(5),m=n(20),h=n(15),y=n(4),g=function(e){function t(e){o(this,t),l(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e);var n=e.data;n.id?this.state={ecode:0,oldContents:n.contents||"",contents:n.contents||"",atWho:p.default.map(n.atWho||[],"id")}:this.state={ecode:0,oldContents:n.to&&n.to.id?"@"+n.to.name+" ":"",contents:n.to&&n.to.id?"@"+n.to.name+" ":"",atWho:n.to&&n.to.id?[n.to.id]:[]},this.confirm=this.confirm.bind(this),this.cancel=this.cancel.bind(this)}return a(t,e),i(t,[{key:"confirm",value:function(){var e,t,n,r,o,a,i,l,s;return regeneratorRuntime.async(function(u){for(var c=this;;)switch(u.prev=u.next){case 0:if(e=this.props,t=e.i18n.errMsg,n=e.issue_id,r=e.close,o=e.edit,a=e.users,i=e.data,l=[],p.default.map(p.default.uniq(this.state.atWho),function(e){var t=p.default.find(a,{id:e});c.state.contents.indexOf("@"+t.name)!==-1&&l.push(e)}),s=0,!i.parent_id){u.next=18;break}return u.next=13,regeneratorRuntime.awrap(o(n,i.parent_id,{contents:this.state.contents,reply_id:i.id||"",atWho:p.default.map(l,function(e){return p.default.find(a,{id:e})}),operation:i.id?"editReply":"addReply"}));case 13:s=u.sent,this.setState({ecode:s}),0===s&&(r(),i.id?f.notify.show("已更新回复。","success",2e3):f.notify.show("已添加回复。","success",2e3)),u.next=23;break;case 18:return u.next=20,regeneratorRuntime.awrap(o(n,i.id,{contents:this.state.contents,atWho:p.default.map(l,function(e){return p.default.find(a,{id:e})})}));case 20:s=u.sent,this.setState({ecode:s}),0===s&&(r(),f.notify.show("已更新评论。","success",2e3));case 23:case"end":return u.stop()}},null,this)}},{key:"cancel",value:function(){var e=this.props.close;e()}},{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.project,r=t.permissions,o=void 0===r?[]:r;o.indexOf("upload_file")!==-1&&!function(){var t=e;h(function(){h(".edit-comments-inputor textarea").inlineattachment({allowedTypes:["image/jpeg","image/png","image/jpg","image/gif"],uploadUrl:(0,m.urlWrapper)("/project/"+n.key+"/file"),onFileUploaded:function(e,n){t.setState({contents:e.getValue()})},onFileReceived:function(e,n){t.setState({contents:e.getValue()})}})})}(),this.moveEnd()}},{key:"componentDidUpdate",value:function(){var e=this.props.users;p.default.map(e||[],function(e){return e.nameAndEmail=e.name+"("+e.email+")",e});var t=this;h(".edit-comments-inputor textarea").atwho({at:"@",searchKey:"nameAndEmail",displayTpl:"<li>${nameAndEmail}</li>",insertTpl:"${nameAndEmail}",callbacks:{beforeInsert:function(n,r){var o=p.default.find(e,{nameAndEmail:n});return o&&t.state.atWho.push(o.id),"@"+o.name}},data:e}),h(".edit-comments-inputor textarea").one("inserted.atwho",function(e,n,r){t.setState({contents:e.target.value})})}},{key:"moveEnd",value:function(){var e=h(".edit-comments-inputor textarea").get(0);e.focus();var t=e.value.length;if(!(t<=0))if(document.selection){var n=e.createTextRange();n.moveStart("character",t),n.collapse(),n.select()}else"number"==typeof e.selectionStart&&"number"==typeof e.selectionEnd&&(e.selectionStart=e.selectionEnd=t)}},{key:"render",value:function(){var e=this,t=this.props,n=t.i18n.errMsg,r=t.data,o=t.loading,a="";return a=r.id?"编辑评论":"回复评论",u.default.createElement(c.Modal,{show:!0,onHide:this.cancel,backdrop:"static","aria-labelledby":"contained-modal-title-sm"},u.default.createElement(c.Modal.Header,{closeButton:!0},u.default.createElement(c.Modal.Title,{id:"contained-modal-title-la"},a)),u.default.createElement(c.Modal.Body,null,u.default.createElement("div",{className:"edit-comments-inputor"},u.default.createElement(c.FormControl,{componentClass:"textarea",disabled:o,style:{height:"150px"},onChange:function(t){e.setState({contents:t.target.value})},onKeyDown:function(t){"13"==t.keyCode&&t.ctrlKey&&e.state.oldContents!=e.state.contents&&e.confirm()},value:this.state.contents,placeholder:"支持@项目成员，Ctrl+Enter发布评论。"}))),u.default.createElement(c.Modal.Footer,null,u.default.createElement("span",{className:"ralign"},0!==this.state.ecode&&!o&&n[this.state.ecode]),u.default.createElement("img",{src:y,className:o?"loading":"hide"}),u.default.createElement(c.Button,{disabled:this.state.oldContents===this.state.contents||o,onClick:this.confirm},"确定"),u.default.createElement(c.Button,{bsStyle:"link",disabled:o,onClick:this.cancel},"取消")))}}],[{key:"propTypes",value:{i18n:s.PropTypes.object.isRequired,project:s.PropTypes.object.isRequired,issue_id:s.PropTypes.string.isRequired,close:s.PropTypes.func.isRequired,permissions:s.PropTypes.array.isRequired,edit:s.PropTypes.func.isRequired,loading:s.PropTypes.bool.isRequired,isAutoAt:s.PropTypes.bool,users:s.PropTypes.array.isRequired,data:s.PropTypes.object.isRequired},enumerable:!0}]),t}(s.Component);t.default=g,e.exports=t.default}).call(this)}finally{}},231:function(e,t,n){try{(function(){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function(e,t,n){for(var r=!0;r;){var o=e,a=t,i=n;r=!1,null===o&&(o=Function.prototype);var l=Object.getOwnPropertyDescriptor(o,a);if(void 0!==l){if("value"in l)return l.value;var s=l.get;if(void 0===s)return;return s.call(i)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=a,n=i,r=!0,l=u=void 0}},s=n(1),u=r(s),c=n(12),d=(r(c),n(2)),p=n(3),f=r(p),m=n(20),h=n(4),y=n(6),g=function(e){function t(e){o(this,t),l(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={ecode:0},this.state.displayTimeFormat=window.localStorage&&window.localStorage.getItem("gitcommits-displayTimeFormat")||"relative"}return a(t,e),i(t,[{key:"swapTime",value:function(){"relative"==this.state.displayTimeFormat?(window.localStorage&&window.localStorage.setItem("gitcommits-displayTimeFormat","absolute"),this.setState({displayTimeFormat:"absolute"})):(window.localStorage&&window.localStorage.setItem("gitcommits-displayTimeFormat","relative"),this.setState({displayTimeFormat:"relative"}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.issue_id,r=t.currentTime,o=t.currentUser,a=t.indexGitCommits,i=t.sortGitCommits,l=t.collection,s=t.indexLoading;return u.default.createElement(d.Form,{horizontal:!0,style:{padding:"0px 15px"}},u.default.createElement(d.FormGroup,null,u.default.createElement(d.Col,{sm:12,className:s&&"hide",style:{marginTop:"15px",marginBottom:"15px"}},u.default.createElement("div",null,u.default.createElement("span",{className:"comments-button",title:"刷新",style:{marginRight:"10px","float":"right"},onClick:function(){a(n,e.state.sort)}},u.default.createElement("i",{className:"fa fa-refresh"})," 刷新"),l.length>1&&u.default.createElement("span",{className:"comments-button",title:"排序",style:{marginRight:"10px","float":"right"},onClick:function(){i()}},u.default.createElement("i",{className:"fa fa-sort"})," ",l[0].committed_at<l[l.length-1].committed_at?"最新":"最早"),u.default.createElement("span",{style:{marginRight:"20px","float":"right"}},u.default.createElement(d.Checkbox,{style:{paddingTop:"0px",minHeight:"18px"},checked:"absolute"==this.state.displayTimeFormat,onClick:this.swapTime.bind(this)},"显示绝对时间")))),u.default.createElement(d.Col,{sm:12},s&&u.default.createElement("div",{style:{width:"100%",textAlign:"center",marginTop:"15px"}},u.default.createElement("img",{src:h,className:"loading"})),l.length<=0&&!s?u.default.createElement("div",{style:{width:"100%",textAlign:"left",marginTop:"10px",marginLeft:"10px"}},"暂无数据。"):f.default.map(l,function(t,n){var a=u.default.createElement("div",{style:{fontSize:"12px"}},u.default.createElement("span",{dangerouslySetInnerHTML:{__html:'<a title="'+(t.author&&t.author.name+"("+t.author.email+")")+'">'+(t.author&&t.author.id===o.id?"我":t.author.name)+"</a> 提交代码 - "+("absolute"==e.state.displayTimeFormat?y.unix(t.committed_at).format("YYYY/MM/DD HH:mm:ss"):(0,m.getAgoAt)(t.committed_at,r))}}));return u.default.createElement(d.Panel,{header:a,key:n,style:{marginBottom:"15px"}},u.default.createElement(d.Table,{condensed:!0,hover:!0,responsive:!0},u.default.createElement("tr",null,u.default.createElement("td",{style:{width:"125px"}},u.default.createElement("div",{style:{textAlign:"right",fontWeight:600,paddingRight:"10px"}},"Repository")),u.default.createElement("td",null,u.default.createElement("div",{style:{whiteSpace:"pre-wrap",wordWrap:"break-word"}},u.default.createElement("a",{href:t.repo.homepage,target:"_blank"},t.repo.name)))),u.default.createElement("tr",null,u.default.createElement("td",{style:{width:"125px"}},u.default.createElement("div",{style:{textAlign:"right",fontWeight:600,paddingRight:"15px"}},"Branch")),u.default.createElement("td",null,u.default.createElement("div",{style:{whiteSpace:"pre-wrap",wordWrap:"break-word"}},u.default.createElement("a",{href:t.repo.homepage+"/tree/"+t.branch,target:"_blank"},t.branch)))),u.default.createElement("tr",null,u.default.createElement("td",{style:{width:"125px"}},u.default.createElement("div",{style:{textAlign:"right",fontWeight:600,paddingRight:"15px"}},"Sha")),u.default.createElement("td",null,u.default.createElement("div",{style:{whiteSpace:"pre-wrap",wordWrap:"break-word"}},u.default.createElement("a",{href:t.repo.homepage+"/commit/"+t.sha,target:"_blank"},t.sha)))),u.default.createElement("tr",null,u.default.createElement("td",{style:{width:"125px",verticalAlign:"top"}},u.default.createElement("div",{style:{textAlign:"right",fontWeight:600,paddingRight:"15px"}},"Message")),u.default.createElement("td",null,u.default.createElement("div",{style:{whiteSpace:"pre-wrap",wordWrap:"break-word"}},t.message))),t.added&&t.added.length>0&&u.default.createElement("tr",null,u.default.createElement("td",{style:{width:"125px",verticalAlign:"top"}},u.default.createElement("div",{style:{textAlign:"right",fontWeight:600,paddingRight:"15px"}},"Added")),u.default.createElement("td",null,u.default.createElement("ul",{className:"list-unstyled clearfix",style:{marginBottom:"0px"}},f.default.map(t.added,function(e,n){return u.default.createElement("li",{style:{whiteSpace:"pre-wrap",wordWrap:"break-word"},key:n},u.default.createElement("a",{href:t.repo.homepage+"/blob/"+t.sha+"/"+e,target:"_blank"},e))})))),t.modified&&t.modified.length>0&&u.default.createElement("tr",null,u.default.createElement("td",{style:{width:"125px",verticalAlign:"top"}},u.default.createElement("div",{style:{textAlign:"right",fontWeight:600,paddingRight:"15px"}},"Modified")),u.default.createElement("td",null,u.default.createElement("ul",{className:"list-unstyled clearfix",style:{marginBottom:"0px"}},f.default.map(t.modified,function(e,n){return u.default.createElement("li",{style:{whiteSpace:"pre-wrap",wordWrap:"break-word"},key:n},u.default.createElement("a",{href:t.repo.homepage+"/blob/"+t.sha+"/"+e,target:"_blank"},e))})))),t.removed&&t.removed.length>0&&u.default.createElement("tr",null,u.default.createElement("td",{style:{width:"125px"}},u.default.createElement("div",{style:{textAlign:"right",fontWeight:600,paddingRight:"15px"}},"Removed")),u.default.createElement("td",null,u.default.createElement("ul",{className:"list-unstyled clearfix",style:{marginBottom:"0px"}},f.default.map(t.removed,function(e,t){return u.default.createElement("li",{style:{whiteSpace:"pre-wrap",wordWrap:"break-word"},key:t},u.default.createElement("span",{style:{textDecoration:"line-through"}},e))}))))))}))))}}],[{key:"propTypes",value:{issue_id:s.PropTypes.string,currentTime:s.PropTypes.number.isRequired,currentUser:s.PropTypes.object.isRequired,indexLoading:s.PropTypes.bool.isRequired,indexGitCommits:s.PropTypes.func.isRequired,sortGitCommits:s.PropTypes.func.isRequired,collection:s.PropTypes.array.isRequired},enumerable:!0}]),t}(s.Component);t.default=g,e.exports=t.default}).call(this)}finally{}},232:function(e,t,n){try{(function(){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function(e,t,n){for(var r=!0;r;){var o=e,a=t,i=n;r=!1,null===o&&(o=Function.prototype);var l=Object.getOwnPropertyDescriptor(o,a);if(void 0!==l){if("value"in l)return l.value;var s=l.get;if(void 0===s)return;return s.call(i)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=a,n=i,r=!0,l=u=void 0}},s=n(1),u=r(s),c=n(12),d=(r(c),n(2)),p=n(3),f=r(p),m=n(20),h=n(4),y=n(6),g=function(e){function t(e){o(this,t),l(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={ecode:0},this.state.displayTimeFormat=window.localStorage&&window.localStorage.getItem("history-displayTimeFormat")||"relative"}return a(t,e),i(t,[{key:"swapTime",value:function(){"relative"==this.state.displayTimeFormat?(window.localStorage&&window.localStorage.setItem("history-displayTimeFormat","absolute"),this.setState({displayTimeFormat:"absolute"})):(window.localStorage&&window.localStorage.setItem("history-displayTimeFormat","relative"),this.setState({displayTimeFormat:"relative"}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.issue_id,r=t.currentTime,o=t.currentUser,a=t.indexHistory,i=t.sortHistory,l=t.collection,s=t.indexLoading;return u.default.createElement(d.Form,{horizontal:!0,style:{padding:"0px 15px"}},u.default.createElement(d.FormGroup,null,u.default.createElement(d.Col,{sm:12,className:s&&"hide",style:{marginTop:"15px",marginBottom:"15px"}},u.default.createElement("div",null,u.default.createElement("span",{className:"comments-button",title:"刷新",style:{marginRight:"10px","float":"right"},onClick:function(){a(n,e.state.sort)}},u.default.createElement("i",{className:"fa fa-refresh"})," 刷新"),l.length>1&&u.default.createElement("span",{className:"comments-button",title:"排序",style:{marginRight:"10px","float":"right"},onClick:function(){i()}},u.default.createElement("i",{className:"fa fa-sort"})," ",l[0].operated_at<l[l.length-1].operated_at?"最新":"最早"),u.default.createElement("span",{style:{marginRight:"20px","float":"right"}},u.default.createElement(d.Checkbox,{style:{paddingTop:"0px",minHeight:"18px"},checked:"absolute"==this.state.displayTimeFormat,disabled:s,onClick:this.swapTime.bind(this)},"显示绝对时间")))),u.default.createElement(d.Col,{sm:12},s&&u.default.createElement("div",{style:{width:"100%",textAlign:"center",marginTop:"15px"}},u.default.createElement("img",{src:h,className:"loading"})),l.length<=0&&!s?u.default.createElement("div",{style:{width:"100%",textAlign:"left",marginTop:"10px",marginLeft:"10px"}},"暂无改动纪录。"):f.default.map(l,function(t,n){var a=u.default.createElement("div",{style:{fontSize:"12px"}},u.default.createElement("span",{dangerouslySetInnerHTML:{__html:'<a title="'+(t.operator&&t.operator.name+"("+t.operator.email+")")+'">'+(t.operator&&t.operator.id===o.id?"我":t.operator.name)+"</a> "+("modify"==t.operation?"修改":"新建")+" - "+("absolute"==e.state.displayTimeFormat?y.unix(t.operated_at).format("YYYY/MM/DD HH:mm:ss"):(0,m.getAgoAt)(t.operated_at,r))}}));return u.default.createElement(d.Panel,{header:a,key:n,style:{marginBottom:"15px"}},"modify"==t.operation?u.default.createElement(d.Table,{condensed:!0,hover:!0,responsive:!0},u.default.createElement("thead",null,u.default.createElement("tr",null,u.default.createElement("th",null,"字段"),u.default.createElement("th",null,"原值"),u.default.createElement("th",null,"新值"))),u.default.createElement("tbody",null,f.default.map(t.data||[],function(e){return u.default.createElement("tr",null,u.default.createElement("td",{width:"24%"},u.default.createElement("div",{style:{whiteSpace:"pre-wrap",wordWrap:"break-word"
}},e.field||"")),u.default.createElement("td",{width:"38%"},u.default.createElement("div",{style:{whiteSpace:"pre-wrap",wordWrap:"break-word"},dangerouslySetInnerHTML:{__html:f.default.isString(e.before_value)?f.default.escape(e.before_value).replace(/(\r\n)|(\n)/g,"<br/>"):e.before_value}})),u.default.createElement("td",{width:"38%"},u.default.createElement("div",{style:{whiteSpace:"pre-wrap",wordWrap:"break-word"},dangerouslySetInnerHTML:{__html:f.default.isString(e.after_value)?f.default.escape(e.after_value).replace(/(\r\n)|(\n)/g,"<br/>"):e.after_value}})))}))):u.default.createElement("span",{style:{marginLeft:"5px"}},"创建问题"))}))))}}],[{key:"propTypes",value:{issue_id:s.PropTypes.string,currentTime:s.PropTypes.number.isRequired,currentUser:s.PropTypes.object.isRequired,indexLoading:s.PropTypes.bool.isRequired,indexHistory:s.PropTypes.func.isRequired,sortHistory:s.PropTypes.func.isRequired,collection:s.PropTypes.array.isRequired},enumerable:!0}]),t}(s.Component);t.default=g,e.exports=t.default}).call(this)}finally{}},233:function(e,t,n){try{(function(){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function(e,t,n){for(var r=!0;r;){var o=e,a=t,i=n;r=!1,null===o&&(o=Function.prototype);var l=Object.getOwnPropertyDescriptor(o,a);if(void 0!==l){if("value"in l)return l.value;var s=l.get;if(void 0===s)return;return s.call(i)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=a,n=i,r=!0,l=u=void 0}},s=n(1),u=r(s),c=n(2),d=n(5),p=n(6),f=n(4),m=function(e){function t(e){o(this,t),l(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={ecode:0},this.confirm=this.confirm.bind(this),this.cancel=this.cancel.bind(this)}return a(t,e),i(t,[{key:"confirm",value:function(){var e,t,n,r,o,a;return regeneratorRuntime.async(function(i){for(;;)switch(i.prev=i.next){case 0:return e=this.props,t=e.issue,n=e.close,r=e.del,o=e.data,i.next=7,regeneratorRuntime.awrap(r(t.id,o.id));case 7:a=i.sent,0===a?(this.setState({ecode:0}),n(),d.notify.show("日志已删除。","success",2e3)):this.setState({ecode:a});case 9:case"end":return i.stop()}},null,this)}},{key:"cancel",value:function(){var e=this.props.close;e()}},{key:"render",value:function(){var e=this.props,t=e.i18n.errMsg,n=e.data,r=e.loading;return u.default.createElement(c.Modal,{show:!0,onHide:this.cancel,backdrop:"static","aria-labelledby":"contained-modal-title-sm"},u.default.createElement(c.Modal.Header,{closeButton:!0},u.default.createElement(c.Modal.Title,{id:"contained-modal-title-la"},"删除工作日志")),u.default.createElement(c.Modal.Body,null,"此工作日志添加于 ",p.unix(n.recorded_at).format("YYYY/MM/DD HH:mm"),u.default.createElement("br",null),u.default.createElement("br",null),"确认要删除吗？"),u.default.createElement(c.Modal.Footer,null,u.default.createElement("span",{className:"ralign"},0!==this.state.ecode&&!r&&t[this.state.ecode]),u.default.createElement("img",{src:f,className:r?"loading":"hide"}),u.default.createElement(c.Button,{disabled:r,onClick:this.confirm},"确定"),u.default.createElement(c.Button,{bsStyle:"link",disabled:r,onClick:this.cancel},"取消")))}}],[{key:"propTypes",value:{i18n:s.PropTypes.object.isRequired,issue:s.PropTypes.object.isRequired,close:s.PropTypes.func.isRequired,del:s.PropTypes.func.isRequired,loading:s.PropTypes.bool.isRequired,data:s.PropTypes.object.isRequired},enumerable:!0}]),t}(s.Component);t.default=m,e.exports=t.default}).call(this)}finally{}},234:function(e,t,n){try{(function(){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function(e,t,n){for(var r=!0;r;){var o=e,a=t,i=n;r=!1,null===o&&(o=Function.prototype);var l=Object.getOwnPropertyDescriptor(o,a);if(void 0!==l){if("value"in l)return l.value;var s=l.get;if(void 0===s)return;return s.call(i)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=a,n=i,r=!0,l=u=void 0}},s=n(1),u=r(s),c=n(12),d=(r(c),n(2)),p=n(3),f=r(p),m=n(20),h=n(4),y=n(6),g=n(191),v=n(233),b=function(e){function t(e){o(this,t),l(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={ecode:0},this.m2t=this.m2t.bind(this),this.t2m=this.t2m.bind(this),this.state.displayTimeFormat=window.localStorage&&window.localStorage.getItem("worklogs-displayTimeFormat")||"relative"}return a(t,e),i(t,[{key:"componentWillReceiveProps",value:function(e){e.indexLoading&&this.setState({addWorklogShow:!1})}},{key:"showEditWorklog",value:function(e){this.setState({addWorklogShow:!0,selectedWorklog:e})}},{key:"showAddWorklog",value:function(){this.setState({addWorklogShow:!0,selectedWorklog:{}})}},{key:"showDelWorklog",value:function(e){this.setState({delWorklogShow:!0,selectedWorklog:e})}},{key:"t2m",value:function(e){var t=this.props.options,n=void 0===t?{}:t,r=n.w2d||5,o=n.d2h||8,a=0,i=e.split(" ");return f.default.map(i,function(e){var t=e.substr(0,e.length-1),n=e.substr(-1);a="w"==n||"W"==n?f.default.add(a,t*r*o*60):"d"==n||"D"==n?f.default.add(a,t*o*60):"h"==n||"H"==n?f.default.add(a,60*t):f.default.add(a,t)}),a}},{key:"m2t",value:function(e){var t=this.props.options,n=void 0===t?{}:t,r=n.w2d||5,o=n.d2h||8,a=r*o*60,i=60*o,l=60,s=[],u=f.default.ceil(e);if(u>=0){var c=f.default.floor(u/a);c>0&&s.push(c+"w")}if(u%=a,u>=0){var d=f.default.floor(u/i);d>0&&s.push(d+"d")}if(u%=i,u>=0){var p=f.default.floor(u/l);p>0&&s.push(p+"h")}return u%=l,u>0&&s.push(u+"m"),s.length<=0&&s.push("0"),s.join(" ")}},{key:"swapTime",value:function(){"relative"==this.state.displayTimeFormat?(window.localStorage&&window.localStorage.setItem("worklogs-displayTimeFormat","absolute"),this.setState({displayTimeFormat:"absolute"})):(window.localStorage&&window.localStorage.setItem("worklogs-displayTimeFormat","relative"),this.setState({displayTimeFormat:"relative"}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.i18n,r=t.permissions,o=t.currentTime,a=t.currentUser,i=t.issue,l=t.indexWorklog,s=t.sort,c=t.sortWorklog,p=t.collection,b=t.indexLoading,w=t.loading,E=t.addWorklog,k=t.editWorklog,_=t.delWorklog,x=t.original_estimate,C=void 0===x?"":x,S=void 0;C&&(S=this.t2m(C)),"desc"===s&&p.reverse();var T=0;f.default.map(p,function(t){if(T=f.default.add(T,e.t2m(t.spend)),1==t.adjust_type&&t.spend&&void 0!==S){var n=e.t2m(t.spend);S=S-n>0?S-n:0}else if(3==t.adjust_type&&t.leave_estimate)S=e.t2m(t.leave_estimate);else if(4==t.adjust_type&&t.cut&&void 0!==S){var r=e.t2m(t.cut);S=S-r>0?S-r:0}return f.default.extend(t,{leave_estimate_m:S}),t});var P=f.default.last(p);return"desc"===s&&p.reverse(),u.default.createElement(d.Form,{horizontal:!0,style:{padding:"0px 15px"}},u.default.createElement(d.FormGroup,null,u.default.createElement(d.Col,{sm:12,className:b&&"hide",style:{marginTop:"15px",marginBottom:"15px"}},u.default.createElement("div",null,u.default.createElement("span",{className:"comments-button",title:"刷新",style:{marginRight:"10px","float":"right"},disabled:w,onClick:function(){l(i.id,e.state.sort)}},u.default.createElement("i",{className:"fa fa-refresh"})," 刷新"),p.length>1&&u.default.createElement("span",{className:"comments-button",title:"排序",style:{marginRight:"10px","float":"right"},onClick:function(){c()}},u.default.createElement("i",{className:"fa fa-sort"})," ",p[0].recorded_at<p[p.length-1].recorded_at?"最新":"最早"),r.indexOf("add_worklog")!==-1&&u.default.createElement("span",{className:"comments-button",title:"添加",style:{marginRight:"10px","float":"right"},disabled:w,onClick:this.showAddWorklog.bind(this)},u.default.createElement("i",{className:"fa fa-plus"})," 添加"),u.default.createElement("span",{style:{marginRight:"20px","float":"right"}},u.default.createElement(d.Checkbox,{style:{paddingTop:"0px",minHeight:"18px"},checked:"absolute"==this.state.displayTimeFormat,onClick:this.swapTime.bind(this)},"显示绝对时间")))),u.default.createElement(d.Col,{sm:12,className:b&&"hide"},u.default.createElement(d.Table,{condensed:!0,hover:!0,responsive:!0,style:{marginBottom:"15px"}},u.default.createElement("thead",null,u.default.createElement("tr",null,u.default.createElement("th",null,"原估时间"),u.default.createElement("th",null,"总耗费时间"),u.default.createElement("th",null,"剩余时间"))),u.default.createElement("tbody",null,u.default.createElement("tr",null,u.default.createElement("td",{style:{fontWeight:"bold"}},C||"-"),u.default.createElement("td",{style:{color:"#ff4500",fontWeight:"bold"}},T>0?this.m2t(T):"0"),u.default.createElement("td",{style:{color:"#32cd32",fontWeight:"bold"}},p.length<=0?C||"-":void 0===P.leave_estimate_m?"-":this.m2t(P.leave_estimate_m)))))),u.default.createElement(d.Col,{sm:12},b&&u.default.createElement("div",{style:{width:"100%",textAlign:"center",marginTop:"15px"}},u.default.createElement("img",{src:h,className:"loading"})),p.length<=0&&!b?u.default.createElement("div",{style:{width:"100%",textAlign:"left",marginTop:"10px",marginLeft:"10px"}},"暂无工作记录。"):f.default.map(p,function(t,n){var i=u.default.createElement("div",{style:{fontSize:"12px"}},u.default.createElement("span",{dangerouslySetInnerHTML:{__html:'<a title="'+(t.recorder&&t.recorder.name+"("+t.recorder.email+")")+'">'+(t.recorder.id===a.id?"我":t.recorder.name)+"</a> - "+("absolute"==e.state.displayTimeFormat?y.unix(t.recorded_at).format("YYYY/MM/DD HH:mm:ss"):(0,m.getAgoAt)(t.recorded_at,o))+(1==t.edited_flag?'<span style="color:red"> - 已编辑</span>':"")}}),(t.recorder&&a.id===t.recorder.id&&r.indexOf("delete_self_worklog")!==-1||r.indexOf("delete_worklog")!==-1)&&u.default.createElement("span",{className:"comments-button comments-edit-button",style:{marginLeft:"7px","float":"right"},onClick:e.showDelWorklog.bind(e,t)},u.default.createElement("i",{className:"fa fa-trash",title:"删除"})),(t.recorder&&a.id===t.recorder.id&&r.indexOf("edit_self_worklog")!==-1||r.indexOf("edit_worklog")!==-1)&&u.default.createElement("span",{className:"comments-button comments-edit-button",style:{marginLeft:"7px","float":"right"},onClick:e.showEditWorklog.bind(e,t)},u.default.createElement("i",{className:"fa fa-edit",title:"编辑"}))),l=t.comments?f.default.escape(t.comments):"-";return l=l.replace(/(\r\n)|(\n)/g,"<br/>"),u.default.createElement(d.Panel,{header:i,key:n,style:{marginBottom:"15px"}},u.default.createElement(d.Table,{condensed:!0,hover:!0,responsive:!0},u.default.createElement("thead",null,u.default.createElement("tr",null,u.default.createElement("th",null,"开始日期"),u.default.createElement("th",null,"耗费时间"),u.default.createElement("th",null,"剩余时间"))),u.default.createElement("tbody",null,u.default.createElement("tr",null,u.default.createElement("td",null,y.unix(t.started_at).format("YYYY/MM/DD HH:mm:ss")),u.default.createElement("td",null,t.spend||"-"),u.default.createElement("td",null,void 0===t.leave_estimate_m?"-":e.m2t(t.leave_estimate_m))))),u.default.createElement("div",{style:{marginLeft:"5px",lineHeight:"24px"}},u.default.createElement("span",{style:{width:"10%","float":"left",fontWeight:"bold"}},"备注："),u.default.createElement("span",{style:{width:"90%","float":"left",whiteSpace:"pre-wrap",wordWrap:"break-word"},dangerouslySetInnerHTML:{__html:l}})))}))),this.state.addWorklogShow&&u.default.createElement(g,{show:!0,issue:i,close:function(){e.setState({addWorklogShow:!1})},data:this.state.selectedWorklog,loading:w,add:E,edit:k,i18n:n}),this.state.delWorklogShow&&u.default.createElement(v,{show:!0,issue:i,close:function(){e.setState({delWorklogShow:!1})},data:this.state.selectedWorklog,loading:w,del:_,i18n:n}))}}],[{key:"propTypes",value:{i18n:s.PropTypes.object.isRequired,currentTime:s.PropTypes.number.isRequired,currentUser:s.PropTypes.object.isRequired,permissions:s.PropTypes.array.isRequired,issue:s.PropTypes.object.isRequired,options:s.PropTypes.object.isRequired,original_estimate:s.PropTypes.string,indexLoading:s.PropTypes.bool.isRequired,loading:s.PropTypes.bool.isRequired,indexWorklog:s.PropTypes.func.isRequired,sort:s.PropTypes.string.isRequired,sortWorklog:s.PropTypes.func.isRequired,addWorklog:s.PropTypes.func.isRequired,editWorklog:s.PropTypes.func.isRequired,delWorklog:s.PropTypes.func.isRequired,collection:s.PropTypes.array.isRequired},enumerable:!0}]),t}(s.Component);t.default=b,e.exports=t.default}).call(this)}finally{}},1065:function(e,t,n){try{(function(){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function(e,t,n){for(var r=!0;r;){var o=e,a=t,i=n;r=!1,null===o&&(o=Function.prototype);var l=Object.getOwnPropertyDescriptor(o,a);if(void 0!==l){if("value"in l)return l.value;var s=l.get;if(void 0===s)return;return s.call(i)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=a,n=i,r=!0,l=u=void 0}},s=n(1),u=r(s),c=n(56),d=r(c),p=n(3),f=r(p),m=n(5),h=n(1878),y=r(h),g=function(e){function t(e){o(this,t),l(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.moveCard=this.moveCard.bind(this),this.arrangeCard=this.arrangeCard.bind(this),this.state={cards:[],mainCards:[],classifiedSubtasks:{}},this.state.cards=e.cards,this.arrangeCard(e)}return a(t,e),i(t,[{key:"arrangeCard",value:function(e){var t=e.isSubtaskCol,n=e.subtaskShow,r=this.state.cards,o=[],a={};t?o=r:n?f.default.map(r,function(e,t){e.parent&&e.parent.no?(f.default.findIndex(r,{no:e.parent.no})===-1&&o.push(f.default.extend(e.parent,{mock:!0})),a[e.parent.no]||(a[e.parent.no]=[]),a[e.parent.no].push(e)):o.push(e)}):o=f.default.reject(r,function(e){return e.parent&&e.parent.no&&!0}),this.state.mainCards=o,this.state.classifiedSubtasks=a}},{key:"moveCard",value:function(e,t){var n=this.state.mainCards,r=n[e];this.setState((0,d.default)(this.state,{mainCards:{$splice:[[e,1],[t,0,r]]}}))}},{key:"issueRank",value:function(e){var t,n,r,o,a,i,l;return regeneratorRuntime.async(function(s){for(;;)switch(s.prev=s.next){case 0:return t=this.props.setRank,n=this.state.mainCards,r=f.default.findIndex(n,{id:e}),o=r>0?n[r-1].no:-1,a=r<n.length-1?n[r+1].no:-1,i=n[r],s.next=8,regeneratorRuntime.awrap(t({current:i.no,up:o,down:a}));case 8:l=s.sent,0!==l&&m.notify.show("移动失败。","error",2e3);case 10:case"end":return s.stop()}},null,this)}},{key:"issueView",value:function n(e){var t=this.props,n=t.issueView,r=t.colNo;n(e,r)}},{key:"toTop",value:function(e){var t,n,r,o,a;return regeneratorRuntime.async(function(i){for(;;)switch(i.prev=i.next){case 0:if(t=this.props.setRank,n=this.state.mainCards,r=-1,o=n[0].no,o===e){i.next=9;break}return i.next=7,regeneratorRuntime.awrap(t({current:e,up:r,down:o}));case 7:a=i.sent,0!==a&&m.notify.show("移动失败。","error",2e3);case 9:case"end":return i.stop()}},null,this)}},{key:"toBottom",value:function(e){var t,n,r,o,a;return regeneratorRuntime.async(function(i){for(;;)switch(i.prev=i.next){case 0:if(t=this.props.setRank,n=this.state.mainCards,r=f.default.last(n).no,o=-1,r===e){i.next=9;break}return i.next=7,regeneratorRuntime.awrap(t({current:e,up:r,down:o}));case 7:a=i.sent,0!==a&&m.notify.show("移动失败。","error",2e3);case 9:case"end":return i.stop()}},null,this)}},{key:"componentWillReceiveProps",value:function(e){!e.rankLoading&&f.default.isEmpty(e.draggedIssue)&&(this.state.cards=e.cards,this.arrangeCard(e))}},{key:"render",value:function(){var e=this,t=this.props,n=t.colNo,r=t.isSubtaskCol,o=void 0!==r&&r,a=(t.subtaskShow,t.displayFields),i=void 0===a?[]:a,l=t.epicShow,s=void 0!==l&&l,c=t.inSprint,d=void 0!==c&&c,p=t.inHisSprint,m=void 0!==p&&p,h=t.getDraggableActions,g=t.cleanDraggableActions,v=t.setRank,b=t.rankLoading,w=t.removeFromSprint,E=t.closeDetail,k=t.draggedIssue,_=t.openedIssue,x=t.options,C=t.pkey,S=this.state,T=S.mainCards,P=S.classifiedSubtasks,O={};return o&&(O={display:"block"}),u.default.createElement("div",{className:"board-column",style:O},f.default.map(T,function(t,r){return u.default.createElement(y.default,{key:t.id,colNo:n,openedIssue:_,index:r,issue:t,pkey:C,subtasks:P[t.no]||[],displayFields:i,epicShow:s,inSprint:d,inHisSprint:m,options:x,closeDetail:E,draggedIssue:k,issueView:e.issueView.bind(e),getDraggableActions:h,cleanDraggableActions:g,setRank:v,rankLoading:b,issueRank:e.issueRank.bind(e),toTop:e.toTop.bind(e),toBottom:e.toBottom.bind(e),removeFromSprint:w,moveCard:e.moveCard.bind(e)})}))}}],[{key:"propTypes",value:{isSubtaskCol:s.PropTypes.bool,subtaskShow:s.PropTypes.bool,displayFields:s.PropTypes.array,epicShow:s.PropTypes.bool,inSprint:s.PropTypes.bool,inHisSprint:s.PropTypes.bool,colNo:s.PropTypes.number.isRequired,openedIssue:s.PropTypes.object.isRequired,options:s.PropTypes.object.isRequired,pkey:s.PropTypes.string.isRequired,cards:s.PropTypes.array.isRequired,draggedIssue:s.PropTypes.object.isRequired,issueView:s.PropTypes.func.isRequired,getDraggableActions:s.PropTypes.func.isRequired,cleanDraggableActions:s.PropTypes.func.isRequired,closeDetail:s.PropTypes.func.isRequired,removeFromSprint:s.PropTypes.func.isRequired,setRank:s.PropTypes.func.isRequired,rankLoading:s.PropTypes.bool.isRequired},enumerable:!0}]),t}(s.Component);t.default=g,e.exports=t.default}).call(this)}finally{}},1066:function(e,t,n){try{(function(){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function(e,t,n){for(var r=!0;r;){var o=e,a=t,i=n;r=!1,null===o&&(o=Function.prototype);var l=Object.getOwnPropertyDescriptor(o,a);if(void 0!==l){if("value"in l)return l.value;var s=l.get;if(void 0===s)return;return s.call(i)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=a,n=i,r=!0,l=u=void 0}},s=n(1),u=r(s),c=n(2),d=(n(5),n(3)),p=(r(d),n(4)),f=function(e){function t(e){o(this,t),l(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={ecode:0},this.confirm=this.confirm.bind(this),this.cancel=this.cancel.bind(this)}return a(t,e),i(t,[{key:"confirm",value:function(){var e,t,n,r,o;return regeneratorRuntime.async(function(a){for(;;)switch(a.prev=a.next){case 0:return e=this.props,t=e.close,n=e.move,r=e.values,a.next=6,regeneratorRuntime.awrap(n(r));case 6:o=a.sent,this.setState({ecode:o}),0===o&&t();case 9:case"end":return a.stop()}},null,this)}},{key:"cancel",value:function(){var e=this.props.close;e()}},{key:"render",value:function(){var e=this.props,t=e.i18n.errMsg,n=e.loading;return u.default.createElement(c.Modal,{show:!0,onHide:this.cancel,backdrop:"static","aria-labelledby":"contained-modal-title-sm"},u.default.createElement(c.Modal.Header,{closeButton:!0},u.default.createElement(c.Modal.Title,{id:"contained-modal-title-la"},"提示")),u.default.createElement(c.Modal.Body,null,"移动此问题Sprint 范围将受到影响，是否继续移动? ",u.default.createElement("br",null)),u.default.createElement(c.Modal.Footer,null,u.default.createElement("span",{className:"ralign"},0!==this.state.ecode&&!n&&t[this.state.ecode]),u.default.createElement("img",{src:p,className:n?"loading":"hide"}),u.default.createElement(c.Button,{disabled:n,onClick:this.confirm},"确定"),u.default.createElement(c.Button,{bsStyle:"link",disabled:n,onClick:this.cancel},"取消")))}}],[{key:"propTypes",value:{i18n:s.PropTypes.object.isRequired,close:s.PropTypes.func.isRequired,loading:s.PropTypes.bool.isRequired,move:s.PropTypes.func.isRequired,values:s.PropTypes.object.isRequired},enumerable:!0}]),t}(s.Component);t.default=f,e.exports=t.default}).call(this)}finally{}},1067:function(e,t,n){try{(function(){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(e,t,n){for(var r=!0;r;){var o=e,a=t,i=n;r=!1,null===o&&(o=Function.prototype);var l=Object.getOwnPropertyDescriptor(o,a);if(void 0!==l){if("value"in l)return l.value;var s=l.get;if(void 0===s)return;return s.call(i)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=a,n=i,r=!0,l=u=void 0}},u=n(1),c=r(u),d=n(8),p=n(2),f=n(7),m=r(f),h=n(3),y=(r(h),n(5)),g=n(4),v=function(e,t){var n={};return e.name||(n.name="必填"),e.type||(n.abb="必填"),n},b=function(e){function t(e){o(this,n),s(Object.getPrototypeOf(n.prototype),"constructor",this).call(this,e),this.state={ecode:0},this.handleSubmit=this.handleSubmit.bind(this),this.handleCancel=this.handleCancel.bind(this)}a(t,e),l(t,[{key:"componentWillMount",value:function(){var e=this.props,t=e.initializeForm,n=e.data;t(i({},n))}},{key:"handleSubmit",value:function(){var e,t,n,r,o;return regeneratorRuntime.async(function(a){for(;;)switch(a.prev=a.next){case 0:return e=this.props,t=e.values,n=e.update,r=e.close,a.next=6,regeneratorRuntime.awrap(n(t));case 6:o=a.sent,0===o?(this.setState({ecode:0}),r(),y.notify.show("更新完成。","success",2e3)):this.setState({ecode:o});case 8:case"end":return a.stop()}},null,this)}},{key:"handleCancel",value:function(){var e=this.props,t=e.close,n=e.submitting;n||(this.setState({ecode:0}),t())}},{key:"render",value:function(){var e=this.props,t=e.i18n.errMsg,n=e.fields,r=n.id,o=n.name,a=n.type,l=n.description,s=e.handleSubmit,u=e.invalid,d=e.dirty,f=e.submitting,h=e.data,y=[{label:"Srcum Board",value:"scrum"},{label:"Kanban",value:"kanban"}];return c.default.createElement(p.Modal,{show:!0,onHide:this.handleCancel,backdrop:"static","aria-labelledby":"contained-modal-title-sm"},c.default.createElement(p.Modal.Header,{closeButton:!0},c.default.createElement(p.Modal.Title,{id:"contained-modal-title-la"},"编辑看板 - "+h.name)),c.default.createElement("form",{onSubmit:s(this.handleSubmit),onKeyDown:function(e){13==e.keyCode&&e.preventDefault()}},c.default.createElement(p.Modal.Body,null,c.default.createElement(p.FormGroup,{controlId:"formControlsText",validationState:o.touched&&o.error?"error":null},c.default.createElement(p.ControlLabel,null,c.default.createElement("span",{className:"txt-impt"},"*"),"名称"),c.default.createElement(p.FormControl,i({type:"hidden"},r)),c.default.createElement(p.FormControl,i({disabled:f,type:"text"},o,{placeholder:"看板名"})),o.touched&&o.error&&c.default.createElement(p.HelpBlock,{style:{"float":"right"}},o.error)),c.default.createElement(p.FormGroup,{controlId:"formControlsSelect"},c.default.createElement(p.ControlLabel,null,c.default.createElement("span",{className:"txt-impt"},"*"),"类型"),c.default.createElement(m.default,{simpleValue:!0,disabled:f,options:y,clearable:!1,value:a.value,onChange:function(e){a.onChange(e)},placeholder:"请选择看板类型"})),c.default.createElement(p.FormGroup,{controlId:"formControlsText"},c.default.createElement(p.ControlLabel,null,"描述"),c.default.createElement(p.FormControl,i({disabled:f,type:"text"},l,{placeholder:"描述"})))),c.default.createElement(p.Modal.Footer,null,c.default.createElement("span",{className:"ralign"},0!==this.state.ecode&&!f&&t[this.state.ecode]),c.default.createElement("img",{src:g,className:f?"loading":"hide"}),c.default.createElement(p.Button,{disabled:!d||f||u,type:"submit"},"确定"),c.default.createElement(p.Button,{bsStyle:"link",disabled:f,onClick:this.handleCancel},"取消"))))}}],[{key:"propTypes",value:{i18n:u.PropTypes.object.isRequired,submitting:u.PropTypes.bool,invalid:u.PropTypes.bool,dirty:u.PropTypes.bool,values:u.PropTypes.object,fields:u.PropTypes.object,handleSubmit:u.PropTypes.func.isRequired,close:u.PropTypes.func.isRequired,data:u.PropTypes.object.isRequired,initializeForm:u.PropTypes.func.isRequired,update:u.PropTypes.func.isRequired},enumerable:!0}]);var n=t;return t=(0,d.reduxForm)({form:"type",fields:["id","name","type","description"],validate:v})(t)||t}(u.Component);t.default=b,e.exports=t.default}).call(this)}finally{}},1874:function(e,t,n){try{(function(){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function(e,t,n){for(var r=!0;r;){var o=e,a=t,i=n;r=!1,null===o&&(o=Function.prototype);var l=Object.getOwnPropertyDescriptor(o,a);if(void 0!==l){if("value"in l)return l.value;var s=l.get;if(void 0===s)return;return s.call(i)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=a,n=i,r=!0,l=u=void 0}},s=n(1),u=r(s),c=n(35),d=n(3),p=r(d),f=(n(1066),n(15),{drop:function(e,t){var n=e.sprintNo,r=e.moveSprintIssue,o=e.columns,a=t.getItem(),i=o[a.src_col_no],l=p.default.find(o,{no:n});if(!p.default.isEmpty(i)&&!p.default.isEmpty(l)){var s={issue_id:a.id,dest_sprint:l,src_sprint:i};r(s)}}}),m=function(e){function t(e){o(this,n),l(Object.getPrototypeOf(n.prototype),"constructor",this).call(this,e),this.state={moveNotify:!1}}a(t,e),i(t,[{key:"render",value:function(){var e=this.props,t=e.isOver,n=e.canDrop,r=e.connectDropTarget,o=e.columns,a=e.sprintNo,i=e.height,l=t&&n,s="#ebf2f9";l&&(s="darkseagreen");var c="";if(0==a)c="Backlog";else{var d=p.default.find(o,{no:a});c=!p.default.isEmpty(d)&&d.name?d.name:"Sprint "+a}return r(u.default.createElement("div",{className:"board-zone-cell",style:{height:i,backgroundColor:s}},c))}}],[{key:"propTypes",value:{connectDropTarget:s.PropTypes.func.isRequired,isOver:s.PropTypes.bool.isRequired,canDrop:s.PropTypes.bool.isRequired,sprintNo:s.PropTypes.number.isRequired,columns:s.PropTypes.array.isRequired,height:s.PropTypes.number.isRequired,moveSprintIssue:s.PropTypes.func.isRequired,draggedIssue:s.PropTypes.object},enumerable:!0}]);var n=t;return t=(0,c.DropTarget)(function(e){return p.default.map(e.columns,function(t,n){return e.draggedIssue&&e.draggedIssue.parent&&e.draggedIssue.parent.id?e.draggedIssue.parent.id+"-"+n:n+""})},f,function(e,t){return{connectDropTarget:e.dropTarget(),isOver:t.isOver(),canDrop:t.canDrop()}})(t)||t}(s.Component);t.default=m,e.exports=t.default}).call(this)}finally{}},1875:function(e,t,n){try{(function(){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function(e,t,n){for(var r=!0;r;){var o=e,a=t,i=n;r=!1,null===o&&(o=Function.prototype);var l=Object.getOwnPropertyDescriptor(o,a);if(void 0!==l){if("value"in l)return l.value;var s=l.get;if(void 0===s)return;return s.call(i)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=a,n=i,r=!0,l=u=void 0}},s=n(1),u=r(s),c=n(56),d=(r(c),n(3)),p=r(d),f=n(1874),m=r(f),h=n(15),y=function(e){function t(e){o(this,t),l(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e)}return a(t,e),i(t,[{key:"render",value:function(){var e=this.props,t=e.isEmpty,n=e.draggedIssue,r=e.sprintNo,o=e.columns,a=(e.options,e.moveSprintIssue),i=170;"none"==h("#main-header").css("display")&&(i=78);var l=h(window).height(),s=p.default.min([l-i-10-p.default.max([46-h(".board-container").scrollTop(),0]),h(".board-columns").height()]);return u.default.createElement("div",{className:"board-zone-overlay-column",style:{pointerEvents:t?"none":"auto"}},u.default.createElement("div",{className:"board-zone-table"},u.default.createElement("div",{className:"board-zone-row"},!t&&u.default.createElement(m.default,{sprintNo:r,draggedIssue:n,moveSprintIssue:a,columns:o,height:s}))))}}],[{key:"propTypes",value:{sprintNo:s.PropTypes.number.isRequired,columns:s.PropTypes.array.isRequired,isEmpty:s.PropTypes.bool.isRequired,moveSprintIssue:s.PropTypes.func.isRequired,draggedIssue:s.PropTypes.object,options:s.PropTypes.object.isRequired},enumerable:!0}]),t}(s.Component);t.default=y,e.exports=t.default}).call(this)}finally{}},1876:function(e,t,n){try{(function(){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);
e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function(e,t,n){for(var r=!0;r;){var o=e,a=t,i=n;r=!1,null===o&&(o=Function.prototype);var l=Object.getOwnPropertyDescriptor(o,a);if(void 0!==l){if("value"in l)return l.value;var s=l.get;if(void 0===s)return;return s.call(i)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=a,n=i,r=!0,l=u=void 0}},s=n(1),u=r(s),c=n(35),d=n(3),p=r(d),f=(n(15),{drop:function(e,t){var n=e.dragAction,r=e.doAction,o=e.workflowScreenShow,a=t.getItem();n.screen?o(a.id,n.id):r(a.id,a.entry_id,{action_id:n.id})}}),m=function(e){function t(e){o(this,n),l(Object.getPrototypeOf(n.prototype),"constructor",this).call(this,e)}a(t,e),i(t,[{key:"render",value:function(){var e=this.props,t=e.isOver,n=e.canDrop,r=e.connectDropTarget,o=e.dragAction,a=e.height,i=t&&n,l="#ebf2f9";return i&&(l="darkseagreen"),r(u.default.createElement("div",{className:"board-zone-cell",style:{height:a,backgroundColor:l}},o.state.name))}}],[{key:"propTypes",value:{connectDropTarget:s.PropTypes.func.isRequired,isOver:s.PropTypes.bool.isRequired,canDrop:s.PropTypes.bool.isRequired,columns:s.PropTypes.array.isRequired,height:s.PropTypes.number.isRequired,doAction:s.PropTypes.func.isRequired,workflowScreenShow:s.PropTypes.func.isRequired,draggedIssue:s.PropTypes.object,dragAction:s.PropTypes.object.isRequired},enumerable:!0}]);var n=t;return t=(0,c.DropTarget)(function(e){return p.default.map(e.columns,function(t,n){return e.draggedIssue&&e.draggedIssue.parent&&e.draggedIssue.parent.id?e.draggedIssue.parent.id+"-"+n:n+""})},f,function(e,t){return{connectDropTarget:e.dropTarget(),isOver:t.isOver(),canDrop:t.canDrop()}})(t)||t}(s.Component);t.default=m,e.exports=t.default}).call(this)}finally{}},1877:function(e,t,n){try{(function(){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function(e,t,n){for(var r=!0;r;){var o=e,a=t,i=n;r=!1,null===o&&(o=Function.prototype);var l=Object.getOwnPropertyDescriptor(o,a);if(void 0!==l){if("value"in l)return l.value;var s=l.get;if(void 0===s)return;return s.call(i)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=a,n=i,r=!0,l=u=void 0}},s=n(1),u=r(s),c=n(12),d=n(2),p=n(201),f=n(41),m=n(5),h=n(3),y=r(h),g=n(4),v=[{name:"参考值",stroke:"#999",data:[]},{name:"剩余值",stroke:"#d04437",data:[]}],b=function(e){function t(e){o(this,t),l(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={display:[],mode:"issueCount"},this.handleCancel=this.handleCancel.bind(this)}return a(t,e),i(t,[{key:"handleCancel",value:function(){var e=this.props.close;e()}},{key:"diplayChanged",value:function(e){this.setState({display:e})}},{key:"componentWillMount",value:function(){var e,t,n,r;return regeneratorRuntime.async(function(o){for(;;)switch(o.prev=o.next){case 0:return e=this.props,t=e.no,n=e.getSprintLog,o.next=5,regeneratorRuntime.awrap(n(t));case 5:r=o.sent,0!==r&&m.notify.show("获取数据失败。","error",2e3);case 7:case"end":return o.stop()}},null,this)}},{key:"render",value:function(){var e=this,t=this.props,n=t.no,r=t.data,o=t.loading,a={};return y.default.isEmpty(r)||(a="storyPoints"===this.state.mode?r.story_points:r.issue_count,y.default.indexOf(this.state.display,"notWorkingShow")===-1?(v[0].data=y.default.reject(a.guideline||[],{notWorking:1}),v[1].data=y.default.reject(a.remaining||[],{notWorking:1})):(v[0].data=a.guideline||[],v[1].data=a.remaining||[])),u.default.createElement(d.Modal,{show:!0,onHide:this.handleCancel,backdrop:"static",dialogClassName:"custom-modal-90","aria-labelledby":"contained-modal-title-sm"},u.default.createElement(d.Modal.Header,{closeButton:!0,ref:"header"},u.default.createElement(d.Modal.Title,{id:"contained-modal-title-la"},"燃尽图"," - Sprint "+n)),o&&u.default.createElement(d.Modal.Body,{style:{height:"580px",overflow:"auto"}},u.default.createElement("div",{style:{textAlign:"center",marginTop:"235px"}},u.default.createElement("img",{src:g,className:"loading"}))),!o&&u.default.createElement(d.Modal.Body,{style:{height:"580px",overflow:"auto"}},u.default.createElement(d.ButtonGroup,{style:{"float":"right",marginRight:"55px"}},u.default.createElement(d.Button,{title:"问题数",style:{backgroundColor:"issueCount"==this.state.mode&&"#eee"},onClick:function(){e.setState({mode:"issueCount"})}},"问题数"),u.default.createElement(d.Button,{title:"故事点",style:{backgroundColor:"storyPoints"==this.state.mode&&"#eee"},onClick:function(){e.setState({mode:"storyPoints"})}},"故事点数")),u.default.createElement(f.CheckboxGroup,{style:{"float":"right",marginTop:"8px",marginRight:"10px"},name:"notifications",value:this.state.display,onChange:this.diplayChanged.bind(this)},u.default.createElement("label",{style:{fontWeight:400}},u.default.createElement(f.Checkbox,{value:"notWorkingShow"}),u.default.createElement("span",{style:{marginLeft:"3px"}},"显示非工作日"))),u.default.createElement(p.LineChart,{height:500,width:(0,c.findDOMNode)(this.refs.header).getBoundingClientRect().width-80,style:{marginTop:"45px"}},u.default.createElement(p.XAxis,{dataKey:"day",type:"category",allowDuplicatedCategory:!1}),u.default.createElement(p.YAxis,{dataKey:"value"}),u.default.createElement(p.CartesianGrid,{strokeDasharray:"3 3"}),u.default.createElement(p.Tooltip,null),u.default.createElement(p.Legend,null),v.map(function(e){return u.default.createElement(p.Line,{dataKey:"value",data:e.data,stroke:e.stroke,name:e.name,key:e.name})}))),u.default.createElement(d.Modal.Footer,null,u.default.createElement(d.Button,{onClick:this.handleCancel},"关闭")))}}],[{key:"propTypes",value:{close:s.PropTypes.func.isRequired,getSprintLog:s.PropTypes.func.isRequired,loading:s.PropTypes.bool.isRequired,data:s.PropTypes.object.isRequired,no:s.PropTypes.number.isRequired},enumerable:!0}]),t}(s.Component);t.default=b,e.exports=t.default}).call(this)}finally{}},1878:function(e,t,n){try{(function(){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(e,t,n){for(var r=!0;r;){var o=e,a=t,i=n;r=!1,null===o&&(o=Function.prototype);var l=Object.getOwnPropertyDescriptor(o,a);if(void 0!==l){if("value"in l)return l.value;var s=l.get;if(void 0===s)return;return s.call(i)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=a,n=i,r=!0,l=u=void 0}},u=n(1),c=r(u),d=n(12),p=n(35),f=n(3),m=r(f),h=n(1065),y=r(h),g=n(1889),v=r(g),b=n(6),w=n(15),E=n(137),k={beginDrag:function(e){return e.closeDetail(),e.getDraggableActions(e.issue.id),this.preIndex=e.index,{id:e.issue.id,entry_id:e.issue.entry_id||"",index:e.index,src_col_no:e.colNo}},endDrag:function(e,t,n){this.preIndex!=e.index&&e.issueRank(e.issue.id),e.cleanDraggableActions()}},_={hover:function(e,t,n){var r=t.getItem().index,o=e.index;if(r!==o){var a=(0,d.findDOMNode)(n).getBoundingClientRect(),i=(a.bottom-a.top)/2,l=t.getClientOffset(),s=l.y-a.top;r<o&&s<i||r>o&&s>i||(e.moveCard(r,o),t.getItem().index=o)}}},x=function(e){function t(e){o(this,n),s(Object.getPrototypeOf(n.prototype),"constructor",this).call(this,e),this.state={menuShow:!1,menuPullRight:!1,menuDropup:!1},this.handleBlur=this.handleBlur.bind(this),this.handleClick=this.handleClick.bind(this),this.handleContextMenu=this.handleContextMenu.bind(this),this.getLabelStyle=this.getLabelStyle.bind(this)}a(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.issue,r=t.issueView;w((0,d.findDOMNode)(this)).on("contextmenu",function(t){e.handleContextMenu(t)}),w((0,d.findDOMNode)(this)).on("mouseleave",function(t){null!=t.toElement&&e.handleBlur(t)}),w((0,d.findDOMNode)(this)).on("mouseup",function(t){t.preventDefault(),t.stopPropagation(),2!=t.button&&(e.state.menuShow?e.handleClick(t):r(n.id))})}},{key:"componentWillUnmount",value:function(){w((0,d.findDOMNode)(this)).off("contextmenu"),w((0,d.findDOMNode)(this)).off("mouseleave"),w((0,d.findDOMNode)(this)).off("mouseup")}},{key:"shouldComponentUpdate",value:function(e,t){var n=this.props,r=n.openedIssue,o=n.issue;return!e.openedIssue.id||[e.openedIssue.parent_id,e.openedIssue.id,r.parent_id,r.id].indexOf(o.id)!==-1}},{key:"handleBlur",value:function(e){var t=this;setTimeout(function(){t.setState({menuShow:!1})},200)}},{key:"handleClick",value:function(e){var t=this;setTimeout(function(){t.setState({menuShow:!1})},200)}},{key:"handleContextMenu",value:function(e){e.preventDefault(),e.stopPropagation(),this.props.closeDetail(),this.setState({menuShow:!0,menuPullRight:document.body.scrollWidth-(""+e.pageX)<150,menuDropup:document.body.scrollHeight-(""+e.pageY)<160});var t=(0,d.findDOMNode)(this.refs.menu);t&&(t.style.left=e.pageX+"px",t.style.top=e.pageY+"px")}},{key:"getLabelStyle",value:function(e){var t=this.props.options.labels,n=void 0===t?[]:t,r=m.default.find(n,{name:e}),o={marginTop:"5px",maxWidth:"100%","float":"unset"};return r&&r.bgColor&&(o=i({backgroundColor:r.bgColor,borderColor:r.bgColor,border:"1px solid "+r.bgColor,color:"#fff"},o)),o}},{key:"render",value:function(){var e=this,n=this.props,r=n.index,o=n.issue,a=n.pkey,l=n.draggedIssue,s=n.issueView,u=n.openedIssue,d=n.isDragging,p=n.connectDragSource,f=n.connectDropTarget,h=n.getDraggableActions,g=n.cleanDraggableActions,w=n.issueRank,k=n.setRank,_=n.rankLoading,x=n.closeDetail,C=n.subtasks,S=void 0===C?[]:C,T=n.displayFields,P=void 0===T?[]:T,O=n.epicShow,R=n.inSprint,M=n.inHisSprint,j=n.colNo,F=n.toTop,N=n.toBottom,q=n.removeFromSprint,I=n.moveCard,L=n.options;if(S.length>0)return f(c.default.createElement("div",{style:{opacity:A}},o.mock?c.default.createElement("span",{style:{marginLeft:"5px"}},o.no," - ",o.title):c.default.createElement(t,{openedIssue:u,index:r,issue:o,pkey:a,displayFields:P,epicShow:O,inSprint:R,inHisSprint:M,colNo:j,options:L,closeDetail:x,draggedIssue:l,issueView:s,getDraggableActions:h,cleanDraggableActions:g,issueRank:w,setRank:k,rankLoading:_,toTop:F,toBottom:N,removeFromSprint:q,moveCard:I}),c.default.createElement(y.default,{isSubtaskCol:!0,displayFields:P,epicShow:O,inSprint:R,inHisSprint:M,colNo:j,openedIssue:u,draggedIssue:l,issueView:s,getDraggableActions:h,cleanDraggableActions:g,cards:S,setRank:k,rankLoading:_,pkey:a,closeDetail:x,removeFromSprint:q,options:L})));var A=d?0:1,D={borderLeft:"5px solid "+(m.default.findIndex(L.priorities,{id:o.priority})!==-1?m.default.find(L.priorities,{id:o.priority}).color:"")},B="";o.id==u.id&&(B="#e6f7ff");var H="";o.parent&&o.parent.id&&(H="10px");var W={};o.epic&&(W=m.default.find(L.epics,{id:o.epic}));var z={};return o.resolve_version&&(z=m.default.find(L.versions,{id:o.resolve_version})||{}),p(f(c.default.createElement("div",{className:"board-issue",style:i({},D,{opacity:A,backgroundColor:B,marginLeft:H})},c.default.createElement("div",{className:"board-issue-content"},c.default.createElement("div",{style:{"float":"right"}},c.default.createElement(E,{data:o.assignee||{}})),c.default.createElement("div",null,c.default.createElement("span",{className:"type-abb",title:m.default.findIndex(L.types,{id:o.type})!==-1?m.default.find(L.types,{id:o.type}).name:""},m.default.findIndex(L.types,{id:o.type})!==-1?m.default.find(L.types,{id:o.type}).abb:"-"),c.default.createElement("a",{href:"#",style:"Closed"==o.state?{textDecoration:"line-through"}:{},onClick:function(e){e.preventDefault()}},a," - ",o.no)),c.default.createElement("div",{style:{whiteSpace:"pre-wrap",wordWrap:"break-word"}},o.title||""),P.length>0&&c.default.createElement("div",{style:{marginTop:"5px"}},m.default.map(P,function(t){if(!m.default.isEmpty(o[t])||m.default.isNumber(o[t])){if("labels"==t)return c.default.createElement("div",{style:{whiteSpace:"pre-wrap",wordWrap:"break-word",fontSize:"12px"}},c.default.createElement("span",{style:{marginRight:"3px",marginTop:"7px","float":"left"}},c.default.createElement("b",null,"标签"),":"),m.default.map(o[t],function(t){return c.default.createElement("span",{title:t,className:"issue-label",style:e.getLabelStyle(t)},t)}));var n=function(){var e=m.default.find(L.fields||[],{key:t});if(!e)return{v:void 0};var n="";return"SingleUser"===e.type?n=o[t].name:"MultiUser"===e.type?n=m.default.map(o[t],function(e){return e.name}).join(","):["Select","RadioGroup","SingleVersion"].indexOf(e.type)!==-1?n=m.default.findIndex(e.optionValues||[],{id:o[t]})===-1?"-":m.default.find(e.optionValues,{id:o[t]}).name:["MultiSelect","CheckboxGroup","MultiVersion"].indexOf(e.type)!==-1?!function(){var r=m.default.isArray(o[t])?o[t]:o[t].split(","),a=[];m.default.forEach(r,function(t){var n=m.default.findIndex(e.optionValues||[],{id:t})!==-1?m.default.find(e.optionValues,{id:t}).name:"";n&&a.push(n)}),n=a.length>0?m.default.uniq(a).join(","):"-"}():n="DatePicker"===e.type?b.unix(o[t]).format("YYYY/MM/DD"):"DateTimePicker"===e.type?b.unix(o[t]).format("YYYY/MM/DD HH:mm"):o[t]+("progress"==e.key?"%":""),{v:c.default.createElement("div",{style:{whiteSpace:"pre-wrap",wordWrap:"break-word",fontSize:"12px"}},c.default.createElement("span",{style:{marginRight:"3px"}},c.default.createElement("b",null,e.name),":"),c.default.createElement("span",null,n))}}();return"object"==typeof n?n.v:void 0}})),O&&!m.default.isEmpty(W)&&c.default.createElement("div",{className:"epic-title",style:{borderColor:W.bgColor,backgroundColor:W.bgColor,maxWidth:"100%",marginRight:"5px"},title:W.name||"-"},W.name||"-"),O&&!m.default.isEmpty(z)&&c.default.createElement("div",{className:"epic-title",style:{borderColor:"#707070",color:"#707070",backgroundColor:"#fff",maxWidth:"100%"},title:z.name||"-"},z.name||"-")),this.state.menuShow&&c.default.createElement(v.default,{ref:"menu",pullRight:this.state.menuPullRight,dropup:this.state.menuDropup,issueId:o.id,issueNo:o.no,hasRemove:R&&L.permissions&&L.permissions.indexOf("manage_project")!==-1,hasMove:!M&&L.permissions&&L.permissions.indexOf("manage_project")!==-1,issueView:s,toTop:F,toBottom:N,removeFromSprint:q}))))}}],[{key:"propTypes",value:{connectDragSource:u.PropTypes.func.isRequired,connectDropTarget:u.PropTypes.func.isRequired,getDraggableActions:u.PropTypes.func.isRequired,cleanDraggableActions:u.PropTypes.func.isRequired,issueRank:u.PropTypes.func.isRequired,setRank:u.PropTypes.func.isRequired,rankLoading:u.PropTypes.bool.isRequired,closeDetail:u.PropTypes.func.isRequired,draggedIssue:u.PropTypes.object.isRequired,issueView:u.PropTypes.func.isRequired,issue:u.PropTypes.object.isRequired,openedIssue:u.PropTypes.object.isRequired,isDragging:u.PropTypes.bool.isRequired,index:u.PropTypes.number.isRequired,pkey:u.PropTypes.string.isRequired,displayFields:u.PropTypes.array,epicShow:u.PropTypes.bool,inSprint:u.PropTypes.bool,inHisSprint:u.PropTypes.bool,subtasks:u.PropTypes.array,colNo:u.PropTypes.number.isRequired,options:u.PropTypes.object.isRequired,toTop:u.PropTypes.func,toBottom:u.PropTypes.func,removeFromSprint:u.PropTypes.func,moveCard:u.PropTypes.func.isRequired},enumerable:!0}]);var n=t;return t=(0,p.DragSource)(function(e){return e.issue.parent&&e.issue.parent.id?e.issue.parent.id+"-"+e.colNo:e.colNo+""},k,function(e,t){return{connectDragSource:e.dragSource(),isDragging:t.isDragging()}})(t)||t,t=(0,p.DropTarget)(function(e){return e.inHisSprint||!e.options.permissions||e.options.permissions.indexOf("manage_project")===-1?[]:e.issue.parent&&e.issue.parent.id?[e.issue.parent.id+"-"+e.colNo]:[e.colNo+""]},_,function(e){return{connectDropTarget:e.dropTarget()}})(t)||t}(u.Component);t.default=x,e.exports=t.default}).call(this)}finally{}},1879:function(e,t,n){try{(function(){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function(e,t,n){for(var r=!0;r;){var o=e,a=t,i=n;r=!1,null===o&&(o=Function.prototype);var l=Object.getOwnPropertyDescriptor(o,a);if(void 0!==l){if("value"in l)return l.value;var s=l.get;if(void 0===s)return;return s.call(i)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=a,n=i,r=!0,l=u=void 0}},s=n(1),u=r(s),c=n(2),d=n(5),p=n(3),f=r(p),m=n(4),h=function(e){function t(e){o(this,t),l(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={ecode:0,isSendMsg:!0},this.confirm=this.confirm.bind(this),this.cancel=this.cancel.bind(this)}return a(t,e),i(t,[{key:"confirm",value:function(){var e,t,n,r,o,a;return regeneratorRuntime.async(function(i){for(;;)switch(i.prev=i.next){case 0:return e=this.props,t=e.close,n=e.complete,r=e.sprintNo,o=e.completedIssues,i.next=7,regeneratorRuntime.awrap(n({completed_issues:f.default.map(o,function(e){return e.no}),isSendMsg:this.state.isSendMsg},r));case 7:a=i.sent,this.setState({ecode:a}),0===a&&(t(),d.notify.show("Sprint "+r+" 已置完成。","success",2e3));case 10:case"end":return i.stop()}},null,this)}},{key:"cancel",value:function(){var e=this.props.close;e()}},{key:"render",value:function(){var e=this,t=this.props,n=t.i18n.errMsg,r=t.total,o=t.completedIssues,a=t.loading;return u.default.createElement(c.Modal,{show:!0,onHide:this.cancel,backdrop:"static","aria-labelledby":"contained-modal-title-sm"},u.default.createElement(c.Modal.Header,{closeButton:!0},u.default.createElement(c.Modal.Title,{id:"contained-modal-title-la"},"完成Sprint")),u.default.createElement(c.Modal.Body,null,r-o.length>0&&"还有 "+(r-o.length)+" 个问题未完成，","确认要置完成此Sprint? ",u.default.createElement("br",null)),u.default.createElement(c.Modal.Footer,null,u.default.createElement("span",{className:"ralign"},0!==this.state.ecode&&!a&&n[this.state.ecode]),u.default.createElement("img",{src:m,className:a?"loading":"hide"}),u.default.createElement(c.Checkbox,{disabled:a,checked:this.state.isSendMsg,onClick:function(){e.setState({isSendMsg:!e.state.isSendMsg})},style:{display:"inline-block",marginRight:"20px",marginLeft:"10px"}},"通知项目成员"),u.default.createElement(c.Button,{disabled:a,onClick:this.confirm},"确定"),u.default.createElement(c.Button,{bsStyle:"link",disabled:a,onClick:this.cancel},"取消")))}}],[{key:"propTypes",value:{i18n:s.PropTypes.object.isRequired,close:s.PropTypes.func.isRequired,loading:s.PropTypes.bool.isRequired,sprintNo:s.PropTypes.number.isRequired,total:s.PropTypes.number.isRequired,completedIssues:s.PropTypes.func.isRequired,complete:s.PropTypes.func.isRequired},enumerable:!0}]),t}(s.Component);t.default=h,e.exports=t.default}).call(this)}finally{}},1880:function(e,t,n){try{(function(){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e){return{actions:(0,m.bindActionCreators)(E,e),issueActions:(0,m.bindActionCreators)(_,e),wfActions:(0,m.bindActionCreators)(C,e)}}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=function(e,t,n){for(var r=!0;r;){var o=e,a=t,i=n;r=!1,null===o&&(o=Function.prototype);var l=Object.getOwnPropertyDescriptor(o,a);if(void 0!==l){if("value"in l)return l.value;var s=l.get;if(void 0===s)return;return s.call(i)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=a,n=i,r=!0,l=u=void 0}},d=n(1),p=o(d),f=n(22),m=n(23),h=n(35),y=n(86),g=o(y),v=n(3),b=o(v),w=n(2079),E=r(w),k=n(341),_=r(k),x=n(155),C=r(x),S=n(60),T=n(1883),P=n(1884),O=n(1905),R=n(1894),M=function(e){function t(e){a(this,n),c(Object.getPrototypeOf(n.prototype),"constructor",this).call(this,e),this.state={mode:"issue",filter:"all"},this.pid="",this.kanban_id="",this.getOptions=this.getOptions.bind(this),this.getList=this.getList.bind(this),this.goto=this.goto.bind(this),this.gotoBacklog=this.gotoBacklog.bind(this),this.gotoIssueList=this.gotoIssueList.bind(this),this.gotoGantt=this.gotoGantt.bind(this)}i(t,e),u(t,[{key:"getList",value:function(){return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(this.props.actions.getOptions(this.pid));case 2:return e.abrupt("return",this.props.kanban.ecode);case 3:case"end":return e.stop()}},null,this)}},{key:"goto",value:function(e,t){this.context.router.push({pathname:"/project/"+this.pid+"/kanban/"+e}),t&&this.setState({mode:t})}},{key:"gotoBacklog",value:function(e){this.setState({mode:"backlog"}),this.refs.header.handleSelectEV(e,"epic")}},{key:"gotoIssueList",value:function(e){this.context.router.push({pathname:"/project/"+this.pid+"/issue",query:e})}},{key:"gotoGantt",value:function(e){this.context.router.push({pathname:"/project/"+this.pid+"/gantt",query:e})}},{key:"index",value:function(e){var t,n;return regeneratorRuntime.async(function(r){for(;;)switch(r.prev=r.next){case 0:if(this.props.kanban.list&&!(this.props.kanban.list.length<=0)&&this.kanban_id){r.next=2;break}return r.abrupt("return");case 2:if(this.refs.list&&this.refs.list.closeDetail(),t=b.default.mapValues(e||{},function(e){return b.default.isArray(e)?e.join(","):e}),n=b.default.find(this.props.kanban.list,{id:this.kanban_id})||{},"kanban"!==n.type){r.next=9;break}b.default.extend(t,{from:"kanban"}),r.next=22;break;case 9:if("issue"!==this.state.mode){r.next=13;break}b.default.extend(t,{from:"active_sprint"}),r.next=22;break;case 13:if("backlog"!==this.state.mode){r.next=17;break}b.default.extend(t,{from:"backlog"}),r.next=22;break;case 17:if("history"!==this.state.mode){r.next=21;break}b.default.extend(t,{from:"his_sprint"}),r.next=22;break;case 21:return r.abrupt("return");case 22:return t.from_kanban_id=this.kanban_id,"all"==this.state.filter&&(t.filter="all"),t.limit=1e4,r.next=27,regeneratorRuntime.awrap(this.props.issueActions.index(this.pid,S.stringify(t)));case 27:return r.abrupt("return",this.props.issue.ecode);case 28:case"end":return r.stop()}},null,this)}},{key:"createKanban",value:function(e){return regeneratorRuntime.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(this.props.actions.create(this.pid,e));case 2:return t.abrupt("return",this.props.kanban.ecode);case 3:case"end":return t.stop()}},null,this)}},{key:"editKanban",value:function(e){return regeneratorRuntime.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(this.props.actions.edit(this.pid,e.id,e));case 2:return t.abrupt("return",this.props.kanban.ecode);case 3:case"end":return t.stop()}},null,this)}},{key:"delKanban",value:function(e){return regeneratorRuntime.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(this.props.actions.del(this.pid,e));case 2:return 0===this.props.kanban.ecode&&(this.kanban_id="",this.context.router.push({pathname:"/project/"+this.pid+"/kanban"})),t.abrupt("return",this.props.kanban.ecode);case 4:case"end":return t.stop()}},null,this)}},{key:"create",value:function(e){return regeneratorRuntime.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(this.props.issueActions.create(this.pid,e));case 2:return t.abrupt("return",this.props.issue.ecode);case 3:case"end":return t.stop()}},null,this)}},{key:"show",value:function(e,t){return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,regeneratorRuntime.awrap(this.props.issueActions.show(this.pid,e,t));case 2:return n.abrupt("return",this.props.issue.ecode);case 3:case"end":return n.stop()}},null,this)}},{key:"getOptions",value:function(){return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(this.props.issueActions.getOptions(this.pid));case 2:return e.abrupt("return",this.props.issue.ecode);case 3:case"end":return e.stop()}},null,this)}},{key:"edit",value:function(e,t){return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,regeneratorRuntime.awrap(this.props.issueActions.edit(this.pid,e,t));case 2:return n.abrupt("return",this.props.issue.ecode);case 3:case"end":return n.stop()}},null,this)}},{key:"setAssignee",value:function(e,t){return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,regeneratorRuntime.awrap(this.props.issueActions.setAssignee(this.pid,e,t));case 2:return n.abrupt("return",this.props.issue.ecode);case 3:case"end":return n.stop()}},null,this)}},{key:"setItemValue",value:function(e,t){return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,regeneratorRuntime.awrap(this.props.issueActions.setItemValue(this.pid,e,t));case 2:return n.abrupt("return",this.props.issue.ecode);case 3:case"end":return n.stop()}},null,this)}},{key:"setLabels",value:function(e,t){return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,regeneratorRuntime.awrap(this.props.issueActions.setLabels(this.pid,e,t));case 2:return n.abrupt("return",this.props.issue.ecode);case 3:case"end":return n.stop()}},null,this)}},{key:"delFile",value:function(e,t){return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,regeneratorRuntime.awrap(this.props.issueActions.delFile(this.pid,this.props.issue.itemData.id,e,t));case 2:return n.abrupt("return",this.props.issue.ecode);case 3:case"end":return n.stop()}},null,this)}},{key:"viewWorkflow",value:function(e){return regeneratorRuntime.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(this.props.wfActions.preview(this.pid,e));case 2:return t.abrupt("return",this.props.workflow.ecode);case 3:case"end":return t.stop()}},null,this)}},{key:"indexComments",value:function(e){return regeneratorRuntime.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(this.props.issueActions.indexComments(this.pid,e,this.props.issue.commentsSort));case 2:return t.abrupt("return",this.props.issue.ecode);case 3:case"end":return t.stop()}},null,this)}},{key:"addComments",value:function(e,t){return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,regeneratorRuntime.awrap(this.props.issueActions.addComments(this.pid,e,t));case 2:return n.abrupt("return",this.props.issue.ecode);case 3:case"end":return n.stop()}},null,this)}},{key:"delComments",value:function(e,t){return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,regeneratorRuntime.awrap(this.props.issueActions.delComments(this.pid,e,t));case 2:return n.abrupt("return",this.props.issue.ecode);case 3:case"end":return n.stop()}},null,this)}},{key:"editComments",value:function(e,t,n){return regeneratorRuntime.async(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,regeneratorRuntime.awrap(this.props.issueActions.editComments(this.pid,e,t,n));case 2:return r.abrupt("return",this.props.issue.ecode);case 3:case"end":return r.stop()}},null,this)}},{key:"indexWorklog",value:function(e){return regeneratorRuntime.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(this.props.issueActions.indexWorklog(this.pid,e,this.props.issue.worklogSort));case 2:return t.abrupt("return",this.props.issue.ecode);case 3:case"end":return t.stop()}},null,this)}},{key:"addWorklog",value:function(e,t){return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,regeneratorRuntime.awrap(this.props.issueActions.addWorklog(this.pid,e,t));case 2:return n.abrupt("return",this.props.issue.ecode);case 3:case"end":return n.stop()}},null,this)}},{key:"delWorklog",value:function(e,t){return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,regeneratorRuntime.awrap(this.props.issueActions.delWorklog(this.pid,e,t));case 2:return n.abrupt("return",this.props.issue.ecode);case 3:case"end":return n.stop()}},null,this)}},{key:"editWorklog",value:function(e,t,n){return regeneratorRuntime.async(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,regeneratorRuntime.awrap(this.props.issueActions.editWorklog(this.pid,e,t,n));case 2:return r.abrupt("return",this.props.issue.ecode);case 3:case"end":return r.stop()}},null,this)}},{key:"indexHistory",value:function(e){return regeneratorRuntime.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(this.props.issueActions.indexHistory(this.pid,e,this.props.issue.historySort));case 2:return t.abrupt("return",this.props.issue.ecode);case 3:case"end":return t.stop()}},null,this)}},{key:"indexGitCommits",value:function(e){return regeneratorRuntime.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(this.props.issueActions.indexGitCommits(this.pid,e,this.props.issue.gitCommitsSort));case 2:return t.abrupt("return",this.props.issue.ecode);case 3:case"end":return t.stop()}},null,this)}},{key:"doAction",value:function(e,t,n){return regeneratorRuntime.async(function(r){
for(;;)switch(r.prev=r.next){case 0:return r.next=2,regeneratorRuntime.awrap(this.props.issueActions.doAction(this.pid,e,t,n||{}));case 2:return r.abrupt("return",this.props.issue.ecode);case 3:case"end":return r.stop()}},null,this)}},{key:"moveSprintIssue",value:function(e,t){return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,regeneratorRuntime.awrap(this.props.actions.moveSprintIssue(this.pid,e));case 2:if(0!==this.props.kanban.ecode){n.next=6;break}if(!t){n.next=6;break}return n.next=6,regeneratorRuntime.awrap(this.props.issueActions.removeFromSprint(e.issue_no));case 6:return n.abrupt("return",this.props.kanban.ecode);case 7:case"end":return n.stop()}},null,this)}},{key:"watch",value:function(e,t){return this.props.issueActions.watch(this.pid,e,t),this.props.issue.ecode}},{key:"record",value:function(){this.props.issueActions.record()}},{key:"forward",value:function(e){this.props.issueActions.forward(e)}},{key:"cleanRecord",value:function(){this.props.issueActions.cleanRecord()}},{key:"createLink",value:function(e){return regeneratorRuntime.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(this.props.issueActions.createLink(this.pid,e));case 2:return t.abrupt("return",this.props.issue.ecode);case 3:case"end":return t.stop()}},null,this)}},{key:"delLink",value:function(e){return regeneratorRuntime.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(this.props.issueActions.delLink(this.pid,e));case 2:return t.abrupt("return",this.props.issue.ecode);case 3:case"end":return t.stop()}},null,this)}},{key:"resetState",value:function(e,t){return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,regeneratorRuntime.awrap(this.props.issueActions.resetState(this.pid,e,t));case 2:return n.abrupt("return",this.props.issue.ecode);case 3:case"end":return n.stop()}},null,this)}},{key:"copy",value:function(e){return regeneratorRuntime.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(this.props.issueActions.copy(this.pid,e));case 2:return t.abrupt("return",this.props.issue.ecode);case 3:case"end":return t.stop()}},null,this)}},{key:"convert",value:function(e,t){return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,regeneratorRuntime.awrap(this.props.issueActions.convert(this.pid,e,t));case 2:return n.abrupt("return",this.props.issue.ecode);case 3:case"end":return n.stop()}},null,this)}},{key:"move",value:function(e,t){return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,regeneratorRuntime.awrap(this.props.issueActions.move(this.pid,e,t));case 2:return n.abrupt("return",this.props.issue.ecode);case 3:case"end":return n.stop()}},null,this)}},{key:"del",value:function(e){return regeneratorRuntime.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(this.props.issueActions.del(this.pid,e));case 2:return t.abrupt("return",this.props.issue.ecode);case 3:case"end":return t.stop()}},null,this)}},{key:"getDraggableActions",value:function(e){return regeneratorRuntime.async(function(t){for(;;)switch(t.prev=t.next){case 0:if("backlog"!=this.state.mode){t.next=4;break}this.props.actions.dragBacklogIssue(e),t.next=7;break;case 4:return t.next=6,regeneratorRuntime.awrap(this.props.actions.getDraggableActions(this.pid,e));case 6:return t.abrupt("return",this.props.kanban.ecode);case 7:case"end":return t.stop()}},null,this)}},{key:"setRank",value:function(e){return regeneratorRuntime.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(this.props.issueActions.setRank(this.pid,this.kanban_id,e));case 2:return t.abrupt("return",this.props.issue.ecode);case 3:case"end":return t.stop()}},null,this)}},{key:"release",value:function(e){return regeneratorRuntime.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(this.props.issueActions.release(this.pid,e));case 2:return t.abrupt("return",this.props.issue.ecode);case 3:case"end":return t.stop()}},null,this)}},{key:"getSprint",value:function(e){return regeneratorRuntime.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(this.props.actions.getSprint(this.pid,e));case 2:return t.abrupt("return",this.props.kanban.ecode);case 3:case"end":return t.stop()}},null,this)}},{key:"createSprint",value:function(){return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(this.props.actions.createSprint(this.pid));case 2:return e.abrupt("return",this.props.kanban.ecode);case 3:case"end":return e.stop()}},null,this)}},{key:"publishSprint",value:function(e,t){return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,regeneratorRuntime.awrap(this.props.actions.publishSprint(this.pid,t,b.default.extend(e,{kanban_id:this.kanban_id})));case 2:return 0===this.props.kanban.ecode&&this.refs.header.changeModel("issue"),n.abrupt("return",this.props.kanban.ecode);case 4:case"end":return n.stop()}},null,this)}},{key:"completeSprint",value:function(e,t){return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,regeneratorRuntime.awrap(this.props.actions.completeSprint(this.pid,t,e));case 2:return 0===this.props.kanban.ecode&&this.refs.header.changeModel("backlog"),n.abrupt("return",this.props.kanban.ecode);case 4:case"end":return n.stop()}},null,this)}},{key:"updateSprint",value:function(e){return regeneratorRuntime.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(this.props.actions.updateSprint(this.pid,e));case 2:return t.abrupt("return",this.props.kanban.ecode);case 3:case"end":return t.stop()}},null,this)}},{key:"deleteSprint",value:function(e){return regeneratorRuntime.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(this.props.actions.deleteSprint(this.pid,e));case 2:return t.abrupt("return",this.props.kanban.ecode);case 3:case"end":return t.stop()}},null,this)}},{key:"getSprintLog",value:function(e){return regeneratorRuntime.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(this.props.actions.getSprintLog(this.pid,this.kanban_id,e));case 2:return t.abrupt("return",this.props.kanban.ecode);case 3:case"end":return t.stop()}},null,this)}},{key:"indexEpic",value:function(){return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(this.props.actions.indexEpic(this.pid,this.kanban_id));case 2:return e.abrupt("return",this.props.kanban.ecode);case 3:case"end":return e.stop()}},null,this)}},{key:"createEpic",value:function(e){return regeneratorRuntime.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(this.props.actions.createEpic(this.pid,e));case 2:return t.abrupt("return",this.props.kanban.ecode);case 3:case"end":return t.stop()}},null,this)}},{key:"editEpic",value:function(e){return regeneratorRuntime.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(this.props.actions.editEpic(this.pid,e));case 2:return t.abrupt("return",this.props.kanban.ecode);case 3:case"end":return t.stop()}},null,this)}},{key:"delEpic",value:function(e){return regeneratorRuntime.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(this.props.actions.delEpic(this.pid,e));case 2:return t.abrupt("return",this.props.kanban.ecode);case 3:case"end":return t.stop()}},null,this)}},{key:"setEpicSort",value:function(e){return regeneratorRuntime.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(this.props.actions.setEpicSort(this.pid,e));case 2:return t.abrupt("return",this.props.kanban.ecode);case 3:case"end":return t.stop()}},null,this)}},{key:"changeModel",value:function(e){this.setState({mode:e})}},{key:"componentWillMount",value:function(){var e=this.props.params,t=e.key;e.id;this.pid=t,this.getOptions(),this.getList()}},{key:"componentWillReceiveProps",value:function(e){var t=e.params.id,n=e.kanban;if(!(n.list.length<=0))if(t)t!=this.kanban_id&&(this.kanban_id=t,this.props.actions.recordAccess(this.pid,t));else if(this.kanban_id)this.goto(this.kanban_id);else{var r=n.list;r.length>0&&this.goto(b.default.head(r).id,"issue")}}},{key:"closeDetailBar",value:function(){this.refs.list&&this.refs.list.closeDetail()}},{key:"render",value:function(){var e=this;if(this.props.project.options){b.default.assign(this.props.issue.options,this.props.project.options),b.default.assign(this.props.issue.options,{epics:this.props.kanban.epics});var t=b.default.find(this.props.kanban.sprints,{status:"active"});if(t){this.props.issue.options.sprints=this.props.issue.options.sprints||[];var n=b.default.findIndex(this.props.issue.options.sprints,{no:t.no});n===-1?this.props.issue.options.sprints.unshift({no:t.no,name:t.name}):this.props.issue.options.sprints[n]={no:t.no,name:t.name}}}var r={};return this.props.issue.options.types&&this.kanban_id&&this.props.kanban.list.length>0&&(r=b.default.find(this.props.kanban.list,{id:this.kanban_id})||{}),p.default.createElement("div",{onMouseUp:this.closeDetailBar.bind(this),style:{overflowY:"hidden",height:"100%",margin:"0px -8px"}},p.default.createElement(T,{ref:"header",changeModel:this.changeModel.bind(this),mode:this.state.mode,curKanban:r,kanbans:this.props.kanban.list,completedSprintNum:this.props.kanban.completedSprintNum,selectedSprint:this.props.kanban.selectedSprint,sprints:this.props.kanban.sprints,versions:this.props.kanban.versions,epics:this.props.kanban.epics,epicLoading:this.props.kanban.epicLoading,indexEpicLoading:this.props.kanban.indexEpicLoading,loading:this.props.kanban.loading||this.props.issue.optionsLoading,getSprintLog:this.getSprintLog.bind(this),sprintLog:this.props.kanban.sprintLog,sprintLogLoading:this.props.kanban.sprintLogLoading,"goto":this.goto,gotoIssueList:this.gotoIssueList,gotoGantt:this.gotoGantt,selectedFilter:this.state.filter,selectFilter:function(t){e.setState({filter:t})},index:this.index.bind(this),project:this.props.project.item,createKanban:this.createKanban.bind(this),getSprint:this.getSprint.bind(this),createSprint:this.createSprint.bind(this),createEpic:this.createEpic.bind(this),setEpicSort:this.setEpicSort.bind(this),create:this.create.bind(this),addLabels:this.props.issueActions.addLabels,options:this.props.issue.options,i18n:this.props.i18n}),("issue"==this.state.mode||"backlog"==this.state.mode||"history"==this.state.mode)&&p.default.createElement(P,s({ref:"list",curKanban:r,selectedSprint:this.props.kanban.selectedSprint,sprints:this.props.kanban.sprints,sprintLoading:this.props.kanban.sprintLoading,selectedFilter:this.state.filter,draggedIssue:this.props.kanban.draggedIssue,draggableActions:this.props.kanban.wfactions,getDraggableActions:this.getDraggableActions.bind(this),cleanDraggableActions:this.props.actions.cleanDraggableActions,index:this.index.bind(this),show:this.show.bind(this),edit:this.edit.bind(this),create:this.create.bind(this),setAssignee:this.setAssignee.bind(this),setItemValue:this.setItemValue.bind(this),setLabels:this.setLabels.bind(this),addLabels:this.props.issueActions.addLabels,delFile:this.delFile.bind(this),addFile:this.props.issueActions.addFile,record:this.record.bind(this),forward:this.forward.bind(this),cleanRecord:this.cleanRecord.bind(this),project:this.props.project.item,wfCollection:this.props.workflow.itemSteps||[],wfLoading:this.props.workflow.itemLoading,viewWorkflow:this.viewWorkflow.bind(this),indexComments:this.indexComments.bind(this),sortComments:this.props.issueActions.sortComments,addComments:this.addComments.bind(this),editComments:this.editComments.bind(this),delComments:this.delComments.bind(this),indexWorklog:this.indexWorklog.bind(this),sortWorklog:this.props.issueActions.sortWorklog,addWorklog:this.addWorklog.bind(this),editWorklog:this.editWorklog.bind(this),delWorklog:this.delWorklog.bind(this),indexHistory:this.indexHistory.bind(this),sortHistory:this.props.issueActions.sortHistory,indexGitCommits:this.indexGitCommits.bind(this),sortGitCommits:this.props.issueActions.sortGitCommits,createLink:this.createLink.bind(this),delLink:this.delLink.bind(this),doAction:this.doAction.bind(this),watch:this.watch.bind(this),copy:this.copy.bind(this),move:this.move.bind(this),convert:this.convert.bind(this),resetState:this.resetState.bind(this),del:this.del.bind(this),setRank:this.setRank.bind(this),release:this.release.bind(this),moveSprintIssue:this.moveSprintIssue.bind(this),updateSprint:this.updateSprint.bind(this),publishSprint:this.publishSprint.bind(this),completeSprint:this.completeSprint.bind(this),deleteSprint:this.deleteSprint.bind(this),user:this.props.session.user,i18n:this.props.i18n,layout:this.props.layout,mode:this.state.mode},this.props.issue)),"config"==this.state.mode&&p.default.createElement(R,{config:r,loading:this.props.kanban.configLoading,edit:this.editKanban.bind(this),del:this.delKanban.bind(this),options:this.props.issue.options,i18n:this.props.i18n}),"epic"==this.state.mode&&p.default.createElement(O,{indexLoading:this.props.kanban.indexEpicLoading,loading:this.props.kanban.epicLoading,collection:this.props.kanban.epics,stateOptions:this.props.kanban.epicStates,selectedItem:this.props.kanban.selectedEpicItem,gotoBacklog:this.gotoBacklog.bind(this),gotoIssueList:this.gotoIssueList.bind(this),gotoGantt:this.gotoGantt.bind(this),select:this.props.actions.selectEpic,index:this.indexEpic.bind(this),create:this.createEpic.bind(this),update:this.editEpic.bind(this),del:this.delEpic.bind(this),options:this.props.issue.options,i18n:this.props.i18n}))}}],[{key:"contextTypes",value:{router:d.PropTypes.object.isRequired},enumerable:!0},{key:"propTypes",value:{i18n:d.PropTypes.object.isRequired,session:d.PropTypes.object.isRequired,layout:d.PropTypes.object.isRequired,actions:d.PropTypes.object.isRequired,issueActions:d.PropTypes.object.isRequired,wfActions:d.PropTypes.object.isRequired,params:d.PropTypes.object.isRequired,kanban:d.PropTypes.object.isRequired,project:d.PropTypes.object.isRequired,issue:d.PropTypes.object.isRequired,workflow:d.PropTypes.object.isRequired},enumerable:!0}]);var n=t;return t=(0,f.connect)(function(e){var t=e.i18n,n=e.session,r=e.layout,o=e.kanban,a=e.project,i=e.issue,l=e.workflow;return{i18n:t,session:n,layout:r,kanban:o,project:a,issue:i,workflow:l}},l)(t)||t,t=(0,h.DragDropContext)(g.default)(t)||t}(d.Component);t.default=M,e.exports=t.default}).call(this)}finally{}},1881:function(e,t,n){try{(function(){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function(e,t,n){for(var r=!0;r;){var o=e,a=t,i=n;r=!1,null===o&&(o=Function.prototype);var l=Object.getOwnPropertyDescriptor(o,a);if(void 0!==l){if("value"in l)return l.value;var s=l.get;if(void 0===s)return;return s.call(i)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=a,n=i,r=!0,l=u=void 0}},s=n(1),u=r(s),c=n(2),d=n(5),p=n(3),f=(r(p),n(4)),m=function(e){function t(e){o(this,t),l(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={ecode:0},this.confirm=this.confirm.bind(this),this.cancel=this.cancel.bind(this)}return a(t,e),i(t,[{key:"confirm",value:function(){var e,t,n,r,o;return regeneratorRuntime.async(function(a){for(;;)switch(a.prev=a.next){case 0:return e=this.props,t=e.close,n=e.del,r=e.data,a.next=6,regeneratorRuntime.awrap(n(r.no));case 6:o=a.sent,this.setState({ecode:o}),0===o&&(t(),d.notify.show("Sprint已删除。","success",2e3));case 9:case"end":return a.stop()}},null,this)}},{key:"cancel",value:function(){var e=this.props,t=e.loading,n=e.close;t||n()}},{key:"render",value:function(){var e=this.props,t=e.i18n.errMsg,n=e.data,r=void 0===n?{}:n,o=e.loading;return u.default.createElement(c.Modal,{show:!0,onHide:this.cancel,backdrop:"static","aria-labelledby":"contained-modal-title-sm"},u.default.createElement(c.Modal.Header,{closeButton:!0},u.default.createElement(c.Modal.Title,{id:"contained-modal-title-la"},"删除 - ",r.name||"")),u.default.createElement(c.Modal.Body,null,"确认要删除此Sprint? ",u.default.createElement("br",null)),u.default.createElement(c.Modal.Footer,null,u.default.createElement("span",{className:"ralign"},0!==this.state.ecode&&!o&&t[this.state.ecode]),u.default.createElement("img",{src:f,className:o?"loading":"hide"}),u.default.createElement(c.Button,{disabled:o,onClick:this.confirm},"确定"),u.default.createElement(c.Button,{bsStyle:"link",disabled:o,onClick:this.cancel},"取消")))}}],[{key:"propTypes",value:{i18n:s.PropTypes.object.isRequired,close:s.PropTypes.func.isRequired,loading:s.PropTypes.bool.isRequired,del:s.PropTypes.func.isRequired,data:s.PropTypes.object.isRequired},enumerable:!0}]),t}(s.Component);t.default=m,e.exports=t.default}).call(this)}finally{}},1882:function(e,t,n){try{(function(){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(e,t,n){for(var r=!0;r;){var o=e,a=t,i=n;r=!1,null===o&&(o=Function.prototype);var l=Object.getOwnPropertyDescriptor(o,a);if(void 0!==l){if("value"in l)return l.value;var s=l.get;if(void 0===s)return;return s.call(i)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=a,n=i,r=!0,l=u=void 0}},u=n(1),c=r(u),d=n(8),p=n(2),f=n(3),m=(r(f),n(52)),h=(r(m),n(5)),y=n(4),g=function(e,t){var n={};return e.name||(n.name="必填"),n},v=function(e){function t(e){o(this,n),s(Object.getPrototypeOf(n.prototype),"constructor",this).call(this,e),this.state={ecode:0,isSendMsg:!0},this.handleSubmit=this.handleSubmit.bind(this),this.handleCancel=this.handleCancel.bind(this)}a(t,e),l(t,[{key:"handleSubmit",value:function(){var e,t,n,r,o;return regeneratorRuntime.async(function(a){for(;;)switch(a.prev=a.next){case 0:return e=this.props,t=e.values,n=e.update,r=e.close,a.next=6,regeneratorRuntime.awrap(n(t));case 6:o=a.sent,this.setState({ecode:o}),0===o&&(h.notify.show("更新完成。","success",2e3),r());case 9:case"end":return a.stop()}},null,this)}},{key:"handleCancel",value:function(){var e=this.props,t=e.close,n=e.submitting;n||(this.setState({ecode:0}),t())}},{key:"componentWillMount",value:function(){var e=this.props,t=e.initializeForm,n=e.data;t(n)}},{key:"render",value:function(){var e=this.props,t=e.i18n.errMsg,n=e.data,r=e.fields,o=r.no,a=r.name,l=r.description,s=e.handleSubmit,u=e.dirty,d=e.invalid,f=e.submitting;return c.default.createElement(p.Modal,{show:!0,onHide:this.handleCancel,backdrop:"static","aria-labelledby":"contained-modal-title-sm"},c.default.createElement(p.Modal.Header,{closeButton:!0},c.default.createElement(p.Modal.Title,{id:"contained-modal-title-la"},"编辑 - ",n.name||"")),c.default.createElement("form",{onSubmit:s(this.handleSubmit),onKeyUp:function(e){13==e.keyCode&&e.preventDefault()}},c.default.createElement(p.Modal.Body,{style:{maxHeight:"580px"}},c.default.createElement(p.FormGroup,null,c.default.createElement(p.ControlLabel,null,c.default.createElement("span",{className:"txt-impt"},"*"),"名称"),c.default.createElement(p.FormControl,i({type:"hidden"},o)),c.default.createElement(p.FormControl,i({disabled:f,type:"text"},a,{placeholder:"名称"}))),c.default.createElement(p.FormGroup,null,c.default.createElement(p.ControlLabel,null,"描述"),c.default.createElement(p.FormControl,i({disabled:f,componentClass:"textarea",style:{height:"200px"}},l,{placeholder:"描述"})))),c.default.createElement(p.Modal.Footer,null,c.default.createElement("span",{className:"ralign"},0!==this.state.ecode&&!f&&t[this.state.ecode]),c.default.createElement("img",{src:y,className:f?"loading":"hide"}),c.default.createElement(p.Button,{disabled:!u||f||d,type:"submit"},"确定"),c.default.createElement(p.Button,{bsStyle:"link",disabled:f,onClick:this.handleCancel},"取消"))))}}],[{key:"propTypes",value:{i18n:u.PropTypes.object.isRequired,data:u.PropTypes.object.isRequired,submitting:u.PropTypes.bool,invalid:u.PropTypes.bool,dirty:u.PropTypes.bool,values:u.PropTypes.object,fields:u.PropTypes.object,handleSubmit:u.PropTypes.func.isRequired,close:u.PropTypes.func.isRequired,initializeForm:u.PropTypes.func.isRequired,update:u.PropTypes.func.isRequired},enumerable:!0}]);var n=t;return t=(0,d.reduxForm)({form:"editsprint",fields:["no","name","description"],validate:g})(t)||t}(u.Component);t.default=v,e.exports=t.default}).call(this)}finally{}},1883:function(e,t,n){try{(function(){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function(e,t,n){for(var r=!0;r;){var o=e,a=t,i=n;r=!1,null===o&&(o=Function.prototype);var l=Object.getOwnPropertyDescriptor(o,a);if(void 0!==l){if("value"in l)return l.value;var s=l.get;if(void 0===s)return;return s.call(i)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=a,n=i,r=!0,l=u=void 0}},s=n(1),u=r(s),c=n(2),d=n(7),p=r(d),f=n(3),m=r(f),h=n(106),y=n(1895),g=(n(1067),n(1902)),v=n(116),b=n(1885),w=n(1877),E=n(15),k=n(6),_=n(4),x=function(e){function t(e){o(this,t),l(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e);var n=window.localStorage,r="epic";n&&"version"===n.getItem(e.project.key+"-backlog-filter-mode")&&(r="version"),this.state={query:{},hideHeader:!1,backlogFilterMode:r,createIssueModalShow:!1,createKanbanModalShow:!1,createEpicModalShow:!1,sortCardsModalShow:!1,burndownModalShow:!1,moreFilterModalShow:!1,hisBurndownModalShow:!1},this.changeModel=this.changeModel.bind(this),this.changeFilterMode=this.changeFilterMode.bind(this)}return a(t,e),i(t,[{key:"componentWillReceiveProps",value:function(e){var t,n,r,o;return regeneratorRuntime.async(function(a){for(;;)switch(a.prev=a.next){case 0:if(t=e.index,n=e.changeModel,r=e.selectFilter,o=e.curKanban,this.props.curKanban.id==o.id&&m.default.isEqual(this.props.curKanban.query,o.query)){a.next=11;break}return a.next=7,regeneratorRuntime.awrap(n("issue"));case 7:return a.next=9,regeneratorRuntime.awrap(r("all"));case 9:this.state.query={},t();case 11:case"end":return a.stop()}},null,this)}},{key:"createIssueModalClose",value:function(){this.setState({createIssueModalShow:!1})}},{key:"createKanbanModalClose",value:function(){this.setState({createKanbanModalShow:!1})}},{key:"createEpicModalClose",value:function(){this.setState({createEpicModalShow:!1})}},{key:"sortCardsModalClose",value:function(){this.setState({sortCardsModalShow:!1})}},{key:"moreFilterModalClose",value:function(){this.setState({moreFilterModalShow:!1})}},{key:"burndownModalClose",value:function(){this.setState({burndownModalShow:!1})}},{key:"hisBurndownModalClose",value:function(){this.setState({hisBurndownModalShow:!1})}},{key:"changeKanban",value:function(e){if("create"===e)this.setState({createKanbanModalShow:!0});else{var t=this.props.goto;t(e)}}},{key:"moreSelect",value:function(e){var t=this.props,n=t.sprints,r=void 0===n?[]:n,o=t.gotoIssueList,a=t.gotoGantt;if("burndown"===e)this.setState({burndownModalShow:!0});else if("gotoIssue"===e){var i=m.default.find(r||[],{status:"active"});i&&o({sprints:i.no})}else if("gotoGantt"===e){var i=m.default.find(r||[],{status:"active"});i&&a({sprints:i.no})}}},{key:"hisMoreSelect",value:function(e){var t=this.props,n=t.selectedFilter,r=t.gotoIssueList,o=t.gotoGantt;"burndown"===e?this.setState({hisBurndownModalShow:!0}):"gotoIssue"===e?r({sprints:n}):"gotoGantt"===e&&o({sprints:n})}},{key:"handleSelect",value:function(e){var t,n,r,o;return regeneratorRuntime.async(function(a){for(;;)switch(a.prev=a.next){case 0:return t=this.props,n=t.index,r=t.curKanban,o=t.selectFilter,this.state.query="all"===e?{}:r.filters[e].query,a.next=7,regeneratorRuntime.awrap(o(e));case 7:n(this.state.query);case 8:case"end":return a.stop()}},null,this)}},{key:"showHeader",value:function(){this.setState({hideHeader:!1});var e=E(window).height();E(".board-container").css("height",e-120-50)}},{key:"hideHeader",value:function(){this.setState({hideHeader:!0});var e=E(window).height();E(".board-container").css("height",e-28-50)}},{key:"changeModel",value:function n(e){var t,n,r,o,a,i,l;return regeneratorRuntime.async(function(s){for(;;)switch(s.prev=s.next){case 0:return t=this.props,n=t.changeModel,r=t.selectFilter,o=t.index,a=t.curKanban,i=t.getSprint,l=t.completedSprintNum,s.next=9,regeneratorRuntime.awrap(n(e));case 9:if("issue"!=e&&"backlog"!=e){s.next=16;break}return s.next=12,regeneratorRuntime.awrap(r("all"));case 12:this.state.query={},o(),s.next=21;break;case 16:if("history"!=e){s.next=21;break}return s.next=19,regeneratorRuntime.awrap(r(l+""));case 19:o({sprints:l}),i(l);case 21:case"end":return s.stop()}},null,this)}},{key:"handleSelectEV",value:function(e,t){var n,r,o,a;return regeneratorRuntime.async(function(i){for(;;)switch(i.prev=i.next){case 0:return t&&(this.state.backlogFilterMode=t),n=this.props,r=n.index,o=n.curKanban,a=n.selectFilter,i.next=7,regeneratorRuntime.awrap(a(e||"all"));case 7:r(e?"epic"===this.state.backlogFilterMode?{epic:e}:{resolve_version:e}:{});case 8:case"end":return i.stop()}},null,this)}},{key:"handleSelectSprint",value:function(e){var t,n,r,o,a;return regeneratorRuntime.async(function(i){for(;;)switch(i.prev=i.next){case 0:return t=this.props,n=t.index,r=t.selectFilter,o=t.completedSprintNum,a=t.getSprint,i.next=7,regeneratorRuntime.awrap(r(e||o));case 7:n({sprints:e}),a(e);case 9:case"end":return i.stop()}},null,this)}},{key:"changeFilterMode",value:function(){var e,t,n,r,o,a,i;return regeneratorRuntime.async(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,regeneratorRuntime.awrap(this.setState({backlogFilterMode:"epic"===this.state.backlogFilterMode?"version":"epic"}));case 2:return e=this.props,t=e.index,n=e.curKanban,r=e.selectFilter,o=e.selectedFilter,a=e.project,i=window.localStorage,i&&i.setItem(a.key+"-backlog-filter-mode",this.state.backlogFilterMode),l.next=12,regeneratorRuntime.awrap(r("all"));case 12:"all"!=o&&t();case 13:case"end":return l.stop()}},null,this)}},{key:"moreSearch",value:function(e){var t=this.props,n=t.index,r=t.selectFilter;r(m.default.isEmpty(e)?"all":"more"),this.setState({query:e}),n(e)}},{key:"render",value:function(){var e=this,t=this.props,n=t.i18n,r=(t.changeModel,t.mode),o=(t.selectFilter,t.selectedFilter),a=t.createKanban,i=t.curKanban,l=t.kanbans,s=void 0===l?[]:l,d=t.createSprint,f=t.completedSprintNum,E=void 0===f?0:f,x=t.selectedSprint,C=void 0===x?{}:x,S=t.sprints,T=void 0===S?[]:S,P=t.createEpic,O=t.setEpicSort,R=t.epics,M=void 0===R?[]:R,j=t.versions,F=void 0===j?[]:j,N=t.loading,q=t.epicLoading,I=t.indexEpicLoading,L=t.getSprintLog,A=t.sprintLog,D=void 0===A?{}:A,B=t.sprintLogLoading,H=t.project,W=(t.index,t.create),z=t.addLabels,V=t.goto,G=t.options,K=m.default.map(M,function(e){return{label:e.name,value:e.id}}),U=m.default.map(F,function(e){return{label:e.name,value:e.id}}),Y=m.default.map(m.default.filter(G.sprints,function(e){return e.no<=E}),function(e){return{label:e.name,value:e.no+""}}),Z="",X="",$={};return"scrum"==i.type&&"issue"==r?($=m.default.find(T||[],{status:"active"}),$&&(Z=u.default.createElement(c.Popover,{id:"popover-trigger-click",style:{maxWidth:"500px",padding:"15px 0px",lineHeight:"25px"}},u.default.createElement(c.Grid,null,u.default.createElement(c.Row,null,u.default.createElement(c.Col,{sm:3,componentClass:c.ControlLabel,style:{textAlign:"right"}},"Sprint No"),u.default.createElement(c.Col,{sm:9},$.no||"")),u.default.createElement(c.Row,null,u.default.createElement(c.Col,{sm:3,componentClass:c.ControlLabel,style:{textAlign:"right"}},"名称"),u.default.createElement(c.Col,{sm:9},$.name||"")),u.default.createElement(c.Row,null,u.default.createElement(c.Col,{sm:3,componentClass:c.ControlLabel,style:{textAlign:"right"}},"开始时间"),u.default.createElement(c.Col,{sm:9},k.unix($.start_time).format("YYYY/MM/DD"))),u.default.createElement(c.Row,null,u.default.createElement(c.Col,{sm:3,componentClass:c.ControlLabel,style:{textAlign:"right"}},"结束时间"),u.default.createElement(c.Col,{sm:9},k.unix($.complete_time).format("YYYY/MM/DD"))),u.default.createElement(c.Row,null,u.default.createElement(c.Col,{sm:3,componentClass:c.ControlLabel,style:{textAlign:"right"}},"描述"),u.default.createElement(c.Col,{sm:9,style:{overflowY:"scroll",maxHeight:"450px"},dangerouslySetInnerHTML:{__html:m.default.escape($.description||"-").replace(/(\r\n)|(\n)/g,"<br/>")}})))))):"scrum"==i.type&&"history"==r&&(X=u.default.createElement(c.Popover,{id:"popover-trigger-click",style:{maxWidth:"500px",padding:"15px 0px",lineHeight:"25px"}},u.default.createElement(c.Grid,null,u.default.createElement(c.Row,null,u.default.createElement(c.Col,{sm:3,componentClass:c.ControlLabel,style:{textAlign:"right"}},"Sprint No"),u.default.createElement(c.Col,{sm:9},C.no||"")),u.default.createElement(c.Row,null,u.default.createElement(c.Col,{sm:3,componentClass:c.ControlLabel,style:{textAlign:"right"}},"名称"),u.default.createElement(c.Col,{sm:9},C.name||"")),u.default.createElement(c.Row,null,u.default.createElement(c.Col,{sm:3,componentClass:c.ControlLabel,style:{textAlign:"right"}},"期间"),u.default.createElement(c.Col,{sm:9},C.start_time&&k.unix(C.start_time).format("YYYY/MM/DD"),u.default.createElement("span",{style:{margin:"0 4px"}},"～"),C.complete_time&&k.unix(C.complete_time).format("YYYY/MM/DD"))),u.default.createElement(c.Row,null,u.default.createElement(c.Col,{sm:3,componentClass:c.ControlLabel,style:{textAlign:"right"}},"实际完成时间"),u.default.createElement(c.Col,{sm:9},C.real_complete_time&&k.unix(C.real_complete_time).format("YYYY/MM/DD HH:mm"))),u.default.createElement(c.Row,null,u.default.createElement(c.Col,{sm:3,componentClass:c.ControlLabel,style:{
textAlign:"right"}},"描述"),u.default.createElement(c.Col,{sm:9,style:{overflowY:"scroll",maxHeight:"450px"},dangerouslySetInnerHTML:{__html:m.default.escape(C.description||"-").replace(/(\r\n)|(\n)/g,"<br/>")}}))))),u.default.createElement("div",{className:"kanban-header"},u.default.createElement("div",{style:{height:"0px",display:this.state.hideHeader?"block":"none",textAlign:"right"}},u.default.createElement("span",{title:"展示看板头"},u.default.createElement(c.Button,{onClick:this.showHeader.bind(this),style:{marginTop:"-37px"}},u.default.createElement("i",{className:"fa fa-angle-double-down","aria-hidden":"true"})))),u.default.createElement("div",{id:"main-header",style:{height:"49px",display:this.state.hideHeader?"none":"block"}},u.default.createElement("div",{style:{display:"inline-block",fontSize:"19px",marginTop:"5px"}},N&&u.default.createElement("img",{src:_,className:"loading"}),!N&&!m.default.isEmpty(i)&&i.name||"",!N&&m.default.isEmpty(i)&&s.length>0&&u.default.createElement("span",{style:{fontSize:"14px"}},"该看板不存在，请重试或选择其它看板。"),!N&&m.default.isEmpty(i)&&s.length<=0&&u.default.createElement("span",{style:{fontSize:"14px"}},"该项目暂未定义看板，",G.permissions&&G.permissions.indexOf("manage_project")!==-1?u.default.createElement("span",null,"请点击 ",u.default.createElement("a",{href:"#",onClick:function(t){t.preventDefault(),e.setState({createKanbanModalShow:!0})}},"创建看板"),"。"):"请联系项目管理员创建。")),u.default.createElement("div",{style:{"float":"right",display:"inline-block"}},G.permissions&&G.permissions.indexOf("create_issue")!==-1&&!m.default.isEmpty(i)&&("kanban"==i.type&&"issue"===r||"backlog"===r)&&u.default.createElement(c.Button,{style:{marginRight:"10px"},bsStyle:"primary",onClick:function(){e.setState({createIssueModalShow:!0})}},u.default.createElement("i",{className:"fa fa-plus"})," 创建问题"),!m.default.isEmpty(i)&&u.default.createElement(c.ButtonGroup,{style:{marginRight:"10px"}},"kanban"==i.type&&u.default.createElement(c.Button,{style:{backgroundColor:"issue"==r&&"#eee"},onClick:function(){e.changeModel("issue")}},"看板"),"scrum"==i.type&&u.default.createElement(c.Button,{style:{backgroundColor:"epic"==r&&"#eee"},onClick:function(){e.changeModel("epic")}},"Epic"),"scrum"==i.type&&E>0&&u.default.createElement(c.Button,{style:{backgroundColor:"history"==r&&"#eee"},onClick:function(){e.changeModel("history")}},"Sprint 历史"),"scrum"==i.type&&u.default.createElement(c.Button,{style:{backgroundColor:"backlog"==r&&"#eee"},onClick:function(){e.changeModel("backlog")}},"Backlog"),"scrum"==i.type&&u.default.createElement(c.Button,{style:{backgroundColor:"issue"==r&&"#eee"},onClick:function(){e.changeModel("issue")}},"活动Sprint"),u.default.createElement(c.Button,{style:{backgroundColor:"config"==r&&"#eee"},onClick:function(){e.changeModel("config")}},"配置")),s.length>0&&u.default.createElement(c.DropdownButton,{pullRight:!0,title:"列表",onSelect:this.changeKanban.bind(this)},m.default.map(s,function(e,t){return u.default.createElement(c.MenuItem,{key:t,eventKey:e.id},u.default.createElement("div",{style:{display:"inline-block",width:"20px",textAlign:"left"}},i.id===e.id&&u.default.createElement("i",{className:"fa fa-check"})),u.default.createElement("span",null,e.name))}),G.permissions&&G.permissions.indexOf("manage_project")!==-1&&u.default.createElement(c.MenuItem,{divider:!0}),G.permissions&&G.permissions.indexOf("manage_project")!==-1&&u.default.createElement(c.MenuItem,{eventKey:"create"},s.length>0&&u.default.createElement("div",{style:{display:"inline-block",width:"20px"}}),u.default.createElement("span",null,"创建看板"))))),"issue"===r&&!N&&!m.default.isEmpty(i)&&u.default.createElement("div",{style:{height:"45px",borderBottom:"2px solid #f5f5f5",display:this.state.hideHeader?"none":"block"}},"scrum"==i.type&&!m.default.isEmpty($)&&u.default.createElement(c.OverlayTrigger,{trigger:"click",rootClose:!0,placement:"bottom",overlay:Z},u.default.createElement("div",{className:"popover-active-sprint"},u.default.createElement("div",{className:"active-sprint-name",title:$.name||""},$.name||""," ",u.default.createElement("i",{className:"fa fa-caret-down","aria-hidden":"true"})))),u.default.createElement("span",{style:{"float":"left",marginTop:"7px",marginRight:"5px"}},"过滤器："),u.default.createElement(c.Nav,{bsStyle:"pills",style:{"float":"left",lineHeight:"1.0"},activeKey:o,onSelect:this.handleSelect.bind(this)},u.default.createElement(c.NavItem,{eventKey:"all",href:"#"},"全部"),m.default.map(i.filters||[],function(e,t){return u.default.createElement(c.NavItem,{key:t,eventKey:t,href:"#"},e.name)})),u.default.createElement("span",{style:{"float":"right"},title:"隐藏看板头"},u.default.createElement(c.Button,{onClick:this.hideHeader.bind(this)},u.default.createElement("i",{className:"fa fa-angle-double-up","aria-hidden":"true"}))),"scrum"==i.type&&!m.default.isEmpty($)&&u.default.createElement("span",{style:{"float":"right",marginRight:"10px"}},u.default.createElement(c.DropdownButton,{pullRight:!0,title:"更多",onSelect:this.moreSelect.bind(this)},u.default.createElement(c.MenuItem,{eventKey:"burndown"},"燃尽图"),u.default.createElement(c.MenuItem,{divider:!0}),u.default.createElement(c.MenuItem,{eventKey:"gotoIssue"},"跳至问题列表"),u.default.createElement(c.MenuItem,{eventKey:"gotoGantt"},"跳至甘特图"))),u.default.createElement("span",{style:{"float":"right",marginRight:"10px"},title:"附加过滤"},u.default.createElement(c.Button,{onClick:function(){e.setState({moreFilterModalShow:!0})}},u.default.createElement("i",{className:"fa fa-filter","aria-hidden":"true"})," 附加过滤",m.default.isEmpty(this.state.query)?"":"..."))),"backlog"===r&&!m.default.isEmpty(i)&&u.default.createElement("div",{style:{height:"45px",borderBottom:"2px solid #f5f5f5",display:this.state.hideHeader?"none":"block"}},u.default.createElement("div",{className:"exchange-icon",style:{"float":"left",marginTop:"7px"},onClick:this.changeFilterMode.bind(this),title:"切换至"+("epic"==this.state.backlogFilterMode?"版本":"Epic")},u.default.createElement("i",{className:"fa fa-retweet"})),u.default.createElement("span",{style:{"float":"left",marginTop:"7px",marginRight:"5px"}},"epic"===this.state.backlogFilterMode?"Epic":"版本","过滤："),"epic"===this.state.backlogFilterMode?u.default.createElement("div",{style:{display:"inline-block","float":"left",width:"28%"}},u.default.createElement(p.default,{simpleValue:!0,options:K,value:"all"==o?null:o,onChange:function(t){e.handleSelectEV(t)},placeholder:"选择Epic"})):u.default.createElement("div",{style:{display:"inline-block","float":"left",width:"28%"}},u.default.createElement(p.default,{simpleValue:!0,options:U,value:"all"==o?null:o,onChange:function(t){e.handleSelectEV(t)},placeholder:"选择版本"})),u.default.createElement("span",{style:{"float":"right"},title:"隐藏看板头"},u.default.createElement(c.Button,{onClick:this.hideHeader.bind(this)},u.default.createElement("i",{className:"fa fa-angle-double-up","aria-hidden":"true"}))),G.permissions&&G.permissions.indexOf("manage_project")!==-1&&u.default.createElement("div",{style:{display:"inline-block","float":"right",marginRight:"10px"}},u.default.createElement(c.Button,{bsStyle:"primary",onClick:d},u.default.createElement("i",{className:"fa fa-plus","aria-hidden":"true"})," 创建Sprint"))),"history"===r&&!m.default.isEmpty(i)&&u.default.createElement("div",{style:{height:"45px",borderBottom:"2px solid #f5f5f5",display:this.state.hideHeader?"none":"block"}},u.default.createElement("div",{className:"exchange-icon",style:{"float":"left",marginTop:"7px"}},"Sprint"),u.default.createElement("div",{style:{display:"inline-block","float":"left",width:"28%"}},u.default.createElement(p.default,{simpleValue:!0,clearable:!1,options:Y,value:"all"==o?E:o,onChange:function(t){e.handleSelectSprint(t)},placeholder:"选择Sprint"})),!m.default.isEmpty(C)&&u.default.createElement(c.OverlayTrigger,{trigger:"click",rootClose:!0,placement:"bottom",overlay:X},u.default.createElement("div",{style:{"float":"left",margin:"7px 10px",cursor:"pointer"}},u.default.createElement("i",{className:"fa fa-info-circle","aria-hidden":"true"}))),u.default.createElement("span",{style:{"float":"right"},title:"隐藏看板头"},u.default.createElement(c.Button,{onClick:this.hideHeader.bind(this)},u.default.createElement("i",{className:"fa fa-angle-double-up","aria-hidden":"true"}))),u.default.createElement("span",{style:{"float":"right",marginRight:"10px"},title:"燃尽图"},u.default.createElement(c.DropdownButton,{pullRight:!0,title:"更多",onSelect:this.hisMoreSelect.bind(this)},u.default.createElement(c.MenuItem,{eventKey:"burndown"},"燃尽图"),u.default.createElement(c.MenuItem,{divider:!0}),u.default.createElement(c.MenuItem,{eventKey:"gotoIssue"},"跳至问题列表"),u.default.createElement(c.MenuItem,{eventKey:"gotoGantt"},"跳至甘特图")))),"epic"===r&&!m.default.isEmpty(i)&&G.permissions&&G.permissions.indexOf("manage_project")!==-1&&u.default.createElement("div",{style:{height:"45px",display:this.state.hideHeader?"none":"block"}},u.default.createElement("div",{style:{display:"inline-block","float":"left",marginRight:"10px"}},u.default.createElement(c.Button,{disabled:I,onClick:function(){e.setState({createEpicModalShow:!0})}},u.default.createElement("i",{className:"fa fa-plus","aria-hidden":"true"})," 新建Epic")),!I&&u.default.createElement("div",{style:{display:"inline-block","float":"left",marginRight:"10px"}},u.default.createElement(c.Button,{onClick:function(){e.setState({sortCardsModalShow:!0})}},u.default.createElement("i",{className:"fa fa-edit","aria-hidden":"true"})," 编辑顺序"))),this.state.createKanbanModalShow&&u.default.createElement(y,{show:!0,close:this.createKanbanModalClose.bind(this),create:a,"goto":V,kanbans:s,i18n:n}),this.state.createIssueModalShow&&u.default.createElement(h,{show:!0,close:this.createIssueModalClose.bind(this),options:G,create:W,addLabels:z,loading:N,project:H,i18n:n}),this.state.createEpicModalShow&&u.default.createElement(g,{show:!0,close:this.createEpicModalClose.bind(this),create:P,collection:M,i18n:n}),this.state.sortCardsModalShow&&u.default.createElement(v,{show:!0,mode:"Epic",close:this.sortCardsModalClose.bind(this),cards:M,setSort:O,sortLoading:q,i18n:n}),this.state.burndownModalShow&&u.default.createElement(w,{show:!0,getSprintLog:L,loading:B,data:D,close:this.burndownModalClose.bind(this),no:$.no}),this.state.moreFilterModalShow&&u.default.createElement(b,{show:!0,search:this.moreSearch.bind(this),query:this.state.query,options:G,close:this.moreFilterModalClose.bind(this)}),this.state.hisBurndownModalShow&&u.default.createElement(w,{show:!0,getSprintLog:L,loading:B,data:D,close:this.hisBurndownModalClose.bind(this),no:o}))}}],[{key:"propTypes",value:{i18n:s.PropTypes.object.isRequired,changeModel:s.PropTypes.func.isRequired,mode:s.PropTypes.string.isRequired,selectedFilter:s.PropTypes.string.isRequired,create:s.PropTypes.func.isRequired,addLabels:s.PropTypes.func.isRequired,createKanban:s.PropTypes.func.isRequired,getSprint:s.PropTypes.func.isRequired,createSprint:s.PropTypes.func.isRequired,createEpic:s.PropTypes.func.isRequired,setEpicSort:s.PropTypes.func.isRequired,project:s.PropTypes.object,curKanban:s.PropTypes.object,kanbans:s.PropTypes.array,completedSprintNum:s.PropTypes.number,selectedSprint:s.PropTypes.object,sprints:s.PropTypes.array,epics:s.PropTypes.array,versions:s.PropTypes.array,loading:s.PropTypes.bool,epicLoading:s.PropTypes.bool,indexEpicLoading:s.PropTypes.bool,getSprintLog:s.PropTypes.func,sprintLog:s.PropTypes.object,sprintLogLoading:s.PropTypes.bool,"goto":s.PropTypes.func,gotoIssueList:s.PropTypes.func,gotoGantt:s.PropTypes.func,selectFilter:s.PropTypes.func,index:s.PropTypes.func,options:s.PropTypes.object},enumerable:!0}]),t}(s.Component);t.default=x,e.exports=t.default}).call(this)}finally{}},1884:function(e,t,n){try{(function(){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function(e,t,n){for(var r=!0;r;){var o=e,a=t,i=n;r=!1,null===o&&(o=Function.prototype);var l=Object.getOwnPropertyDescriptor(o,a);if(void 0!==l){if("value"in l)return l.value;var s=l.get;if(void 0===s)return;return s.call(i)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=a,n=i,r=!0,l=u=void 0}},s=n(1),u=r(s),c=n(2),d=n(5),p=n(3),f=r(p),m=(n(19),n(15)),h=(n(6),n(4)),y=n(223),g=n(106),v=n(1065),b=n(1886),w=n(1875),E=n(1888),k=n(1887),_=n(1881),x=n(1879),C=n(1066),S=n(1890),T=n(1882),P=function(e){function t(e){o(this,t),l(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={detailBarShow:!1,detailClosing:!1,selectVersionShow:!1,viewSprintShow:!1,editSprintShow:!1,publishSprintShow:!1,completeSprintShow:!1,deleteSprintShow:!1,moveIssueShow:!1,workflowScreenShow:!1,movedData:{},curColNo:-1,curSprintNo:0,drop_issue_id:"",action_id:""}}return a(t,e),i(t,[{key:"selectVersionModalClose",value:function(){this.setState({selectVersionShow:!1})}},{key:"publishSprintModalClose",value:function(){this.setState({publishSprintShow:!1})}},{key:"deleteSprintModalClose",value:function(){this.setState({deleteSprintShow:!1})}},{key:"completeSprintModalClose",value:function(){this.setState({completeSprintShow:!1})}},{key:"moveIssueModalClose",value:function(){this.setState({moveIssueShow:!1})}},{key:"viewSprintModalClose",value:function(){this.setState({viewSprintShow:!1})}},{key:"editSprintModalClose",value:function(){this.setState({editSprintShow:!1})}},{key:"workflowScreenModalClose",value:function(){this.setState({workflowScreenShow:!1})}},{key:"workflowScreenShow",value:function(e,t){this.setState({workflowScreenShow:!0,drop_issue_id:e,action_id:t})}},{key:"moveSprintIssue",value:function n(e){var t,r,o,n,a,i,l,s,u,c;return regeneratorRuntime.async(function(p){for(;;)switch(p.prev=p.next){case 0:if(t=this.props,r=t.i18n.errMsg,o=t.collection,n=t.moveSprintIssue,a=e.issue_id,i=e.src_sprint,l=e.dest_sprint,s=f.default.find(o,{id:a}),u={issue_no:s.no,src_sprint_no:i.no,dest_sprint_no:l.no},!(i&&"active"==i.status||l&&"active"==l.status)){p.next=13;break}this.setState({moveIssueShow:!0,movedData:u}),p.next=17;break;case 13:return p.next=15,regeneratorRuntime.awrap(n(u));case 15:c=p.sent,0!==c&&d.notify.show("移动失败，"+r[c],"error",2e3);case 17:case"end":return p.stop()}},null,this)}},{key:"removeFromSprint",value:function(e){var t,n,r,o,a,i,l,s;return regeneratorRuntime.async(function(u){for(;;)switch(u.prev=u.next){case 0:if(t=this.props,n=t.i18n.errMsg,r=t.sprints,o=t.moveSprintIssue,a=f.default.find(r,{status:"active"}),f.default.isEmpty(a)){u.next=13;break}return i=f.default.find(r,{status:"waiting"}),l=0,i&&(l=i.no),u.next=11,regeneratorRuntime.awrap(o({issue_no:e,src_sprint_no:a.no,dest_sprint_no:l},!0));case 11:s=u.sent,0===s?d.notify.show("已移出。","success",2e3):d.notify.show("移出失败，"+n[s],"error",2e3);case 13:case"end":return u.stop()}},null,this)}},{key:"quickCloseDetail",value:function(){this.setState({detailBarShow:!1});var e=this.props.cleanRecord;e()}},{key:"closeDetail",value:function(){var e=this,t=this.props,n=(t.detailFloatStyle,t.layout),r={},o=parseInt(m(".animate-dialog").css("left")),a=parseInt(m(".animate-dialog").css("width"));o<n.containerWidth-a-10?r.left=o-a:r.right=-a,m(".animate-dialog").animate(r),setTimeout(function(){e.setState({detailBarShow:!1})},300);var i=this.props.cleanRecord;i()}},{key:"issueView",value:function(e,t){var n,r,o,a,i,l,s,u,c;return regeneratorRuntime.async(function(d){for(;;)switch(d.prev=d.next){case 0:return this.state.detailBarShow=!0,this.state.curColNo=t,n=this.props,r=n.mode,o=n.show,a=n.record,i=n.curKanban,l=n.sprints,s=0,s="backlog"==r?l.length+1:"history"==r?2:i.columns.length,u={},t>=f.default.ceil(s/2)&&(u={left:m(".doc-container").offset().left}),d.next=14,regeneratorRuntime.awrap(o(e,u));case 14:c=d.sent,0===c&&a();case 16:case"end":return d.stop()}},null,this)}},{key:"componentDidMount",value:function(){var e=m(window).height();"none"==m("#main-header").css("display")?m(".board-container").css("height",e-28-50):m(".board-container").css("height",e-120-50),m(window).resize(function(){var e=m(window).height();"none"==m("#main-header").css("display")?m(".board-container").css("height",e-28-50):m(".board-container").css("height",e-120-50)}),m(".board-container").scroll(function(){m(".board-zone-overlay").css("top",f.default.max([m(".board-container").scrollTop(),46]))})}},{key:"operateBacklog",value:function(e){var t=e.split("-").pop();e.indexOf("view")!==-1?this.setState({viewSprintShow:!0,curSprintNo:t-0}):e.indexOf("edit")!==-1?this.setState({editSprintShow:!0,curSprintNo:t-0}):e.indexOf("publish")!==-1?this.setState({publishSprintShow:!0,curSprintNo:t-0}):e.indexOf("delete")!==-1&&this.setState({deleteSprintShow:!0,curSprintNo:t-0})}},{key:"render",value:function(){var e=this,t=this.props,n=t.i18n,r=t.layout,o=t.curKanban,a=t.selectedSprint,i=t.sprints,l=t.sprintLoading,s=t.mode,d=t.draggedIssue,p=t.draggableActions,m=t.getDraggableActions,P=t.cleanDraggableActions,O=t.collection,R=t.indexLoading,M=t.wfCollection,j=t.wfLoading,F=t.viewWorkflow,N=t.indexComments,q=t.sortComments,I=t.addComments,L=t.editComments,A=t.delComments,D=t.commentsCollection,B=t.commentsIndexLoading,H=t.commentsLoading,W=t.commentsItemLoading,z=t.commentsLoaded,V=t.indexWorklog,G=t.worklogSort,K=t.sortWorklog,U=t.addWorklog,Y=t.editWorklog,Z=t.delWorklog,X=t.worklogCollection,$=t.worklogIndexLoading,Q=t.worklogLoading,J=t.worklogLoaded,ee=t.indexHistory,te=t.sortHistory,ne=t.historyCollection,re=t.historyIndexLoading,oe=t.historyLoaded,ae=t.indexGitCommits,ie=t.sortGitCommits,le=t.gitCommitsCollection,se=t.gitCommitsIndexLoading,ue=t.gitCommitsLoaded,ce=t.itemData,de=t.project,pe=t.options,fe=t.loading,me=t.itemLoading,he=t.show,ye=t.detailFloatStyle,ge=t.edit,ve=t.create,be=t.setAssignee,we=t.setItemValue,Ee=t.setLabels,ke=t.addLabels,_e=t.fileLoading,xe=t.delFile,Ce=t.addFile,Se=t.record,Te=t.forward,Pe=(t.cleanRecord,t.visitedIndex),Oe=t.visitedCollection,Re=t.createLink,Me=t.delLink,je=t.linkLoading,Fe=t.watch,Ne=t.copy,qe=t.move,Ie=t.convert,Le=t.resetState,Ae=t.del,De=t.doAction,Be=t.selectedFilter,He=t.setRank,We=t.rankLoading,ze=t.release,Ve=t.updateSprint,Ge=t.publishSprint,Ke=t.completeSprint,Ue=t.deleteSprint,Ye=t.moveSprintIssue,Ze=t.user,Xe=u.default.createElement("span",null,u.default.createElement("i",{className:"fa fa-ellipsis-h"})),$e=[],Qe=[];return f.default.isEmpty(o)||("backlog"==s?!function(){$e=f.default.clone(i||[]),$e.unshift({no:0,name:"Backlog"}),Qe[0]=[],f.default.forEach(i,function(e,t){Qe[t+1]=[]});var e=[];f.default.forEach(i,function(t,n){f.default.forEach(O,function(r){(o.query&&o.query.subtask||!r.parent||!r.parent.id)&&f.default.indexOf(t.issues,r.no)!==-1&&(Qe[n+1].push(r),e.push(r.no))})}),f.default.forEach(O,function(t){(o.query&&o.query.subtask||!t.parent||!t.parent.id)&&f.default.indexOf(e,t.no)===-1&&Qe[0].push(t)})}():"history"==s?($e=[{no:0,name:"未完成"},{no:1,name:"已完成"}],Qe[0]=[],Qe[1]=[],f.default.isEmpty(a)||f.default.forEach(O,function(e){(o.query&&o.query.subtask||!e.parent||!e.parent.id)&&(f.default.indexOf(a.completed_issues||[],e.no)!==-1?Qe[1].push(e):f.default.indexOf(a.incompleted_issues||[],e.no)!==-1&&Qe[0].push(e))})):($e=o.columns||[],f.default.forEach(o.columns,function(e,t){Qe[t]=[]}),f.default.forEach(o.columns,function(e,t){f.default.forEach(O,function(n){if(o.query&&o.query.subtask||!n.parent||!n.parent.id)return f.default.indexOf(e.states,n.state)!==-1?void Qe[t].push(n):void 0})}))),u.default.createElement("div",{className:"board-container"},u.default.createElement("div",{className:"board-overlay-waiting",style:{display:!this.state.detailBarShow&&me?"block":"none"}},u.default.createElement("img",{src:h,className:"loading board-loading"})),!f.default.isEmpty(o)&&R&&u.default.createElement("div",{style:{marginTop:"20px",width:"100%",textAlign:"center"}},u.default.createElement("img",{src:h,className:"loading"})),!f.default.isEmpty(o)&&!R&&u.default.createElement("div",{className:"board-pool"},u.default.createElement("div",{className:"board-column-header-group"},u.default.createElement("ul",{className:"board-column-header"},f.default.map($e,function(t,n){return u.default.createElement("li",{key:n,className:"board-column",style:{background:"issue"==s&&"all"===Be?t.max&&Qe[n].length>t.max?"#d04437":t.min&&Qe[n].length<t.min?"#f6c342":"":""}},u.default.createElement("span",{style:{fontWeight:600}},"backlog"==s&&0==t.no?"Backlog":t.name),"（",Qe[n].length,"）","issue"==s&&t.max&&u.default.createElement("span",{className:"config-wip"},"Max-"+t.max),"issue"==s&&t.min&&u.default.createElement("span",{className:"config-wip"},"Min-"+t.min),"issue"==s&&"kanban"==o.type&&n==$e.length-1&&Qe[n].length>0&&"all"==Be&&pe.permissions&&pe.permissions.indexOf("manage_project")!==-1&&u.default.createElement("a",{href:"#",style:{"float":"right"},onClick:function(t){t.preventDefault(),e.setState({selectVersionShow:!0})}},"发布..."),"issue"==s&&"scrum"==o.type&&n==$e.length-1&&"all"==Be&&pe.permissions&&pe.permissions.indexOf("manage_project")!==-1&&f.default.findIndex(i,{status:"active"})!==-1&&u.default.createElement("a",{href:"#",style:{"float":"right"},onClick:function(t){t.preventDefault(),e.setState({completeSprintShow:!0})}},"完成..."),"backlog"==s&&pe.permissions&&pe.permissions.indexOf("manage_project")!==-1&&0!=n&&u.default.createElement("div",{style:{"float":"right"}},u.default.createElement(c.DropdownButton,{bsStyle:"default",title:Xe,noCaret:!0,style:{padding:"2px 7px"},onSelect:e.operateBacklog.bind(e),pullRight:!0},u.default.createElement(c.MenuItem,{disabled:Qe[n].length<=0,eventKey:"view-"+t.no},"工作量查看"),u.default.createElement(c.MenuItem,{eventKey:"edit-"+t.no},"编辑"),"waiting"==t.status&&1==n&&u.default.createElement(c.MenuItem,{disabled:Qe[n].length<=0,eventKey:"publish-"+t.no},"启动"),"waiting"==t.status&&u.default.createElement(c.MenuItem,{eventKey:"delete-"+t.no},"删除"))),"backlog"==s&&"active"==t.status&&u.default.createElement("span",null," - ",u.default.createElement("b",null,"活动中")))}))),u.default.createElement("div",{className:"board-columns"},f.default.map($e,function(t,n){return u.default.createElement(v,{key:n,colNo:n,displayFields:o.display_fields||[],epicShow:"backlog"==s||"history"==s,inSprint:"issue"==s&&"scrum"==o.type,inHisSprint:"history"==s,subtaskShow:o.query&&o.query.subtask&&!0,openedIssue:e.state.detailBarShow?ce:{},draggedIssue:f.default.find(O,{id:d})||{},issueView:e.issueView.bind(e),getDraggableActions:m,cleanDraggableActions:P,setRank:He,rankLoading:We,cards:Qe[n],pkey:de.key,closeDetail:e.quickCloseDetail.bind(e),removeFromSprint:e.removeFromSprint.bind(e),options:pe})})),"issue"==s&&u.default.createElement("div",{className:"board-zone-overlay",style:{top:"46px"}},u.default.createElement("div",{className:"board-zone-overlay-table"},f.default.map($e,function(t,n){return u.default.createElement(b,{key:n,columns:$e,isEmpty:!(d&&f.default.findIndex(Qe[n],{id:d})===-1),draggedIssue:f.default.find(O,{id:d})||{},draggableActions:p,doAction:De,workflowScreenShow:e.workflowScreenShow.bind(e),options:pe,acceptStates:t.states||[]})}))),"backlog"==s&&pe.permissions&&pe.permissions.indexOf("manage_project")!==-1&&u.default.createElement("div",{className:"board-zone-overlay",style:{top:"46px"}},u.default.createElement("div",{className:"board-zone-overlay-table"},f.default.map($e,function(t,n){return u.default.createElement(w,{key:n,sprintNo:t.no,columns:$e,isEmpty:!(d&&f.default.findIndex(Qe[n],{id:d})===-1&&pe.permissions&&pe.permissions.indexOf("manage_project")!==-1),draggedIssue:f.default.find(O,{id:d})||{},moveSprintIssue:e.moveSprintIssue.bind(e),options:pe})})))),!f.default.isEmpty(o)&&!R&&"issue"==s&&"scrum"==o.type&&f.default.findIndex(i,{status:"active"})===-1&&O.length<=0&&u.default.createElement("div",{style:{marginTop:"20px",width:"100%",textAlign:"center"}},u.default.createElement("span",null,"暂无活动的Sprint")),this.state.detailBarShow&&u.default.createElement(y,{i18n:n,layout:r,edit:ge,create:ve,del:Ae,setAssignee:be,setItemValue:we,setLabels:Ee,addLabels:ke,close:this.closeDetail.bind(this),options:pe,data:ce,record:Se,forward:Te,visitedIndex:Pe,visitedCollection:Oe,issueCollection:"history"==s?[]:f.default.findIndex(Qe[this.state.curColNo]||[],{no:ce.no})===-1?[]:Qe[this.state.curColNo],show:he,detailFloatStyle:ye,itemLoading:me,loading:fe,fileLoading:_e,project:de,delFile:xe,addFile:Ce,wfCollection:M,wfLoading:j,viewWorkflow:F,indexComments:N,sortComments:q,commentsCollection:D,commentsIndexLoading:B,commentsLoading:H,commentsItemLoading:W,commentsLoaded:z,addComments:I,editComments:L,delComments:A,indexWorklog:V,worklogSort:G,sortWorklog:K,worklogCollection:X,worklogIndexLoading:$,worklogLoading:Q,worklogLoaded:J,addWorklog:U,editWorklog:Y,delWorklog:Z,indexHistory:ee,sortHistory:te,historyCollection:ne,historyIndexLoading:re,historyLoaded:oe,indexGitCommits:ae,sortGitCommits:ie,gitCommitsCollection:le,gitCommitsIndexLoading:se,gitCommitsLoaded:ue,linkLoading:je,createLink:Re,delLink:Me,watch:Fe,copy:Ne,move:qe,convert:Ie,resetState:Le,doAction:De,user:Ze}),this.state.workflowScreenShow&&u.default.createElement(g,{show:!0,close:this.workflowScreenModalClose.bind(this),options:pe,edit:ge,loading:fe,project:de,data:f.default.extend(f.default.find(O,{id:this.state.drop_issue_id}),{wfactions:p}),action_id:this.state.action_id,doAction:De,isFromWorkflow:!0,i18n:n}),this.state.selectVersionShow&&u.default.createElement(E,{show:!0,options:pe,close:this.selectVersionModalClose.bind(this),release:ze,releasedIssues:f.default.last(Qe)||[],i18n:n}),this.state.publishSprintShow&&u.default.createElement(k,{show:!0,close:this.publishSprintModalClose.bind(this),sprint:f.default.find(i,{no:this.state.curSprintNo}),publish:Ge,i18n:n}),this.state.deleteSprintShow&&u.default.createElement(_,{show:!0,close:this.deleteSprintModalClose.bind(this),data:f.default.find(i,{no:this.state.curSprintNo}),del:Ue,loading:l,i18n:n}),this.state.completeSprintShow&&u.default.createElement(x,{show:!0,close:this.completeSprintModalClose.bind(this),loading:l,sprintNo:f.default.find(i,{status:"active"})?f.default.find(i,{status:"active"}).no:0,total:f.default.flatten(Qe).length,complete:Ke,completedIssues:f.default.last(Qe)||[],i18n:n}),this.state.moveIssueShow&&u.default.createElement(C,{show:!0,close:this.moveIssueModalClose.bind(this),loading:l,move:Ye,values:this.state.movedData,i18n:n}),this.state.viewSprintShow&&u.default.createElement(S,{show:!0,close:this.viewSprintModalClose.bind(this),sprintNo:this.state.curSprintNo,sprints:i,collection:O}),this.state.editSprintShow&&u.default.createElement(T,{show:!0,update:Ve,close:this.editSprintModalClose.bind(this),data:f.default.find(i,{no:this.state.curSprintNo}),i18n:n}))}}],[{key:"propTypes",value:{i18n:s.PropTypes.object.isRequired,layout:s.PropTypes.object.isRequired,curKanban:s.PropTypes.object.isRequired,selectedSprint:s.PropTypes.object.isRequired,sprints:s.PropTypes.array.isRequired,sprintLoading:s.PropTypes.bool.isRequired,mode:s.PropTypes.string.isRequired,draggedIssue:s.PropTypes.string.isRequired,draggableActions:s.PropTypes.array.isRequired,getDraggableActions:s.PropTypes.func.isRequired,cleanDraggableActions:s.PropTypes.func.isRequired,collection:s.PropTypes.array.isRequired,indexLoading:s.PropTypes.bool.isRequired,index:s.PropTypes.func.isRequired,wfCollection:s.PropTypes.array.isRequired,wfLoading:s.PropTypes.bool.isRequired,viewWorkflow:s.PropTypes.func.isRequired,indexComments:s.PropTypes.func.isRequired,sortComments:s.PropTypes.func.isRequired,addComments:s.PropTypes.func.isRequired,editComments:s.PropTypes.func.isRequired,delComments:s.PropTypes.func.isRequired,commentsCollection:s.PropTypes.array.isRequired,commentsIndexLoading:s.PropTypes.bool.isRequired,commentsLoading:s.PropTypes.bool.isRequired,commentsItemLoading:s.PropTypes.bool.isRequired,commentsLoaded:s.PropTypes.bool.isRequired,indexWorklog:s.PropTypes.func.isRequired,worklogSort:s.PropTypes.string.isRequired,sortWorklog:s.PropTypes.func.isRequired,addWorklog:s.PropTypes.func.isRequired,editWorklog:s.PropTypes.func.isRequired,delWorklog:s.PropTypes.func.isRequired,worklogCollection:s.PropTypes.array.isRequired,worklogIndexLoading:s.PropTypes.bool.isRequired,worklogLoading:s.PropTypes.bool.isRequired,worklogLoaded:s.PropTypes.bool.isRequired,indexHistory:s.PropTypes.func.isRequired,sortHistory:s.PropTypes.func.isRequired,historyCollection:s.PropTypes.array.isRequired,historyIndexLoading:s.PropTypes.bool.isRequired,historyLoaded:s.PropTypes.bool.isRequired,indexGitCommits:s.PropTypes.func.isRequired,sortGitCommits:s.PropTypes.func.isRequired,gitCommitsCollection:s.PropTypes.array.isRequired,gitCommitsIndexLoading:s.PropTypes.bool.isRequired,gitCommitsLoaded:s.PropTypes.bool.isRequired,itemData:s.PropTypes.object.isRequired,project:s.PropTypes.object,options:s.PropTypes.object,loading:s.PropTypes.bool.isRequired,itemLoading:s.PropTypes.bool.isRequired,show:s.PropTypes.func.isRequired,detailFloatStyle:s.PropTypes.object,del:s.PropTypes.func.isRequired,edit:s.PropTypes.func.isRequired,create:s.PropTypes.func.isRequired,copy:s.PropTypes.func.isRequired,move:s.PropTypes.func.isRequired,convert:s.PropTypes.func.isRequired,resetState:s.PropTypes.func.isRequired,setAssignee:s.PropTypes.func.isRequired,setItemValue:s.PropTypes.func.isRequired,setLabels:s.PropTypes.func.isRequired,addLabels:s.PropTypes.func.isRequired,fileLoading:s.PropTypes.bool.isRequired,delFile:s.PropTypes.func.isRequired,addFile:s.PropTypes.func.isRequired,record:s.PropTypes.func.isRequired,forward:s.PropTypes.func.isRequired,cleanRecord:s.PropTypes.func.isRequired,visitedIndex:s.PropTypes.number.isRequired,visitedCollection:s.PropTypes.array.isRequired,createLink:s.PropTypes.func.isRequired,delLink:s.PropTypes.func.isRequired,linkLoading:s.PropTypes.bool.isRequired,doAction:s.PropTypes.func.isRequired,watch:s.PropTypes.func.isRequired,selectedFilter:s.PropTypes.string.isRequired,setRank:s.PropTypes.func.isRequired,rankLoading:s.PropTypes.bool.isRequired,release:s.PropTypes.func.isRequired,updateSprint:s.PropTypes.func.isRequired,publishSprint:s.PropTypes.func.isRequired,completeSprint:s.PropTypes.func.isRequired,deleteSprint:s.PropTypes.func.isRequired,moveSprintIssue:s.PropTypes.func.isRequired,user:s.PropTypes.object.isRequired},enumerable:!0}]),t}(s.Component);t.default=P,e.exports=t.default}).call(this)}finally{}},1885:function(e,t,n){try{(function(){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function(e,t,n){for(var r=!0;r;){var o=e,a=t,i=n;r=!1,null===o&&(o=Function.prototype);var l=Object.getOwnPropertyDescriptor(o,a);if(void 0!==l){if("value"in l)return l.value;var s=l.get;if(void 0===s)return;return s.call(i)}var u=Object.getPrototypeOf(o);
if(null===u)return;e=u,t=a,n=i,r=!0,l=u=void 0}},s=n(1),u=r(s),c=n(2),d=n(7),p=(r(d),n(3)),f=r(p),m=n(115),h=(n(4),function(e){function t(e){var n=this;o(this,t),l(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={query:{},oldQuery:{}};var r=e.query;f.default.forEach(r,function(e,t){n.state.query[t]=e&&f.default.isArray(e)?e.join(","):e||"",n.state.oldQuery[t]=e&&f.default.isArray(e)?e.join(","):e||""}),this.handleSubmit=this.handleSubmit.bind(this),this.handleCancel=this.handleCancel.bind(this)}return a(t,e),i(t,[{key:"handleSubmit",value:function(){var e=this.props,t=e.search,n=e.close,r=this.state.query;t(r),n()}},{key:"handleCancel",value:function(){var e=this.props.close;e()}},{key:"render",value:function(){var e=this,t=this.props.options,n=this.state,r=n.query,o=n.oldQuery;return u.default.createElement(c.Modal,{show:!0,onHide:this.handleCancel,backdrop:"static","aria-labelledby":"contained-modal-title-sm",dialogClassName:"custom-modal-90"},u.default.createElement(c.Modal.Header,{closeButton:!0},u.default.createElement(c.Modal.Title,{id:"contained-modal-title-la"},"附加过滤")),u.default.createElement(c.Form,{horizontal:!0,onKeyUp:function(e){13==e.keyCode&&e.preventDefault()}},u.default.createElement(c.Modal.Body,{style:{maxHeight:"580px",overflow:"auto",paddingBottom:"0px"}},u.default.createElement(m.IssueFilterList,{visable:!0,values:this.state.query,styles:{marginTop:"0px"},textInputChange:!0,onChange:function(t){e.setState({query:t})},columns:2,notShowFields:["title","resolved_at","closed_at","resolver","closer","watcher"],notShowBlocks:["agile"],options:t})),u.default.createElement(c.Modal.Footer,null,u.default.createElement(c.Button,{onClick:this.handleSubmit,disabled:f.default.isEqual(o,r)},"确定"),u.default.createElement(c.Button,{bsStyle:"link",onClick:this.handleCancel},"取消"))))}}],[{key:"propTypes",value:{search:s.PropTypes.func.isRequired,close:s.PropTypes.func.isRequired,query:s.PropTypes.object.isRequired,options:s.PropTypes.object},enumerable:!0}]),t}(s.Component));t.default=h,e.exports=t.default}).call(this)}finally{}},1886:function(e,t,n){try{(function(){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(e,t,n){for(var r=!0;r;){var o=e,a=t,i=n;r=!1,null===o&&(o=Function.prototype);var l=Object.getOwnPropertyDescriptor(o,a);if(void 0!==l){if("value"in l)return l.value;var s=l.get;if(void 0===s)return;return s.call(i)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=a,n=i,r=!0,l=u=void 0}},u=n(1),c=r(u),d=n(56),p=(r(d),n(3)),f=r(p),m=n(1876),h=r(m),y=n(15),g=function(e){function t(e){o(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e)}return a(t,e),l(t,[{key:"render",value:function(){var e=this.props,t=e.isEmpty,n=e.acceptStates,r=e.draggedIssue,o=e.draggableActions,a=e.columns,l=e.options,s=e.doAction,u=e.workflowScreenShow,d=f.default.countBy(o,f.default.iteratee("state")),p=[];f.default.map(o,function(e){if(f.default.indexOf(n,e.state)!==-1){var t=f.default.clone(f.default.find(l.states,{id:e.state}));d[e.state]>1&&(t.name=t.name+" - "+e.name),p.push(i({},e,{state:t}))}});var m=170;"none"==y("#main-header").css("display")&&(m=78);var g=y(window).height(),v=f.default.min([g-m-10-f.default.max([46-y(".board-container").scrollTop(),0]),y(".board-columns").height()])/f.default.max([p.length,1]);return c.default.createElement("div",{className:"board-zone-overlay-column",style:{pointerEvents:t?"none":"auto"}},c.default.createElement("div",{className:"board-zone-table"},c.default.createElement("div",{className:"board-zone-row"},!t&&f.default.map(p,function(e,t){return c.default.createElement(h.default,{key:t,columns:a,draggedIssue:r,doAction:s,workflowScreenShow:u,dragAction:e,height:v})}))))}}],[{key:"propTypes",value:{columns:u.PropTypes.array.isRequired,isEmpty:u.PropTypes.bool.isRequired,draggableActions:u.PropTypes.array.isRequired,doAction:u.PropTypes.func.isRequired,workflowScreenShow:u.PropTypes.func.isRequired,draggedIssue:u.PropTypes.object,options:u.PropTypes.object.isRequired,acceptStates:u.PropTypes.array.isRequired},enumerable:!0}]),t}(u.Component);t.default=g,e.exports=t.default}).call(this)}finally{}},1887:function(e,t,n){try{(function(){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(e,t,n){for(var r=!0;r;){var o=e,a=t,i=n;r=!1,null===o&&(o=Function.prototype);var l=Object.getOwnPropertyDescriptor(o,a);if(void 0!==l){if("value"in l)return l.value;var s=l.get;if(void 0===s)return;return s.call(i)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=a,n=i,r=!0,l=u=void 0}},u=n(1),c=r(u),d=n(8),p=n(2),f=n(3),m=(r(f),n(52)),h=r(m),y=n(5),g=n(6),v=(n(15),n(4)),b=function(e,t){var n={};return e.name||(n.name="必填"),e.start_time?g(e.start_time).isValid()||(n.start_time="格式错误"):n.start_time="必填",e.complete_time?g(e.complete_time).isValid()||(n.complete_time="格式错误"):n.complete_time="必填",e.start_time&&e.complete_time&&e.start_time>e.complete_time&&(n.start_time="开始时间要早于结束时间"),n},w=function(e){function t(e){o(this,n),s(Object.getPrototypeOf(n.prototype),"constructor",this).call(this,e),this.state={ecode:0,isSendMsg:!0},this.handleSubmit=this.handleSubmit.bind(this),this.handleCancel=this.handleCancel.bind(this)}a(t,e),l(t,[{key:"handleSubmit",value:function(){var e,t,n,r,o,a;return regeneratorRuntime.async(function(i){for(;;)switch(i.prev=i.next){case 0:return e=this.props,t=e.values,n=e.publish,r=e.sprint,o=e.close,t.start_time&&(t.start_time=parseInt(g(t.start_time).startOf("day").format("X"))),t.complete_time&&(t.complete_time=parseInt(g(t.complete_time).endOf("day").format("X"))),t.isSendMsg=this.state.isSendMsg,i.next=10,regeneratorRuntime.awrap(n(t,r.no));case 10:a=i.sent,this.setState({ecode:a}),0===a&&(y.notify.show("启动完成。","success",2e3),o());case 13:case"end":return i.stop()}},null,this)}},{key:"handleCancel",value:function(){var e=this.props,t=e.close,n=e.submitting;n||(this.setState({ecode:0}),t())}},{key:"componentWillMount",value:function(){var e=this.props,t=e.initializeForm,n=e.sprint;t({name:n.name||"",start_time:g(),complete_time:g().add(15,"days"),description:n.description||""})}},{key:"render",value:function(){var e=this,t=this.props,n=t.sprint,r=t.i18n.errMsg,o=t.fields,a=o.name,l=o.start_time,s=o.complete_time,u=o.description,d=t.handleSubmit,f=t.invalid,m=t.submitting;return c.default.createElement(p.Modal,{show:!0,onHide:this.handleCancel,backdrop:"static","aria-labelledby":"contained-modal-title-sm"},c.default.createElement(p.Modal.Header,{closeButton:!0},c.default.createElement(p.Modal.Title,{id:"contained-modal-title-la"},"发布 - ",n.name)),c.default.createElement("form",{onSubmit:d(this.handleSubmit),onKeyUp:function(e){13==e.keyCode&&e.preventDefault()}},c.default.createElement(p.Modal.Body,{style:{maxHeight:"580px"}},c.default.createElement(p.FormGroup,{validationState:a.error?"error":null},c.default.createElement(p.ControlLabel,null,c.default.createElement("span",{className:"txt-impt"},"*"),"名称"),c.default.createElement(p.FormControl,i({disabled:m,type:"text"},a,{placeholder:"名称"})),a.error&&c.default.createElement(p.HelpBlock,{style:{"float":"right"}},a.error)),c.default.createElement("div",null,c.default.createElement(p.FormGroup,{style:{width:"45%",display:"inline-block"},validationState:l.error?"error":null},c.default.createElement(p.ControlLabel,null,c.default.createElement("span",{className:"txt-impt"},"*"),"开始时间"),c.default.createElement(h.default,{locale:"zh-cn",mode:"date",closeOnSelect:!0,dateFormat:"YYYY/MM/DD",timeFormat:!1,value:l.value,onChange:function(e){l.onChange(e)}}),l.error&&c.default.createElement(p.HelpBlock,{style:{"float":"right"}},l.error)),c.default.createElement(p.FormGroup,{style:{width:"45%",display:"inline-block","float":"right"},validationState:s.error?"error":null},c.default.createElement(p.ControlLabel,null,c.default.createElement("span",{className:"txt-impt"},"*"),"结束时间"),c.default.createElement(h.default,{locale:"zh-cn",mode:"date",closeOnSelect:!0,dateFormat:"YYYY/MM/DD",timeFormat:!1,value:s.value,onChange:function(e){s.onChange(e)}}),s.error&&c.default.createElement(p.HelpBlock,{style:{"float":"right"}},s.error))),c.default.createElement(p.FormGroup,null,c.default.createElement(p.ControlLabel,null,"描述"),c.default.createElement(p.FormControl,i({disabled:m,componentClass:"textarea",style:{height:"200px"}},u,{placeholder:"描述"})))),c.default.createElement(p.Modal.Footer,null,c.default.createElement("span",{className:"ralign"},0!==this.state.ecode&&!m&&r[this.state.ecode]),c.default.createElement("img",{src:v,className:m?"loading":"hide"}),c.default.createElement(p.Checkbox,{disabled:m,checked:this.state.isSendMsg,onClick:function(){e.setState({isSendMsg:!e.state.isSendMsg})},style:{display:"inline-block",marginRight:"20px",marginLeft:"10px"}},"通知项目成员"),c.default.createElement(p.Button,{disabled:m||f,type:"submit"},"确定"),c.default.createElement(p.Button,{bsStyle:"link",disabled:m,onClick:this.handleCancel},"取消"))))}}],[{key:"propTypes",value:{i18n:u.PropTypes.object.isRequired,submitting:u.PropTypes.bool,invalid:u.PropTypes.bool,values:u.PropTypes.object,fields:u.PropTypes.object,handleSubmit:u.PropTypes.func.isRequired,close:u.PropTypes.func.isRequired,initializeForm:u.PropTypes.func.isRequired,sprint:u.PropTypes.object.isRequired,publish:u.PropTypes.func.isRequired},enumerable:!0}]);var n=t;return t=(0,d.reduxForm)({form:"publish",fields:["name","start_time","complete_time","description"],validate:b})(t)||t}(u.Component);t.default=w,e.exports=t.default}).call(this)}finally{}},1888:function(e,t,n){try{(function(){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(e,t,n){for(var r=!0;r;){var o=e,a=t,i=n;r=!1,null===o&&(o=Function.prototype);var l=Object.getOwnPropertyDescriptor(o,a);if(void 0!==l){if("value"in l)return l.value;var s=l.get;if(void 0===s)return;return s.call(i)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=a,n=i,r=!0,l=u=void 0}},u=n(1),c=r(u),d=n(8),p=n(2),f=n(7),m=(r(f),n(3)),h=r(m),y=n(52),g=(r(y),n(5)),v=(n(6),n(4)),b=function(e,t){var n={};return e.name||(n.name="必填"),h.default.findIndex(t.options.versions||[],{name:e.name})!==-1&&(n.name="该版本已存在"),n},w=function(e){function t(e){o(this,n),s(Object.getPrototypeOf(n.prototype),"constructor",this).call(this,e),this.state={ecode:0,isSendMsg:!0},this.handleSubmit=this.handleSubmit.bind(this),this.handleCancel=this.handleCancel.bind(this)}a(t,e),l(t,[{key:"handleSubmit",value:function(){var e,t,n,r,o,a;return regeneratorRuntime.async(function(i){for(;;)switch(i.prev=i.next){case 0:return e=this.props,t=e.release,n=e.releasedIssues,r=e.values,o=e.close,i.next=7,regeneratorRuntime.awrap(t({ids:h.default.map(n,function(e){return e.id}),isSendMsg:this.state.isSendMsg,name:r.name,description:r.description}));case 7:a=i.sent,0===a?(this.setState({ecode:0}),o(),g.notify.show("已发布。","success",2e3)):this.setState({ecode:a});case 9:case"end":return i.stop()}},null,this)}},{key:"handleCancel",value:function(){var e=this.props,t=e.close,n=e.submitting;n||(this.setState({ecode:0}),t())}},{key:"render",value:function(){var e=this,t=this.props,n=t.i18n.errMsg,r=t.fields,o=r.name,a=r.description,l=t.handleSubmit,s=t.invalid,u=t.submitting,d=t.options;h.default.map(d.versions||[],function(e){return{label:e.name,value:e.id}});return c.default.createElement(p.Modal,{show:!0,onHide:this.handleCancel,backdrop:"static","aria-labelledby":"contained-modal-title-sm"},c.default.createElement(p.Modal.Header,{closeButton:!0},c.default.createElement(p.Modal.Title,{id:"contained-modal-title-la"},"版本发布")),c.default.createElement("form",{onSubmit:l(this.handleSubmit),onKeyUp:function(e){13==e.keyCode&&e.preventDefault()}},c.default.createElement(p.Modal.Body,null,c.default.createElement(p.FormGroup,{controlId:"formControlsText",validationState:o.touched&&o.error?"error":null},c.default.createElement(p.ControlLabel,null,c.default.createElement("span",{className:"txt-impt"},"*"),"版本名称"),c.default.createElement(p.FormControl,i({disabled:u,type:"text"},o,{placeholder:"版本名称"})),o.touched&&o.error&&c.default.createElement(p.HelpBlock,{style:{"float":"right"}},o.error)),c.default.createElement(p.FormGroup,{controlId:"formControlsText"},c.default.createElement(p.ControlLabel,null,"描述"),c.default.createElement(p.FormControl,i({disabled:u,componentClass:"textarea",style:{height:"200px"}},a,{placeholder:"描述"})))),c.default.createElement(p.Modal.Footer,null,c.default.createElement("span",{className:"ralign"},0!==this.state.ecode&&!u&&n[this.state.ecode]),c.default.createElement("img",{src:v,className:u?"loading":"hide"}),c.default.createElement(p.Checkbox,{disabled:u,checked:this.state.isSendMsg,onClick:function(){e.setState({isSendMsg:!e.state.isSendMsg})},style:{display:"inline-block",marginRight:"20px",marginLeft:"10px"}},"通知项目成员"),c.default.createElement(p.Button,{disabled:u||s,type:"submit"},"确定"),c.default.createElement(p.Button,{bsStyle:"link",disabled:u,onClick:this.handleCancel},"取消"))))}}],[{key:"propTypes",value:{i18n:u.PropTypes.object.isRequired,options:u.PropTypes.object.isRequired,submitting:u.PropTypes.bool,invalid:u.PropTypes.bool,values:u.PropTypes.object,fields:u.PropTypes.object,handleSubmit:u.PropTypes.func.isRequired,release:u.PropTypes.func.isRequired,releasedIssues:u.PropTypes.array.isRequired,initializeForm:u.PropTypes.func.isRequired,close:u.PropTypes.func.isRequired},enumerable:!0}]);var n=t;return t=(0,d.reduxForm)({form:"releasekanban",fields:["name","description"],validate:b})(t)||t}(u.Component);t.default=w,e.exports=t.default}).call(this)}finally{}},1889:function(e,t,n){try{(function(){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function(e,t,n){for(var r=!0;r;){var o=e,a=t,i=n;r=!1,null===o&&(o=Function.prototype);var l=Object.getOwnPropertyDescriptor(o,a);if(void 0!==l){if("value"in l)return l.value;var s=l.get;if(void 0===s)return;return s.call(i)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=a,n=i,r=!0,l=u=void 0}},s=n(1),u=r(s),c=n(2),d=function(e){function t(e){o(this,t),l(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={open:!1},this.onSelectMenu=this.onSelectMenu.bind(this)}return a(t,e),i(t,[{key:"onSelectMenu",value:function(e){var t=this.props,n=t.issueId,r=t.issueNo,o=t.issueView,a=t.toTop,i=t.toBottom,l=t.removeFromSprint;"issueView"===e?o(n):"toTop"===e?a(r):"toBottom"===e?i(r):"removeFromSprint"===e&&l(r)}},{key:"render",value:function(){var e=this.props,t=e.hasRemove,n=e.hasMove,r=e.pullRight,o=void 0!==r&&r,a=e.dropup,i=void 0!==a&&a;return u.default.createElement(c.Dropdown,{pullRight:o,dropup:i,open:!0,style:{position:"fixed"},onSelect:this.onSelectMenu.bind(this)},u.default.createElement(c.Dropdown.Menu,null,u.default.createElement(c.MenuItem,{eventKey:"issueView"},"查看"),n&&u.default.createElement(c.MenuItem,{divider:!0}),n&&u.default.createElement(c.MenuItem,{eventKey:"toTop"},"移至顶部"),n&&u.default.createElement(c.MenuItem,{eventKey:"toBottom"},"移至底部"),t&&u.default.createElement(c.MenuItem,{divider:!0}),t&&u.default.createElement(c.MenuItem,{eventKey:"removeFromSprint"},"移出Sprint")))}}],[{key:"propTypes",value:{issueId:s.PropTypes.string.isRequired,issueNo:s.PropTypes.string.isRequired,hasRemove:s.PropTypes.bool,hasMove:s.PropTypes.bool,issueView:s.PropTypes.func,toTop:s.PropTypes.func,toBottom:s.PropTypes.func,pullRight:s.PropTypes.bool,dropup:s.PropTypes.bool,removeFromSprint:s.PropTypes.func},enumerable:!0}]),t}(s.Component);t.default=d,e.exports=t.default}).call(this)}finally{}},1890:function(e,t,n){try{(function(){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function(e,t,n){for(var r=!0;r;){var o=e,a=t,i=n;r=!1,null===o&&(o=Function.prototype);var l=Object.getOwnPropertyDescriptor(o,a);if(void 0!==l){if("value"in l)return l.value;var s=l.get;if(void 0===s)return;return s.call(i)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=a,n=i,r=!0,l=u=void 0}},s=n(1),u=r(s),c=n(2),d=n(3),p=r(d),f=n(20),m=n(94),h=function(e){function t(e){o(this,t),l(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.handleCancel=this.handleCancel.bind(this)}return a(t,e),i(t,[{key:"handleCancel",value:function(){var e=this.props.close;e()}},{key:"add",value:function(e,t){var n=void 0,r=void 0;try{n=e.toString().split(".")[1].length}catch(o){n=0}try{r=t.toString().split(".")[1].length}catch(o){r=0}var a=Math.max(n,r),i=Math.pow(10,a);return p.default.add(e*i,t*i)/i}},{key:"render",value:function(){var e=this,t=this.props,n=t.sprintNo,r=t.sprints,o=t.collection,a=[],i=p.default.find(r,{no:n});i&&p.default.map(o,function(e){p.default.indexOf(i.issues,e.no)!==-1&&a.push(e)});var l=0,s=0,d={issue_count:0,story_points:0},h={};return p.default.map(a,function(t){t.assignee&&t.assignee.id?h[t.assignee.id]?(h[t.assignee.id].issue_count=p.default.add(h[t.assignee.id].issue_count,1),h[t.assignee.id].story_points=e.add(h[t.assignee.id].story_points,t.story_points||0)):h[t.assignee.id]={assignee:t.assignee,issue_count:1,story_points:t.story_points||0}:(d.issue_count=p.default.add(d.issue_count,1),d.story_points=e.add(d.story_points,t.story_points||0)),l+=1,s=e.add(s,t.story_points||0)}),u.default.createElement(c.Modal,{show:!0,onHide:this.handleCancel,backdrop:"static","aria-labelledby":"contained-modal-title-sm"},u.default.createElement(c.Modal.Header,{closeButton:!0},u.default.createElement(c.Modal.Title,{id:"contained-modal-title-la"},"工作量查看 - ",i.name)),u.default.createElement(c.Modal.Body,{style:{height:"420px",overflow:"auto"}},!p.default.isEmpty(h)&&u.default.createElement(c.Table,{hover:!0,responsive:!0},u.default.createElement("thead",null,u.default.createElement("tr",null,u.default.createElement("th",null,"负责人"),u.default.createElement("th",null,"问题数"),u.default.createElement("th",null,"故事点数"))),u.default.createElement("tbody",null,d.issue_count>0&&u.default.createElement("tr",null,u.default.createElement("td",null,"未分配的"),u.default.createElement("td",null,d.issue_count),u.default.createElement("td",null,d.story_points)),p.default.map(h,function(e,t){return u.default.createElement("tr",{key:t},u.default.createElement("td",null,u.default.createElement("div",{style:{"float":"left"}},u.default.createElement("img",{className:"board-avatar",src:e.assignee&&e.assignee.avatar?(0,f.urlWrapper)("/getavatar?fid="+e.assignee.avatar):m}),u.default.createElement("span",{style:{marginLeft:"5px"}},e.assignee.name))),u.default.createElement("td",{style:{verticalAlign:"middle"}},u.default.createElement("span",null,e.issue_count)),u.default.createElement("td",{style:{verticalAlign:"middle"}},u.default.createElement("span",null,e.story_points)))}),u.default.createElement("tr",null,u.default.createElement("td",null,"合计"),u.default.createElement("td",null,l),u.default.createElement("td",null,s))))),u.default.createElement(c.Modal.Footer,null,u.default.createElement(c.Button,{onClick:this.handleCancel},"关闭")))}}],[{key:"propTypes",value:{close:s.PropTypes.func.isRequired,sprintNo:s.PropTypes.number.isRequired,sprints:s.PropTypes.array.isRequired,collection:s.PropTypes.array.isRequired},enumerable:!0}]),t}(s.Component);t.default=h,e.exports=t.default}).call(this)}finally{}},1891:function(e,t,n){try{(function(){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(e,t,n){for(var r=!0;r;){var o=e,a=t,i=n;r=!1,null===o&&(o=Function.prototype);var l=Object.getOwnPropertyDescriptor(o,a);if(void 0!==l){if("value"in l)return l.value;var s=l.get;if(void 0===s)return;return s.call(i)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=a,n=i,r=!0,l=u=void 0}},u=n(1),c=r(u),d=n(8),p=n(2),f=n(7),m=r(f),h=n(3),y=r(h),g=n(5),v=n(4),b=function(e,t){var n={};return e.name||(n.name="必填"),e.max&&!/(^[1-9]\d*$)/.test(e.max)&&(n.max="必须输入正整数"),e.min&&!/(^[1-9]\d*$)/.test(e.min)&&(n.min="必须输入正整数"),n},w=function(e){function t(e){o(this,n),s(Object.getPrototypeOf(n.prototype),"constructor",this).call(this,e),this.state={ecode:0},this.handleSubmit=this.handleSubmit.bind(this),this.handleCancel=this.handleCancel.bind(this)}a(t,e),l(t,[{key:"handleSubmit",value:function(){var e,t,n,r,o,a,i,l,s,u;return regeneratorRuntime.async(function(c){for(;;)switch(c.prev=c.next){case 0:return e=this.props,t=e.update,n=e.no,r=e.config,o=e.values,a=e.close,i=y.default.clone(r.columns||[]),n>=0?(l=y.default.findIndex(i,{no:n}),i[l]={no:n,name:o.name,states:o.states?o.states.split(","):[],max:o.max||"",min:o.min||""}):(s=0,i.length>0&&(s=y.default.max(y.default.map(i,function(e){return e.no}))+1),i.push({name:o.name,no:s,states:o.states?o.states.split(","):[],max:o.max||"",min:o.min||""})),c.next=10,regeneratorRuntime.awrap(t({id:r.id,columns:i}));case 10:u=c.sent,0===u?(this.setState({ecode:0}),a(),g.notify.show("设置完成。","success",2e3)):this.setState({ecode:u});case 12:case"end":return c.stop()}},null,this)}},{key:"componentWillMount",value:function(){var e=this.props,t=e.initializeForm,n=e.config,r=e.no;if(r>=0){var o=y.default.find(n.columns,{no:r});t({name:o.name,states:(o.states||[]).join(","),max:o.max||"",min:o.min||""})}}},{key:"handleCancel",value:function(){var e=this.props,t=e.close,n=e.submitting;n||(this.setState({ecode:0}),t())}},{key:"render",value:function(){var e=this.props,t=e.i18n.errMsg,n=e.fields,r=n.name,o=n.states,a=n.max,l=n.min,s=e.handleSubmit,u=e.invalid,d=e.submitting,f=e.config,h=e.no,g=e.options,b=[];y.default.forEach(f.columns,function(e){e.no!==h&&(b=y.default.union(b,e.states))});var w=[];return y.default.forEach(g.states||[],function(e){y.default.indexOf(b,e.id)===-1&&w.push({label:c.default.createElement("span",{className:"state-"+e.category+"-label"},e.name),value:e.id})}),c.default.createElement(p.Modal,{show:!0,onHide:this.handleCancel,backdrop:"static","aria-labelledby":"contained-modal-title-sm"},c.default.createElement(p.Modal.Header,{closeButton:!0},c.default.createElement(p.Modal.Title,{id:"contained-modal-title-la"},h>=0?"编辑列":"添加列")),c.default.createElement("form",{onSubmit:s(this.handleSubmit),onKeyDown:function(e){13==e.keyCode&&e.preventDefault()}},c.default.createElement(p.Modal.Body,null,c.default.createElement(p.FormGroup,{validationState:r.touched&&r.error?"error":null},c.default.createElement(p.ControlLabel,null,c.default.createElement("span",{className:"txt-impt"},"*"),"名称"),c.default.createElement(p.FormControl,i({disabled:d,type:"text"},r,{placeholder:"列名"})),r.touched&&r.error&&c.default.createElement(p.HelpBlock,{style:{"float":"right"}},r.error)),c.default.createElement(p.FormGroup,null,c.default.createElement(p.ControlLabel,null,"状态"),c.default.createElement(m.default,{multi:!0,simpleValue:!0,disabled:d,clearable:!1,options:w,value:o.value,onChange:function(e){o.onChange(e)},placeholder:"选择状态"}),0==w.length&&c.default.createElement("div",null,c.default.createElement("span",{style:{fontSize:"12px",color:"#8a6d3b"}},"所有问题状态都已被其他列使用，需从其他列移除某些问题状态或创建新的问题状态供选择。"))),c.default.createElement(p.FormGroup,{validationState:a.touched&&a.error?"error":null},c.default.createElement(p.ControlLabel,null,"最大问题数（Max）"),c.default.createElement(p.FormControl,i({disabled:d,type:"text"},a,{placeholder:"输入正整数"})),a.touched&&a.error&&c.default.createElement(p.HelpBlock,{style:{"float":"right"}},a.error)),c.default.createElement(p.FormGroup,{validationState:l.touched&&l.error?"error":null},c.default.createElement(p.ControlLabel,null,"最小问题数（Min）"),c.default.createElement(p.FormControl,i({disabled:d,type:"text"},l,{placeholder:"输入正整数"})),l.touched&&l.error&&c.default.createElement(p.HelpBlock,{style:{"float":"right"}},l.error))),c.default.createElement(p.Modal.Footer,null,c.default.createElement("span",{className:"ralign"},0!==this.state.ecode&&!d&&t[this.state.ecode]),c.default.createElement("img",{src:v,className:d?"loading":"hide"}),c.default.createElement(p.Button,{disabled:d||u,type:"submit"},"确定"),c.default.createElement(p.Button,{bsStyle:"link",disabled:d,onClick:this.handleCancel},"取消"))))}}],[{key:"propTypes",value:{i18n:u.PropTypes.object.isRequired,options:u.PropTypes.object.isRequired,submitting:u.PropTypes.bool,invalid:u.PropTypes.bool,values:u.PropTypes.object,fields:u.PropTypes.object,handleSubmit:u.PropTypes.func.isRequired,initializeForm:u.PropTypes.func.isRequired,update:u.PropTypes.func.isRequired,no:u.PropTypes.number.isRequired,config:u.PropTypes.object.isRequired,close:u.PropTypes.func.isRequired},enumerable:!0}]);var n=t;return t=(0,d.reduxForm)({form:"column",fields:["name","states","max","min"],validate:b})(t)||t}(u.Component);t.default=w,e.exports=t.default}).call(this)}finally{}},1892:function(e,t,n){try{(function(){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function(e,t,n){for(var r=!0;r;){var o=e,a=t,i=n;r=!1,null===o&&(o=Function.prototype);var l=Object.getOwnPropertyDescriptor(o,a);if(void 0!==l){if("value"in l)return l.value;var s=l.get;if(void 0===s)return;return s.call(i)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=a,n=i,r=!0,l=u=void 0}},s=n(1),u=r(s),c=n(12),d=n(35),p=n(19),f=n(3),m=r(f),h={beginDrag:function(e){return this.preIndex=e.index,{id:e.column.no,index:e.index}},endDrag:function(e,t,n){this.preIndex!=e.index&&e.setRank()}},y={hover:function(e,t,n){var r=t.getItem().index,o=e.index;if(r!==o){var a=(0,c.findDOMNode)(n).getBoundingClientRect(),i=(a.right-a.left)/2,l=t.getClientOffset(),s=l.x-a.left;r<o&&s<i||r>o&&s>i||(e.moveCard(r,o),t.getItem().index=o)}}},g=function(e){function t(){o(this,n),l(Object.getPrototypeOf(n.prototype),"constructor",this).apply(this,arguments)}a(t,e),i(t,[{key:"render",value:function(){var e=this.props,t=e.column,n=e.options,r=e.isAllowedEdit,o=e.isDragging,a=e.connectDragSource,i=e.connectDropTarget,l=e.editColumn,s=e.delColumn,c=o?0:1,d={"float":"right",cursor:"pointer"},p=m.default.filter(t.states,function(e){return m.default.findIndex(n.states,{id:e})!==-1});return a(i(u.default.createElement("div",{style:{opacity:c},className:"config-column"},u.default.createElement("div",{style:{fontWeight:600,paddingBottom:"10px",borderBottom:"1px solid #ccc"}},t.name,t.max&&u.default.createElement("span",{className:"config-wip"},"Max-"+t.max),t.min&&u.default.createElement("span",{className:"config-wip"},"Min-"+t.min),r&&!!s&&u.default.createElement("span",{style:d,onClick:function(){s(t.no)},title:"删除",className:"rm-icon"},u.default.createElement("i",{className:"fa fa-trash"})),r&&!!l&&u.default.createElement("span",{
style:d,onClick:function(){l(t.no)},title:"编辑",className:"edit-icon"},u.default.createElement("i",{className:"fa fa-edit"}))),u.default.createElement("div",null,m.default.map(p,function(e,t){return u.default.createElement("div",{key:t,className:"config-column-card"},u.default.createElement("span",{className:"state-"+m.default.find(n.states,{id:e}).category+"-label"},m.default.find(n.states,{id:e}).name))})))))}}],[{key:"propTypes",value:{connectDragSource:s.PropTypes.func.isRequired,connectDropTarget:s.PropTypes.func.isRequired,index:s.PropTypes.number.isRequired,isDragging:s.PropTypes.bool.isRequired,column:s.PropTypes.object.isRequired,options:s.PropTypes.object.isRequired,editColumn:s.PropTypes.func,delColumn:s.PropTypes.func,setRank:s.PropTypes.func.isRequired,isAllowedEdit:s.PropTypes.bool.isRequired,moveCard:s.PropTypes.func.isRequired},enumerable:!0}]);var n=t;return t=(0,d.DragSource)(function(e){return e.isAllowedEdit?p.CardTypes.KANBAN_COLUMN:""},h,function(e,t){return{connectDragSource:e.dragSource(),isDragging:t.isDragging()}})(t)||t,t=(0,d.DropTarget)(p.CardTypes.KANBAN_COLUMN,y,function(e){return{connectDropTarget:e.dropTarget()}})(t)||t}(s.Component);t.default=g,e.exports=t.default}).call(this)}finally{}},1893:function(e,t,n){try{(function(){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function(e,t,n){for(var r=!0;r;){var o=e,a=t,i=n;r=!1,null===o&&(o=Function.prototype);var l=Object.getOwnPropertyDescriptor(o,a);if(void 0!==l){if("value"in l)return l.value;var s=l.get;if(void 0===s)return;return s.call(i)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=a,n=i,r=!0,l=u=void 0}},s=n(1),u=r(s),c=n(56),d=r(c),p=n(3),f=r(p),m=n(1892),h=r(m),y=function(e){function t(e){o(this,t),l(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={cards:[],ecode:0},this.state.cards=e.columns,this.kid=e.kid,this.setRank=this.setRank.bind(this)}return a(t,e),i(t,[{key:"componentWillReceiveProps",value:function(e){this.kid===e.kid&&f.default.isEqual(f.default.sortByOrder(this.state.cards||[],["no"]),f.default.sortByOrder(e.columns||[],["no"]))||(this.state.cards=e.columns)}},{key:"moveCard",value:function(e,t){var n=this.state.cards,r=n[e];this.setState((0,d.default)(this.state,{cards:{$splice:[[e,1],[t,0,r]]}}))}},{key:"setRank",value:function(){var e=this.props.update;e({id:this.kid,columns:this.state.cards})}},{key:"render",value:function(){var e=this,t=this.props,n=t.editColumn,r=t.delColumn,o=t.options,a=t.isAllowedEdit,i=this.state.cards;return u.default.createElement("div",{className:"config-columns",style:{minHeight:"300px",marginBottom:"10px"}},f.default.map(i,function(t,i){return u.default.createElement(h.default,{isAllowedEdit:a,key:t.no,index:i,column:t,options:o,editColumn:n,delColumn:r,setRank:e.setRank,moveCard:e.moveCard.bind(e)})}))}}],[{key:"propTypes",value:{isAllowedEdit:s.PropTypes.bool.isRequired,kid:s.PropTypes.string.isRequired,editColumn:s.PropTypes.func.isRequired,delColumn:s.PropTypes.func.isRequired,update:s.PropTypes.func.isRequired,options:s.PropTypes.object.isRequired,columns:s.PropTypes.array.isRequired},enumerable:!0}]),t}(s.Component);t.default=y,e.exports=t.default}).call(this)}finally{}},1894:function(e,t,n){try{(function(){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(e,t,n){for(var r=!0;r;){var o=e,a=t,i=n;r=!1,null===o&&(o=Function.prototype);var l=Object.getOwnPropertyDescriptor(o,a);if(void 0!==l){if("value"in l)return l.value;var s=l.get;if(void 0===s)return;return s.call(i)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=a,n=i,r=!0,l=u=void 0}},u=n(1),c=r(u),d=n(31),p=n(2),f=(n(5),n(3)),m=r(f),h=n(115),y=(n(4),n(1067)),g=n(1896),v=n(1901),b=n(1899),w=n(1893),E=n(1891),k=n(1898),_=n(1897),x=function(e){function t(e){o(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={editModalShow:!1,delNotifyShow:!1,globalFilterModalShow:!1,quickFilterModalShow:!1,delFilterNotifyShow:!1,displayFieldsModalShow:!1,columnModalShow:!1,delColumnNotifyShow:!1,filterNo:-1,columnNo:-1},this.editModalClose=this.editModalClose.bind(this),this.delNotifyClose=this.delNotifyClose.bind(this),this.globalFilterModalClose=this.globalFilterModalClose.bind(this),this.quickFilterModalClose=this.quickFilterModalClose.bind(this),this.delFilterNotifyClose=this.delFilterNotifyClose.bind(this),this.displayFieldsModalClose=this.displayFieldsModalClose.bind(this),this.columnModalClose=this.columnModalClose.bind(this),this.delColumnNotifyClose=this.delColumnNotifyClose.bind(this),this.condsTxt=this.condsTxt.bind(this),this.getDisplayFields=this.getDisplayFields.bind(this)}return a(t,e),l(t,[{key:"condsTxt",value:function(e){var t=this.props.options,n=m.default.mapValues(e||{},function(e){return m.default.isArray(e)?e.join(","):e});return(0,h.parseQuery)(n,t)}},{key:"editModalClose",value:function(){this.setState({editModalShow:!1})}},{key:"delNotifyClose",value:function(){this.setState({delNotifyShow:!1})}},{key:"globalFilterModalClose",value:function(){this.setState({globalFilterModalShow:!1})}},{key:"quickFilterModalClose",value:function(){this.setState({quickFilterModalShow:!1})}},{key:"displayFieldsModalClose",value:function(){this.setState({displayFieldsModalShow:!1})}},{key:"columnModalClose",value:function(){this.setState({columnModalShow:!1})}},{key:"delFilterNotifyClose",value:function(){this.setState({delFilterNotifyShow:!1})}},{key:"delColumnNotifyClose",value:function(){this.setState({delColumnNotifyShow:!1})}},{key:"editFilter",value:function(e){this.setState({quickFilterModalShow:!0,filterNo:e})}},{key:"delFilter",value:function(e){this.setState({delFilterNotifyShow:!0,filterNo:e})}},{key:"editColumn",value:function(e){this.setState({columnModalShow:!0,columnNo:e})}},{key:"delColumn",value:function(e){this.setState({delColumnNotifyShow:!0,columnNo:e})}},{key:"getDisplayFields",value:function(e){var t=this.props.options,n=[];return m.default.forEach(e||[],function(e){var r=m.default.findIndex(t.fields,{key:e});r!==-1&&n.push(t.fields[r].name)}),n.join(", ")||"-"}},{key:"render",value:function(){var e=this,t={marginLeft:"20px",marginTop:"10px",marginBottom:"10px"},n=this.props,r=n.i18n,o=n.options,a=n.loading,l=n.edit,s=n.del,u=n.config,f=o.permissions&&o.permissions.indexOf("manage_project")!==-1,h=[];m.default.forEach(u.columns||[],function(e){h=m.default.union(h,e.states)});var x=m.default.filter(o.states||[],function(e){return m.default.indexOf(h,e.id)===-1}),C=[];return C.push({id:"basic",title:c.default.createElement("div",null,c.default.createElement("span",{className:"kanban-table-td-title"},"基本信息")),contents:c.default.createElement("div",{style:t},c.default.createElement("ul",{className:"list-unstyled clearfix",style:{lineHeight:2,marginBottom:"10px"}},c.default.createElement("li",null,"名称：",u.name||"-"),c.default.createElement("li",null,"类型：",u.type||"-"),c.default.createElement("li",null,"描述：",u.description||"-")),f&&c.default.createElement(p.Button,{onClick:function(){e.setState({editModalShow:!0})}},"编辑"),f&&c.default.createElement(p.Button,{style:{marginLeft:"15px"},bsStyle:"link",onClick:function(){e.setState({delNotifyShow:!0})}},"删除"))}),C.push({id:"query",title:c.default.createElement("div",null,c.default.createElement("span",{className:"kanban-table-td-title"},"全局过滤"),c.default.createElement("span",{className:"table-td-desc"},"用来过滤整个看板的问题，默认显示全部。")),contents:c.default.createElement("div",{style:t},m.default.isEmpty(m.default.omit(u.query,["subtask"]))?c.default.createElement("ul",{className:"list-unstyled clearfix",style:{lineHeight:2,marginBottom:"10px"}},c.default.createElement("li",null,"全部")):c.default.createElement("ul",{className:"list-unstyled clearfix",style:{lineHeight:2,marginBottom:"10px"}},c.default.createElement("li",null,this.condsTxt(u.query))),f&&c.default.createElement(p.Button,{onClick:function(){e.setState({globalFilterModalShow:!0})}},"设置"))}),C.push({id:"filters",title:c.default.createElement("div",null,c.default.createElement("span",{className:"kanban-table-td-title"},"快速过滤器"),c.default.createElement("span",{className:"table-td-desc"},"可上下拖拽调整过滤器位置")),contents:c.default.createElement("div",{style:t},!u.filters||u.filters.length<=0?c.default.createElement("ul",{className:"list-unstyled clearfix",style:{lineHeight:2}},c.default.createElement("li",null,"未定义")):c.default.createElement(v,{isAllowedEdit:f,kid:u.id,editFilter:this.editFilter.bind(this),delFilter:this.delFilter.bind(this),filters:u.filters||[],update:l,condsTxt:this.condsTxt}),f&&c.default.createElement(p.Button,{onClick:function(){e.setState({quickFilterModalShow:!0,filterNo:-1})}},"添加"))}),C.push({id:"fields",title:c.default.createElement("div",null,c.default.createElement("span",{className:"kanban-table-td-title"},"显示字段")),contents:c.default.createElement("div",{style:t},m.default.isEmpty(u.display_fields)?c.default.createElement("ul",{className:"list-unstyled clearfix",style:{lineHeight:2,marginBottom:"10px"}},c.default.createElement("li",null,"未定义")):c.default.createElement("ul",{className:"list-unstyled clearfix",style:{lineHeight:2,marginBottom:"10px"}},c.default.createElement("li",null,this.getDisplayFields(u.display_fields||[]))),f&&c.default.createElement(p.Button,{onClick:function(){e.setState({displayFieldsModalShow:!0})}},"设置"))}),C.push({id:"columns",title:c.default.createElement("div",{style:{minHeight:"300px"}},c.default.createElement("span",{className:"kanban-table-td-title"},"显示列"),c.default.createElement("span",{className:"table-td-desc"},"可左右拖拽调整列位置"),x.length>0&&c.default.createElement("div",{className:"table-td-desc",style:{marginTop:"10px"}},"以下未分配状态："),m.default.map(x,function(e,t){return c.default.createElement("div",{className:"config-column-card",key:t}," ",c.default.createElement("span",{className:"state-"+e.category+"-label"},e.name))})),contents:c.default.createElement("div",{style:i({},t,{marginLeft:"10px"}),className:"config-columns"},!u.columns||u.columns.length<=0?c.default.createElement("ul",{className:"list-unstyled clearfix",style:{lineHeight:2}},c.default.createElement("li",null,"未定义")):c.default.createElement(w,{isAllowedEdit:f,kid:u.id,editColumn:this.editColumn.bind(this),delColumn:this.delColumn.bind(this),options:o,update:l,columns:u.columns||[]}),f&&c.default.createElement(p.Button,{style:{marginLeft:"10px"},onClick:function(){e.setState({columnModalShow:!0,columnNo:-1})}},"添加"))}),c.default.createElement("div",{style:{overflowY:"auto",height:"100%",paddingBottom:"80px",margin:"0px 7px"}},c.default.createElement(d.BootstrapTable,{data:C,headerStyle:{display:"none"},bordered:!1,hover:!0,trClassName:"tr-top"},c.default.createElement(d.TableHeaderColumn,{dataField:"id",isKey:!0,hidden:!0},"ID"),c.default.createElement(d.TableHeaderColumn,{width:"200",dataField:"title"}),c.default.createElement(d.TableHeaderColumn,{dataField:"contents"})),this.state.editModalShow&&c.default.createElement(y,{show:!0,close:this.editModalClose,update:l,data:u,i18n:r}),this.state.delNotifyShow&&c.default.createElement(g,{show:!0,close:this.delNotifyClose,del:s,loading:a,data:u,i18n:r}),this.state.globalFilterModalShow&&c.default.createElement(b,{show:!0,model:"global",close:this.globalFilterModalClose,update:l,loading:a,data:u,options:o,i18n:r}),this.state.quickFilterModalShow&&c.default.createElement(b,{show:!0,model:"filter",no:this.state.filterNo,close:this.quickFilterModalClose,update:l,loading:a,data:u,options:o,i18n:r}),this.state.displayFieldsModalShow&&c.default.createElement(k,{show:!0,close:this.displayFieldsModalClose,options:o,data:u,update:l,loading:a,i18n:r}),this.state.delFilterNotifyShow&&c.default.createElement(_,{show:!0,model:"filter",no:this.state.filterNo,close:this.delFilterNotifyClose,update:l,loading:a,config:u,i18n:r}),this.state.columnModalShow&&c.default.createElement(E,{show:!0,no:this.state.columnNo,close:this.columnModalClose,update:l,config:u,options:o,i18n:r}),this.state.delColumnNotifyShow&&c.default.createElement(_,{show:!0,model:"column",no:this.state.columnNo,close:this.delColumnNotifyClose,update:l,loading:a,config:u,i18n:r}))}}],[{key:"propTypes",value:{i18n:u.PropTypes.object.isRequired,loading:u.PropTypes.bool.isRequired,config:u.PropTypes.object.isRequired,options:u.PropTypes.object.isRequired,edit:u.PropTypes.func.isRequired,del:u.PropTypes.func.isRequired},enumerable:!0}]),t}(u.Component);t.default=x,e.exports=t.default}).call(this)}finally{}},1895:function(e,t,n){try{(function(){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(e,t,n){for(var r=!0;r;){var o=e,a=t,i=n;r=!1,null===o&&(o=Function.prototype);var l=Object.getOwnPropertyDescriptor(o,a);if(void 0!==l){if("value"in l)return l.value;var s=l.get;if(void 0===s)return;return s.call(i)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=a,n=i,r=!0,l=u=void 0}},u=n(1),c=r(u),d=n(8),p=n(2),f=n(7),m=r(f),h=n(3),y=r(h),g=n(5),v=n(4),b=function(e,t){var n={};return e.name||(n.name="必填"),e.type||(n.type="必填"),n},w=function(e){function t(e){o(this,n),s(Object.getPrototypeOf(n.prototype),"constructor",this).call(this,e),this.state={ecode:0},this.handleSubmit=this.handleSubmit.bind(this),this.handleCancel=this.handleCancel.bind(this)}a(t,e),l(t,[{key:"handleSubmit",value:function(){var e,t,n,r,o,a,i;return regeneratorRuntime.async(function(l){for(;;)switch(l.prev=l.next){case 0:return e=this.props,t=e.values,n=e.create,r=e.close,o=e.goto,l.next=7,regeneratorRuntime.awrap(n(t));case 7:a=l.sent,0===a?(this.setState({ecode:0}),r(),g.notify.show("新建完成，请配置看板。","success",2e3),i=this.props.kanbans,o(y.default.last(i).id,"config")):this.setState({ecode:a});case 9:case"end":return l.stop()}},null,this)}},{key:"handleCancel",value:function(){var e=this.props,t=e.close,n=e.submitting;n||(this.setState({ecode:0}),t())}},{key:"render",value:function(){var e=this.props,t=e.i18n.errMsg,n=e.fields,r=n.name,o=n.type,a=n.description,l=e.handleSubmit,s=e.invalid,u=e.submitting,d=[{label:"Srcum Board",value:"scrum"},{label:"Kanban",value:"kanban"}];return c.default.createElement(p.Modal,{show:!0,onHide:this.handleCancel,backdrop:"static","aria-labelledby":"contained-modal-title-sm"},c.default.createElement(p.Modal.Header,{closeButton:!0},c.default.createElement(p.Modal.Title,{id:"contained-modal-title-la"},"创建看板")),c.default.createElement("form",{onSubmit:l(this.handleSubmit),onKeyDown:function(e){13==e.keyCode&&e.preventDefault()}},c.default.createElement(p.Modal.Body,null,c.default.createElement(p.FormGroup,{controlId:"formControlsText",validationState:r.touched&&r.error?"error":null},c.default.createElement(p.ControlLabel,null,c.default.createElement("span",{className:"txt-impt"},"*"),"名称"),c.default.createElement(p.FormControl,i({disabled:u,type:"text"},r,{placeholder:"看板名"})),r.touched&&r.error&&c.default.createElement(p.HelpBlock,{style:{"float":"right"}},r.error)),c.default.createElement(p.FormGroup,{controlId:"formControlsSelect"},c.default.createElement(p.ControlLabel,null,c.default.createElement("span",{className:"txt-impt"},"*"),"类型"),c.default.createElement(m.default,{simpleValue:!0,disabled:u,options:d,clearable:!1,value:o.value,onChange:function(e){o.onChange(e)},placeholder:"请选择看板类型"})),c.default.createElement(p.FormGroup,{controlId:"formControlsText"},c.default.createElement(p.ControlLabel,null,"描述"),c.default.createElement(p.FormControl,i({disabled:u,type:"text"},a,{placeholder:"描述"})))),c.default.createElement(p.Modal.Footer,null,c.default.createElement("span",{className:"ralign"},0!==this.state.ecode&&!u&&t[this.state.ecode]),c.default.createElement("img",{src:v,className:u?"loading":"hide"}),c.default.createElement(p.Button,{disabled:u||s,type:"submit"},"确定"),c.default.createElement(p.Button,{bsStyle:"link",disabled:u,onClick:this.handleCancel},"取消"))))}}],[{key:"propTypes",value:{i18n:u.PropTypes.object.isRequired,submitting:u.PropTypes.bool,invalid:u.PropTypes.bool,values:u.PropTypes.object,fields:u.PropTypes.object,handleSubmit:u.PropTypes.func.isRequired,close:u.PropTypes.func.isRequired,resetForm:u.PropTypes.func.isRequired,"goto":u.PropTypes.func.isRequired,kanbans:u.PropTypes.array.isRequired,create:u.PropTypes.func.isRequired},enumerable:!0}]);var n=t;return t=(0,d.reduxForm)({form:"kanban",fields:["name","type","description"],validate:b})(t)||t}(u.Component);t.default=w,e.exports=t.default}).call(this)}finally{}},1896:function(e,t,n){try{(function(){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function(e,t,n){for(var r=!0;r;){var o=e,a=t,i=n;r=!1,null===o&&(o=Function.prototype);var l=Object.getOwnPropertyDescriptor(o,a);if(void 0!==l){if("value"in l)return l.value;var s=l.get;if(void 0===s)return;return s.call(i)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=a,n=i,r=!0,l=u=void 0}},s=n(1),u=r(s),c=n(2),d=n(5),p=n(3),f=(r(p),n(4)),m=function(e){function t(e){o(this,t),l(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={ecode:0},this.confirm=this.confirm.bind(this),this.cancel=this.cancel.bind(this)}return a(t,e),i(t,[{key:"confirm",value:function(){var e,t,n,r,o;return regeneratorRuntime.async(function(a){for(;;)switch(a.prev=a.next){case 0:return e=this.props,t=e.close,n=e.del,r=e.data.id,a.next=6,regeneratorRuntime.awrap(n(r));case 6:o=a.sent,this.setState({ecode:o}),0===o&&(t(),d.notify.show("看板已删除。","success",2e3));case 9:case"end":return a.stop()}},null,this)}},{key:"cancel",value:function(){var e=this.props.close;e()}},{key:"render",value:function(){var e=this.props,t=e.i18n.errMsg,n=e.loading,r=e.data;return u.default.createElement(c.Modal,{show:!0,onHide:this.cancel,backdrop:"static","aria-labelledby":"contained-modal-title-sm"},u.default.createElement(c.Modal.Header,{closeButton:!0},u.default.createElement(c.Modal.Title,{id:"contained-modal-title-la"},"删除看板 -  ",r.name)),u.default.createElement(c.Modal.Body,null,"确认要删除此看板，删除后将不能恢复。 ",u.default.createElement("br",null)),u.default.createElement(c.Modal.Footer,null,u.default.createElement("span",{className:"ralign"},0!==this.state.ecode&&!n&&t[this.state.ecode]),u.default.createElement("img",{src:f,className:n?"loading":"hide"}),u.default.createElement(c.Button,{disabled:n,onClick:this.confirm},"确定"),u.default.createElement(c.Button,{bsStyle:"link",disabled:n,onClick:this.cancel},"取消")))}}],[{key:"propTypes",value:{i18n:s.PropTypes.object.isRequired,close:s.PropTypes.func.isRequired,loading:s.PropTypes.bool.isRequired,del:s.PropTypes.func.isRequired,data:s.PropTypes.object.isRequired},enumerable:!0}]),t}(s.Component);t.default=m,e.exports=t.default}).call(this)}finally{}},1897:function(e,t,n){try{(function(){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function(e,t,n){for(var r=!0;r;){var o=e,a=t,i=n;r=!1,null===o&&(o=Function.prototype);var l=Object.getOwnPropertyDescriptor(o,a);if(void 0!==l){if("value"in l)return l.value;var s=l.get;if(void 0===s)return;return s.call(i)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=a,n=i,r=!0,l=u=void 0}},s=n(1),u=r(s),c=n(2),d=n(5),p=n(3),f=r(p),m=n(4),h=function(e){function t(e){o(this,t),l(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={ecode:0},this.confirm=this.confirm.bind(this),this.cancel=this.cancel.bind(this)}return a(t,e),i(t,[{key:"confirm",value:function(){var e,t,n,r,o,a,i,l,s,u,c,p,m,h;return regeneratorRuntime.async(function(y){for(;;)switch(y.prev=y.next){case 0:if(e=this.props,t=e.close,n=e.update,r=e.no,o=e.model,a=e.config,i=a.id,l=a.columns,s=void 0===l?{}:l,u=a.filters,c=void 0===u?{}:u,p=0,"column"!==o){y.next=19;break}return m=f.default.filter(s,function(e){return e.no!=r}),y.next=16,regeneratorRuntime.awrap(n({id:i,columns:m}));case 16:p=y.sent,y.next=24;break;case 19:if("filter"!==o){y.next=24;break}return h=f.default.filter(c,function(e){return e.no!=r}),y.next=23,regeneratorRuntime.awrap(n({id:i,filters:h}));case 23:p=y.sent;case 24:this.setState({ecode:p}),0===p&&(t(),"column"===o?d.notify.show("看板列已删除。","success",2e3):"filter"===o&&d.notify.show("过滤器已删除。","success",2e3));case 26:case"end":return y.stop()}},null,this)}},{key:"cancel",value:function(){var e=this.props.close;e()}},{key:"render",value:function(){var e=this.props,t=e.i18n.errMsg,n=e.model,r=e.no,o=e.loading,a=e.config;return u.default.createElement(c.Modal,{show:!0,onHide:this.cancel,backdrop:"static","aria-labelledby":"contained-modal-title-sm"},u.default.createElement(c.Modal.Header,{closeButton:!0},u.default.createElement(c.Modal.Title,{id:"contained-modal-title-la"},"column"===n&&"删除列 - "+(f.default.find(a.columns,{no:r})&&f.default.find(a.columns,{no:r}).name||""),"filter"===n&&"删除过滤器 - "+(f.default.find(a.filters,{no:r})&&f.default.find(a.filters,{no:r}).name||""))),u.default.createElement(c.Modal.Body,null,"确认要删除此","column"===n&&"列","filter"===n&&"过滤器","? ",u.default.createElement("br",null)),u.default.createElement(c.Modal.Footer,null,u.default.createElement("span",{className:"ralign"},0!==this.state.ecode&&!o&&t[this.state.ecode]),u.default.createElement("img",{src:m,className:o?"loading":"hide"}),u.default.createElement(c.Button,{disabled:o,onClick:this.confirm},"确定"),u.default.createElement(c.Button,{bsStyle:"link",disabled:o,onClick:this.cancel},"取消")))}}],[{key:"propTypes",value:{i18n:s.PropTypes.object.isRequired,close:s.PropTypes.func.isRequired,loading:s.PropTypes.bool.isRequired,model:s.PropTypes.string.isRequired,update:s.PropTypes.func.isRequired,no:s.PropTypes.number.isRequired,config:s.PropTypes.object.isRequired},enumerable:!0}]),t}(s.Component);t.default=h,e.exports=t.default}).call(this)}finally{}},1898:function(e,t,n){try{(function(){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function(e,t,n){for(var r=!0;r;){var o=e,a=t,i=n;r=!1,null===o&&(o=Function.prototype);var l=Object.getOwnPropertyDescriptor(o,a);if(void 0!==l){if("value"in l)return l.value;var s=l.get;if(void 0===s)return;return s.call(i)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=a,n=i,r=!0,l=u=void 0}},s=n(1),u=r(s),c=n(2),d=(n(35),n(56)),p=r(d),f=n(49),m=r(f),h=n(7),y=r(h),g=n(3),v=r(g),b=n(5),w=n(4),E=function(e){function t(e){var n=this;o(this,t),l(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.moveCard=this.moveCard.bind(this),this.state={cards:[],ecode:0,addFieldIds:"",enableAdd:!1};var r=this.props,a=r.data.display_fields,i=void 0===a?[]:a,s=r.options.fields,u=void 0===s?[]:s;v.default.forEach(i,function(e){var t=v.default.findIndex(u,{key:e});t!==-1&&n.state.cards.push({id:e,text:u[t].name||""})}),this.state.strCards=JSON.stringify(this.state.cards)}return a(t,e),i(t,[{key:"save",value:function(){var e,t,n,r,o,a;return regeneratorRuntime.async(function(i){for(;;)switch(i.prev=i.next){case 0:return e=this.props,t=e.close,n=e.update,r=e.data,o=v.default.map(this.state.cards,function(e){return e.id}),i.next=7,regeneratorRuntime.awrap(n({display_fields:o,id:r.id}));case 7:a=i.sent,0===a?(this.setState({ecode:0}),t(),b.notify.show("设置完成。","success",2e3)):this.setState({ecode:a});case 9:case"end":return i.stop()}},null,this)}},{key:"cancel",value:function(){var e=this.props,t=e.close,n=e.loading;n||t()}},{key:"deleteCard",value:function(e){this.state.cards.splice(e,1),this.setState({cards:this.state.cards})}},{key:"handleChange",value:function(e){""!==e?this.setState({addFieldIds:e,enableAdd:!0}):this.setState({addFieldIds:"",enableAdd:!1})}},{key:"add",value:function(){for(var e=this,t=this.props.options.fields,n=void 0===t?[]:t,r=this.state.addFieldIds.split(","),o=function(t){var o=v.default.find(n||[],function(e){return e.key===r[t]});e.state.cards.push({id:o.key,text:o.name})},a=0;a<r.length;a++)o(a);this.setState({cards:this.state.cards,addFieldIds:"",enableAdd:!1})}},{key:"moveCard",value:function(e,t){var n=this.state.cards,r=n[e];this.setState((0,p.default)(this.state,{cards:{$splice:[[e,1],[t,0,r]]}}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.cards,r=t.strCards,o=t.enableAdd,a=this.props,i=a.i18n.errMsg,l=a.loading,s=a.options,d=v.default.reject(s.fields,function(e){return"File"===e.type||"TextArea"===e.type||["type","title","resolve_version","epic","sprints"].indexOf(e.key)!==-1}),p=v.default.map(d,function(e){return{value:e.key,label:e.name}});return u.default.createElement(c.Modal,{show:!0,onHide:this.cancel.bind(this),backdrop:"static","aria-labelledby":"contained-modal-title-sm"},u.default.createElement(c.Modal.Header,{closeButton:!0},u.default.createElement(c.Modal.Title,{id:"contained-modal-title-la"},"显示字段配置")),u.default.createElement(c.Modal.Body,{style:{height:"420px",overflow:"auto"}},u.default.createElement(c.Form,{horizontal:!0},u.default.createElement(c.FormGroup,{controlId:"formControlsText"},u.default.createElement(c.Col,{sm:6},u.default.createElement(y.default,{simpleValue:!0,options:v.default.reject(p,function(e){return v.default.findIndex(n,function(t){return t.id===e.value})!==-1}),clearable:!1,value:this.state.addFieldIds,onChange:this.handleChange.bind(this),placeholder:"选择添加字段(可多选)",multi:!0}),u.default.createElement(c.Button,{style:{"float":"right",marginTop:"15px"},onClick:this.add.bind(this),disabled:!o},"添加至列表 >>")),u.default.createElement(c.Col,{sm:6},n.length>0&&u.default.createElement("div",{style:{marginBottom:"8px"}},"通过上下拖拽改变显示顺序。"),n.length>0?n.map(function(t,n){return u.default.createElement(m.default,{key:t.id,index:n,id:t.id,text:t.text,moveCard:e.moveCard,deleteCard:e.deleteCard.bind(e,n)})}):u.default.createElement("p",null,"显示字段为空。"))))),u.default.createElement(c.Modal.Footer,null,u.default.createElement(c.Button,{bsStyle:"link",style:{"float":"left"},disabled:l,onClick:function(){e.setState({cards:[]})}},"清空字段"),u.default.createElement("span",{className:"ralign"},0!==this.state.ecode&&!l&&i[this.state.ecode]),u.default.createElement("img",{src:w,className:l?"loading":"hide"}),u.default.createElement(c.Button,{disabled:l||r==JSON.stringify(n),onClick:this.save.bind(this)},"确定"),u.default.createElement(c.Button,{bsStyle:"link",disabled:l,onClick:this.cancel.bind(this)},"取消")))}}],[{key:"propTypes",value:{i18n:s.PropTypes.object.isRequired,loading:s.PropTypes.bool,update:s.PropTypes.func.isRequired,data:s.PropTypes.object.isRequired,options:s.PropTypes.object.isRequired,close:s.PropTypes.func.isRequired},enumerable:!0}]),t}(s.Component);t.default=E,e.exports=t.default}).call(this)}finally{}},1899:function(e,t,n){try{(function(){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function(e,t,n){for(var r=!0;r;){var o=e,a=t,i=n;r=!1,null===o&&(o=Function.prototype);var l=Object.getOwnPropertyDescriptor(o,a);if(void 0!==l){if("value"in l)return l.value;var s=l.get;if(void 0===s)return;return s.call(i);
}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=a,n=i,r=!0,l=u=void 0}},s=n(1),u=r(s),c=n(2),d=n(7),p=(r(d),n(5)),f=n(3),m=r(f),h=n(115),y=n(4),g=function(e){function t(e){o(this,t),l(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={name:"",touched:{},errors:{},query:{}},this.handleSubmit=this.handleSubmit.bind(this),this.handleCancel=this.handleCancel.bind(this)}return a(t,e),i(t,[{key:"componentWillMount",value:function(){var e=this,t=this.props,n=t.data,r=n.query,o=void 0===r?{}:r,a=n.filters,i=void 0===a?[]:a,l=t.model,s=t.no,u=void 0===s?-1:s;if("global"==l)m.default.forEach(o,function(t,n){e.state.query[n]=t&&m.default.isArray(t)?t.join(","):t||""});else if("filter"==l&&u>=0){var c=m.default.find(i,{no:u});if(!c)return;this.state.name=c.name;c.query;m.default.forEach(c.query,function(t,n){e.state.query[n]=t&&m.default.isArray(t)?t.join(","):t||""})}}},{key:"handleSubmit",value:function(){var e,t,n,r,o,a,i,l,s,u,c,d,f,h;return regeneratorRuntime.async(function(y){for(;;)switch(y.prev=y.next){case 0:if(e=this.props,t=e.update,n=e.close,r=e.data,o=r.id,a=r.filters,i=void 0===a?[]:a,l=e.model,s=e.no,u=m.default.clone(i),c=this.state.query,d=0,"global"!=l){y.next=18;break}return y.next=15,regeneratorRuntime.awrap(t(m.default.extend({query:c},{id:o})));case 15:d=y.sent,y.next=23;break;case 18:if("filter"!=l){y.next=23;break}return s>=0?(f=m.default.findIndex(i,{no:s}),u[f].query=c,u[f].name=this.state.name):(h=0,i.length>0&&(h=m.default.max(m.default.map(i,function(e){return e.no}))+1),u.push({query:c,name:this.state.name,no:h})),y.next=22,regeneratorRuntime.awrap(t(m.default.extend({filters:u},{id:o})));case 22:d=y.sent;case 23:0===d?(this.setState({ecode:0}),n(),p.notify.show("设置完成。","success",2e3)):this.setState({ecode:d});case 24:case"end":return y.stop()}},null,this)}},{key:"handleCancel",value:function(){var e=this.props,t=e.close,n=e.loading;n||(this.setState({ecode:0}),t())}},{key:"render",value:function(){var e=this,t=this.props,n=t.i18n.errMsg,r=t.model,o=t.no,a=t.loading,i=t.options;return u.default.createElement(c.Modal,{show:!0,onHide:this.handleCancel,backdrop:"static","aria-labelledby":"contained-modal-title-sm",dialogClassName:"custom-modal-90"},u.default.createElement(c.Modal.Header,{closeButton:!0},u.default.createElement(c.Modal.Title,{id:"contained-modal-title-la"},"global"==r?"全局过滤器":o===-1?"添加快速过滤器":"编辑快速过滤器")),u.default.createElement(c.Form,{horizontal:!0,onKeyDown:function(e){13==e.keyCode&&e.preventDefault()}},u.default.createElement(c.Modal.Body,{style:{maxHeight:"580px",overflow:"auto",paddingBottom:"0px"}},"filter"===r&&u.default.createElement(c.FormGroup,{style:{height:"50px",borderBottom:"1px solid #ddd"},validationState:this.state.touched.name&&this.state.errors.name&&"error"||null},u.default.createElement(c.Col,{sm:2,componentClass:c.ControlLabel},u.default.createElement("span",{className:"txt-impt"},"*"),"过滤器名称"),u.default.createElement(c.Col,{sm:8},u.default.createElement(c.FormControl,{type:"text",value:this.state.name,onChange:function(t){e.setState({name:t.target.value}),t.target.value?e.setState({errors:{}}):(e.state.errors.name="必填",e.setState({errors:e.state.errors}))},onBlur:function(t){e.state.touched.name=!0,e.setState({touched:e.state.touched})},placeholder:"输入名称"})),u.default.createElement(c.Col,{sm:2,componentClass:c.ControlLabel,style:{textAlign:"left"}},this.state.touched.name&&(this.state.errors.name||""))),u.default.createElement(h.IssueFilterList,{visable:!0,styles:{marginTop:"global"==r?"0px":"10px"},values:this.state.query,textInputChange:!0,onChange:function(t){e.setState({query:t})},columns:2,notShowFields:["title","resolved_at","closed_at","resolver","closer","watcher"],notShowBlocks:["agile"],options:i})),u.default.createElement(c.Modal.Footer,null,u.default.createElement("span",{className:"ralign"},0!==this.state.ecode&&n[this.state.ecode]),u.default.createElement("img",{src:y,className:a?"loading":"hide"}),u.default.createElement(c.Button,{disabled:"filter"===r&&(!this.state.name||m.default.isEmpty(this.state.query))||a,onClick:this.handleSubmit},"确定"),u.default.createElement(c.Button,{bsStyle:"link",disabled:a,onClick:this.handleCancel},"取消"))))}}],[{key:"propTypes",value:{i18n:s.PropTypes.object.isRequired,model:s.PropTypes.string.isRequired,no:s.PropTypes.number,loading:s.PropTypes.bool.isRequired,update:s.PropTypes.func.isRequired,close:s.PropTypes.func.isRequired,options:s.PropTypes.object,data:s.PropTypes.object},enumerable:!0}]),t}(s.Component);t.default=g,e.exports=t.default}).call(this)}finally{}},1900:function(e,t,n){try{(function(){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function(e,t,n){for(var r=!0;r;){var o=e,a=t,i=n;r=!1,null===o&&(o=Function.prototype);var l=Object.getOwnPropertyDescriptor(o,a);if(void 0!==l){if("value"in l)return l.value;var s=l.get;if(void 0===s)return;return s.call(i)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=a,n=i,r=!0,l=u=void 0}},s=n(1),u=r(s),c=n(12),d=n(35),p=n(19),f={beginDrag:function(e){return this.preIndex=e.index,{id:e.id,index:e.index}},endDrag:function(e,t,n){this.preIndex!=e.index&&e.setRank()}},m={hover:function(e,t,n){var r=t.getItem().index,o=e.index;if(r!==o){var a=(0,c.findDOMNode)(n).getBoundingClientRect(),i=(a.bottom-a.top)/2,l=t.getClientOffset(),s=l.y-a.top;r<o&&s<i||r>o&&s>i||(e.moveCard(r,o),t.getItem().index=o)}}},h=function(e){function t(){o(this,n),l(Object.getPrototypeOf(n.prototype),"constructor",this).apply(this,arguments)}a(t,e),i(t,[{key:"render",value:function(){var e=this.props,t=e.id,n=e.name,r=e.condsTxt,o=e.isAllowedEdit,a=e.isDragging,i=e.connectDragSource,l=e.connectDropTarget,s=e.editFilter,c=e.delFilter,d=a?0:1,p={"float":"right",cursor:"pointer",marginLeft:"5px"};return i(l(u.default.createElement("div",{style:{opacity:d},className:"filter-dragcard dragcard"},u.default.createElement("span",{style:{fontWeight:600}},n)," -- ",u.default.createElement("span",null,r),o&&!!c&&u.default.createElement("span",{style:p,onClick:function(){c(t)},title:"删除",className:"rm-icon"},u.default.createElement("i",{className:"fa fa-trash"})),o&&!!s&&u.default.createElement("span",{style:p,onClick:function(){s(t)},title:"编辑",className:"edit-icon"},u.default.createElement("i",{className:"fa fa-edit"})))))}}],[{key:"propTypes",value:{connectDragSource:s.PropTypes.func.isRequired,connectDropTarget:s.PropTypes.func.isRequired,index:s.PropTypes.number.isRequired,isDragging:s.PropTypes.bool.isRequired,id:s.PropTypes.any.isRequired,name:s.PropTypes.string.isRequired,condsTxt:s.PropTypes.string.isRequired,isAllowedEdit:s.PropTypes.bool.isRequired,editFilter:s.PropTypes.func,delFilter:s.PropTypes.func,setRank:s.PropTypes.func.isRequired,moveCard:s.PropTypes.func.isRequired},enumerable:!0}]);var n=t;return t=(0,d.DragSource)(function(e){return e.isAllowedEdit?p.CardTypes.KANBAN_FILTER:""},f,function(e,t){return{connectDragSource:e.dragSource(),isDragging:t.isDragging()}})(t)||t,t=(0,d.DropTarget)(p.CardTypes.KANBAN_FILTER,m,function(e){return{connectDropTarget:e.dropTarget()}})(t)||t}(s.Component);t.default=h,e.exports=t.default}).call(this)}finally{}},1901:function(e,t,n){try{(function(){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function(e,t,n){for(var r=!0;r;){var o=e,a=t,i=n;r=!1,null===o&&(o=Function.prototype);var l=Object.getOwnPropertyDescriptor(o,a);if(void 0!==l){if("value"in l)return l.value;var s=l.get;if(void 0===s)return;return s.call(i)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=a,n=i,r=!0,l=u=void 0}},s=n(1),u=r(s),c=n(56),d=r(c),p=n(3),f=r(p),m=n(1900),h=r(m),y=function(e){function t(e){o(this,t),l(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={cards:[],ecode:0},this.state.cards=e.filters,this.kid=e.kid,this.setRank=this.setRank.bind(this)}return a(t,e),i(t,[{key:"componentWillReceiveProps",value:function(e){this.kid===e.kid&&f.default.isEqual(f.default.sortByOrder(this.state.cards||[],["no"]),f.default.sortByOrder(e.filters||[],["no"]))||(this.state.cards=e.filters)}},{key:"moveCard",value:function(e,t){var n=this.state.cards,r=n[e];this.setState((0,d.default)(this.state,{cards:{$splice:[[e,1],[t,0,r]]}}))}},{key:"setRank",value:function(){var e=this.props.update;e({id:this.kid,filters:this.state.cards})}},{key:"render",value:function(){var e=this,t=this.props,n=t.isAllowedEdit,r=t.condsTxt,o=t.editFilter,a=t.delFilter,i=this.state.cards;return u.default.createElement("div",{style:{marginBottom:"10px"}},f.default.map(i,function(t,i){return u.default.createElement(h.default,{isAllowedEdit:n,key:t.no,index:i,id:t.no,name:t.name,condsTxt:r(t.query||{}),editFilter:o,delFilter:a,setRank:e.setRank,moveCard:e.moveCard.bind(e)})}))}}],[{key:"propTypes",value:{isAllowedEdit:s.PropTypes.bool.isRequired,kid:s.PropTypes.string.isRequired,editFilter:s.PropTypes.func.isRequired,delFilter:s.PropTypes.func.isRequired,update:s.PropTypes.func.isRequired,condsTxt:s.PropTypes.func.isRequired,filters:s.PropTypes.array.isRequired},enumerable:!0}]),t}(s.Component);t.default=y,e.exports=t.default}).call(this)}finally{}},1902:function(e,t,n){try{(function(){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(e,t,n){for(var r=!0;r;){var o=e,a=t,i=n;r=!1,null===o&&(o=Function.prototype);var l=Object.getOwnPropertyDescriptor(o,a);if(void 0!==l){if("value"in l)return l.value;var s=l.get;if(void 0===s)return;return s.call(i)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=a,n=i,r=!0,l=u=void 0}},u=n(1),c=r(u),d=n(8),p=n(2),f=n(7),m=r(f),h=n(3),y=r(h),g=n(5),v=n(4),b=function(e,t){var n={};if(e.name?y.default.findIndex(t.collection||[],{name:e.name})!==-1&&(n.name="该名称已存在"):n.name="必填",e.bgColor){var r=new RegExp(/^#[0-9a-fA-F]{6}$/);r.test(e.bgColor)||(n.bgColor="格式错误")}else n.bgColor="必选";return n},w=function(e){function t(e){o(this,n),s(Object.getPrototypeOf(n.prototype),"constructor",this).call(this,e),this.state={ecode:0},this.handleSubmit=this.handleSubmit.bind(this),this.handleCancel=this.handleCancel.bind(this)}a(t,e),l(t,[{key:"handleSubmit",value:function(){var e,t,n,r,o;return regeneratorRuntime.async(function(a){for(;;)switch(a.prev=a.next){case 0:return e=this.props,t=e.values,n=e.create,r=e.close,a.next=6,regeneratorRuntime.awrap(n(t));case 6:o=a.sent,0===o?(this.setState({ecode:0}),r(),g.notify.show("新建完成。","success",2e3)):this.setState({ecode:o});case 8:case"end":return a.stop()}},null,this)}},{key:"handleCancel",value:function(){var e=this.props,t=e.close,n=e.submitting;n||(this.setState({ecode:0}),t())}},{key:"render",value:function(){var e=this.props,t=e.i18n.errMsg,n=e.fields,r=n.name,o=n.bgColor,a=e.handleSubmit,l=e.invalid,s=e.submitting,u=["#815b3a","#f79232","#d39c3f","#654982","#4a6785","#8eb021","#3b7fc4","#f15c75","#ac707a"],d=y.default.map(u,function(e){return{value:e,label:c.default.createElement("span",{className:"select-color",style:{marginTop:"7px",backgroundColor:e}})}});return c.default.createElement(p.Modal,{show:!0,onHide:this.handleCancel,backdrop:"static","aria-labelledby":"contained-modal-title-sm"},c.default.createElement(p.Modal.Header,{closeButton:!0},c.default.createElement(p.Modal.Title,{id:"contained-modal-title-la"},"创建Epic")),c.default.createElement("form",{onSubmit:a(this.handleSubmit),onKeyDown:function(e){13==e.keyCode&&e.preventDefault()}},c.default.createElement(p.Modal.Body,null,c.default.createElement(p.FormGroup,{controlId:"formControlsText",validationState:r.touched&&r.error?"error":null},c.default.createElement(p.ControlLabel,null,c.default.createElement("span",{className:"txt-impt"},"*"),"名称"),c.default.createElement(p.FormControl,i({disabled:s,type:"text"},r,{placeholder:"Epic名称"})),r.touched&&r.error&&c.default.createElement(p.HelpBlock,{style:{"float":"right"}},r.error)),c.default.createElement(p.FormGroup,{controlId:"formControlsText",validationState:o.touched&&o.error?"error":null},c.default.createElement(p.ControlLabel,null,c.default.createElement("span",{className:"txt-impt"},"*"),"背景色"),c.default.createElement(m.default,{simpleValue:!0,disabled:s,options:d,clearable:!1,searchable:!1,value:o.value,onChange:function(e){o.onChange(e)},placeholder:"请选择背景色"}))),c.default.createElement(p.Modal.Footer,null,c.default.createElement("span",{className:"ralign"},0!==this.state.ecode&&!s&&t[this.state.ecode]),c.default.createElement("img",{src:v,className:s?"loading":"hide"}),c.default.createElement(p.Button,{disabled:s||l,type:"submit"},"确定"),c.default.createElement(p.Button,{bsStyle:"link",disabled:s,onClick:this.handleCancel},"取消"))))}}],[{key:"propTypes",value:{i18n:u.PropTypes.object.isRequired,submitting:u.PropTypes.bool,invalid:u.PropTypes.bool,values:u.PropTypes.object,fields:u.PropTypes.object,handleSubmit:u.PropTypes.func.isRequired,close:u.PropTypes.func.isRequired,create:u.PropTypes.func.isRequired},enumerable:!0}]);var n=t;return t=(0,d.reduxForm)({form:"epic",fields:["name","bgColor"],validate:b})(t)||t}(u.Component);t.default=w,e.exports=t.default}).call(this)}finally{}},1903:function(e,t,n){try{(function(){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function(e,t,n){for(var r=!0;r;){var o=e,a=t,i=n;r=!1,null===o&&(o=Function.prototype);var l=Object.getOwnPropertyDescriptor(o,a);if(void 0!==l){if("value"in l)return l.value;var s=l.get;if(void 0===s)return;return s.call(i)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=a,n=i,r=!0,l=u=void 0}},s=n(1),u=r(s),c=n(2),d=n(7),p=r(d),f=n(5),m=n(3),h=r(m),y=n(4),g=function(e){function t(e){o(this,t),l(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={ecode:0,operate_flg:"0",swapEpic:""},this.confirm=this.confirm.bind(this),this.cancel=this.cancel.bind(this)}return a(t,e),i(t,[{key:"confirm",value:function(){var e,t,n,r,o,a;return regeneratorRuntime.async(function(i){for(;;)switch(i.prev=i.next){case 0:return e=this.props,t=e.close,n=e.del,r=e.index,o=e.data,i.next=7,regeneratorRuntime.awrap(n(h.default.extend({},{id:o.id},{operate_flg:this.state.operate_flg,swap_epic:this.state.swapEpic})));case 7:a=i.sent,0===a&&(t(),f.notify.show("删除完成。","success",2e3),r()),this.setState({ecode:a});case 10:case"end":return i.stop()}},null,this)}},{key:"cancel",value:function(){var e=this.props,t=e.close,n=e.loading;n||t()}},{key:"render",value:function(){var e=this,t=this.props,n=t.i18n.errMsg,r=t.data,o=t.epics,a=t.loading;return u.default.createElement(c.Modal,{show:!0,onHide:this.cancel,backdrop:"static","aria-labelledby":"contained-modal-title-sm"},u.default.createElement(c.Modal.Header,{closeButton:!0},u.default.createElement(c.Modal.Title,{id:"contained-modal-title-la"},"删除Epic - ",r.name)),u.default.createElement(c.Modal.Body,null,r.is_used?u.default.createElement("div",{className:"info-col",style:{marginTop:"5px"}},u.default.createElement("div",{className:"info-icon"},u.default.createElement("i",{className:"fa fa-info-circle"})),u.default.createElement("div",{className:"info-content"},"有问题和此Epic关联，请选择以下操作。")):u.default.createElement("div",{className:"info-col",style:{marginTop:"5px"}},u.default.createElement("div",{className:"info-icon"},u.default.createElement("i",{className:"fa fa-info-circle"})),u.default.createElement("div",{className:"info-content"},"没有问题和此Epic关联，可放心删除。")),r.is_used&&u.default.createElement("div",{style:{margin:"20px 10px 10px 10px"}},u.default.createElement("div",{style:{display:"inline-block",verticalAlign:"top"}},"修复问题"),u.default.createElement("div",{style:{display:"inline-block",marginLeft:"20px"}},u.default.createElement(c.FormGroup,null,u.default.createElement(c.Radio,{inline:!0,name:"swap",onClick:function(){e.setState({operate_flg:"1"})},checked:"1"===this.state.operate_flg},"移动至Epic"),u.default.createElement("div",{style:{width:"300px",margin:"5px 5px 10px 18px"}},u.default.createElement(p.default,{simpleValue:!0,clearable:!1,disabled:"1"!==this.state.operate_flg,options:h.default.map(h.default.reject(o,{id:r.id}),function(e){return{value:e.id,label:e.name}}),value:this.state.swapEpic,onChange:function(t){e.setState({swapEpic:t})},placeholder:"选择Epic"})),u.default.createElement(c.Radio,{inline:!0,name:"remove",onClick:function(){e.setState({operate_flg:"2"})},checked:"2"===this.state.operate_flg},"移除Epic"))))),u.default.createElement(c.Modal.Footer,null,u.default.createElement("span",{className:"ralign"},0!==this.state.ecode&&!a&&n[this.state.ecode]),u.default.createElement("img",{src:y,className:a?"loading":"hide"}),u.default.createElement(c.Button,{onClick:this.confirm,disabled:a||r.is_used&&"0"===this.state.operate_flg||"1"===this.state.operate_flg&&!this.state.swapEpic},"确定"),u.default.createElement(c.Button,{bsStyle:"link",onClick:this.cancel},"取消")))}}],[{key:"propTypes",value:{i18n:s.PropTypes.object.isRequired,close:s.PropTypes.func.isRequired,index:s.PropTypes.func.isRequired,del:s.PropTypes.func.isRequired,epics:s.PropTypes.array.isRequired,loading:s.PropTypes.bool.isRequired,data:s.PropTypes.object.isRequired},enumerable:!0}]),t}(s.Component);t.default=g,e.exports=t.default}).call(this)}finally{}},1904:function(e,t,n){try{(function(){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(e,t,n){for(var r=!0;r;){var o=e,a=t,i=n;r=!1,null===o&&(o=Function.prototype);var l=Object.getOwnPropertyDescriptor(o,a);if(void 0!==l){if("value"in l)return l.value;var s=l.get;if(void 0===s)return;return s.call(i)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=a,n=i,r=!0,l=u=void 0}},u=n(1),c=r(u),d=n(8),p=n(2),f=n(7),m=r(f),h=n(3),y=r(h),g=n(5),v=n(4),b=function(e,t){var n={};if(e.name?t.data.name!==e.name&&y.default.findIndex(t.collection||[],{name:e.name})!==-1&&(n.name="该名称已存在"):n.name="必填",e.bgColor){var r=new RegExp(/^#[0-9a-fA-F]{6}$/);r.test(e.bgColor)||(n.bgColor="格式错误")}else n.bgColor="必选";return n},w=function(e){function t(e){o(this,n),s(Object.getPrototypeOf(n.prototype),"constructor",this).call(this,e),this.state={ecode:0},this.handleSubmit=this.handleSubmit.bind(this),this.handleCancel=this.handleCancel.bind(this)}a(t,e),l(t,[{key:"handleSubmit",value:function(){var e,t,n,r,o;return regeneratorRuntime.async(function(a){for(;;)switch(a.prev=a.next){case 0:return e=this.props,t=e.values,n=e.update,r=e.close,a.next=6,regeneratorRuntime.awrap(n(t));case 6:o=a.sent,0===o?(this.setState({ecode:0}),r(),g.notify.show("更新完成。","success",2e3)):this.setState({ecode:o});case 8:case"end":return a.stop()}},null,this)}},{key:"componentWillMount",value:function(){var e=this.props,t=e.initializeForm,n=e.data;t(n)}},{key:"handleCancel",value:function(){var e=this.props,t=e.close,n=e.submitting;n||(this.setState({ecode:0}),t())}},{key:"render",value:function(){var e=this.props,t=e.i18n.errMsg,n=e.fields,r=n.id,o=n.name,a=n.bgColor,l=(n.description,e.dirty),s=e.handleSubmit,u=e.invalid,d=e.submitting,f=["#815b3a","#f79232","#d39c3f","#654982","#4a6785","#8eb021","#3b7fc4","#f15c75","#ac707a"],h=y.default.map(f,function(e){return{value:e,label:c.default.createElement("span",{className:"select-color",style:{marginTop:"7px",backgroundColor:e}})}});return c.default.createElement(p.Modal,{show:!0,onHide:this.handleCancel,backdrop:"static","aria-labelledby":"contained-modal-title-sm"},c.default.createElement(p.Modal.Header,{closeButton:!0},c.default.createElement(p.Modal.Title,{id:"contained-modal-title-la"},"编辑Epic")),c.default.createElement("form",{onSubmit:s(this.handleSubmit),onKeyDown:function(e){13==e.keyCode&&e.preventDefault()}},c.default.createElement(p.Modal.Body,null,c.default.createElement(p.FormGroup,{controlId:"formControlsText",validationState:o.touched&&o.error?"error":null},c.default.createElement(p.ControlLabel,null,c.default.createElement("span",{className:"txt-impt"},"*"),"名称"),c.default.createElement(p.FormControl,i({type:"hidden"},r)),c.default.createElement(p.FormControl,i({disabled:d,type:"text"},o,{placeholder:"优先级名"})),o.touched&&o.error&&c.default.createElement(p.HelpBlock,{style:{"float":"right"}},o.error)),c.default.createElement(p.FormGroup,{controlId:"formControlsText",validationState:a.touched&&a.error?"error":null},c.default.createElement(p.ControlLabel,null,c.default.createElement("span",{className:"txt-impt"},"*"),"背景色"),c.default.createElement(m.default,{simpleValue:!0,disabled:d,options:h,clearable:!1,searchable:!1,value:a.value,onChange:function(e){a.onChange(e)},placeholder:"请选择背景色"}))),c.default.createElement(p.Modal.Footer,null,c.default.createElement("span",{className:"ralign"},0!==this.state.ecode&&!d&&t[this.state.ecode]),c.default.createElement("img",{src:v,className:d?"loading":"hide"}),c.default.createElement(p.Button,{disabled:!l||d||u,type:"submit"},"确定"),c.default.createElement(p.Button,{bsStyle:"link",disabled:d,onClick:this.handleCancel},"取消"))))}}],[{key:"propTypes",value:{i18n:u.PropTypes.object.isRequired,submitting:u.PropTypes.bool,invalid:u.PropTypes.bool,dirty:u.PropTypes.bool,values:u.PropTypes.object,fields:u.PropTypes.object,handleSubmit:u.PropTypes.func.isRequired,close:u.PropTypes.func.isRequired,initializeForm:u.PropTypes.func.isRequired,data:u.PropTypes.object.isRequired,update:u.PropTypes.func.isRequired},enumerable:!0}]);var n=t;return t=(0,d.reduxForm)({form:"epic",fields:["id","name","bgColor"],validate:b})(t)||t}(u.Component);t.default=w,e.exports=t.default}).call(this)}finally{}},1905:function(e,t,n){try{(function(){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function(e,t,n){for(var r=!0;r;){var o=e,a=t,i=n;r=!1,null===o&&(o=Function.prototype);var l=Object.getOwnPropertyDescriptor(o,a);if(void 0!==l){if("value"in l)return l.value;var s=l.get;if(void 0===s)return;return s.call(i)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=a,n=i,r=!0,l=u=void 0}},s=n(1),u=r(s),c=n(21),d=n(31),p=n(2),f=n(1904),m=n(1903),h=n(4),y=function(e){function t(e){o(this,t),l(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={editModalShow:!1,delNotifyShow:!1,operateShow:!1,hoverRowId:""},this.editModalClose=this.editModalClose.bind(this),this.delNotifyClose=this.delNotifyClose.bind(this)}return a(t,e),i(t,[{key:"componentWillMount",value:function(){var e=this.props.index;e()}},{key:"editModalClose",value:function(){this.setState({editModalShow:!1})}},{key:"delNotifyClose",value:function(){this.setState({delNotifyShow:!1})}},{key:"edit",value:function(e){var t;return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:this.setState({editModalShow:!0}),t=this.props.select,t(e);case 3:case"end":return n.stop()}},null,this)}},{key:"delNotify",value:function(e){this.setState({delNotifyShow:!0});var t=this.props.select;t(e)}},{key:"operateSelect",value:function(e){var t=this.state.hoverRowId,n=this.props,r=n.gotoBacklog,o=n.gotoIssueList,a=n.gotoGantt;"1"===e?this.edit(t):"2"===e?this.delNotify(t):"3"===e?o({epic:t}):"4"===e?r(t):"5"===e&&a({epic:t})}},{key:"onRowMouseOver",value:function(e){e.id!==this.state.hoverRowId&&this.setState({operateShow:!0,hoverRowId:e.id})}},{key:"onMouseLeave",value:function(){this.setState({operateShow:!1,hoverRowId:""})}},{key:"render",value:function(){for(var e=this.props,t=e.i18n,n=e.options,r=e.stateOptions,o=void 0===r?{}:r,a=e.collection,i=e.selectedItem,l=e.indexLoading,s=e.loading,y=e.del,g=e.update,v=e.index,b=this.state,w=b.hoverRowId,E=b.operateShow,k=u.default.createElement("span",null,u.default.createElement("i",{className:"fa fa-cog"})),_=[],x=a.length,C=0;C<x;C++)_.push({id:a[C].id,name:u.default.createElement("span",{className:"epic-title",title:a[C].name,style:{backgroundColor:a[C].bgColor,borderColor:a[C].bgColor,maxWith:"10em"}},a[C].name),bgColor:u.default.createElement("div",{className:"select-color",style:{backgroundColor:a[C].bgColor||"#ccc"}}),issues:u.default.createElement("ul",{style:{marginBottom:"0px",paddingLeft:"0px",listStyle:"none"}},u.default.createElement("li",null,"已完成 - ",u.default.createElement(c.Link,{to:"/project/"+a[C].project_key+"/issue?epic="+a[C].id+"&state="+(o.completed_states||[]).join(",")},a[C].completed||0)),u.default.createElement("li",null,"未完成 - ",u.default.createElement(c.Link,{to:"/project/"+a[C].project_key+"/issue?epic="+a[C].id+"&state="+(o.incompleted_states||[]).join(",")},u.default.createElement("span",{style:{color:"red"}},a[C].incompleted||0))),u.default.createElement("li",null,"不明确 - ",a[C].inestimable||0)),operation:u.default.createElement("div",null,E&&w===a[C].id&&u.default.createElement(p.DropdownButton,{pullRight:!0,bsStyle:"link",style:{textDecoration:"blink",color:"#000"},key:C,title:k,id:"dropdown-basic-"+C,onSelect:this.operateSelect.bind(this)},n.permissions&&n.permissions.indexOf("manage_project")!==-1&&u.default.createElement(p.MenuItem,{eventKey:"1"},"编辑"),n.permissions&&n.permissions.indexOf("manage_project")!==-1&&u.default.createElement(p.MenuItem,{eventKey:"2"},"删除"),n.permissions&&n.permissions.indexOf("manage_project")!==-1&&u.default.createElement(p.MenuItem,{divider:!0}),u.default.createElement(p.MenuItem,{eventKey:"3"},"问题列表"),u.default.createElement(p.MenuItem,{eventKey:"4"},"Backlog列表"),u.default.createElement(p.MenuItem,{eventKey:"5"},"甘特图")))});var S={};return l?S.noDataText=u.default.createElement("div",null,u.default.createElement("img",{src:h,className:"loading"})):S.noDataText="暂无数据显示。",S.onRowMouseOver=this.onRowMouseOver.bind(this),u.default.createElement("div",{style:{marginLeft:"10px",marginTop:"-15px",overflowY:"auto",height:"100%"}},u.default.createElement("div",{className:"info-col"},u.default.createElement("div",{className:"info-icon"},u.default.createElement("i",{className:"fa fa-info-circle"})),u.default.createElement("div",{className:"info-content"},"若Epic信息修改后，创建、编辑问题页面Epic内容没及时更新，请刷新页面。")),u.default.createElement(d.BootstrapTable,{hover:!0,data:_,bordered:!1,tableStyle:{marginBottom:"230px"},options:S,trClassName:"tr-middle"},u.default.createElement(d.TableHeaderColumn,{dataField:"id",isKey:!0,hidden:!0},"ID"),u.default.createElement(d.TableHeaderColumn,{dataField:"name"},"名称"),u.default.createElement(d.TableHeaderColumn,{dataField:"issues"},"问题完成情况"),u.default.createElement(d.TableHeaderColumn,{width:"60",dataField:"operation"})),this.state.editModalShow&&u.default.createElement(f,{show:!0,close:this.editModalClose,update:g,data:i,collection:a,i18n:t}),this.state.delNotifyShow&&u.default.createElement(m,{show:!0,loading:s,close:this.delNotifyClose,index:v,epics:a,data:i,del:y,i18n:t}))}}],[{key:"propTypes",value:{i18n:s.PropTypes.object.isRequired,options:s.PropTypes.object.isRequired,stateOptions:s.PropTypes.object.isRequired,collection:s.PropTypes.array.isRequired,selectedItem:s.PropTypes.object.isRequired,indexLoading:s.PropTypes.bool.isRequired,loading:s.PropTypes.bool.isRequired,gotoBacklog:s.PropTypes.func.isRequired,gotoIssueList:s.PropTypes.func.isRequired,gotoGantt:s.PropTypes.func.isRequired,index:s.PropTypes.func.isRequired,select:s.PropTypes.func.isRequired,update:s.PropTypes.func.isRequired,del:s.PropTypes.func.isRequired},enumerable:!0}]),t}(s.Component);t.default=y,e.exports=t.default}).call(this)}finally{}},2079:function(e,t,n){try{(function(){"use strict";function e(e,t){return(0,x.asyncFuncCreator)({constant:"KANBAN_CREATE",promise:function(n){return n.request({url:"/project/"+e+"/kanban",method:"post",data:t})}})}function r(e,t,n){return(0,x.asyncFuncCreator)({constant:"KANBAN_UPDATE",promise:function(r){return r.request({url:"/project/"+e+"/kanban/"+t,
method:"put",data:n})}})}function o(e,t){return(0,x.asyncFuncCreator)({constant:"KANBAN_DELETE",id:t,promise:function(n){return n.request({url:"/project/"+e+"/kanban/"+t,method:"delete"})}})}function a(e){return(0,x.asyncFuncCreator)({constant:"KANBAN_LIST_GET",promise:function(t){return t.request({url:"/project/"+e+"/kanban"})}})}function i(e,t){return(0,x.asyncFuncCreator)({constant:"KANBAN_ISSUE_ACTIONS_GET",id:t,promise:function(n){return n.request({url:"/project/"+e+"/issue/"+t+"/wfactions"})}})}function l(e){return{type:"KANBAN_BACKLOG_ISSUE_DRAG",id:e}}function s(){return{type:"KANBAN_ISSUE_ACTIONS_CLEAN"}}function u(e,t){return(0,x.asyncFuncCreator)({constant:"KANBAN_ACCESS_RECORD",promise:function(n){return n.request({url:"/project/"+e+"/kanban/"+t+"/access"})}})}function c(e,t){return(0,x.asyncFuncCreator)({constant:"KANBAN_BACKLOG_ISSUE_MOVE",promise:function(n){return n.request({url:"/project/"+e+"/sprint/moveissue",data:t,method:"post"})}})}function d(e){return(0,x.asyncFuncCreator)({constant:"KANBAN_SPRINT_CREATE",promise:function(t){return t.request({url:"/project/"+e+"/sprint",data:{},method:"post"})}})}function p(e,t,n){return(0,x.asyncFuncCreator)({constant:"KANBAN_SPRINT_PUBLISH",promise:function(r){return r.request({url:"/project/"+e+"/sprint/"+t+"/publish",data:n,method:"post"})}})}function f(e,t,n){return(0,x.asyncFuncCreator)({constant:"KANBAN_SPRINT_COMPLETE",no:t,promise:function(r){return r.request({url:"/project/"+e+"/sprint/"+t+"/complete",data:n,method:"post"})}})}function m(e,t){return(0,x.asyncFuncCreator)({constant:"KANBAN_SPRINT_EDIT",promise:function(n){return n.request({url:"/project/"+e+"/sprint/"+t.no,data:t,method:"put"})}})}function h(e,t){return(0,x.asyncFuncCreator)({constant:"KANBAN_SPRINT_DELETE",promise:function(n){return n.request({url:"/project/"+e+"/sprint/"+t,method:"delete"})}})}function y(e,t,n){return(0,x.asyncFuncCreator)({constant:"KANBAN_SPRINT_LOG_GET",promise:function(r){return r.request({url:"/project/"+e+"/sprint/"+n+"/log?kanban_id="+t})}})}function g(e,t){return(0,x.asyncFuncCreator)({constant:"KANBAN_SPRINT_GET",promise:function(n){return n.request({url:"/project/"+e+"/sprint/"+t})}})}function v(e,t){return(0,x.asyncFuncCreator)({constant:"KANBAN_EPIC_INDEX",promise:function(n){return n.request({url:"/project/"+e+"/epic?kanban_id="+t})}})}function b(e,t){return(0,x.asyncFuncCreator)({constant:"KANBAN_EPIC_CREATE",promise:function(n){return n.request({url:"/project/"+e+"/epic",data:t,method:"post"})}})}function w(e,t){return(0,x.asyncFuncCreator)({constant:"KANBAN_EPIC_EDIT",promise:function(n){return n.request({url:"/project/"+e+"/epic/"+t.id,data:t,method:"put"})}})}function E(e,t){return(0,x.asyncFuncCreator)({constant:"KANBAN_EPIC_DELETE",id:t.id,promise:function(n){return n.request({url:"/project/"+e+"/epic/"+t.id+"/delete",data:t,method:"post"})}})}function k(e,t){return(0,x.asyncFuncCreator)({constant:"KANBAN_EPIC_SET_SORT",promise:function(n){return n.request({url:"/project/"+e+"/epic/batch",method:"post",data:t})}})}function _(e){return{type:"KANBAN_EPIC_SELECT",id:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.create=e,t.edit=r,t.del=o,t.getOptions=a,t.getDraggableActions=i,t.dragBacklogIssue=l,t.cleanDraggableActions=s,t.recordAccess=u,t.moveSprintIssue=c,t.createSprint=d,t.publishSprint=p,t.completeSprint=f,t.updateSprint=m,t.deleteSprint=h,t.getSprintLog=y,t.getSprint=g,t.indexEpic=v,t.createEpic=b,t.editEpic=w,t.delEpic=E,t.setEpicSort=k,t.selectEpic=_;var x=n(27)}).call(this)}finally{}}});
//# sourceMappingURL=kanban-22330d39961866779fe1.js.map