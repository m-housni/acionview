webpackJsonp([21],{41:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function l(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}Object.defineProperty(t,"__esModule",{value:!0}),t.CheckboxGroup=t.Checkbox=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},o=a(1),i=n(o);t.Checkbox=i.default.createClass({displayName:"Checkbox",contextTypes:{checkboxGroup:i.default.PropTypes.object.isRequired},componentWillMount:function(){if(!this.context||!this.context.checkboxGroup)throw new Error("The `Checkbox` component must be used as a child of `CheckboxGroup`.")},render:function(){var e=this.context.checkboxGroup,t=e.name,a=e.checkedValues,n=e.onChange,l={};return a&&(l.checked=a.indexOf(this.props.value)>=0),"function"==typeof n&&(l.onChange=n.bind(null,this.props.value)),i.default.createElement("input",r({},this.props,{type:"checkbox",name:t},l))}}),t.CheckboxGroup=i.default.createClass({displayName:"CheckboxGroup",propTypes:{name:o.PropTypes.string,defaultValue:o.PropTypes.array,value:o.PropTypes.array,onChange:o.PropTypes.func,children:o.PropTypes.node.isRequired,Component:o.PropTypes.oneOfType([o.PropTypes.string,o.PropTypes.func,o.PropTypes.object])},getDefaultProps:function(){return{Component:"div"}},childContextTypes:{checkboxGroup:i.default.PropTypes.object},getChildContext:function(){return{checkboxGroup:{name:this.props.name,checkedValues:this.state.value,onChange:this._onCheckboxChange}}},getInitialState:function(){return{value:this.props.value||this.props.defaultValue||[]}},componentWillReceiveProps:function(e){e.value&&this.setState({value:e.value})},render:function(){var e=this.props,t=e.Component,a=(e.name,e.value,e.onChange,e.children),n=l(e,["Component","name","value","onChange","children"]);return i.default.createElement(t,n,a)},getValue:function(){return this.state.value},_isControlledComponent:function(){return!!this.props.value},_onCheckboxChange:function(e,t){var a;a=t.target.checked?this.state.value.concat(e):this.state.value.filter(function(t){return t!==e}),this._isControlledComponent()?this.setState({value:this.props.value}):this.setState({value:a}),"function"==typeof this.props.onChange&&this.props.onChange(a)}})},1992:function(e,t,a){try{(function(){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=function(e,t,a){for(var n=!0;n;){var l=e,r=t,o=a;n=!1,null===l&&(l=Function.prototype);var i=Object.getOwnPropertyDescriptor(l,r);if(void 0!==i){if("value"in i)return i.value;var s=i.get;if(void 0===s)return;return s.call(o)}var u=Object.getPrototypeOf(l);if(null===u)return;e=u,t=r,a=o,n=!0,i=u=void 0}},s=a(1),u=n(s),c=a(8),d=a(2),p=a(7),f=n(p),m=a(3),h=n(m),y=a(38),b=n(y),v=a(5),E=a(4),g=function(e){function t(e){l(this,a),i(Object.getPrototypeOf(a.prototype),"constructor",this).call(this,e),this.state={ecode:0},this.handleSubmit=this.handleSubmit.bind(this),this.handleCancel=this.handleCancel.bind(this)}r(t,e),o(t,[{key:"handleSubmit",value:function(){var e,t,a,n,l;return regeneratorRuntime.async(function(r){for(;;)switch(r.prev=r.next){case 0:return e=this.props,t=e.values,a=e.update,n=e.close,r.next=6,regeneratorRuntime.awrap(a({sysroles:t}));case 6:l=r.sent,0===l?(this.setState({ecode:0}),n(),v.notify.show("配置完成。","success",2e3)):this.setState({ecode:l});case 8:case"end":return r.stop()}},null,this)}},{key:"handleCancel",value:function(){var e=this.props,t=e.close,a=e.submitting;a||(this.setState({ecode:0}),t())}},{key:"componentWillMount",value:function(){var e=this.props,t=e.initializeForm,a=e.data;h.default.map(a.sys_admin||[],function(e,t){a.sys_admin[t].nameAndEmail=e.name+"("+e.email+")"}),t(a)}},{key:"searchUsers",value:function(e){var t,a;return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:if(e=e.toLowerCase()){n.next=3;break}return n.abrupt("return",{options:[]});case 3:return t=new b.default,n.next=6,regeneratorRuntime.awrap(t.request({url:"/user/search?s="+e}));case 6:return a=n.sent,n.abrupt("return",{options:h.default.map(a.data,function(e){return e.nameAndEmail=e.name+"("+e.email+")",e})});case 8:case"end":return n.stop()}},null,this)}},{key:"render",value:function(){var e=this.props,t=e.i18n.errMsg,a=e.fields.sys_admin,n=e.handleSubmit,l=e.submitting;return u.default.createElement(d.Modal,{show:!0,onHide:this.handleCancel,backdrop:"static","aria-labelledby":"contained-modal-title-sm"},u.default.createElement(d.Modal.Header,{closeButton:!0},u.default.createElement(d.Modal.Title,{id:"contained-modal-title-la"},"角色配置")),u.default.createElement("form",{onSubmit:n(this.handleSubmit),onKeyDown:function(e){13==e.keyCode&&e.preventDefault()}},u.default.createElement(d.Modal.Body,null,u.default.createElement(d.FormGroup,{controlId:"formControlsText"},u.default.createElement(d.ControlLabel,null,"系统管理员"),u.default.createElement(f.default.Async,{multi:!0,clearable:!1,disabled:l,options:[],value:a.value,onChange:function(e){a.onChange(e)},valueKey:"id",labelKey:"nameAndEmail",loadOptions:this.searchUsers.bind(this),placeholder:"输入用户"}))),u.default.createElement(d.Modal.Footer,null,u.default.createElement("span",{className:"ralign"},0!==this.state.ecode&&!l&&t[this.state.ecode]),u.default.createElement("img",{src:E,className:l?"loading":"hide"}),u.default.createElement(d.Button,{disabled:l,type:"submit"},"确定"),u.default.createElement(d.Button,{bsStyle:"link",disabled:l,onClick:this.handleCancel},"取消"))))}}],[{key:"propTypes",value:{i18n:s.PropTypes.object.isRequired,data:s.PropTypes.object.isRequired,submitting:s.PropTypes.bool,values:s.PropTypes.object,fields:s.PropTypes.object,handleSubmit:s.PropTypes.func.isRequired,initializeForm:s.PropTypes.func.isRequired,update:s.PropTypes.func.isRequired,close:s.PropTypes.func.isRequired},enumerable:!0}]);var a=t;return t=(0,c.reduxForm)({form:"syssetting",fields:["sys_admin"]})(t)||t}(s.Component);t.default=g,e.exports=t.default}).call(this)}finally{}},1993:function(e,t,a){try{(function(){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function l(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e){return{actions:(0,m.bindActionCreators)(y,e)}}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},u=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),c=function(e,t,a){for(var n=!0;n;){var l=e,r=t,o=a;n=!1,null===l&&(l=Function.prototype);var i=Object.getOwnPropertyDescriptor(l,r);if(void 0!==i){if("value"in i)return i.value;var s=i.get;if(void 0===s)return;return s.call(o)}var u=Object.getPrototypeOf(l);if(null===u)return;e=u,t=r,a=o,n=!0,i=u=void 0}},d=a(1),p=l(d),f=a(22),m=a(23),h=a(2093),y=n(h),b=a(3),v=l(b),E=a(5),g=a(1994),w=function(e){function t(e){r(this,a),c(Object.getPrototypeOf(a.prototype),"constructor",this).call(this,e),this.pid=""}o(t,e),u(t,[{key:"show",value:function(){return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(this.props.actions.show());case 2:return e.abrupt("return",this.props.syssetting.ecode);case 3:case"end":return e.stop()}},null,this)}},{key:"update",value:function(e){return regeneratorRuntime.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(this.props.actions.update(e));case 2:return t.abrupt("return",this.props.syssetting.ecode);case 3:case"end":return t.stop()}},null,this)}},{key:"resetPwd",value:function(e){return regeneratorRuntime.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(this.props.actions.resetPwd(e));case 2:return t.abrupt("return",this.props.syssetting.ecode);case 3:case"end":return t.stop()}},null,this)}},{key:"sendTestMail",value:function(e){return regeneratorRuntime.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(this.props.actions.sendTestMail(e));case 2:return t.abrupt("return",this.props.syssetting.ecode);case 3:case"end":return t.stop()}},null,this)}},{key:"render",value:function(){var e=this.props,t=e.i18n,a=e.session;return v.default.isEmpty(a.user)?p.default.createElement("div",null):a.user.permissions&&a.user.permissions.sys_admin?p.default.createElement("div",{className:"doc-container"},p.default.createElement("div",null,p.default.createElement(g,s({show:this.show.bind(this),update:this.update.bind(this),resetPwd:this.resetPwd.bind(this),sendTestMail:this.sendTestMail.bind(this),i18n:t},this.props.syssetting)))):(E.notify.show(t.errMsg[-10002],"warning",2e3),p.default.createElement("div",null))}}],[{key:"propTypes",value:{actions:d.PropTypes.object.isRequired,session:d.PropTypes.object.isRequired,i18n:d.PropTypes.object.isRequired,syssetting:d.PropTypes.object.isRequired},enumerable:!0}]);var a=t;return t=(0,f.connect)(function(e){var t=e.i18n,a=e.session,n=e.syssetting;return{i18n:t,session:a,syssetting:n}},i)(t)||t}(d.Component);t.default=w,e.exports=t.default}).call(this)}finally{}},1994:function(e,t,a){try{(function(){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=function(e,t,a){for(var n=!0;n;){var l=e,r=t,o=a;n=!1,null===l&&(l=Function.prototype);var i=Object.getOwnPropertyDescriptor(l,r);if(void 0!==i){if("value"in i)return i.value;var s=i.get;if(void 0===s)return;return s.call(o)}var u=Object.getPrototypeOf(l);if(null===u)return;e=u,t=r,a=o,n=!0,i=u=void 0}},s=a(1),u=n(s),c=a(31),d=a(2),p=(a(41),a(5),a(3)),f=n(p),m=(a(4),a(1995)),h=a(2e3),y=a(1999),b=a(1998),v=(a(1996),a(1997)),E=a(1992),g=function(e){function t(e){l(this,t),i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={tabKey:"properties",propertiesModalShow:!1,timeTrackModalShow:!1,smtpServerModalShow:!1,sendTestMailModalShow:!1,setSendMailShow:!1,configActorModalShow:!1},this.propertiesModalClose=this.propertiesModalClose.bind(this),this.timeTrackModalClose=this.timeTrackModalClose.bind(this),this.smtpServerModalClose=this.smtpServerModalClose.bind(this),this.sendTestMailModalClose=this.sendTestMailModalClose.bind(this),this.setSendMailModalClose=this.setSendMailModalClose.bind(this),this.configActorModalClose=this.configActorModalClose.bind(this)}return r(t,e),o(t,[{key:"propertiesModalClose",value:function(){this.setState({propertiesModalShow:!1})}},{key:"timeTrackModalClose",value:function(){this.setState({timeTrackModalShow:!1})}},{key:"smtpServerModalClose",value:function(){this.setState({smtpServerModalShow:!1})}},{key:"sendTestMailModalClose",value:function(){this.setState({sendTestMailModalShow:!1})}},{key:"setSendMailModalClose",value:function(){this.setState({setSendMailShow:!1})}},{key:"configActorModalClose",value:function(){this.setState({configActorModalShow:!1})}},{key:"handleTabSelect",value:function(e){this.setState({tabKey:e})}},{key:"componentWillMount",value:function(){var e=this.props.show;e()}},{key:"render",value:function(){var e=this,t=this.props,a=t.i18n,n=t.update,l=(t.resetPwd,t.sendTestMail),r=t.loading,o=t.settings,i=o.properties,s=void 0===i?{}:i,p=o.timetrack,g=void 0===p?{}:p,w=o.mailserver,C=void 0===w?{}:w,T=o.sysroles,S=void 0===T?{}:T,P={marginTop:"10px",marginBottom:"10px"},_={"0d":"不保存","3m":"3个月","6m":"6个月","1y":"1年","2y":"2年"},k=[];k.push({id:"mail_domain",title:u.default.createElement("div",null,u.default.createElement("span",{className:"table-td-title"},"默认登录邮箱域名")),contents:u.default.createElement("div",null,s.login_mail_domain||"-")}),k.push({id:"allow_create_project",title:u.default.createElement("div",null,u.default.createElement("span",{className:"table-td-title"},"是否允许用户创建项目")),contents:u.default.createElement("div",null,1===s.allow_create_project?"是":"否")}),k.push({id:"http_host",title:u.default.createElement("div",null,u.default.createElement("span",{className:"table-td-title"},"系统域名"),u.default.createElement("span",{className:"table-td-issue-desc"},"发送邮件正文、通知消息内容中使用")),contents:u.default.createElement("div",null,s.http_host||"-")}),k.push({id:"logssave",title:u.default.createElement("div",null,u.default.createElement("span",{className:"table-td-title"},"日志保存"),u.default.createElement("span",{className:"table-td-issue-desc"},"不建议保存时间过长，日志保存占用磁盘空间较大。")),contents:u.default.createElement("div",null,s.logs_save_duration&&_[s.logs_save_duration]||"6个月")}),k.push({id:"default_locale",title:u.default.createElement("div",null,u.default.createElement("span",{className:"table-td-title"},"默认语言"),u.default.createElement("span",{className:"table-td-issue-desc"},"不支持此功能配置")),contents:u.default.createElement("div",null,"中文")}),k.push({id:"ip",title:u.default.createElement("div",null,u.default.createElement("span",{className:"table-td-title"},"时间追踪"),u.default.createElement("span",{className:"table-td-issue-desc"},"建议启用此功能之前，确定此相关参数。若改动，可能会影响到原有问题的估算。")),contents:u.default.createElement("div",null,u.default.createElement("ul",{className:"list-unstyled clearfix",style:{lineHeight:2}},u.default.createElement("li",null,"每周有效工作日：",s.week2day?s.week2day+"天":"-"),u.default.createElement("li",null,"每天有效工作时间：",s.day2hour?s.day2hour+"小时":"-")))});var O=[];O.push({id:"week2day",title:u.default.createElement("div",null,u.default.createElement("span",{className:"table-td-title"},"每周有效工作日")),contents:u.default.createElement("div",null,g.week2day||5," 天")}),O.push({id:"day2hour",title:u.default.createElement("div",null,u.default.createElement("span",{className:"table-td-title"},"每天有效工作时间")),contents:u.default.createElement("div",null,g.day2hour||8," 小时")});var M=[];M.push({id:"mail",title:u.default.createElement("div",null,u.default.createElement("span",{className:"table-td-title"},"发送邮箱")),contents:u.default.createElement("div",{style:P},u.default.createElement("ul",{className:"list-unstyled clearfix",style:{lineHeight:2}},u.default.createElement("li",null,"发信地址：",C.send&&C.send.from||"-"),u.default.createElement("li",null,"邮件前缀：",C.send&&C.send.prefix||"-")),u.default.createElement(d.Button,{disabled:r,style:{marginLeft:"15px"},onClick:function(){e.setState({setSendMailShow:!0})}},"编辑邮箱"))}),M.push({id:"smtp",title:u.default.createElement("div",null,u.default.createElement("span",{className:"table-td-title"},"SMTP服务器")),contents:u.default.createElement("div",{style:P},u.default.createElement("ul",{className:"list-unstyled clearfix",style:{lineHeight:2}},u.default.createElement("li",null,"服务器：",C.smtp&&C.smtp.host||"-"),u.default.createElement("li",null,"端口：",C.smtp&&C.smtp.port||"-"),u.default.createElement("li",null,"加密：",C.smtp&&C.smtp.encryption||"无"),u.default.createElement("li",null,"帐号：",C.smtp&&C.smtp.username||"-"),u.default.createElement("li",null,"密码：",C.smtp&&C.smtp.password||"无")),u.default.createElement(d.Button,{disabled:r,style:{marginLeft:"15px"},onClick:function(){e.setState({smtpServerModalShow:!0})}},"编辑服务器"))});var j=[];j.push({id:"sysadmin",title:u.default.createElement("div",null,u.default.createElement("span",{className:"table-td-title"},"系统管理员")),contents:u.default.createElement("div",null,u.default.createElement("span",null,S.sys_admin&&S.sys_admin.length>0?f.default.map(S.sys_admin||[],function(e,t){return 0===t?e.name:", "+e.name}):"-"))});var x=[];return"properties"==this.state.tabKey?x=k:"timetrack"==this.state.tabKey?x=O:"mailserver"==this.state.tabKey?x=M:"sysroles"==this.state.tabKey&&(x=j),u.default.createElement("div",null,u.default.createElement(d.Nav,{bsStyle:"pills",style:{marginTop:"10px","float":"left",lineHeight:"1.0"},activeKey:this.state.tabKey,onSelect:this.handleTabSelect.bind(this)},u.default.createElement(d.NavItem,{eventKey:"properties",href:"#"},"通用设置"),u.default.createElement(d.NavItem,{eventKey:"mailserver",href:"#"},"邮件服务器"),u.default.createElement(d.NavItem,{eventKey:"sysroles",href:"#"},"系统角色")),u.default.createElement(c.BootstrapTable,{data:x,bordered:!1,hover:!0,trClassName:"tr-middle"},u.default.createElement(c.TableHeaderColumn,{dataField:"id",isKey:!0,hidden:!0},"ID"),u.default.createElement(c.TableHeaderColumn,{width:"260",dataField:"title"}),u.default.createElement(c.TableHeaderColumn,{width:"200",dataField:"contents"}),u.default.createElement(c.TableHeaderColumn,{dataField:"blank"})),"properties"==this.state.tabKey&&u.default.createElement("div",{style:{width:"100%",marginTop:"20px"}},u.default.createElement(d.Button,{disabled:r,onClick:function(){e.setState({propertiesModalShow:!0})}},"修改设置")),"mailserver"==this.state.tabKey&&u.default.createElement("div",{style:{width:"100%",marginTop:"20px"}},u.default.createElement(d.Button,{disabled:r,onClick:function(){e.setState({sendTestMailModalShow:!0})}},"发送测试邮件")),"sysroles"==this.state.tabKey&&u.default.createElement("div",{style:{width:"100%",marginTop:"20px"}},u.default.createElement(d.Button,{disabled:r,onClick:function(){e.setState({configActorModalShow:!0})}},"角色配置")),this.state.propertiesModalShow&&u.default.createElement(m,{show:!0,close:this.propertiesModalClose,update:n,data:s,i18n:a}),this.state.timeTrackModalShow&&u.default.createElement(h,{show:!0,close:this.timeTrackModalClose,update:n,data:g,i18n:a}),this.state.smtpServerModalShow&&u.default.createElement(y,{show:!0,close:this.smtpServerModalClose,update:n,data:C.smtp||{},i18n:a}),this.state.setSendMailShow&&u.default.createElement(b,{show:!0,close:this.setSendMailModalClose,update:n,data:C.send||{},i18n:a}),this.state.sendTestMailModalShow&&u.default.createElement(v,{show:!0,close:this.sendTestMailModalClose,sendMail:l,i18n:a}),this.state.configActorModalShow&&u.default.createElement(E,{show:!0,close:this.configActorModalClose,update:n,data:S,i18n:a}))}}],[{key:"propTypes",value:{i18n:s.PropTypes.object.isRequired,loading:s.PropTypes.bool.isRequired,settings:s.PropTypes.object.isRequired,show:s.PropTypes.func.isRequired,update:s.PropTypes.func.isRequired,resetPwd:s.PropTypes.func.isRequired,sendTestMail:s.PropTypes.func.isRequired},enumerable:!0}]),t}(s.Component);t.default=g,e.exports=t.default}).call(this)}finally{}},1995:function(e,t,a){try{(function(){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=function(e,t,a){for(var n=!0;n;){var l=e,r=t,o=a;n=!1,null===l&&(l=Function.prototype);var i=Object.getOwnPropertyDescriptor(l,r);if(void 0!==i){if("value"in i)return i.value;var s=i.get;if(void 0===s)return;return s.call(o)}var u=Object.getPrototypeOf(l);if(null===u)return;e=u,t=r,a=o,n=!0,i=u=void 0}},u=a(1),c=n(u),d=a(8),p=a(2),f=a(7),m=n(f),h=a(3),y=n(h),b=a(5),v=a(4),E=function(e,t){var a={};return e.login_mail_domain&&!/^[\w-]+([.][\w-]+)+$/.test(e.login_mail_domain)&&(a.login_mail_domain="格式有误"),a},g=function(e){function t(e){l(this,a),s(Object.getPrototypeOf(a.prototype),"constructor",this).call(this,e),this.state={ecode:0},this.handleSubmit=this.handleSubmit.bind(this),this.handleCancel=this.handleCancel.bind(this)}r(t,e),i(t,[{key:"componentWillMount",value:function(){var e=this.props,t=e.initializeForm,a=e.data;t(a)}},{key:"handleSubmit",value:function(){var e,t,a,n,l;return regeneratorRuntime.async(function(r){for(;;)switch(r.prev=r.next){case 0:return e=this.props,t=e.values,a=e.update,n=e.close,r.next=6,regeneratorRuntime.awrap(a({properties:y.default.pick(t,["login_mail_domain","allow_create_project","http_host","enable_login_protection","week2day","day2hour","logs_save_duration"])}));case 6:l=r.sent,0===l?(this.setState({ecode:0}),n(),b.notify.show("设置完成。","success",2e3)):this.setState({ecode:l});case 8:case"end":return r.stop()}},null,this)}},{key:"handleCancel",value:function(){var e=this.props,t=e.close,a=e.submitting;a||(this.setState({ecode:0}),t())}},{key:"render",value:function(){var e=this.props,t=e.i18n.errMsg,a=e.fields,n=a.login_mail_domain,l=a.allow_create_project,r=a.http_host,i=(a.enable_login_protection,a.week2day),s=a.day2hour,u=a.logs_save_duration,d=e.handleSubmit,f=e.invalid,h=e.dirty,y=e.submitting,b=(e.data,[{value:6,label:"6"},{value:5.5,label:"5.5"},{value:5,label:"5"},{value:4.5,label:"4.5"},{value:4,label:"4"}]),E=[{value:10,label:"10"},{value:9.5,label:"9.5"},{value:9,label:"9"},{value:8.5,label:"8.5"},{value:8,label:"8"},{value:7.5,label:"7.5"},{value:7,label:"7"},{value:6.5,label:"6.5"},{value:6,label:"6"}],g=[{value:"0d",label:"不保存"},{value:"3m",label:"3个月"},{value:"6m",label:"6个月"},{value:"1y",label:"1年"},{value:"2y",label:"2年"}];return c.default.createElement(p.Modal,{show:!0,onHide:this.handleCancel,backdrop:"static","aria-labelledby":"contained-modal-title-sm"},c.default.createElement(p.Modal.Header,{closeButton:!0},c.default.createElement(p.Modal.Title,{id:"contained-modal-title-la"},"通用设置")),c.default.createElement("form",{onSubmit:d(this.handleSubmit),onKeyDown:function(e){13==e.keyCode&&e.preventDefault()}},c.default.createElement(p.Modal.Body,null,c.default.createElement(p.FormGroup,{validationState:n.touched&&n.error?"error":null},c.default.createElement(p.ControlLabel,null,"默认登陆邮箱域名"),c.default.createElement(p.FormControl,o({disabled:y,type:"text"},n,{placeholder:"邮箱域名"})),n.touched&&n.error&&c.default.createElement(p.HelpBlock,{style:{"float":"right"}},n.error)),c.default.createElement(p.FormGroup,{validationState:r.touched&&r.error?"error":null},c.default.createElement(p.ControlLabel,null,"系统域名"),c.default.createElement(p.FormControl,o({disabled:y,type:"text"},r,{placeholder:"如:https://actionview.cn"})),r.touched&&r.error&&c.default.createElement(p.HelpBlock,{style:{"float":"right"}},r.error)),c.default.createElement("div",null,c.default.createElement(p.FormGroup,{style:{width:"45%",display:"inline-block"}},c.default.createElement(p.ControlLabel,null,"是否允许用户创建项目"),c.default.createElement(m.default,{simpleValue:!0,disabled:y,clearable:!1,searchable:!1,options:[{value:1,label:"是"},{value:0,label:"否"}],value:l.value||0,onChange:function(e){l.onChange(e)},placeholder:"请选择"})),c.default.createElement(p.FormGroup,{style:{width:"45%",display:"inline-block","float":"right"}},c.default.createElement(p.ControlLabel,null,"日志保存"),c.default.createElement(m.default,{simpleValue:!0,disabled:y,clearable:!1,searchable:!1,options:g,value:u.value||"6m",onChange:function(e){u.onChange(e)},placeholder:"请选择"}))),c.default.createElement("div",null,c.default.createElement(p.FormGroup,{style:{width:"45%",display:"inline-block"}},c.default.createElement(p.ControlLabel,null,"每周有效工作日(天)"),c.default.createElement(m.default,{simpleValue:!0,disabled:y,clearable:!1,searchable:!1,options:b,value:i.value,onChange:function(e){i.onChange(e)},placeholder:"请选择"})),c.default.createElement(p.FormGroup,{style:{width:"45%",display:"inline-block","float":"right"}},c.default.createElement(p.ControlLabel,null,"每天有效工作时间(小时)"),c.default.createElement(m.default,{simpleValue:!0,disabled:y,clearable:!1,searchable:!1,options:E,value:s.value,onChange:function(e){s.onChange(e)},placeholder:"请选择"})))),c.default.createElement(p.Modal.Footer,null,c.default.createElement("span",{className:"ralign"},0!==this.state.ecode&&!y&&t[this.state.ecode]),c.default.createElement("img",{src:v,className:y?"loading":"hide"}),c.default.createElement(p.Button,{disabled:!h||y||f,type:"submit"},"确定"),c.default.createElement(p.Button,{bsStyle:"link",disabled:y,onClick:this.handleCancel},"取消"))))}}],[{key:"propTypes",value:{i18n:u.PropTypes.object.isRequired,submitting:u.PropTypes.bool,invalid:u.PropTypes.bool,dirty:u.PropTypes.bool,values:u.PropTypes.object,fields:u.PropTypes.object,handleSubmit:u.PropTypes.func.isRequired,close:u.PropTypes.func.isRequired,data:u.PropTypes.object.isRequired,initializeForm:u.PropTypes.func.isRequired,update:u.PropTypes.func.isRequired},enumerable:!0}]);var a=t;return t=(0,d.reduxForm)({form:"syssetting",fields:["login_mail_domain","allow_create_project","http_host","week2day","day2hour","logs_save_duration"],validate:E})(t)||t}(u.Component);t.default=g,e.exports=t.default}).call(this)}finally{}},1996:function(e,t,a){try{(function(){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=function(e,t,a){for(var n=!0;n;){var l=e,r=t,o=a;n=!1,null===l&&(l=Function.prototype);var i=Object.getOwnPropertyDescriptor(l,r);if(void 0!==i){if("value"in i)return i.value;var s=i.get;if(void 0===s)return;return s.call(o)}var u=Object.getPrototypeOf(l);if(null===u)return;e=u,t=r,a=o,n=!0,i=u=void 0}},u=a(1),c=n(u),d=a(8),p=a(2),f=a(5),m=a(3),h=n(m),y=a(4),b=function(e,t){var a={};return e.send_auth_pwd||(a.send_auth_pwd="必填"),a},v=function(e){function t(e){l(this,a),s(Object.getPrototypeOf(a.prototype),"constructor",this).call(this,e),this.state={ecode:0},this.handleSubmit=this.handleSubmit.bind(this),this.handleCancel=this.handleCancel.bind(this)}r(t,e),i(t,[{key:"handleSubmit",value:function(){var e,t,a,n,l;return regeneratorRuntime.async(function(r){for(;;)switch(r.prev=r.next){case 0:return e=this.props,t=e.values,a=e.resetPwd,n=e.close,r.next=6,regeneratorRuntime.awrap(a({smpt:h.default.pick(t,["send_auth_pwd"])}));case 6:l=r.sent,0===l?(this.setState({ecode:0}),n(),f.notify.show("密码已设置。","success",2e3)):this.setState({ecode:l});case 8:case"end":return r.stop()}},null,this)}},{key:"handleCancel",value:function(){var e=this.props,t=e.close,a=e.submitting;a||(this.setState({ecode:0}),t())}},{key:"render",value:function(){var e=this.props,t=e.i18n.errMsg,a=e.fields.send_auth_pwd,n=e.handleSubmit,l=e.invalid,r=e.submitting;return c.default.createElement(p.Modal,{show:!0,onHide:this.handleCancel,backdrop:"static","aria-labelledby":"contained-modal-title-sm"},c.default.createElement(p.Modal.Header,{closeButton:!0},c.default.createElement(p.Modal.Title,{id:"contained-modal-title-la"},"密码设置")),c.default.createElement("form",{onSubmit:n(this.handleSubmit),onKeyDown:function(e){13==e.keyCode&&e.preventDefault()}},c.default.createElement(p.Modal.Body,null,c.default.createElement(p.FormGroup,{controlId:"formControlsText",validationState:a.touched&&a.error?"error":null},c.default.createElement(p.ControlLabel,null,c.default.createElement("span",{className:"txt-impt"},"*"),"验证密码"),c.default.createElement(p.FormControl,o({disabled:r,type:"password"},a,{placeholder:"新确认密码"})),a.touched&&a.error&&c.default.createElement(p.HelpBlock,{style:{"float":"right"}},a.error))),c.default.createElement(p.Modal.Footer,null,c.default.createElement("span",{className:"ralign"},0!==this.state.ecode&&!r&&t[this.state.ecode]),c.default.createElement("img",{src:y,className:r?"loading":"hide"}),c.default.createElement(p.Button,{disabled:r||l,type:"submit"},"确定"),c.default.createElement(p.Button,{bsStyle:"link",disabled:r,onClick:this.handleCancel},"取消"))))}}],[{key:"propTypes",value:{i18n:u.PropTypes.object.isRequired,submitting:u.PropTypes.bool,invalid:u.PropTypes.bool,values:u.PropTypes.object,fields:u.PropTypes.object,handleSubmit:u.PropTypes.func.isRequired,close:u.PropTypes.func.isRequired,resetPwd:u.PropTypes.func.isRequired},enumerable:!0}]);var a=t;return t=(0,d.reduxForm)({form:"sysetting",fields:["send_auth_pwd"],validate:b})(t)||t}(u.Component);t.default=v,e.exports=t.default}).call(this)}finally{}},1997:function(e,t,a){try{(function(){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=function(e,t,a){for(var n=!0;n;){var l=e,r=t,o=a;n=!1,null===l&&(l=Function.prototype);
var i=Object.getOwnPropertyDescriptor(l,r);if(void 0!==i){if("value"in i)return i.value;var s=i.get;if(void 0===s)return;return s.call(o)}var u=Object.getPrototypeOf(l);if(null===u)return;e=u,t=r,a=o,n=!0,i=u=void 0}},u=a(1),c=n(u),d=a(8),p=a(2),f=a(5),m=a(4),h=function(e,t){var a={};return e.to?/^(\w-*\.*)+@(\w+[\w|-]*)+(\.\w+[\w|-]*)*(\.\w{2,})+$/.test(e.to)||(a.to="格式有误"):a.to="必填",e.subject||(a.subject="必填"),a},y=function(e){function t(e){l(this,a),s(Object.getPrototypeOf(a.prototype),"constructor",this).call(this,e),this.state={ecode:0,contents:""},this.handleSubmit=this.handleSubmit.bind(this),this.handleCancel=this.handleCancel.bind(this)}r(t,e),i(t,[{key:"handleSubmit",value:function(){var e,t,a,n,l;return regeneratorRuntime.async(function(r){for(;;)switch(r.prev=r.next){case 0:return e=this.props,t=e.values,a=e.sendMail,n=e.close,r.next=6,regeneratorRuntime.awrap(a(t));case 6:l=r.sent,0===l?(this.setState({ecode:0}),n(),f.notify.show("邮件已发送。","success",2e3)):this.setState({ecode:l});case 8:case"end":return r.stop()}},null,this)}},{key:"handleCancel",value:function(){var e=this.props,t=e.close,a=e.submitting;a||(this.setState({ecode:0}),t())}},{key:"render",value:function(){var e=this.props,t=e.i18n.errMsg,a=e.fields,n=a.to,l=a.subject,r=a.contents,i=e.handleSubmit,s=e.invalid,u=e.submitting;return c.default.createElement(p.Modal,{show:!0,onHide:this.handleCancel,backdrop:"static","aria-labelledby":"contained-modal-title-sm"},c.default.createElement(p.Modal.Header,{closeButton:!0},c.default.createElement(p.Modal.Title,{id:"contained-modal-title-la"},"发送测试邮件")),c.default.createElement("form",{onSubmit:i(this.handleSubmit)},c.default.createElement(p.Modal.Body,null,c.default.createElement(p.FormGroup,{controlId:"formControlsText",validationState:n.touched&&n.error?"error":null},c.default.createElement(p.ControlLabel,null,c.default.createElement("span",{className:"txt-impt"},"*"),"收件人"),c.default.createElement(p.FormControl,o({disabled:u,type:"text"},n,{placeholder:"收件人"})),n.touched&&n.error&&c.default.createElement(p.HelpBlock,{style:{"float":"right"}},n.error)),c.default.createElement(p.FormGroup,{controlId:"formControlsText",validationState:l.touched&&l.error?"error":null},c.default.createElement(p.ControlLabel,null,c.default.createElement("span",{className:"txt-impt"},"*"),"主题"),c.default.createElement(p.FormControl,o({disabled:u,type:"text"},l,{placeholder:"主题"})),l.touched&&l.error&&c.default.createElement(p.HelpBlock,{style:{"float":"right"}},l.error)),c.default.createElement(p.FormGroup,{controlId:"formControlsTextarea"},c.default.createElement(p.ControlLabel,null,"内容"),c.default.createElement(p.FormControl,o({style:{height:"100px"},disabled:u,componentClass:"textarea"},r,{placeholder:"内容"})))),c.default.createElement(p.Modal.Footer,null,c.default.createElement("span",{className:"ralign"},0!==this.state.ecode&&!u&&t[this.state.ecode]),c.default.createElement("img",{src:m,className:u?"loading":"hide"}),c.default.createElement(p.Button,{disabled:u||s,type:"submit"},"确定"),c.default.createElement(p.Button,{bsStyle:"link",disabled:u,onClick:this.handleCancel},"取消"))))}}],[{key:"propTypes",value:{i18n:u.PropTypes.object.isRequired,submitting:u.PropTypes.bool,invalid:u.PropTypes.bool,values:u.PropTypes.object,fields:u.PropTypes.object,handleSubmit:u.PropTypes.func.isRequired,close:u.PropTypes.func.isRequired,sendMail:u.PropTypes.func.isRequired},enumerable:!0}]);var a=t;return t=(0,d.reduxForm)({form:"sysetting",fields:["to","subject","contents"],validate:h})(t)||t}(u.Component);t.default=y,e.exports=t.default}).call(this)}finally{}},1998:function(e,t,a){try{(function(){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=function(e,t,a){for(var n=!0;n;){var l=e,r=t,o=a;n=!1,null===l&&(l=Function.prototype);var i=Object.getOwnPropertyDescriptor(l,r);if(void 0!==i){if("value"in i)return i.value;var s=i.get;if(void 0===s)return;return s.call(o)}var u=Object.getPrototypeOf(l);if(null===u)return;e=u,t=r,a=o,n=!0,i=u=void 0}},u=a(1),c=n(u),d=a(8),p=a(2),f=a(7),m=(n(f),a(3)),h=(n(m),a(5)),y=a(4),b=function(e,t){var a={};return e.from?/^(\w-*\.*)+@(\w+[\w|-]*)+(\.\w+[\w|-]*)*(\.\w{2,})+$/.test(e.from)||(a.from="格式有误"):a.from="必填",a},v=function(e){function t(e){l(this,a),s(Object.getPrototypeOf(a.prototype),"constructor",this).call(this,e),this.state={ecode:0},this.handleSubmit=this.handleSubmit.bind(this),this.handleCancel=this.handleCancel.bind(this)}r(t,e),i(t,[{key:"componentWillMount",value:function(){var e=this.props,t=e.initializeForm,a=e.data;t(a)}},{key:"handleSubmit",value:function(){var e,t,a,n,l;return regeneratorRuntime.async(function(r){for(;;)switch(r.prev=r.next){case 0:return e=this.props,t=e.values,a=e.update,n=e.close,r.next=6,regeneratorRuntime.awrap(a({mail_send:t}));case 6:l=r.sent,0===l?(this.setState({ecode:0}),n(),h.notify.show("设置完成。","success",2e3)):this.setState({ecode:l});case 8:case"end":return r.stop()}},null,this)}},{key:"handleCancel",value:function(){var e=this.props,t=e.close,a=e.submitting;a||(this.setState({ecode:0}),t())}},{key:"render",value:function(){var e=this.props,t=e.i18n.errMsg,a=e.fields,n=a.from,l=a.prefix,r=e.handleSubmit,i=e.invalid,s=e.dirty,u=e.submitting;e.data;return c.default.createElement(p.Modal,{show:!0,onHide:this.handleCancel,backdrop:"static","aria-labelledby":"contained-modal-title-sm"},c.default.createElement(p.Modal.Header,{closeButton:!0},c.default.createElement(p.Modal.Title,{id:"contained-modal-title-la"},"发送邮件设置")),c.default.createElement("form",{onSubmit:r(this.handleSubmit),onKeyDown:function(e){13==e.keyCode&&e.preventDefault()}},c.default.createElement(p.Modal.Body,null,c.default.createElement(p.FormGroup,{controlId:"formControlsText",validationState:n.touched&&n.error?"error":null},c.default.createElement(p.ControlLabel,null,c.default.createElement("span",{className:"txt-impt"},"*"),"发信地址"),c.default.createElement(p.FormControl,o({disabled:u,type:"text"},n,{placeholder:"输入邮箱"})),n.touched&&n.error&&c.default.createElement(p.HelpBlock,{style:{"float":"right"}},n.error)),c.default.createElement(p.FormGroup,{controlId:"formControlsText"},c.default.createElement(p.ControlLabel,null,"邮件前缀"),c.default.createElement(p.FormControl,o({disabled:u,type:"text"},l,{placeholder:"邮件前缀(默认ActionView)"})))),c.default.createElement(p.Modal.Footer,null,c.default.createElement("span",{className:"ralign"},0!==this.state.ecode&&!u&&t[this.state.ecode]),c.default.createElement("img",{src:y,className:u?"loading":"hide"}),c.default.createElement(p.Button,{disabled:!s||u||i,type:"submit"},"确定"),c.default.createElement(p.Button,{bsStyle:"link",disabled:u,onClick:this.handleCancel},"取消"))))}}],[{key:"propTypes",value:{i18n:u.PropTypes.object.isRequired,submitting:u.PropTypes.bool,invalid:u.PropTypes.bool,dirty:u.PropTypes.bool,values:u.PropTypes.object,fields:u.PropTypes.object,handleSubmit:u.PropTypes.func.isRequired,close:u.PropTypes.func.isRequired,data:u.PropTypes.object.isRequired,initializeForm:u.PropTypes.func.isRequired,update:u.PropTypes.func.isRequired},enumerable:!0}]);var a=t;return t=(0,d.reduxForm)({form:"sendmail",fields:["from","prefix"],validate:b})(t)||t}(u.Component);t.default=v,e.exports=t.default}).call(this)}finally{}},1999:function(e,t,a){try{(function(){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=function(e,t,a){for(var n=!0;n;){var l=e,r=t,o=a;n=!1,null===l&&(l=Function.prototype);var i=Object.getOwnPropertyDescriptor(l,r);if(void 0!==i){if("value"in i)return i.value;var s=i.get;if(void 0===s)return;return s.call(o)}var u=Object.getPrototypeOf(l);if(null===u)return;e=u,t=r,a=o,n=!0,i=u=void 0}},u=a(1),c=n(u),d=a(8),p=a(2),f=a(7),m=n(f),h=a(3),y=n(h),b=a(5),v=a(4),E=function(e,t){var a={};return e.host?/^[\w-]+([.][\w-]+)+$/.test(e.host)||(a.host="格式有误"):a.host="必填",e.port?e.port&&!/^[1-9][0-9]*$/.test(e.port)&&(a.port="必须输入正整数"):a.port="必填",e.username||(a.username="必填"),e.has_old_password||e.password||(a.password="必填"),a},g=function(e){function t(e){l(this,a),s(Object.getPrototypeOf(a.prototype),"constructor",this).call(this,e),this.state={ecode:0,passwordShow:!0},this.handleSubmit=this.handleSubmit.bind(this),this.handleCancel=this.handleCancel.bind(this)}r(t,e),i(t,[{key:"componentWillMount",value:function(){var e=this.props,t=e.initializeForm,a=e.data;a.password&&(this.state.passwordShow=!1);var n=y.default.clone(a);n.has_old_password=!!a.password,n.password="",t(n)}},{key:"handleSubmit",value:function(){var e,t,a,n,l;return regeneratorRuntime.async(function(r){for(;;)switch(r.prev=r.next){case 0:return e=this.props,t=e.values,a=e.update,n=e.close,r.next=6,regeneratorRuntime.awrap(a({smtp:y.default.omit(t.password?t:y.default.omit(t,["password"]),["has_old_password"])}));case 6:l=r.sent,0===l?(this.setState({ecode:0}),n(),b.notify.show("设置完成。","success",2e3)):this.setState({ecode:l});case 8:case"end":return r.stop()}},null,this)}},{key:"handleCancel",value:function(){var e=this.props,t=e.close,a=e.submitting;a||(this.setState({ecode:0}),t())}},{key:"render",value:function(){var e=this,t=this.props,a=t.i18n.errMsg,n=t.fields,l=n.host,r=n.port,i=n.encryption,s=n.username,u=n.has_old_password,d=n.password,f=t.handleSubmit,h=t.invalid,y=t.dirty,b=t.submitting;t.data;return c.default.createElement(p.Modal,{show:!0,onHide:this.handleCancel,backdrop:"static","aria-labelledby":"contained-modal-title-sm"},c.default.createElement(p.Modal.Header,{closeButton:!0},c.default.createElement(p.Modal.Title,{id:"contained-modal-title-la"},"SMPT服务器设置")),c.default.createElement("form",{onSubmit:f(this.handleSubmit),onKeyDown:function(e){13==e.keyCode&&e.preventDefault()}},c.default.createElement(p.Modal.Body,null,c.default.createElement(p.FormGroup,{validationState:l.touched&&l.error?"error":null},c.default.createElement(p.ControlLabel,null,c.default.createElement("span",{className:"txt-impt"},"*"),"服务器"),c.default.createElement(p.FormControl,o({disabled:b,type:"text"},l,{placeholder:"主机名称或IP地址"})),l.touched&&l.error&&c.default.createElement(p.HelpBlock,{style:{"float":"right"}},l.error)),c.default.createElement(p.FormGroup,{validationState:r.touched&&r.error?"error":null},c.default.createElement(p.ControlLabel,null,c.default.createElement("span",{className:"txt-impt"},"*"),"端口"),c.default.createElement(p.FormControl,o({disabled:b,type:"text"},r,{placeholder:"端口"})),r.touched&&r.error&&c.default.createElement(p.HelpBlock,{style:{"float":"right"}},r.error)),c.default.createElement(p.FormGroup,{controlId:"formControlsText"},c.default.createElement(p.ControlLabel,null,"加密"),c.default.createElement(m.default,{disabled:b,clearable:!1,searchable:!1,options:[{value:"",label:"无"},{value:"tls",label:"TLS"},{value:"ssl",label:"SSL"}],value:i.value||"",onChange:function(e){i.onChange(e)},placeholder:"请选择"})),c.default.createElement(p.FormGroup,{validationState:s.touched&&s.error?"error":null},c.default.createElement(p.ControlLabel,null,c.default.createElement("span",{className:"txt-impt"},"*"),"帐号"),c.default.createElement(p.FormControl,o({disabled:b,type:"text"},s,{placeholder:"输入帐号"})),s.touched&&s.error&&c.default.createElement(p.HelpBlock,{style:{"float":"right"}},s.error)),c.default.createElement(p.FormGroup,{validationState:!u.value&&d.touched&&d.error?"error":null},c.default.createElement(p.ControlLabel,null,u.value?c.default.createElement("span",null):c.default.createElement("span",{className:"txt-impt"},"*"),"密码",u.value&&c.default.createElement("a",{style:{fontWeight:"normal",fontSize:"12px",cursor:"pointer",marginLeft:"5px"},onClick:function(t){t.preventDefault(),e.state.passwordShow&&d.onChange(""),e.setState({passwordShow:!e.state.passwordShow})}},this.state.passwordShow?"取消":"设置")),this.state.passwordShow&&c.default.createElement(p.FormControl,o({disabled:b,type:"text"},d,{placeholder:"输入密码"})),!u.value&&d.touched&&d.error&&c.default.createElement(p.HelpBlock,{style:{"float":"right"}},d.error))),c.default.createElement(p.Modal.Footer,null,c.default.createElement("span",{className:"ralign"},0!==this.state.ecode&&!b&&a[this.state.ecode]),c.default.createElement("img",{src:v,className:b?"loading":"hide"}),c.default.createElement(p.Button,{disabled:!y||b||h,type:"submit"},"确定"),c.default.createElement(p.Button,{bsStyle:"link",disabled:b,onClick:this.handleCancel},"取消"))))}}],[{key:"propTypes",value:{i18n:u.PropTypes.object.isRequired,submitting:u.PropTypes.bool,invalid:u.PropTypes.bool,dirty:u.PropTypes.bool,values:u.PropTypes.object,fields:u.PropTypes.object,handleSubmit:u.PropTypes.func.isRequired,close:u.PropTypes.func.isRequired,data:u.PropTypes.object.isRequired,initializeForm:u.PropTypes.func.isRequired,update:u.PropTypes.func.isRequired},enumerable:!0}]);var a=t;return t=(0,d.reduxForm)({form:"syssetting",fields:["host","port","encryption","username","has_old_password","password"],validate:E})(t)||t}(u.Component);t.default=g,e.exports=t.default}).call(this)}finally{}},2e3:function(e,t,a){try{(function(){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=function(e,t,a){for(var n=!0;n;){var l=e,r=t,o=a;n=!1,null===l&&(l=Function.prototype);var i=Object.getOwnPropertyDescriptor(l,r);if(void 0!==i){if("value"in i)return i.value;var s=i.get;if(void 0===s)return;return s.call(o)}var u=Object.getPrototypeOf(l);if(null===u)return;e=u,t=r,a=o,n=!0,i=u=void 0}},s=a(1),u=n(s),c=a(8),d=a(2),p=a(7),f=n(p),m=a(3),h=n(m),y=a(5),b=a(4),v=function(e,t){var a={};return a},E=function(e){function t(e){l(this,a),i(Object.getPrototypeOf(a.prototype),"constructor",this).call(this,e),this.state={ecode:0},this.handleSubmit=this.handleSubmit.bind(this),this.handleCancel=this.handleCancel.bind(this)}r(t,e),o(t,[{key:"componentWillMount",value:function(){var e=this.props,t=e.initializeForm,a=e.data;a.week2day||(a.week2day=5),a.day2hour||(a.day2hour=8),t(a)}},{key:"handleSubmit",value:function(){var e,t,a,n,l;return regeneratorRuntime.async(function(r){for(;;)switch(r.prev=r.next){case 0:return e=this.props,t=e.values,a=e.update,n=e.close,r.next=6,regeneratorRuntime.awrap(a({timetrack:h.default.pick(t,["week2day","day2hour"])}));case 6:l=r.sent,0===l?(this.setState({ecode:0}),n(),y.notify.show("设置完成。","success",2e3)):this.setState({ecode:l});case 8:case"end":return r.stop()}},null,this)}},{key:"handleCancel",value:function(){var e=this.props,t=e.close,a=e.submitting;a||(this.setState({ecode:0}),t())}},{key:"render",value:function(){var e=this.props,t=e.i18n.errMsg,a=e.fields,n=a.week2day,l=a.day2hour,r=e.handleSubmit,o=e.invalid,i=e.dirty,s=e.submitting,c=(e.data,[{value:6,label:"6"},{value:5.5,label:"5.5"},{value:5,label:"5"},{value:4.5,label:"4.5"},{value:4,label:"4"}]),p=[{value:10,label:"10"},{value:9.5,label:"9.5"},{value:9,label:"9"},{value:8.5,label:"8.5"},{value:8,label:"8"},{value:7.5,label:"7.5"},{value:7,label:"7"},{value:6.5,label:"6.5"},{value:6,label:"6"}];return u.default.createElement(d.Modal,{show:!0,onHide:this.handleCancel,backdrop:"static","aria-labelledby":"contained-modal-title-sm"},u.default.createElement(d.Modal.Header,{closeButton:!0},u.default.createElement(d.Modal.Title,{id:"contained-modal-title-la"},"时间追踪")),u.default.createElement("form",{onSubmit:r(this.handleSubmit),onKeyDown:function(e){13==e.keyCode&&e.preventDefault()}},u.default.createElement(d.Modal.Body,null,u.default.createElement(d.FormGroup,{controlId:"formControlsText"},u.default.createElement(d.ControlLabel,null,"每周有效工作日(天)"),u.default.createElement(f.default,{disabled:s,clearable:!1,searchable:!1,options:c,value:n.value,onChange:function(e){n.onChange(e)},placeholder:"请选择"})),u.default.createElement(d.FormGroup,{controlId:"formControlsText"},u.default.createElement(d.ControlLabel,null,"每天有效工作时间(小时)"),u.default.createElement(f.default,{disabled:s,clearable:!1,searchable:!1,options:p,value:l.value,onChange:function(e){l.onChange(e)},placeholder:"请选择"}))),u.default.createElement(d.Modal.Footer,null,u.default.createElement("span",{className:"ralign"},0!==this.state.ecode&&!s&&t[this.state.ecode]),u.default.createElement("img",{src:b,className:s?"loading":"hide"}),u.default.createElement(d.Button,{disabled:!i||s||o,type:"submit"},"确定"),u.default.createElement(d.Button,{bsStyle:"link",disabled:s,onClick:this.handleCancel},"取消"))))}}],[{key:"propTypes",value:{i18n:s.PropTypes.object.isRequired,submitting:s.PropTypes.bool,invalid:s.PropTypes.bool,dirty:s.PropTypes.bool,values:s.PropTypes.object,fields:s.PropTypes.object,handleSubmit:s.PropTypes.func.isRequired,close:s.PropTypes.func.isRequired,data:s.PropTypes.object.isRequired,initializeForm:s.PropTypes.func.isRequired,update:s.PropTypes.func.isRequired},enumerable:!0}]);var a=t;return t=(0,c.reduxForm)({form:"syssetting",fields:["week2day","day2hour"],validate:v})(t)||t}(s.Component);t.default=E,e.exports=t.default}).call(this)}finally{}},2093:function(e,t,a){try{(function(){"use strict";function e(){return(0,o.asyncFuncCreator)({constant:"SYSSETTING_SHOW",promise:function(e){return e.request({url:"/syssetting"})}})}function n(e){return(0,o.asyncFuncCreator)({constant:"SYSSETTING_UPDATE",promise:function(t){return t.request({url:"/syssetting",method:"post",data:e})}})}function l(e){return(0,o.asyncFuncCreator)({constant:"SYSSETTING_RESET_PWD",promise:function(t){return t.request({url:"/syssetting/resetpwd",method:"post",data:e})}})}function r(e){return(0,o.asyncFuncCreator)({constant:"SYSSETTING_SEND_TESTMAIL",promise:function(t){return t.request({url:"/syssetting/sendtestmail",method:"post",data:e})}})}Object.defineProperty(t,"__esModule",{value:!0}),t.show=e,t.update=n,t.resetPwd=l,t.sendTestMail=r;var o=a(27)}).call(this)}finally{}}});
//# sourceMappingURL=syssetting-22330d39961866779fe1.js.map