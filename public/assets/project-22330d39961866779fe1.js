webpackJsonp([24],{30:function(e,t,a){try{(function(){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=function(e,t,a){for(var n=!0;n;){var r=e,i=t,l=a;n=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,i);if(void 0!==s){if("value"in s)return s.value;var o=s.get;if(void 0===o)return;return o.call(l)}var c=Object.getPrototypeOf(r);if(null===c)return;e=c,t=i,a=l,n=!0,s=c=void 0}},o=a(1),c=n(o),u=a(15),d=function(e){function t(e){r(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={visible:!1},this.timer=null,this.scrollToTop=this.scrollToTop.bind(this)}return i(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.visibilityHeight,a=void 0===t?400:t,n=u(".doc-container");n.unbind("scroll").scroll(function(){var t=n.scrollTop();e.setState({visible:t>a})})}},{key:"componentWillUnmount",value:function(){u(".doc-container").unbind("scroll")}},{key:"scrollToTop",value:function(){var e=this,t=u(".doc-container"),a=50*(parseInt(t.scrollTop()/1e3)+1);cancelAnimationFrame(this.timer),this.timer=requestAnimationFrame(function n(){var r=t.scrollTop();r>0?(t.scrollTop(r-a>0?r-a:0),e.timer=requestAnimationFrame(n)):cancelAnimationFrame(e.timer)})}},{key:"render",value:function(){var e=this.state.visible,t=void 0!==e&&e;return c.default.createElement("div",{id:"backtop",className:"back-top",style:{visibility:t&&"visible"||"hidden"},onClick:this.scrollToTop},c.default.createElement("div",{className:"back-top-content"},c.default.createElement("div",{className:"back-top-icon"})))}}],[{key:"propTypes",value:{visibilityHeight:o.PropTypes.number},enumerable:!0}]),t}(o.Component);t.default=d,e.exports=t.default}).call(this)}finally{}},87:function(e,t,a){try{(function(){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),o=function(e,t,a){for(var n=!0;n;){var r=e,i=t,l=a;n=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,i);if(void 0!==s){if("value"in s)return s.value;var o=s.get;if(void 0===o)return;return o.call(l)}var c=Object.getPrototypeOf(r);if(null===c)return;e=c,t=i,a=l,n=!0,s=c=void 0}},c=a(1),u=n(c),d=(a(2),a(21),a(3)),p=n(d),f=function(e){function t(e){r(this,t),o(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e)}return i(t,e),s(t,[{key:"goPage",value:function(e){var t=this.props,a=t.query,n=t.refresh;n(l({},a,{page:e}))}},{key:"render",value:function(){var e=this,t=this.props,a=t.total,n=t.curPage,r=void 0===n?1:n,i=t.sizePerPage,l=t.paginationSize,s=void 0===l?4:l,o=p.default.ceil(a/i);(r>o||r<=0)&&(r=1);for(var c=[],d=0;d<s;d++){var f=r-s+d;f<=0||c.push(f)}c.push(r);for(var d=1;d<=s;d++){var f=p.default.add(r,d);if(f>o)break;c.push(f)}return u.default.createElement("div",{style:{marginTop:"10px",height:"45px"}},u.default.createElement("div",{className:"col-md-6",style:{textAlign:"left"}},u.default.createElement("span",null,p.default.add((r-1)*i,1),"-",r*i>=a?a:r*i," 共",a,"条 ",o,"页")),u.default.createElement("div",{className:"col-md-6",style:{textAlign:"right"}},o>1&&u.default.createElement("ul",{className:"pagination",style:{margin:"0px"}},r-s>1&&u.default.createElement("li",{key:"first"},u.default.createElement("span",{className:"page-button",onClick:this.goPage.bind(this,1),title:"首页"},"<<")),r-1>0&&o>1&&u.default.createElement("li",{key:"pre"},u.default.createElement("span",{className:"page-button",onClick:this.goPage.bind(this,r-1),title:"前页"},"<")),p.default.map(c,function(t,a){return u.default.createElement("li",{key:a,className:t===r?"active":""},u.default.createElement("span",{className:"page-button",onClick:e.goPage.bind(e,t)},t))}),r<o&&o>1&&u.default.createElement("li",{key:"next"},u.default.createElement("span",{className:"page-button",onClick:this.goPage.bind(this,p.default.add(r,1)),title:"后页"},">")),o-s>r&&u.default.createElement("li",{key:"last"},u.default.createElement("span",{className:"page-button",onClick:this.goPage.bind(this,o),title:"尾页"},">>")))))}}],[{key:"propTypes",value:{query:c.PropTypes.object,refresh:c.PropTypes.func,total:c.PropTypes.number.isRequired,curPage:c.PropTypes.number,sizePerPage:c.PropTypes.number,paginationSize:c.PropTypes.number},enumerable:!0}]),t}(c.Component);t.default=f,e.exports=t.default}).call(this)}finally{}},425:function(e,t,a){try{(function(){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=function(e,t,a){for(var n=!0;n;){var r=e,i=t,l=a;n=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,i);if(void 0!==s){if("value"in s)return s.value;var o=s.get;if(void 0===o)return;return o.call(l)}var c=Object.getPrototypeOf(r);if(null===c)return;e=c,t=i,a=l,n=!0,s=c=void 0}},o=a(1),c=n(o),u=a(2),d=a(5),p=function(e){function t(e){r(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.confirm=this.confirm.bind(this),this.cancel=this.cancel.bind(this)}return i(t,e),l(t,[{key:"confirm",value:function(){var e,t,a,n,r;return regeneratorRuntime.async(function(i){for(;;)switch(i.prev=i.next){case 0:return e=this.props,t=e.close,a=e.archive,n=e.data,t(),i.next=7,regeneratorRuntime.awrap(a(n.id));case 7:r=i.sent,0===r?d.notify.show("项目已归档。","success",2e3):d.notify.show("归档失败。","error",2e3);case 9:case"end":return i.stop()}},null,this)}},{key:"cancel",value:function(){var e=this.props.close;e()}},{key:"render",value:function(){var e=this.props.data;return c.default.createElement(u.Modal,{show:!0,onHide:this.cancel,backdrop:"static","aria-labelledby":"contained-modal-title-sm"},c.default.createElement(u.Modal.Header,{closeButton:!0},c.default.createElement(u.Modal.Title,{id:"contained-modal-title-la"},"项目归档")),c.default.createElement(u.Modal.Body,null,"归档后项目将变成完全只读。",c.default.createElement("br",null),"确认要将【",e.name,"】此项目归档？"),c.default.createElement(u.Modal.Footer,null,c.default.createElement(u.Button,{onClick:this.confirm},"确定"),c.default.createElement(u.Button,{bsStyle:"link",onClick:this.cancel},"取消")))}}],[{key:"propTypes",value:{close:o.PropTypes.func.isRequired,archive:o.PropTypes.func.isRequired,data:o.PropTypes.object.isRequired},enumerable:!0}]),t}(o.Component);t.default=p,e.exports=t.default}).call(this)}finally{}},426:function(e,t,a){try{(function(){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),o=function(e,t,a){for(var n=!0;n;){var r=e,i=t,l=a;n=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,i);if(void 0!==s){if("value"in s)return s.value;var o=s.get;if(void 0===o)return;return o.call(l)}var c=Object.getPrototypeOf(r);if(null===c)return;e=c,t=i,a=l,n=!0,s=c=void 0}},c=a(1),u=n(c),d=a(8),p=a(2),f=a(7),h=n(f),m=a(3),y=n(m),v=a(38),b=n(v),g=a(5),w=a(4),E=function(e,t){var a={};return e.name||(a.name="必填"),e.principal||(a.principal="必填"),a},P=function(e){function t(e){r(this,a),o(Object.getPrototypeOf(a.prototype),"constructor",this).call(this,e),this.state={ecode:0},this.handleSubmit=this.handleSubmit.bind(this),this.handleCancel=this.handleCancel.bind(this)}i(t,e),s(t,[{key:"componentWillMount",value:function(){var e=this.props,t=e.initializeForm,a=e.data;t(a)}},{key:"searchUsers",value:function(e){var t,a;return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:if(e=e.toLowerCase()){n.next=3;break}return n.abrupt("return",{options:[]});case 3:return t=new b.default,n.next=6,regeneratorRuntime.awrap(t.request({url:"/user/search?s="+e}));case 6:return a=n.sent,n.abrupt("return",{options:y.default.map(a.data,function(e){return e.name=e.name+"("+e.email+")",e})});case 8:case"end":return n.stop()}},null,this)}},{key:"handleSubmit",value:function(){var e,t,a,n,r;return regeneratorRuntime.async(function(i){for(;;)switch(i.prev=i.next){case 0:return e=this.props,t=e.values,a=e.update,n=e.close,i.next=6,regeneratorRuntime.awrap(a(t.id,y.default.extend({},y.default.omit(t,["id"]),{principal:t.principal&&t.principal.id||""})));case 6:r=i.sent,0===r?(this.setState({ecode:0}),n(),g.notify.show("项目已更新。","success",2e3)):this.setState({ecode:r});case 8:case"end":return i.stop()}},null,this)}},{key:"handleCancel",value:function(){var e=this.props,t=e.close,a=e.submitting;a||(this.setState({ecode:0}),t())}},{key:"render",value:function(){var e=this.props,t=e.i18n.errMsg,a=e.fields,n=a.id,r=a.name,i=a.principal,s=a.description,o=e.handleSubmit,c=e.invalid,d=e.dirty,f=e.submitting,m=e.data;return u.default.createElement(p.Modal,{show:!0,onHide:this.handleCancel,backdrop:"static","aria-labelledby":"contained-modal-title-sm"},u.default.createElement(p.Modal.Header,{closeButton:!0},u.default.createElement(p.Modal.Title,{id:"contained-modal-title-la"},"编辑项目 - "+m.name)),u.default.createElement("form",{onSubmit:o(this.handleSubmit),onKeyDown:function(e){13==e.keyCode&&e.preventDefault()}},u.default.createElement(p.Modal.Body,null,u.default.createElement(p.FormGroup,{controlId:"formControlsText",validationState:r.touched&&r.error?"error":null},u.default.createElement(p.ControlLabel,null,u.default.createElement("span",{className:"txt-impt"},"*"),"名称"),u.default.createElement(p.FormControl,l({type:"hidden"},n)),u.default.createElement(p.FormControl,l({disabled:f,type:"text"},r,{placeholder:"问题状态名"})),r.touched&&r.error&&u.default.createElement(p.HelpBlock,{style:{"float":"right"}},r.error)),u.default.createElement(p.FormGroup,{controlId:"formControlsText",validationState:i.touched&&i.error?"error":null},u.default.createElement(p.ControlLabel,null,u.default.createElement("span",{className:"txt-impt"},"*"),"责任人"),u.default.createElement(h.default.Async,{clearable:!1,disabled:f,options:[],value:i.value,onChange:function(e){i.onChange(e)},valueKey:"id",labelKey:"name",loadOptions:this.searchUsers.bind(this),placeholder:"输入责任人"}),i.touched&&i.error&&u.default.createElement(p.HelpBlock,{style:{"float":"right"}},i.error)),u.default.createElement(p.FormGroup,{controlId:"formControlsText"},u.default.createElement(p.ControlLabel,null,"描述"),u.default.createElement(p.FormControl,l({disabled:f,type:"text"},s,{placeholder:"状态描述"})))),u.default.createElement(p.Modal.Footer,null,u.default.createElement("span",{className:"ralign"},0!==this.state.ecode&&!f&&t[this.state.ecode]),u.default.createElement("img",{src:w,className:f?"loading":"hide"}),u.default.createElement(p.Button,{disabled:!d||f||c,type:"submit"},"确定"),u.default.createElement(p.Button,{bsStyle:"link",disabled:f,onClick:this.handleCancel},"取消"))))}}],[{key:"propTypes",value:{i18n:c.PropTypes.object.isRequired,submitting:c.PropTypes.bool,invalid:c.PropTypes.bool,dirty:c.PropTypes.bool,values:c.PropTypes.object,fields:c.PropTypes.object,handleSubmit:c.PropTypes.func.isRequired,close:c.PropTypes.func.isRequired,data:c.PropTypes.object.isRequired,initializeForm:c.PropTypes.func.isRequired,update:c.PropTypes.func.isRequired},enumerable:!0}]);var a=t;return t=(0,d.reduxForm)({form:"project",fields:["id","name","principal","description"],validate:E})(t)||t}(c.Component);t.default=P,e.exports=t.default}).call(this)}finally{}},1069:function(e,t,a){try{(function(){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=this,s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),c=function(e,t,a){for(var n=!0;n;){var r=e,i=t,l=a;n=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,i);if(void 0!==s){if("value"in s)return s.value;var o=s.get;if(void 0===o)return;return o.call(l)}var c=Object.getPrototypeOf(r);if(null===c)return;e=c,t=i,a=l,n=!0,s=c=void 0}},u=a(1),d=n(u),p=a(8),f=a(2),h=a(7),m=n(h),y=a(3),v=n(y),b=a(38),g=n(b),w=a(5),E=a(4),P=function(e,t){var a={};if(e.name||(a.name="必填"),"admin"!=t.mode||e.principal||(a.principal="必填"),e.key){var n="^\\w+$",r=new RegExp(n);r.test(e.key)||(a.key="需输入英文字符、数字或下划线")}else a.key="必填";return a},k=function(e){return new Promise(function(t,a){var n,r;return regeneratorRuntime.async(function(i){for(;;)switch(i.prev=i.next){case 0:return n=new g.default,i.next=3,regeneratorRuntime.awrap(n.request({url:"/project/checkkey/"+e.key}));case 3:r=i.sent,r.data&&"2"==r.data.flag?a({key:"键值已被占用"}):t();case 5:case"end":return i.stop()}},null,l)})},x=function(e){function t(e){r(this,a),c(Object.getPrototypeOf(a.prototype),"constructor",this).call(this,e),this.state={ecode:0},this.handleSubmit=this.handleSubmit.bind(this),this.handleCancel=this.handleCancel.bind(this)}i(t,e),o(t,[{key:"handleSubmit",value:function(){var e,t,a,n,r,i,l;return regeneratorRuntime.async(function(o){for(;;)switch(o.prev=o.next){case 0:return e=this.props,t=e.mode,a=e.values,n=e.create,r=e.close,i="",i="admin"==t?a.principal&&a.principal.id||"":"self",o.next=9,regeneratorRuntime.awrap(n(s({},a,{principal:i}),t));case 9:l=o.sent,0===l?(this.setState({ecode:0}),r(),w.notify.show("创建完成。","success",2e3)):this.setState({ecode:l});case 11:case"end":return o.stop()}},null,this)}},{key:"handleCancel",value:function(){var e=this.props,t=e.close,a=e.submitting;a||(this.setState({ecode:0}),t())}},{key:"searchUsers",value:function(e){var t,a;return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:if(e=e.toLowerCase()){n.next=3;break}return n.abrupt("return",{options:[]});case 3:return t=new g.default,n.next=6,regeneratorRuntime.awrap(t.request({url:"/user/search?s="+e}));case 6:return a=n.sent,n.abrupt("return",{options:v.default.map(a.data,function(e){return e.name=e.name+"("+e.email+")",e})});case 8:case"end":return n.stop()}},null,this)}},{key:"render",value:function(){var e=this.props,t=e.i18n.errMsg,a=e.mode,n=e.asyncValidating,r=e.fields,i=r.name,l=r.key,o=r.principal,c=r.description,u=e.handleSubmit,p=e.invalid,h=e.submitting;return d.default.createElement(f.Modal,{show:!0,onHide:this.handleCancel,backdrop:"static","aria-labelledby":"contained-modal-title-sm"},d.default.createElement(f.Modal.Header,{closeButton:!0},d.default.createElement(f.Modal.Title,{id:"contained-modal-title-la"},"创建项目")),d.default.createElement("form",{onSubmit:u(this.handleSubmit),onKeyDown:function(e){13==e.keyCode&&e.preventDefault()}},d.default.createElement(f.Modal.Body,null,d.default.createElement(f.FormGroup,{controlId:"formControlsText",validationState:i.touched&&i.error?"error":null},d.default.createElement(f.ControlLabel,null,d.default.createElement("span",{className:"txt-impt"},"*"),"名称"),d.default.createElement(f.FormControl,s({disabled:h,type:"text"},i,{placeholder:"项目名"})),d.default.createElement(f.FormControl.Feedback,null),i.touched&&i.error&&d.default.createElement(f.HelpBlock,{style:{"float":"right"}},i.error)),d.default.createElement(f.FormGroup,{controlId:"formControlsText",validationState:l.touched&&l.error?"error":null},d.default.createElement(f.ControlLabel,null,d.default.createElement("span",{className:"txt-impt"},"*"),"键值"),d.default.createElement(f.FormControl,s({disabled:h,type:"text"},l,{placeholder:"键值"})),d.default.createElement(f.FormControl.Feedback,null,n?d.default.createElement("i",{className:"fa fa-spinner fa-spin"}):l.active===!1&&l.invalid===!1?d.default.createElement("span",{style:{color:"#3c763d"}},d.default.createElement("i",{className:"fa fa-check"})):""),l.touched&&l.error&&d.default.createElement(f.HelpBlock,{style:{"float":"right"}},l.error)),"admin"==a&&d.default.createElement(f.FormGroup,{controlId:"formControlsText",validationState:o.touched&&o.error?"error":null},d.default.createElement(f.ControlLabel,null,d.default.createElement("span",{className:"txt-impt"},"*"),"责任人"),d.default.createElement(m.default.Async,{clearable:!1,disabled:h,options:[],value:o.value,onChange:function(e){o.onChange(e)},valueKey:"id",labelKey:"name",loadOptions:this.searchUsers.bind(this),placeholder:"输入责任人"}),o.touched&&o.error&&d.default.createElement(f.HelpBlock,{style:{"float":"right"}},o.error)),d.default.createElement(f.FormGroup,{controlId:"formControlsText"},d.default.createElement(f.ControlLabel,null,"描述"),d.default.createElement(f.FormControl,s({disabled:h,type:"text"},c,{placeholder:"项目描述"})))),d.default.createElement(f.Modal.Footer,null,d.default.createElement("span",{className:"ralign"},0!==this.state.ecode&&!h&&t[this.state.ecode]),d.default.createElement("img",{src:E,className:h?"loading":"hide"}),d.default.createElement(f.Button,{disabled:l.active===!0||n||h||p,type:"submit"},"确定"),d.default.createElement(f.Button,{bsStyle:"link",disabled:h,onClick:this.handleCancel},"取消"))))}}],[{key:"propTypes",value:{i18n:u.PropTypes.object.isRequired,mode:u.PropTypes.object,asyncValidating:u.PropTypes.bool,submitting:u.PropTypes.bool,invalid:u.PropTypes.bool,values:u.PropTypes.object,fields:u.PropTypes.object,handleSubmit:u.PropTypes.func.isRequired,close:u.PropTypes.func.isRequired,create:u.PropTypes.func.isRequired},enumerable:!0}]);var a=t;return t=(0,p.reduxForm)({form:"project",fields:["name","key","principal","description"],asyncValidate:k,asyncBlurFields:["key"],validate:P})(t)||t}(u.Component);t.default=x,e.exports=t.default}).call(this)}finally{}},1938:function(e,t,a){try{(function(){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){return{actions:(0,h.bindActionCreators)(g,e)}}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},c=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),u=function(e,t,a){for(var n=!0;n;){var r=e,i=t,l=a;n=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,i);if(void 0!==s){if("value"in s)return s.value;var o=s.get;if(void 0===o)return;return o.call(l)}var c=Object.getPrototypeOf(r);if(null===c)return;e=c,t=i,a=l,n=!0,s=c=void 0}},d=a(1),p=r(d),f=a(22),h=a(23),m=a(3),y=r(m),v=a(5),b=a(342),g=n(b),w=a(60),E=a(1940),P=a(1942),k=function(e){function t(e){i(this,a),u(Object.getPrototypeOf(a.prototype),"constructor",this).call(this,e),this.loadStats=this.loadStats.bind(this)}l(t,e),c(t,[{key:"refresh",value:function(e){var t="/admin/project";this.context.router.push({pathname:t,query:e})}},{key:"entry",value:function(e){this.context.router.push({pathname:e})}},{key:"index",value:function(e){return regeneratorRuntime.async(function(t){for(;;)switch(t.prev=t.next){case 0:return e.page||(e.page=1),t.next=3,regeneratorRuntime.awrap(this.props.actions.index(w.stringify(e||{})));case 3:return t.abrupt("return",this.props.project.ecode);case 4:case"end":return t.stop()}},null,this)}},{key:"myIndex",value:function(e){return regeneratorRuntime.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(this.props.actions.myIndex(w.stringify(e||{})));case 2:return t.next=4,regeneratorRuntime.awrap(this.loadStats());case 4:return t.abrupt("return",this.props.project.ecode);case 5:case"end":return t.stop()}},null,this)}},{key:"more",value:function(e){return regeneratorRuntime.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(this.props.actions.more(w.stringify(e||{})));case 2:return t.next=4,regeneratorRuntime.awrap(this.loadStats());case 4:return t.abrupt("return",this.props.project.ecode);case 5:case"end":return t.stop()}},null,this)}},{key:"loadStats",value:function(){var e,t;return regeneratorRuntime.async(function(a){for(;;)switch(a.prev=a.next){case 0:return e=this.props.project.collection,t=[],y.default.forEach(e,function(e){e.stats||t.push(e.key)}),a.next=5,regeneratorRuntime.awrap(this.props.actions.loadStats(t));case 5:case"end":return a.stop()}},null,this)}},{key:"create",value:function(e,t){return regeneratorRuntime.async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,regeneratorRuntime.awrap(this.props.actions.create(e));case 2:return 0==this.props.project.ecode&&"admin"!=t&&this.props.actions.loadStats([e.key]),a.abrupt("return",this.props.project.ecode);case 4:case"end":return a.stop()}},null,this)}},{key:"update",value:function(e,t){return regeneratorRuntime.async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,regeneratorRuntime.awrap(this.props.actions.update(e,t));case 2:return a.abrupt("return",this.props.project.ecode);case 3:case"end":return a.stop()}},null,this)}},{key:"archive",value:function(e){var t;return regeneratorRuntime.async(function(a){for(;;)switch(a.prev=a.next){case 0:return t=this.props.actions,a.next=3,regeneratorRuntime.awrap(t.archive(e));case 3:return a.abrupt("return",this.props.project.ecode);case 4:case"end":return a.stop()}},null,this)}},{key:"del",value:function(e){var t;return regeneratorRuntime.async(function(a){for(;;)switch(a.prev=a.next){case 0:return t=this.props.actions,a.next=3,regeneratorRuntime.awrap(t.del(e));case 3:return a.abrupt("return",this.props.project.ecode);case 4:case"end":return a.stop()}},null,this)}},{key:"reopen",value:function(e){var t;return regeneratorRuntime.async(function(a){for(;;)switch(a.prev=a.next){case 0:return t=this.props.actions,a.next=3,regeneratorRuntime.awrap(t.reopen(e));case 3:return a.abrupt("return",this.props.project.ecode);case 4:case"end":return a.stop()}},null,this)}},{key:"createIndex",value:function(e){var t;return regeneratorRuntime.async(function(a){for(;;)switch(a.prev=a.next){case 0:return t=this.props.actions,a.next=3,regeneratorRuntime.awrap(t.createIndex(e));case 3:return a.abrupt("return",this.props.project.ecode);case 4:case"end":return a.stop()}},null,this)}},{key:"multiArchive",value:function(e){var t;return regeneratorRuntime.async(function(a){for(;;)switch(a.prev=a.next){case 0:return t=this.props.actions,a.next=3,regeneratorRuntime.awrap(t.multiArchive(e));case 3:return a.abrupt("return",this.props.project.ecode);case 4:case"end":return a.stop()}},null,this)}},{key:"multiReopen",value:function(e){var t;return regeneratorRuntime.async(function(a){for(;;)switch(a.prev=a.next){case 0:return t=this.props.actions,a.next=3,regeneratorRuntime.awrap(t.multiReopen(e));case 3:return a.abrupt("return",this.props.project.ecode);case 4:case"end":return a.stop()}},null,this)}},{key:"multiCreateIndex",value:function(e){var t;return regeneratorRuntime.async(function(a){for(;;)switch(a.prev=a.next){case 0:return t=this.props.actions,a.next=3,regeneratorRuntime.awrap(t.multiCreateIndex(e));case 3:return a.abrupt("return",this.props.project.ecode);case 4:case"end":return a.stop()}},null,this)}},{key:"show",value:function(e){var t;return regeneratorRuntime.async(function(a){for(;;)switch(a.prev=a.next){case 0:return t=this.props.actions,a.next=3,regeneratorRuntime.awrap(t.show(e));case 3:return a.abrupt("return",this.props.project.ecode);case 4:case"end":return a.stop()}},null,this)}},{key:"getOptions",value:function(){var e;return regeneratorRuntime.async(function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.props.actions,t.next=3,regeneratorRuntime.awrap(e.getOptions());case 3:return t.abrupt("return",this.props.project.ecode);case 4:case"end":return t.stop()}},null,this)}},{key:"render",value:function(){var e=this.props,t=e.i18n,a=e.session,n=e.location,r=n.pathname,i=n.query,l=void 0===i?{}:i;if(1===r.indexOf("admin")){if(y.default.isEmpty(a.user))return p.default.createElement("div",null);if(!a.user.permissions||!a.user.permissions.sys_admin)return v.notify.show(t.errMsg[-10002],"warning",2e3),p.default.createElement("div",null)}return p.default.createElement("div",{className:"doc-container"},1===r.indexOf("admin")?p.default.createElement(E,o({index:this.index.bind(this),entry:this.entry.bind(this),refresh:this.refresh.bind(this),create:this.create.bind(this),show:this.show.bind(this),select:this.props.actions.select,update:this.update.bind(this),archive:this.archive.bind(this),del:this.del.bind(this),reopen:this.reopen.bind(this),createIndex:this.createIndex.bind(this),multiArchive:this.multiArchive.bind(this),multiReopen:this.multiReopen.bind(this),multiCreateIndex:this.multiCreateIndex.bind(this),getOptions:this.getOptions.bind(this),query:l,i18n:t},this.props.project)):p.default.createElement(P,o({layout:this.props.layout,index:this.myIndex.bind(this),more:this.more.bind(this),entry:this.entry.bind(this),create:this.create.bind(this),select:this.props.actions.select,show:this.show.bind(this),update:this.update.bind(this),archive:this.archive.bind(this),reopen:this.reopen.bind(this),createIndex:this.createIndex.bind(this),user:this.props.session.user,i18n:t},this.props.project)))}}],[{key:"contextTypes",value:{router:d.PropTypes.object.isRequired},enumerable:!0},{key:"propTypes",value:{actions:d.PropTypes.object.isRequired,location:d.PropTypes.object.isRequired,params:d.PropTypes.object.isRequired,layout:d.PropTypes.object.isRequired,i18n:d.PropTypes.object.isRequired,session:d.PropTypes.object.isRequired,project:d.PropTypes.object.isRequired},enumerable:!0}]);var a=t;return t=(0,f.connect)(function(e){var t=e.i18n,a=e.layout,n=e.session,r=e.project;return{i18n:t,layout:a,session:n,project:r}},s)(t)||t}(d.Component);t.default=k,e.exports=t.default}).call(this)}finally{}},1939:function(e,t,a){try{(function(){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=function(e,t,a){for(var n=!0;n;){var r=e,i=t,l=a;n=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,i);if(void 0!==s){if("value"in s)return s.value;var o=s.get;if(void 0===o)return;return o.call(l)}var c=Object.getPrototypeOf(r);if(null===c)return;e=c,t=i,a=l,n=!0,s=c=void 0}},o=a(1),c=n(o),u=a(2),d=a(5),p=function(e){function t(e){r(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.confirm=this.confirm.bind(this),this.cancel=this.cancel.bind(this)}return i(t,e),l(t,[{key:"confirm",value:function(){var e,t,a,n,r;return regeneratorRuntime.async(function(i){for(;;)switch(i.prev=i.next){case 0:return e=this.props,t=e.close,a=e.del,n=e.data,t(),i.next=7,regeneratorRuntime.awrap(a(n.id));case 7:r=i.sent,0===r?d.notify.show("项目已删除。","success",2e3):d.notify.show("删除失败。","error",2e3);case 9:case"end":return i.stop()}},null,this)}},{key:"cancel",value:function(){var e=this.props.close;e()}},{key:"render",value:function(){var e=this.props.data;return c.default.createElement(u.Modal,{show:!0,onHide:this.cancel,backdrop:"static","aria-labelledby":"contained-modal-title-sm"},c.default.createElement(u.Modal.Header,{closeButton:!0},c.default.createElement(u.Modal.Title,{id:"contained-modal-title-la"},"删除项目")),c.default.createElement(u.Modal.Body,null,"项目被删除后，相关信息都将被删除，且不可恢复，请慎重。",c.default.createElement("br",null),"确认要删除【",e.name,"】该项目？",c.default.createElement("br",null)),c.default.createElement(u.Modal.Footer,null,c.default.createElement(u.Button,{onClick:this.confirm},"确定"),c.default.createElement(u.Button,{
bsStyle:"link",onClick:this.cancel},"取消")))}}],[{key:"propTypes",value:{close:o.PropTypes.func.isRequired,del:o.PropTypes.func.isRequired,data:o.PropTypes.object.isRequired},enumerable:!0}]),t}(o.Component);t.default=p,e.exports=t.default}).call(this)}finally{}},1940:function(e,t,a){try{(function(){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=function(e,t,a){for(var n=!0;n;){var r=e,i=t,l=a;n=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,i);if(void 0!==s){if("value"in s)return s.value;var o=s.get;if(void 0===o)return;return o.call(l)}var c=Object.getPrototypeOf(r);if(null===c)return;e=c,t=i,a=l,n=!0,s=c=void 0}},o=a(1),c=n(o),u=a(31),d=a(2),p=a(7),f=n(p),h=a(38),m=n(h),y=a(3),v=n(y),b=a(5),g=a(15),w=a(87),E=a(30),P=a(1069),k=a(426),x=a(425),S=a(1939),O=a(1941),C=a(4),R=function(e){function t(e){r(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={createModalShow:!1,editModalShow:!1,archiveNotifyShow:!1,delNotifyShow:!1,operateShow:!1,multiOperateNotifyShow:!1,multiOperate:"",hoverRowId:"",selectedIds:[],willSetPrincipalPids:[],settingPrincipalPids:[],principal:{},principal_id:null,name:"",status:"active"},this.createModalClose=this.createModalClose.bind(this),this.editModalClose=this.editModalClose.bind(this),this.archiveNotifyClose=this.archiveNotifyClose.bind(this),this.delNotifyClose=this.delNotifyClose.bind(this),this.multiOperateNotifyClose=this.multiOperateNotifyClose.bind(this),this.entry=this.entry.bind(this),this.refresh=this.refresh.bind(this)}return i(t,e),l(t,[{key:"componentWillMount",value:function(){var e=this.props,t=e.index,a=e.getOptions,n=e.query,r=void 0===n?{}:n,i={};i.status=this.state.status=r.status||"active",r.name&&(i.name=this.state.name=r.name),r.principal_id&&(i.principal_id=this.state.principal_id=r.principal_id),t(i),a()}},{key:"createModalClose",value:function(){this.setState({createModalShow:!1})}},{key:"editModalClose",value:function(){this.setState({editModalShow:!1})}},{key:"archiveNotifyClose",value:function(){this.setState({archiveNotifyShow:!1})}},{key:"delNotifyClose",value:function(){this.setState({delNotifyShow:!1})}},{key:"multiOperateNotifyClose",value:function(){this.setState({multiOperateNotifyShow:!1})}},{key:"edit",value:function(e){this.setState({editModalShow:!0});var t=this.props.select;t(e)}},{key:"entry",value:function a(e){var a=this.props.entry;a("/project/"+e)}},{key:"componentDidMount",value:function(){var e=this;g("#pname").bind("keypress",function(t){"13"==t.keyCode&&e.refresh()})}},{key:"componentWillReceiveProps",value:function(e){var t=e.query||{},a=this.props,n=a.index,r=a.query;v.default.isEqual(t,r)||n(t),this.state.status=t.status||"active",this.state.name=t.name||"",this.state.principal_id=t.principal_id||null}},{key:"archiveNotify",value:function(e){this.setState({archiveNotifyShow:!0});var t=this.props.select;t(e)}},{key:"delNotify",value:function(e){this.setState({delNotifyShow:!0});var t=this.props.select;t(e)}},{key:"reopen",value:function n(e){var t,a,n,r;return regeneratorRuntime.async(function(i){for(;;)switch(i.prev=i.next){case 0:return t=this.props,a=t.select,n=t.reopen,a(e),i.next=6,regeneratorRuntime.awrap(n(e));case 6:r=i.sent,0===r?b.notify.show("已取消归档。","success",2e3):b.notify.show("打开失败。","error",2e3);case 8:case"end":return i.stop()}},null,this)}},{key:"createIndex",value:function p(e){var t,a,p,n;return regeneratorRuntime.async(function(r){for(;;)switch(r.prev=r.next){case 0:return t=this.props,a=t.select,p=t.createIndex,a(e),r.next=6,regeneratorRuntime.awrap(p(e));case 6:n=r.sent,0===n?b.notify.show("索引已重建。","success",2e3):b.notify.show("创建失败。","error",2e3);case 8:case"end":return r.stop()}},null,this)}},{key:"operateSelect",value:function(e){var t=this.state.hoverRowId;"1"===e?this.edit(t):"2"===e?this.archiveNotify(t):"3"===e?this.reopen(t):"4"===e?this.createIndex(t):"5"===e&&this.delNotify(t)}},{key:"multiOperateSelect",value:function(e){this.setState({multiOperateNotifyShow:!0,multiOperate:e})}},{key:"willSetPrincipal",value:function(e){this.state.willSetPrincipalPids.push(e),this.setState({willSetPrincipalPids:this.state.willSetPrincipalPids})}},{key:"cancelSetPrincipal",value:function(e){var t=v.default.indexOf(this.state.willSetPrincipalPids,e);this.state.willSetPrincipalPids.splice(t,1),this.state.principal[e]=void 0,this.setState({willSetPrincipalPids:this.state.willSetPrincipalPids})}},{key:"setPrincipal",value:function(e){var t,a,n,r,i,l;return regeneratorRuntime.async(function(s){for(;;)switch(s.prev=s.next){case 0:return this.state.settingPrincipalPids.push(e),this.setState({settingPrincipalPids:this.state.settingPrincipalPids}),t=this.props,a=t.update,n=t.collection,s.next=7,regeneratorRuntime.awrap(a(e,{principal:(this.state.principal[e]||v.default.find(n,{id:e}).principal||{}).id}));case 7:r=s.sent,0===r?(i=this.state.willSetPrincipalPids.indexOf(e),this.state.willSetPrincipalPids.splice(i,1),l=v.default.indexOf(this.state.settingPrincipalPids,e),this.state.settingPrincipalPids.splice(l,1),this.setState({willSetPrincipalPids:this.state.willSetPrincipalPids,settingPrincipalPids:this.state.settingPrincipalPids}),b.notify.show("设置完成。","success",2e3)):(l=v.default.indexOf(this.state.settingPrincipalPids,e),this.state.settingPrincipalPids.splice(l,1),this.setState({settingPrincipalPids:this.state.settingPrincipalPids}),b.notify.show("设置失败。","error",2e3));case 9:case"end":return s.stop()}},null,this)}},{key:"handlePrincipalSelectChange",value:function(e,t){this.state.principal[e]=t,this.setState({principal:this.state.principal})}},{key:"searchUsers",value:function(e){var t,a;return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:if(e=e.toLowerCase()){n.next=3;break}return n.abrupt("return",{options:[]});case 3:return t=new m.default,n.next=6,regeneratorRuntime.awrap(t.request({url:"/user/search?s="+e}));case 6:return a=n.sent,n.abrupt("return",{options:v.default.map(a.data,function(e){return e.nameAndEmail=e.name+"("+e.email+")",e})});case 8:case"end":return n.stop()}},null,this)}},{key:"statusChange",value:function(e){this.state.status=e,this.refresh()}},{key:"principalChange",value:function(e){this.state.principal_id=e,this.refresh()}},{key:"refresh",value:function h(){var h=this.props.refresh,e={};v.default.trim(this.state.name)&&(e.name=v.default.trim(this.state.name)),this.state.principal_id&&(e.principal_id=this.state.principal_id),e.status=this.state.status,h(e)}},{key:"onRowMouseOver",value:function(e){e.id!==this.state.hoverRowId&&this.setState({operateShow:!0,hoverRowId:e.id})}},{key:"onMouseLeave",value:function(){this.setState({operateShow:!1,hoverRowId:""})}},{key:"onSelectAll",value:function(e,t){if(e)for(var a=t.length,n=0;n<a;n++)this.state.selectedIds.push(t[n].id);else this.state.selectedIds=[];this.setState({selectedIds:this.state.selectedIds})}},{key:"onSelect",value:function(e,t){if(t)this.state.selectedIds.push(e.id);else{for(var a=[],n=this.state.selectedIds.length,r=0;r<n;r++)this.state.selectedIds[r]!==e.id&&a.push(this.state.selectedIds[r]);this.state.selectedIds=a}this.setState({selectedIds:this.state.selectedIds})}},{key:"cancelSelected",value:function(){this.setState({selectedIds:[]})}},{key:"render",value:function(){for(var e=this,t=this.props,a=t.i18n,n=t.collection,r=t.selectedItem,i=t.loading,l=t.indexLoading,s=t.itemLoading,o=t.refresh,p=t.create,h=t.del,m=t.archive,y=t.multiArchive,b=t.multiReopen,g=t.multiCreateIndex,R=t.update,T=t.options,j=t.query,N=this.state,_=N.willSetPrincipalPids,M=N.settingPrincipalPids,q=this.state,I=q.hoverRowId,F=q.operateShow,B=c.default.createElement("span",null,c.default.createElement("i",{className:"fa fa-cog"})),A=[],L=n.length,D=function(t){A.push({id:n[t].id,name:c.default.createElement("div",null,c.default.createElement("a",{href:"#",style:{cursor:"pointer"},onClick:function(a){a.preventDefault(),e.entry(n[t].key)}},n[t].name),n[t].description&&c.default.createElement("span",{className:"table-td-desc"},n[t].description)),key:n[t].key,principal:c.default.createElement("div",null,v.default.indexOf(_,n[t].id)===-1&&v.default.indexOf(M,n[t].id)===-1?c.default.createElement("div",{className:"editable-list-field"},c.default.createElement("div",{style:{display:"table",width:"100%"}},n[t].principal?c.default.createElement("span",null,c.default.createElement("div",{style:{display:"inline-block","float":"left",margin:"5px 3px"}},n[t].principal.name||"-")):"-",c.default.createElement("span",{className:"edit-icon-zone edit-icon",onClick:e.willSetPrincipal.bind(e,n[t].id)},c.default.createElement("i",{className:"fa fa-edit"})))):c.default.createElement("div",null,c.default.createElement(f.default.Async,{clearable:!1,disabled:v.default.indexOf(M,n[t].id)!==-1&&!0,options:[],value:e.state.principal[n[t].id]||n[t].principal,onChange:e.handlePrincipalSelectChange.bind(e,n[t].id),valueKey:"id",labelKey:"nameAndEmail",loadOptions:e.searchUsers,placeholder:"请输入用户"}),c.default.createElement("div",{className:v.default.indexOf(M,n[t].id)!==-1?"hide":"",style:{"float":"right"}},c.default.createElement(d.Button,{className:"edit-ok-button",onClick:e.setPrincipal.bind(e,n[t].id)},c.default.createElement("i",{className:"fa fa-check"})),c.default.createElement(d.Button,{className:"edit-cancel-button",onClick:e.cancelSetPrincipal.bind(e,n[t].id)},c.default.createElement("i",{className:"fa fa-close"})))),c.default.createElement("img",{src:C,style:{"float":"right"},className:v.default.indexOf(M,n[t].id)!==-1?"loading":"hide"})),status:"active"==n[t].status?c.default.createElement("span",{className:"project-inprogress-label"},"活动中"):c.default.createElement("span",{className:"project-close-label"},"已归档"),operation:c.default.createElement("div",null,F&&I===n[t].id&&!s&&c.default.createElement(d.DropdownButton,{pullRight:!0,bsStyle:"link",style:{textDecoration:"blink",color:"#000"},key:t,title:B,id:"dropdown-basic-"+t,onSelect:e.operateSelect.bind(e)},c.default.createElement(d.MenuItem,{eventKey:"1"},"编辑"),"active"==n[t].status?c.default.createElement(d.MenuItem,{eventKey:"2"},"归档"):c.default.createElement(d.MenuItem,{eventKey:"3"},"取消归档"),c.default.createElement(d.MenuItem,{eventKey:"4"},"重建索引"),c.default.createElement(d.MenuItem,{eventKey:"5"},"删除")),c.default.createElement("img",{src:C,className:s&&r.id===n[t].id?"loading":"hide"}))})},H=0;H<L;H++)D(H);var K={};l?K.noDataText=c.default.createElement("div",null,c.default.createElement("img",{src:C,className:"loading"})):K.noDataText="暂无数据显示。",K.onRowMouseOver=this.onRowMouseOver.bind(this);var U={};return A.length>0&&(U={mode:"checkbox",selected:this.state.selectedIds,onSelect:this.onSelect.bind(this),onSelectAll:this.onSelectAll.bind(this)}),c.default.createElement("div",null,c.default.createElement(E,null),c.default.createElement("div",{style:{marginTop:"5px",height:"40px"}},c.default.createElement(d.FormGroup,null,c.default.createElement("span",{style:{"float":"right",width:"90px"}},c.default.createElement(f.default,{simpleValue:!0,clearable:!1,placeholder:"项目状态",value:this.state.status,onChange:this.statusChange.bind(this),options:[{value:"all",label:"全部"},{value:"active",label:"活动中"},{value:"archived",label:"已归档"}]})),c.default.createElement("span",{style:{"float":"right",width:"22%",marginRight:"10px"}},c.default.createElement(f.default,{simpleValue:!0,placeholder:"责任人",value:this.state.principal_id,onChange:this.principalChange.bind(this),options:v.default.map(T.principals,function(e){return{value:e.id,label:e.name+"("+e.email+")"}})})),c.default.createElement("span",{style:{"float":"right",width:"22%",marginRight:"10px"}},c.default.createElement(d.FormControl,{type:"text",id:"pname",style:{height:"36px"},value:this.state.name,onChange:function(t){e.setState({name:t.target.value})},placeholder:"项目名、键值查询..."})),this.state.selectedIds.length>0&&c.default.createElement("span",{style:{"float":"left",marginRight:"10px"}},c.default.createElement(d.DropdownButton,{title:"操作",onSelect:this.multiOperateSelect.bind(this)},c.default.createElement(d.MenuItem,{eventKey:"archive"},"归档"),c.default.createElement(d.MenuItem,{eventKey:"reopen"},"取消归档"),c.default.createElement(d.MenuItem,{eventKey:"create_index"},"重建索引"))),c.default.createElement("span",{style:{"float":"left",width:"20%"}},c.default.createElement(d.Button,{onClick:function(){e.setState({createModalShow:!0})},disabled:l},c.default.createElement("i",{className:"fa fa-plus"})," 新建项目")))),c.default.createElement("div",null,c.default.createElement(u.BootstrapTable,{data:A,bordered:!1,hover:!0,options:K,trClassName:"tr-middle",selectRow:U},c.default.createElement(u.TableHeaderColumn,{dataField:"id",isKey:!0,hidden:!0},"ID"),c.default.createElement(u.TableHeaderColumn,{dataField:"name"},"名称"),c.default.createElement(u.TableHeaderColumn,{dataField:"key",width:"170"},"键值"),c.default.createElement(u.TableHeaderColumn,{dataField:"principal",width:"320"},"责任人"),c.default.createElement(u.TableHeaderColumn,{dataField:"status",width:"80"},"状态"),c.default.createElement(u.TableHeaderColumn,{width:"60",dataField:"operation"})),this.state.editModalShow&&c.default.createElement(k,{show:!0,close:this.editModalClose,update:R,data:r,i18n:a}),this.state.createModalShow&&c.default.createElement(P,{show:!0,mode:"admin",close:this.createModalClose,create:p,i18n:a}),this.state.archiveNotifyShow&&c.default.createElement(x,{show:!0,close:this.archiveNotifyClose,data:r,archive:m}),this.state.delNotifyShow&&c.default.createElement(S,{show:!0,close:this.delNotifyClose,data:r,del:h}),this.state.multiOperateNotifyShow&&c.default.createElement(O,{show:!0,close:this.multiOperateNotifyClose,multiReopen:b,multiArchive:y,multiCreateIndex:g,ids:this.state.selectedIds,cancelSelected:this.cancelSelected.bind(this),operate:this.state.multiOperate,loading:i,i18n:a})),!l&&T.total&&T.total>0?c.default.createElement(w,{total:T.total||0,curPage:j.page||1,sizePerPage:T.sizePerPage||30,paginationSize:4,query:j,refresh:o}):"")}}],[{key:"propTypes",value:{i18n:o.PropTypes.object.isRequired,options:o.PropTypes.object,getOptions:o.PropTypes.func.isRequired,collection:o.PropTypes.array.isRequired,selectedItem:o.PropTypes.object.isRequired,query:o.PropTypes.object.isRequired,loading:o.PropTypes.bool.isRequired,itemLoading:o.PropTypes.bool.isRequired,indexLoading:o.PropTypes.bool.isRequired,index:o.PropTypes.func.isRequired,refresh:o.PropTypes.func.isRequired,entry:o.PropTypes.func.isRequired,select:o.PropTypes.func.isRequired,create:o.PropTypes.func.isRequired,update:o.PropTypes.func.isRequired,reopen:o.PropTypes.func.isRequired,createIndex:o.PropTypes.func.isRequired,multiReopen:o.PropTypes.func.isRequired,multiArchive:o.PropTypes.func.isRequired,multiCreateIndex:o.PropTypes.func.isRequired,archive:o.PropTypes.func.isRequired,del:o.PropTypes.func.isRequired},enumerable:!0}]),t}(o.Component);t.default=R,e.exports=t.default}).call(this)}finally{}},1941:function(e,t,a){try{(function(){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=function(e,t,a){for(var n=!0;n;){var r=e,i=t,l=a;n=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,i);if(void 0!==s){if("value"in s)return s.value;var o=s.get;if(void 0===o)return;return o.call(l)}var c=Object.getPrototypeOf(r);if(null===c)return;e=c,t=i,a=l,n=!0,s=c=void 0}},o=a(1),c=n(o),u=a(2),d=a(5),p=a(4),f=function(e){function t(e){r(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={ecode:0},this.confirm=this.confirm.bind(this),this.cancel=this.cancel.bind(this)}return i(t,e),l(t,[{key:"confirm",value:function(){var e,t,a,n,r,i,l,s,o,c,u;return regeneratorRuntime.async(function(p){for(;;)switch(p.prev=p.next){case 0:if(e=this.props,t=e.multiArchive,a=e.multiReopen,n=e.multiCreateIndex,r=e.cancelSelected,i=e.ids,l=void 0===i?[]:i,s=e.operate,o=e.close,!(l.length<=0)){p.next=11;break}return p.abrupt("return");case 11:if(c=0,u="","reopen"!=s){p.next=19;break}return p.next=15,regeneratorRuntime.awrap(a(l));case 15:c=p.sent,u="已取消归档。",p.next=31;break;case 19:if("archive"!=s){p.next=26;break}return p.next=22,regeneratorRuntime.awrap(t(l));case 22:c=p.sent,u="项目已归档。",p.next=31;break;case 26:if("create_index"!=s){p.next=31;break}return p.next=29,regeneratorRuntime.awrap(n(l));case 29:c=p.sent,u="索引已创建。";case 31:0===c?(o(),r(),d.notify.show(u,"success",2e3)):d.notify.show("操作失败。","error",2e3),this.setState({ecode:c});case 33:case"end":return p.stop()}},null,this)}},{key:"cancel",value:function(){var e=this.props,t=e.close,a=e.loading;a||(this.setState({ecode:0}),t())}},{key:"render",value:function(){var e=this.props,t=e.i18n.errMsg,a=e.operate,n=e.loading,r="reopen"===a?"取消归档":"create_index"===a?"重新索引":"归档";return c.default.createElement(u.Modal,{show:!0,onHide:this.cancel,backdrop:"static","aria-labelledby":"contained-modal-title-sm"},c.default.createElement(u.Modal.Header,{closeButton:!0},c.default.createElement(u.Modal.Title,{id:"contained-modal-title-la"},"批处理项目 - ",r)),c.default.createElement(u.Modal.Body,null,"确认要 "+r+" 选中的项目？"),c.default.createElement(u.Modal.Footer,null,c.default.createElement("span",{className:"ralign"},0!==this.state.ecode&&!n&&t[this.state.ecode]),c.default.createElement("img",{src:p,className:n?"loading":"hide"}),c.default.createElement(u.Button,{onClick:this.confirm},"确定"),c.default.createElement(u.Button,{bsStyle:"link",disabled:n,onClick:this.cancel},"取消")))}}],[{key:"propTypes",value:{i18n:o.PropTypes.object.isRequired,ids:o.PropTypes.array.isRequired,loading:o.PropTypes.bool.isRequired,operate:o.PropTypes.string.isRequired,close:o.PropTypes.func.isRequired,cancelSelected:o.PropTypes.func.isRequired,multiReopen:o.PropTypes.func.isRequired,multiArchive:o.PropTypes.func.isRequired,multiCreateIndex:o.PropTypes.func.isRequired},enumerable:!0}]),t}(o.Component);t.default=f,e.exports=t.default}).call(this)}finally{}},1942:function(e,t,a){try{(function(){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=function(e,t,a){for(var n=!0;n;){var r=e,i=t,l=a;n=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,i);if(void 0!==s){if("value"in s)return s.value;var o=s.get;if(void 0===o)return;return o.call(l)}var c=Object.getPrototypeOf(r);if(null===c)return;e=c,t=i,a=l,n=!0,s=c=void 0}},o=a(1),c=n(o),u=a(21),d=a(31),p=a(2),f=a(201),h=a(7),m=n(h),y=a(38),v=n(y),b=a(3),g=n(b),w=a(5),E=a(15),P=a(1069),k=a(426),x=a(425),S=a(4),O=function(e){function t(e){r(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={createModalShow:!1,editModalShow:!1,archiveNotifyShow:!1,operateShow:!1,hoverRowId:"",willSetPrincipalPids:[],settingPrincipalPids:[],principal:{},name:"",mode:"card",status:"active"},this.state.sortkey=window.localStorage&&window.localStorage.getItem("myprojects-sortkey")||"default",this.createModalClose=this.createModalClose.bind(this),this.editModalClose=this.editModalClose.bind(this),this.archiveNotifyClose=this.archiveNotifyClose.bind(this),this.entry=this.entry.bind(this)}return i(t,e),l(t,[{key:"componentWillMount",value:function(){var e=this.props.index;e({status:this.state.status,sortkey:this.state.sortkey})}},{key:"createModalClose",value:function(){this.setState({createModalShow:!1})}},{key:"editModalClose",value:function(){this.setState({editModalShow:!1})}},{key:"archiveNotifyClose",value:function(){this.setState({archiveNotifyShow:!1})}},{key:"edit",value:function(e){this.setState({editModalShow:!0});var t=this.props.select;t(e)}},{key:"entry",value:function a(e){var a=this.props.entry;a("/project/"+e)}},{key:"componentDidMount",value:function(){var e=this;E("#pname").bind("keypress",function(t){if("13"==t.keyCode){var a=e.props.index;a(g.default.trim(e.state.name)?{status:e.state.status,name:g.default.trim(e.state.name),sortkey:e.state.sortkey}:{status:e.state.status,sortkey:e.state.sortkey})}})}},{key:"archiveNotify",value:function(e){this.setState({archiveNotifyShow:!0});var t=this.props.select;t(e)}},{key:"reopen",value:function n(e){var t,a,n,r;return regeneratorRuntime.async(function(i){for(;;)switch(i.prev=i.next){case 0:return t=this.props,a=t.select,n=t.reopen,a(e),i.next=6,regeneratorRuntime.awrap(n(e));case 6:r=i.sent,0===r?w.notify.show("已取消归档。","success",2e3):w.notify.show("打开失败。","error",2e3);case 8:case"end":return i.stop()}},null,this)}},{key:"createIndex",value:function h(e){var t,a,h,n;return regeneratorRuntime.async(function(r){for(;;)switch(r.prev=r.next){case 0:return t=this.props,a=t.select,h=t.createIndex,a(e),r.next=6,regeneratorRuntime.awrap(h(e));case 6:n=r.sent,0===n?w.notify.show("索引已创建。","success",2e3):w.notify.show("创建失败。","error",2e3);case 8:case"end":return r.stop()}},null,this)}},{key:"operateSelect",value:function(e){var t=this.state.hoverRowId;"1"===e?this.edit(t):"2"===e?this.archiveNotify(t):"3"===e?this.reopen(t):"4"===e&&this.createIndex(t)}},{key:"more",value:function y(){var e=this.props,y=e.more,t=e.collection;y({status:this.state.status,name:this.state.name,sortkey:this.state.sortkey,offset_key:t[t.length-1].key})}},{key:"willSetPrincipal",value:function(e){this.state.willSetPrincipalPids.push(e),this.setState({willSetPrincipalPids:this.state.willSetPrincipalPids})}},{key:"cancelSetPrincipal",value:function(e){var t=g.default.indexOf(this.state.willSetPrincipalPids,e);this.state.willSetPrincipalPids.splice(t,1),this.state.principal[e]=void 0,this.setState({willSetPrincipalPids:this.state.willSetPrincipalPids})}},{key:"setPrincipal",value:function(e){var t,a,n,r,i,l;return regeneratorRuntime.async(function(s){for(;;)switch(s.prev=s.next){case 0:return this.state.settingPrincipalPids.push(e),this.setState({settingPrincipalPids:this.state.settingPrincipalPids}),t=this.props,a=t.update,n=t.collection,s.next=7,regeneratorRuntime.awrap(a(e,{principal:(this.state.principal[e]||g.default.find(n,{id:e}).principal||{}).id}));case 7:r=s.sent,0===r?(i=this.state.willSetPrincipalPids.indexOf(e),this.state.willSetPrincipalPids.splice(i,1),l=g.default.indexOf(this.state.settingPrincipalPids,e),this.state.settingPrincipalPids.splice(l,1),this.setState({willSetPrincipalPids:this.state.willSetPrincipalPids,settingPrincipalPids:this.state.settingPrincipalPids}),w.notify.show("设置完成。","success",2e3)):(l=g.default.indexOf(this.state.settingPrincipalPids,e),this.state.settingPrincipalPids.splice(l,1),this.setState({settingPrincipalPids:this.state.settingPrincipalPids}),w.notify.show("设置失败。","error",2e3));case 9:case"end":return s.stop()}},null,this)}},{key:"handlePrincipalSelectChange",value:function(e,t){this.state.principal[e]=t,this.setState({principal:this.state.principal})}},{key:"searchUsers",value:function(e){var t,a;return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:if(e=e.toLowerCase()){n.next=3;break}return n.abrupt("return",{options:[]});case 3:return t=new v.default,n.next=6,regeneratorRuntime.awrap(t.request({url:"/user/search?s="+e}));case 6:return a=n.sent,n.abrupt("return",{options:g.default.map(a.data,function(e){return e.nameAndEmail=e.name+"("+e.email+")",e})});case 8:case"end":return n.stop()}},null,this)}},{key:"statusChange",value:function(e){this.setState({status:e});var t=this.props.index;t(g.default.trim(this.state.name)?{status:e,name:g.default.trim(this.state.name),sortkey:this.state.sortkey}:{status:e,sortkey:this.state.sortkey})}},{key:"sortChange",value:function(e){window.localStorage&&window.localStorage.setItem("myprojects-sortkey",e),this.setState({sortkey:e});var t=this.props.index;t(g.default.trim(this.state.name)?{status:this.state.status,name:g.default.trim(this.state.name),sortkey:e}:{status:this.state.status,sortkey:e})}},{key:"modeChange",value:function(){return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(this.setState({mode:"list"==this.state.mode?"card":"list"}));case 2:this.setState({mode:this.state.mode});case 3:case"end":return e.stop()}},null,this)}},{key:"onRowMouseOver",value:function(e){e.id!==this.state.hoverRowId&&this.setState({operateShow:!0,hoverRowId:e.id})}},{key:"onMouseLeave",value:function(){this.setState({operateShow:!1,hoverRowId:""})}},{key:"render",value:function(){var e=this,t=this.props,a=t.i18n,n=t.user,r=t.collection,i=t.increaseCollection,l=t.selectedItem,s=t.indexLoading,o=t.itemLoading,h=t.moreLoading,y=t.create,v=t.archive,b=t.update,w=t.options,O=void 0===w?{}:w,C=this.state,R=C.hoverRowId,T=C.operateShow,j=C.willSetPrincipalPids,N=C.settingPrincipalPids,_=[{value:"default",label:"默认"},{value:"activity",label:"活跃度"},{value:"create_time_asc",label:"创建时间 ↑"},{value:"create_time_desc",label:"创建时间 ↓"},{value:"key_asc",label:"健值 ↑"},{value:"key_desc",label:"健值 ↓"},{value:"all_issues_cnt",label:"全部问题数"},{value:"unresolved_issues_cnt",label:"未解决问题数"},{value:"assigntome_issues_cnt",label:"分配给我问题数"}],M=c.default.createElement("span",null,c.default.createElement("i",{className:"fa fa-cog"})),q=0;E(".cardContainer .card").length>0&&(q=E(".cardContainer .card").get(0).clientWidth-10);for(var I=[],F=r.length,B=function(t){I.push({id:r[t].id,no:t+1,name:c.default.createElement("div",null,c.default.createElement("a",{href:"#",onClick:function(a){a.preventDefault(),e.entry(r[t].key)}},r[t].name),r[t].description&&c.default.createElement("span",{className:"table-td-desc"},r[t].description)),key:r[t].key,principal:r[t].principal.id!==n.id?c.default.createElement("div",null,c.default.createElement("span",null,r[t].principal.name)):c.default.createElement("div",null,g.default.indexOf(j,r[t].id)===-1&&g.default.indexOf(N,r[t].id)===-1?c.default.createElement("div",{className:"editable-list-field"},c.default.createElement("div",{style:{display:"table",width:"100%"}},r[t].principal?c.default.createElement("span",null,c.default.createElement("div",{style:{display:"inline-block","float":"left",margin:"4px"}},r[t].principal.name||"-")):"-",c.default.createElement("span",{className:"edit-icon-zone edit-icon",onClick:e.willSetPrincipal.bind(e,r[t].id)},c.default.createElement("i",{className:"fa fa-pencil"})))):c.default.createElement("div",null,c.default.createElement(m.default.Async,{clearable:!1,disabled:g.default.indexOf(N,r[t].id)!==-1&&!0,options:[],value:e.state.principal[r[t].id]||r[t].principal,onChange:e.handlePrincipalSelectChange.bind(e,r[t].id),valueKey:"id",labelKey:"nameAndEmail",loadOptions:e.searchUsers,placeholder:"请输入用户"}),c.default.createElement("div",{className:g.default.indexOf(N,r[t].id)!==-1?"hide":"edit-button-group"},c.default.createElement(p.Button,{className:"edit-ok-button",onClick:e.setPrincipal.bind(e,r[t].id)},c.default.createElement("i",{className:"fa fa-check"})),c.default.createElement(p.Button,{className:"edit-cancel-button",onClick:e.cancelSetPrincipal.bind(e,r[t].id)},c.default.createElement("i",{className:"fa fa-close"})))),c.default.createElement("img",{src:S,style:{"float":"right"},className:g.default.indexOf(N,r[t].id)!==-1?"loading":"hide"})),status:"active"==r[t].status?c.default.createElement("span",{className:"project-inprogress-label"},"活动中"):c.default.createElement("span",{className:"project-close-label"},"已归档"),issues:c.default.createElement("ul",{style:{marginBottom:"0px",paddingLeft:"0px",listStyle:"none"}},c.default.createElement("li",null,"所有问题 - ",c.default.createElement(u.Link,{to:"/project/"+r[t].key+"/issue"},r[t].stats?r[t].stats.all:"")),c.default.createElement("li",null,"未解决的 - ",c.default.createElement(u.Link,{to:"/project/"+r[t].key+"/issue?resolution=Unresolved"},r[t].stats?r[t].stats.unresolved:"")),c.default.createElement("li",null,"分配给我的 - ",c.default.createElement(u.Link,{to:"/project/"+r[t].key+"/issue?resolution=Unresolved&assignee=me"},r[t].stats?r[t].stats.assigntome:""))),operation:r[t].principal.id===n.id&&c.default.createElement("div",null,T&&"active"==r[t].status&&R===r[t].id&&!o&&c.default.createElement(p.DropdownButton,{pullRight:!0,bsStyle:"link",style:{textDecoration:"blink",color:"#000"},key:t,title:M,id:"dropdown-basic-"+t,onSelect:e.operateSelect.bind(e)},c.default.createElement(p.MenuItem,{eventKey:"1"},"编辑"),c.default.createElement(p.MenuItem,{eventKey:"2"},"归档")),c.default.createElement("img",{src:S,className:o&&l.id===r[t].id?"loading":"hide"}))})},A=0;"list"==this.state.mode&&A<F;A++)B(A);var L={};return s?L.noDataText=c.default.createElement("div",null,c.default.createElement("img",{src:S,className:"loading"})):L.noDataText=c.default.createElement("div",null,"暂无数据显示",c.default.createElement("br",null),c.default.createElement("br",null),"您可创建项目 或 联系其他项目管理员将您添加到项目成员中"),L.onRowMouseOver=this.onRowMouseOver.bind(this),c.default.createElement("div",null,c.default.createElement("div",{style:{marginTop:"5px",height:"40px"}},c.default.createElement(p.FormGroup,null,1===O.allow_create_project&&c.default.createElement("span",{style:{"float":"left",width:"20%"}},c.default.createElement(p.Button,{onClick:function(){e.setState({createModalShow:!0})},disabled:s},c.default.createElement("i",{className:"fa fa-plus"})," 新建项目")),c.default.createElement("span",{style:{"float":"right"}},c.default.createElement(p.Button,{onClick:this.modeChange.bind(this)},c.default.createElement("i",{className:"list"==this.state.mode?"fa fa-th":"fa fa-list"}))),c.default.createElement("span",{style:{"float":"right",marginRight:"10px"}},c.default.createElement(p.DropdownButton,{pullRight:!0,title:"排序",onSelect:this.sortChange.bind(this)},g.default.map(_,function(t,a){return c.default.createElement(p.MenuItem,{key:a,eventKey:t.value},c.default.createElement("div",{style:{display:"inline-block",width:"20px",textAlign:"left"}},e.state.sortkey==t.value&&c.default.createElement("span",null,c.default.createElement("i",{className:"fa fa-check"}))),c.default.createElement("span",null,t.label))}))),c.default.createElement("span",{style:{"float":"right",width:"90px",marginRight:"10px"}},c.default.createElement(m.default,{
simpleValue:!0,clearable:!1,placeholder:"项目状态",value:this.state.status,onChange:this.statusChange.bind(this),options:[{value:"all",label:"全部"},{value:"active",label:"活动中"},{value:"archived",label:"已归档"}]})),c.default.createElement("span",{style:{"float":"right",width:"22%",marginRight:"10px"}},c.default.createElement(p.FormControl,{type:"text",id:"pname",style:{height:"36px"},value:this.state.name,onChange:function(t){e.setState({name:t.target.value})},placeholder:"名称、键值查询..."})))),c.default.createElement("div",{className:"clearfix",style:{marginLeft:"card"===this.state.mode?"-15px":0}},"list"===this.state.mode&&c.default.createElement(d.BootstrapTable,{data:I,bordered:!1,hover:!0,options:L,trClassName:"tr-top"},c.default.createElement(d.TableHeaderColumn,{dataField:"id",isKey:!0,hidden:!0},"ID"),c.default.createElement(d.TableHeaderColumn,{width:"50",dataField:"no"},"NO"),c.default.createElement(d.TableHeaderColumn,{dataField:"name"},"名称"),c.default.createElement(d.TableHeaderColumn,{dataField:"key",width:"150"},"键值"),c.default.createElement(d.TableHeaderColumn,{dataField:"principal",width:"280"},"责任人"),c.default.createElement(d.TableHeaderColumn,{dataField:"issues",width:"170"},"问题数"),c.default.createElement(d.TableHeaderColumn,{dataField:"status",width:"80"},"状态"),c.default.createElement(d.TableHeaderColumn,{width:"60",dataField:"operation"})),"card"===this.state.mode&&s&&c.default.createElement("div",{style:{marginTop:"50px",marginBottom:"50px",textAlign:"center"}},c.default.createElement("img",{src:S,className:"loading"})),"card"===this.state.mode&&!s&&r.length<=0&&c.default.createElement("div",{style:{marginTop:"50px",marginBottom:"50px",textAlign:"center"}},"暂无数据显示",c.default.createElement("br",null),c.default.createElement("br",null),"您可创建项目 或 联系其他项目管理员将您添加到项目成员中"),"card"===this.state.mode&&!s&&r.length>0&&r.map(function(t,a){return c.default.createElement("div",{className:"col-lg-3 col-md-4 col-sm-6 col-xs-12 cardContainer",key:a},c.default.createElement("div",{className:"card"},c.default.createElement("div",{className:"content"},c.default.createElement("div",{className:"title"},c.default.createElement("p",{className:"name"},c.default.createElement("a",{href:"#",title:t.name,onClick:function(a){a.preventDefault(),e.entry(t.key)}},t.key+" - "+t.name))),t.stats?c.default.createElement(f.AreaChart,{width:q,height:80,data:t.stats.trend||[],style:{margin:"40px auto"}},c.default.createElement(f.Area,{type:"monotone",dataKey:"new",stroke:"active"!==t.status?"#aaa":"#337ab7",fill:"active"!==t.status?"#aaa":"#337ab7",strokeWidth:1})):c.default.createElement("div",{style:{marginTop:"60px",textAlign:"center"}},c.default.createElement("img",{src:S,className:"loading"})),c.default.createElement("div",{className:"stats-cnt"},c.default.createElement("div",{className:"stats-cnt-cell"},"全部",c.default.createElement("br",null),t.stats?c.default.createElement(u.Link,{to:"/project/"+t.key+"/issue"},t.stats.all):c.default.createElement("img",{style:{height:"12px",width:"12px"},src:S,className:"loading"})),c.default.createElement("div",{className:"stats-cnt-cell"},"未解决",c.default.createElement("br",null),t.stats?c.default.createElement(u.Link,{to:"/project/"+t.key+"/issue?resolution=Unresolved"},t.stats.unresolved):c.default.createElement("img",{style:{height:"12px",width:"12px"},src:S,className:"loading"})),c.default.createElement("div",{className:"stats-cnt-cell"},"分配给我",c.default.createElement("br",null),t.stats?c.default.createElement(u.Link,{to:"/project/"+t.key+"/issue?assignee=me&resolution=Unresolved"},t.stats.assigntome):c.default.createElement("img",{style:{height:"12px",width:"12px"},src:S,className:"loading"})))),c.default.createElement("div",{className:"leader"},c.default.createElement("span",null,"负责人: ",t.principal.name)),"active"!==t.status&&c.default.createElement("div",{className:"statuss"},c.default.createElement("span",{className:"project-close-label"},"已归档")),t.principal.id===n.id&&c.default.createElement("div",{className:"btns"},"active"==t.status&&c.default.createElement("span",{style:{marginLeft:"5px"},title:"编辑",onClick:e.edit.bind(e,t.id),className:"comments-button"},c.default.createElement("i",{className:"fa fa-edit","aria-hidden":"true"})),"active"===t.status&&c.default.createElement("span",{style:{marginLeft:"5px"},title:"归档",onClick:e.archiveNotify.bind(e,t.id),className:"comments-button"},c.default.createElement("i",{className:"fa fa-archive","aria-hidden":"true"})))))}),this.state.editModalShow&&c.default.createElement(k,{show:!0,close:this.editModalClose,update:b,data:l,i18n:a}),this.state.createModalShow&&c.default.createElement(P,{show:!0,close:this.createModalClose,create:y,i18n:a}),this.state.archiveNotifyShow&&c.default.createElement(x,{show:!0,close:this.archiveNotifyClose,data:l,archive:v})),i.length>0&&i.length%(O.limit||4)===0&&c.default.createElement(p.ButtonGroup,{vertical:!0,block:!0,style:{marginTop:"15px"}},c.default.createElement(p.Button,{onClick:this.more.bind(this)},c.default.createElement("div",null,c.default.createElement("img",{src:S,className:h?"loading":"hide"}),c.default.createElement("span",null,h?"":"更多...")))))}}],[{key:"propTypes",value:{i18n:o.PropTypes.object.isRequired,user:o.PropTypes.object.isRequired,options:o.PropTypes.object.isRequired,collection:o.PropTypes.array.isRequired,increaseCollection:o.PropTypes.array.isRequired,selectedItem:o.PropTypes.object.isRequired,itemLoading:o.PropTypes.bool.isRequired,indexLoading:o.PropTypes.bool.isRequired,moreLoading:o.PropTypes.bool.isRequired,index:o.PropTypes.func.isRequired,more:o.PropTypes.func.isRequired,entry:o.PropTypes.func.isRequired,create:o.PropTypes.func.isRequired,select:o.PropTypes.func.isRequired,update:o.PropTypes.func.isRequired,reopen:o.PropTypes.func.isRequired,createIndex:o.PropTypes.func.isRequired,archive:o.PropTypes.func.isRequired},enumerable:!0}]),t}(o.Component);t.default=O,e.exports=t.default}).call(this)}finally{}}});
//# sourceMappingURL=project-22330d39961866779fe1.js.map