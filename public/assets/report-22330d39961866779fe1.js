webpackJsonp([10],{19:function(e,t,a){try{(function(){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var e=[{value:"Integer",label:"整数字段"},{value:"Number",label:"数值字段"},{value:"Text",label:"文本框单行"},{value:"TextArea",label:"文本框多行"},{value:"RichTextEditor",label:"富文本"},{value:"Select",label:"选择列表(单行)"},{value:"MultiSelect",label:"选择列表(多行)"},{value:"CheckboxGroup",label:"复选按钮"},{value:"RadioGroup",label:"单选按钮"},{value:"DatePicker",label:"日期选择控件"},{value:"DateTimePicker",label:"日期时间选择控件"},{value:"TimeTracking",label:"时间跟踪"},{value:"File",label:"文件"},{value:"SingleVersion",label:"单一版本选择"},{value:"MultiVersion",label:"多版本选择"},{value:"SingleUser",label:"单一用户选择"},{value:"MultiUser",label:"多用户选择"},{value:"Url",label:"URL"}];t.FieldTypes=e;var a=[{id:"new",name:"新建"},{id:"inprogress",name:"进行中"},{id:"completed",name:"完成"}];t.StateCategories=a;var r={project:[{id:"view_project",name:"查看项目"},{id:"manage_project",name:"管理项目"}],issue:[{id:"create_issue",name:"创建问题"},{id:"edit_issue",name:"编辑问题"},{id:"edit_self_issue",name:"编辑自己创建的问题"},{id:"delete_issue",name:"删除问题"},{id:"delete_self_issue",name:"删除自己创建的问题"},{id:"assign_issue",name:"分配问题"},{id:"assigned_issue",name:"被分配问题"},{id:"resolve_issue",name:"解决问题"},{id:"close_issue",name:"关闭问题"},{id:"reset_issue",name:"重置问题"},{id:"link_issue",name:"链接问题"},{id:"move_issue",name:"移动问题"},{id:"exec_workflow",name:"执行流程"}],comments:[{id:"add_comments",name:"添加评论"},{id:"edit_comments",name:"编辑评论"},{id:"edit_self_comments",name:"编辑自己的评论"},{id:"delete_comments",name:"删除评论"},{id:"delete_self_comments",name:"删除自己的评论"}],worklogs:[{id:"add_worklog",name:"添加工作日志"},{id:"edit_worklog",name:"编辑工作日志"},{id:"edit_self_worklog",name:"编辑自己的工作日志"},{id:"delete_worklog",name:"删除工作日志"},{id:"delete_self_worklog",name:"删除自己的工作日志"}],files:[{id:"upload_file",name:"上传附件"},{id:"download_file",name:"下载附件"},{id:"remove_file",name:"删除附件"},{id:"remove_self_file",name:"删除自己上传附件"}]};t.Permissions=r;var n=[{id:"create_issue",name:"创建问题"},{id:"edit_issue",name:"编辑问题"},{id:"del_issue",name:"删除问题"},{id:"resolve_issue",name:"解决问题"},{id:"close_issue",name:"关闭问题"},{id:"reopen_issue",name:"重新打开问题"},{id:"create_version",name:"创建版本"},{id:"edit_version",name:"编辑版本"},{id:"release_version",name:"发布版本"},{id:"merge_version",name:"合并版本"},{id:"del_version",name:"删除版本"},{id:"add_worklog",name:"添加工作日志"},{id:"edit_worklog",name:"编辑工作日志"}];t.webhookEvents=n;var l={CARD:"card",KANBAN_COLUMN:"kanban_column",KANBAN_FILTER:"kanban_filter"};t.CardTypes=l;var o=["#CCCCCC","#B3B3B3","#999999","#A4DD00","#68BC00","#006600","#73D8FF","#009CE0","#0062B1","#FCDC00","#FCC400","#FB9E00","#FE9200","#E27300","#C45100","#F44E3B","#D33115","#9F0500"];t.PriorityRGBs=o;var i=["#CCCCCC","#B3B3B3","#999999","#808080","#666666","#FDA1FF","#FA28FF","#AB149E","#AEA1FF","#7B64FF","#653294","#73D8FF","#009CE0","#0062B1","#68CCCA","#16A5A5","#0C797D","#A4DD00","#68BC00","#006600","#DBDF00","#B0BC00","#808900","#FCDC00","#FCC400","#FB9E00","#FE9200","#E27300","#C45100","#F44E3B","#D33115","#9F0500","#4D4D4D","#333333","#000000"];t.LabelRGBs=i;var s=660;t.DetailMinWidth=s;var u=1e3;t.DetailMaxWdith=u}).call(this)}finally{}},30:function(e,t,a){try{(function(){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),i=function(e,t,a){for(var r=!0;r;){var n=e,l=t,o=a;r=!1,null===n&&(n=Function.prototype);var i=Object.getOwnPropertyDescriptor(n,l);if(void 0!==i){if("value"in i)return i.value;var s=i.get;if(void 0===s)return;return s.call(o)}var u=Object.getPrototypeOf(n);if(null===u)return;e=u,t=l,a=o,r=!0,i=u=void 0}},s=a(1),u=r(s),c=a(15),d=function(e){function t(e){n(this,t),i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={visible:!1},this.timer=null,this.scrollToTop=this.scrollToTop.bind(this)}return l(t,e),o(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.visibilityHeight,a=void 0===t?400:t,r=c(".doc-container");r.unbind("scroll").scroll(function(){var t=r.scrollTop();e.setState({visible:t>a})})}},{key:"componentWillUnmount",value:function(){c(".doc-container").unbind("scroll")}},{key:"scrollToTop",value:function(){var e=this,t=c(".doc-container"),a=50*(parseInt(t.scrollTop()/1e3)+1);cancelAnimationFrame(this.timer),this.timer=requestAnimationFrame(function r(){var n=t.scrollTop();n>0?(t.scrollTop(n-a>0?n-a:0),e.timer=requestAnimationFrame(r)):cancelAnimationFrame(e.timer)})}},{key:"render",value:function(){var e=this.state.visible,t=void 0!==e&&e;return u.default.createElement("div",{id:"backtop",className:"back-top",style:{visibility:t&&"visible"||"hidden"},onClick:this.scrollToTop},u.default.createElement("div",{className:"back-top-content"},u.default.createElement("div",{className:"back-top-icon"})))}}],[{key:"propTypes",value:{visibilityHeight:s.PropTypes.number},enumerable:!0}]),t}(s.Component);t.default=d,e.exports=t.default}).call(this)}finally{}},41:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){var a={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(a[r]=e[r]);return a}Object.defineProperty(t,"__esModule",{value:!0}),t.CheckboxGroup=t.Checkbox=void 0;var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},o=a(1),i=r(o);t.Checkbox=i.default.createClass({displayName:"Checkbox",contextTypes:{checkboxGroup:i.default.PropTypes.object.isRequired},componentWillMount:function(){if(!this.context||!this.context.checkboxGroup)throw new Error("The `Checkbox` component must be used as a child of `CheckboxGroup`.")},render:function(){var e=this.context.checkboxGroup,t=e.name,a=e.checkedValues,r=e.onChange,n={};return a&&(n.checked=a.indexOf(this.props.value)>=0),"function"==typeof r&&(n.onChange=r.bind(null,this.props.value)),i.default.createElement("input",l({},this.props,{type:"checkbox",name:t},n))}}),t.CheckboxGroup=i.default.createClass({displayName:"CheckboxGroup",propTypes:{name:o.PropTypes.string,defaultValue:o.PropTypes.array,value:o.PropTypes.array,onChange:o.PropTypes.func,children:o.PropTypes.node.isRequired,Component:o.PropTypes.oneOfType([o.PropTypes.string,o.PropTypes.func,o.PropTypes.object])},getDefaultProps:function(){return{Component:"div"}},childContextTypes:{checkboxGroup:i.default.PropTypes.object},getChildContext:function(){return{checkboxGroup:{name:this.props.name,checkedValues:this.state.value,onChange:this._onCheckboxChange}}},getInitialState:function(){return{value:this.props.value||this.props.defaultValue||[]}},componentWillReceiveProps:function(e){e.value&&this.setState({value:e.value})},render:function(){var e=this.props,t=e.Component,a=(e.name,e.value,e.onChange,e.children),r=n(e,["Component","name","value","onChange","children"]);return i.default.createElement(t,r,a)},getValue:function(){return this.state.value},_isControlledComponent:function(){return!!this.props.value},_onCheckboxChange:function(e,t){var a;a=t.target.checked?this.state.value.concat(e):this.state.value.filter(function(t){return t!==e}),this._isControlledComponent()?this.setState({value:this.props.value}):this.setState({value:a}),"function"==typeof this.props.onChange&&this.props.onChange(a)}})},49:function(e,t,a){try{(function(){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),i=function(e,t,a){for(var r=!0;r;){var n=e,l=t,o=a;r=!1,null===n&&(n=Function.prototype);var i=Object.getOwnPropertyDescriptor(n,l);if(void 0!==i){if("value"in i)return i.value;var s=i.get;if(void 0===s)return;return s.call(o)}var u=Object.getPrototypeOf(n);if(null===u)return;e=u,t=l,a=o,r=!0,i=u=void 0}},s=a(1),u=r(s),c=a(12),d=a(35),f=a(19),p={beginDrag:function(e){return{id:e.id,index:e.index}}},m={hover:function(e,t,a){var r=t.getItem().index,n=e.index;if(r!==n){var l=(0,c.findDOMNode)(a).getBoundingClientRect(),o=(l.bottom-l.top)/2,i=t.getClientOffset(),s=i.y-l.top;r<n&&s<o||r>n&&s>o||(e.moveCard(r,n),t.getItem().index=n)}}},h=function(e){function t(){n(this,a),i(Object.getPrototypeOf(a.prototype),"constructor",this).apply(this,arguments)}l(t,e),o(t,[{key:"render",value:function(){var e=this.props,t=e.text,a=e.isDragging,r=e.connectDragSource,n=e.connectDropTarget,l=e.deleteCard,o=a?0:1,i={"float":"right",cursor:"pointer"};return r(n(u.default.createElement("div",{style:{opacity:o},className:"dragcard"},t,!!l&&u.default.createElement("span",{style:i,onClick:l,title:"删除",className:"rm-icon"},u.default.createElement("i",{className:"fa fa-remove"})))))}}],[{key:"propTypes",value:{connectDragSource:s.PropTypes.func.isRequired,connectDropTarget:s.PropTypes.func.isRequired,index:s.PropTypes.number.isRequired,isDragging:s.PropTypes.bool.isRequired,id:s.PropTypes.any.isRequired,text:s.PropTypes.string.isRequired,deleteCard:s.PropTypes.func,moveCard:s.PropTypes.func.isRequired},enumerable:!0}]);var a=t;return t=(0,d.DragSource)(f.CardTypes.CARD,p,function(e,t){return{connectDragSource:e.dragSource(),isDragging:t.isDragging()}})(t)||t,t=(0,d.DropTarget)(f.CardTypes.CARD,m,function(e){return{connectDropTarget:e.dropTarget()}})(t)||t}(s.Component);t.default=h,e.exports=t.default}).call(this)}finally{}},339:function(e,t,a){try{(function(){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},i=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),s=function(e,t,a){for(var r=!0;r;){var n=e,l=t,o=a;r=!1,null===n&&(n=Function.prototype);var i=Object.getOwnPropertyDescriptor(n,l);if(void 0!==i){if("value"in i)return i.value;var s=i.get;if(void 0===s)return;return s.call(o)}var u=Object.getPrototypeOf(n);if(null===u)return;e=u,t=l,a=o,r=!0,i=u=void 0}},u=a(1),c=r(u),d=a(8),f=a(2),p=a(3),m=r(p),h=a(5),y=a(4),v=function(e,t){var a={};return e.name?m.default.findIndex(t.filters||[],{name:e.name})!==-1&&(a.name="该名称已存在"):a.name="必填",a},g=function(e){function t(e){n(this,a),s(Object.getPrototypeOf(a.prototype),"constructor",this).call(this,e),this.state={ecode:0},this.handleSubmit=this.handleSubmit.bind(this),this.handleCancel=this.handleCancel.bind(this)}l(t,e),i(t,[{key:"handleSubmit",value:function(){var e,t,a,r,n,l,o,i;return regeneratorRuntime.async(function(s){for(;;)switch(s.prev=s.next){case 0:return e=this.props,t=e.mode,a=e.values,r=e.save,n=e.close,l=e.query,o=void 0===l?{}:l,a.query=o,s.next=10,regeneratorRuntime.awrap(r(t,a));case 10:i=s.sent,0===i?(this.setState({ecode:0}),n(),h.notify.show("保存完成。","success",2e3)):this.setState({ecode:i});case 12:case"end":return s.stop()}},null,this)}},{key:"handleCancel",value:function(){var e=this.props,t=e.close,a=e.submitting;a||(this.setState({ecode:0}),t())}},{key:"render",value:function(){var e=this.props,t=e.i18n.errMsg,a=e.fields.name,r=e.handleSubmit,n=e.invalid,l=e.submitting,i=e.sqlTxt,s=void 0===i?"":i;return c.default.createElement(f.Modal,{show:!0,onHide:this.handleCancel,backdrop:"static","aria-labelledby":"contained-modal-title-sm"},c.default.createElement(f.Modal.Header,{closeButton:!0},c.default.createElement(f.Modal.Title,{id:"contained-modal-title-la"},"保存检索")),c.default.createElement("form",{onSubmit:r(this.handleSubmit),onKeyDown:function(e){13==e.keyCode&&e.preventDefault()}},c.default.createElement(f.Modal.Body,null,c.default.createElement(f.FormGroup,{controlId:"formControlsText",validationState:a.touched&&a.error?"error":null},c.default.createElement(f.ControlLabel,null,c.default.createElement("span",{className:"txt-impt"},"*"),"名称"),c.default.createElement(f.FormControl,o({disabled:l,type:"text"},a,{placeholder:"过滤器名"})),a.touched&&a.error&&c.default.createElement(f.HelpBlock,{style:{"float":"right"}},a.error)),c.default.createElement(f.FormGroup,null,c.default.createElement(f.ControlLabel,null,"条件"),c.default.createElement("div",{className:"cond-txt"},s||"全部"))),c.default.createElement(f.Modal.Footer,null,c.default.createElement("span",{className:"ralign"},0!==this.state.ecode&&!l&&t[this.state.ecode]),c.default.createElement("img",{src:y,className:l?"loading":"hide"}),c.default.createElement(f.Button,{disabled:l||n,type:"submit"},"确定"),c.default.createElement(f.Button,{bsStyle:"link",disabled:l,onClick:this.handleCancel},"取消"))))}}],[{key:"propTypes",value:{i18n:u.PropTypes.object.isRequired,filters:u.PropTypes.array,query:u.PropTypes.object,mode:u.PropTypes.string,sqlTxt:u.PropTypes.string,submitting:u.PropTypes.bool,invalid:u.PropTypes.bool,values:u.PropTypes.object,fields:u.PropTypes.object,handleSubmit:u.PropTypes.func.isRequired,close:u.PropTypes.func.isRequired,save:u.PropTypes.func.isRequired},enumerable:!0}]);var a=t;return t=(0,d.reduxForm)({form:"save_filter",fields:["name"],validate:v})(t)||t}(u.Component);t.default=g,e.exports=t.default}).call(this)}finally{}},340:function(e,t,a){try{(function(){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),i=function(e,t,a){for(var r=!0;r;){var n=e,l=t,o=a;r=!1,null===n&&(n=Function.prototype);var i=Object.getOwnPropertyDescriptor(n,l);if(void 0!==i){if("value"in i)return i.value;var s=i.get;if(void 0===s)return;return s.call(o)}var u=Object.getPrototypeOf(n);if(null===u)return;e=u,t=l,a=o,r=!0,i=u=void 0}},s=a(1),u=r(s),c=a(2),d=a(35),f=a(86),p=r(f),m=a(56),h=r(m),y=a(49),v=r(y),g=a(3),b=r(g),E=a(5),w=a(4),_=function(e){function t(e){n(this,a),i(Object.getPrototypeOf(a.prototype),"constructor",this).call(this,e),this.moveCard=this.moveCard.bind(this),this.state={cards:[],ecode:0};for(var t=this.props.filters||[],r=t.length,l=0;l<r;l++)this.state.cards.push({id:t[l].id,text:t[l].name});this.state.strCards=JSON.stringify(this.state.cards)}l(t,e),o(t,[{key:"save",value:function(){var e,t,a,r,n;return regeneratorRuntime.async(function(l){for(;;)switch(l.prev=l.next){case 0:return e=this.props,t=e.close,a=e.config,r=0,n={sequence:b.default.map(this.state.cards,b.default.iteratee("id"))},l.next=7,regeneratorRuntime.awrap(a(n));case 7:r=l.sent,0===r?(this.setState({ecode:0}),t(),E.notify.show("保存完成。","success",2e3)):this.setState({ecode:r});case 9:case"end":return l.stop()}},null,this)}},{key:"cancel",value:function(){var e=this.props,t=e.close,a=e.loading;a||t()}},{key:"deleteCard",value:function(e){this.state.cards.splice(e,1),this.setState({cards:this.state.cards})}},{key:"moveCard",value:function(e,t){var a=this.state.cards,r=a[e];this.setState((0,h.default)(this.state,{cards:{$splice:[[e,1],[t,0,r]]}}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.cards,r=t.strCards,n=this.props,l=n.i18n.errMsg,o=n.loading,i=n.title,s=n.isRemovable,d=void 0===s||s;return u.default.createElement(c.Modal,{show:!0,onHide:this.cancel.bind(this),backdrop:"static","aria-labelledby":"contained-modal-title-sm"},u.default.createElement(c.Modal.Header,{closeButton:!0},u.default.createElement(c.Modal.Title,{id:"contained-modal-title-la"},i?i:"过滤器管理")),u.default.createElement(c.Modal.Body,{style:{maxHeight:"420px",overflow:"auto"}},u.default.createElement(c.Form,{horizontal:!0},a.length>0&&u.default.createElement("div",{style:{marginBottom:"8px"}},"通过上下拖拽改变过滤器显示顺序。"),a.length>0?a.map(function(t,a){return u.default.createElement(v.default,{key:t.id,index:a,id:t.id,text:t.text,moveCard:e.moveCard,deleteCard:d?e.deleteCard.bind(e,a):null})}):u.default.createElement("p",null,"暂无自定义过滤器。"))),u.default.createElement(c.Modal.Footer,null,u.default.createElement("span",{className:"ralign"},0!==this.state.ecode&&!o&&l[this.state.ecode]),u.default.createElement("img",{src:w,className:o?"loading":"hide"}),u.default.createElement(c.Button,{disabled:o||r==JSON.stringify(a),onClick:this.save.bind(this)},"确定"),u.default.createElement(c.Button,{bsStyle:"link",disabled:o,onClick:this.cancel.bind(this)},"取消")))}}],[{key:"propTypes",value:{i18n:s.PropTypes.object.isRequired,title:s.PropTypes.string,loading:s.PropTypes.bool,isRemovable:s.PropTypes.bool,config:s.PropTypes.func.isRequired,filters:s.PropTypes.array.isRequired,close:s.PropTypes.func.isRequired},enumerable:!0}]);var a=t;return t=(0,d.DragDropContext)(p.default)(t)||t}(s.Component);t.default=_,e.exports=t.default}).call(this)}finally{}},1949:function(e,t,a){try{(function(){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{"default":e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e){return{actions:(0,m.bindActionCreators)(y,e)}}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},u=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),c=function(e,t,a){for(var r=!0;r;){var n=e,l=t,o=a;r=!1,null===n&&(n=Function.prototype);var i=Object.getOwnPropertyDescriptor(n,l);if(void 0!==i){if("value"in i)return i.value;var s=i.get;if(void 0===s)return;return s.call(o)}var u=Object.getPrototypeOf(n);if(null===u)return;e=u,t=l,a=o,r=!0,i=u=void 0}},d=a(1),f=n(d),p=a(22),m=a(23),h=a(2087),y=r(h),v=a(20),g=a(60),b=a(1950),E=a(1952),w=a(1960),_=a(1957),k=a(1956),x=a(1953),T=function(e){function t(e){l(this,a),c(Object.getPrototypeOf(a.prototype),"constructor",this).call(this,e),this.pid=""}o(t,e),u(t,[{key:"gotoIssue",value:function(e){var t="/project/"+this.pid+"/issue";this.context.router.push({pathname:t,query:e})}},{key:"refresh",value:function(e){var t=this.props.params.mode,a="/project/"+this.pid+"/report/"+t;this.context.router.push({pathname:a,query:e})}},{key:"componentWillMount",value:function(){var e=this.props.params.key;this.pid=e,this.props.actions.getOptions(e)}},{key:"index",value:function(){return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(this.props.actions.index(this.pid));case 2:return e.abrupt("return",this.props.report.ecode);case 3:case"end":return e.stop()}},null,this)}},{key:"worklog",value:function(e){return regeneratorRuntime.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(this.props.actions.worklog(this.pid,g.stringify(e||{})));case 2:return t.abrupt("return",this.props.report.ecode);case 3:case"end":return t.stop()}},null,this)}},{key:"saveFilter",value:function(e,t){return regeneratorRuntime.async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,regeneratorRuntime.awrap(this.props.actions.saveFilter(this.pid,e,t));case 2:return a.abrupt("return",this.props.report.ecode);case 3:case"end":return a.stop()}},null,this)}},{key:"resetFilter",value:function(e){return regeneratorRuntime.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(this.props.actions.resetFilter(this.pid,e));case 2:return t.abrupt("return",this.props.report.ecode);case 3:case"end":return t.stop()}},null,this)}},{key:"editFilter",value:function(e,t){return regeneratorRuntime.async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,regeneratorRuntime.awrap(this.props.actions.editFilter(this.pid,e,t));case 2:return a.abrupt("return",this.props.report.ecode);case 3:case"end":return a.stop()}},null,this)}},{key:"getWorklogList",value:function(e){return regeneratorRuntime.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(this.props.actions.getWorklogList(this.pid,g.stringify(e||{})));case 2:return t.abrupt("return",this.props.report.ecode);case 3:case"end":return t.stop()}},null,this)}},{key:"getWorklogDetail",value:function(e,t){return regeneratorRuntime.async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,regeneratorRuntime.awrap(this.props.actions.getWorklogDetail(this.pid,e,g.stringify(t||{})));case 2:return a.abrupt("return",this.props.report.ecode);case 3:case"end":return a.stop()}},null,this)}},{key:"exportWorklog",value:function(e){var t=document.createElement("a");t.style.display="none",t.href=(0,v.urlWrapper)("/project/"+this.pid+"/report/worklog/export?"+g.stringify(e||{})),t.target="_blank",document.body.appendChild(t),t.click(),document.body.removeChild(t)}},{key:"trend",value:function(e){return regeneratorRuntime.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(this.props.actions.trend(this.pid,g.stringify(e||{})));case 2:return t.abrupt("return",this.props.report.ecode);case 3:case"end":return t.stop()}},null,this)}},{key:"timetracks",value:function(e){return regeneratorRuntime.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(this.props.actions.timetracks(this.pid,g.stringify(e||{})));case 2:return t.abrupt("return",this.props.report.ecode);case 3:case"end":return t.stop()}},null,this)}},{key:"getTimetrackDetail",value:function(e){return regeneratorRuntime.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(this.props.actions.getTimetrackDetail(this.pid,e));case 2:return t.abrupt("return",this.props.report.ecode);case 3:case"end":return t.stop()}},null,this)}},{key:"regressions",value:function(e){return regeneratorRuntime.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(this.props.actions.regressions(this.pid,g.stringify(e||{})));case 2:return t.abrupt("return",this.props.report.ecode);case 3:case"end":return t.stop()}},null,this)}},{key:"issues",value:function(e){return regeneratorRuntime.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(this.props.actions.issues(this.pid,g.stringify(e||{})));case 2:return t.abrupt("return",this.props.report.ecode);case 3:case"end":return t.stop()}},null,this)}},{key:"render",value:function(){var e=this.props,t=e.location.query,a=void 0===t?{}:t,r=e.params.mode;return f.default.createElement("div",null,!r&&f.default.createElement(b,s({i18n:this.props.i18n,index:this.index.bind(this),reset:this.resetFilter.bind(this),edit:this.editFilter.bind(this),project:this.props.project.item},this.props.report)),"worklog"==r&&f.default.createElement(w,s({i18n:this.props.i18n,layout:this.props.layout,index:this.worklog.bind(this),getWorklogList:this.getWorklogList.bind(this),getWorklogDetail:this.getWorklogDetail.bind(this),exportWorklog:this.exportWorklog.bind(this),saveFilter:this.saveFilter.bind(this),project:this.props.project.item,query:a,refresh:this.refresh.bind(this)},this.props.report)),"trend"==r&&f.default.createElement(_,s({i18n:this.props.i18n,layout:this.props.layout,index:this.trend.bind(this),saveFilter:this.saveFilter.bind(this),project:this.props.project.item,query:a,refresh:this.refresh.bind(this),gotoIssue:this.gotoIssue.bind(this)},this.props.report)),"timetracks"==r&&f.default.createElement(k,s({i18n:this.props.i18n,saveFilter:this.saveFilter.bind(this),project:this.props.project.item,index:this.timetracks.bind(this),collection:this.props.report.timetracks,indexLoading:this.props.report.timetracksLoading,select:this.getTimetrackDetail.bind(this),item:this.props.report.timetrackItem,itemLoading:this.props.report.timetrackItemLoading,query:a,refresh:this.refresh.bind(this)},this.props.report)),"regressions"==r&&f.default.createElement(x,s({i18n:this.props.i18n,layout:this.props.layout,saveFilter:this.saveFilter.bind(this),project:this.props.project.item,index:this.regressions.bind(this),query:a,refresh:this.refresh.bind(this),gotoIssue:this.gotoIssue.bind(this)},this.props.report)),"issues"==r&&f.default.createElement(E,s({i18n:this.props.i18n,layout:this.props.layout,saveFilter:this.saveFilter.bind(this),project:this.props.project.item,index:this.issues.bind(this),query:a,refresh:this.refresh.bind(this),gotoIssue:this.gotoIssue.bind(this)},this.props.report)))}}],[{key:"contextTypes",value:{router:d.PropTypes.object.isRequired},enumerable:!0},{key:"propTypes",value:{actions:d.PropTypes.object.isRequired,location:d.PropTypes.object.isRequired,i18n:d.PropTypes.object.isRequired,params:d.PropTypes.object.isRequired,layout:d.PropTypes.object.isRequired,project:d.PropTypes.object.isRequired,report:d.PropTypes.object.isRequired},enumerable:!0}]);var a=t;return t=(0,p.connect)(function(e){var t=e.i18n,a=e.layout,r=e.project,n=e.report;return{i18n:t,layout:a,project:r,report:n}},i)(t)||t}(d.Component);t.default=T,e.exports=t.default}).call(this)}finally{}},1950:function(e,t,a){try{(function(){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),i=function(e,t,a){for(var r=!0;r;){var n=e,l=t,o=a;r=!1,null===n&&(n=Function.prototype);var i=Object.getOwnPropertyDescriptor(n,l);if(void 0!==i){if("value"in i)return i.value;var s=i.get;if(void 0===s)return;return s.call(o)}var u=Object.getPrototypeOf(n);if(null===u)return;e=u,t=l,a=o,r=!0,i=u=void 0}},s=a(1),u=r(s),c=a(21),d=a(2),f=(a(5),a(3)),p=r(f),m=a(1951),h=r(m),y=a(60),v=a(340),g=a(4),b=function(e){function t(e){n(this,t),i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={resetShow:!1,searchConfigShow:!1,editShow:!1,selectedBlock:""},this.getClassifiedData=this.getClassifiedData.bind(this)}return l(t,e),o(t,[{key:"componentWillMount",value:function(){var e=this.props.index;e()}},{key:"getClassifiedData",value:function(e,t,a){for(var r=this,n=this.props.project,l=[],o=e.length,i=0;i<o;){for(var s=e.slice(i,i+a),d=s.length;d<=a;d++)s.push({});l.push(s),i+=a}var f=[u.default.createElement("tr",null,u.default.createElement("td",null,"该模块过滤器已被删除，请点击",u.default.createElement("a",{href:"#",onClick:function(e){e.preventDefault(),r.setState({selectedBlock:t,resetShow:!0})}},"重置"),"。"))];return l.length>0&&(f=p.default.map(l,function(e,a){return u.default.createElement("tr",{key:a},p.default.map(e,function(e,a){return u.default.createElement("td",{key:a},e.name&&u.default.createElement(c.Link,{to:"/project/"+n.key+"/report/"+t+(p.default.isEmpty(e.query)?"":"?"+y.stringify(e.query))},e.name))}))})),f}},{key:"edit",value:function a(e){var t,a,r;return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:return t=this.state.selectedBlock,a=this.props.edit,n.next=4,regeneratorRuntime.awrap(a(t,e));case 4:return r=n.sent,n.abrupt("return",r);case 6:case"end":return n.stop()}},null,this)}},{key:"render",value:function(){var e=this,t=this.props,a=t.i18n,r=(t.project,t.filters),n=t.loading,l=t.saveLoading,o=(t.edit,t.reset),i={issues:"问题分布图",trend:"问题趋势图",worklog:"人员工作日志报告",timetracks:"时间跟踪报告",regressions:"问题解决回归分布",others:"其它报表"},s={issues:"fa fa-pie-chart",trend:"fa fa-line-chart",worklog:"fa fa-bar-chart",timetracks:"fa fa-clock-o",regressions:"fa fa-bar-chart",others:"fa fa-area-chart"},c={},f={},m=["issues","trend","worklog","timetracks","regressions","others"];return p.default.forEach(m,function(t,a){c[t]=u.default.createElement("div",{className:"report-list-header",key:a},u.default.createElement("span",null,u.default.createElement("i",{className:s[t]})," ",i[t]),r[t]&&r[t].length>0&&u.default.createElement("span",{className:"report-button report-edit-button",onClick:function(){e.setState({selectedBlock:t,searchConfigShow:!0})},title:"编辑顺序"},u.default.createElement("i",{className:"fa fa-edit"})),u.default.createElement("span",{className:"report-button report-edit-button",onClick:function(){e.setState({selectedBlock:t,resetShow:!0})},title:"重置"},u.default.createElement("i",{className:"fa fa-undo"}))),f[t]=e.getClassifiedData(r[t]||[],t,4)}),n?u.default.createElement("div",{style:{marginTop:"50px",textAlign:"center"}},u.default.createElement("img",{src:g,className:"loading"})):u.default.createElement("div",{style:{marginTop:"15px",marginBottom:"30px"},className:"report-container"},u.default.createElement(d.Panel,{header:c.issues},u.default.createElement(d.Table,{responsive:!0},u.default.createElement("tbody",null,f.issues))),u.default.createElement(d.Panel,{header:c.trend},u.default.createElement(d.Table,{
responsive:!0},u.default.createElement("tbody",null,f.trend))),u.default.createElement(d.Panel,{header:c.worklog},u.default.createElement(d.Table,{responsive:!0},u.default.createElement("tbody",null,f.worklog))),u.default.createElement(d.Panel,{header:c.timetracks},u.default.createElement(d.Table,{responsive:!0,hover:!0},u.default.createElement("tbody",null,f.timetracks))),u.default.createElement(d.Panel,{header:c.regressions},u.default.createElement(d.Table,{responsive:!0,hover:!0},u.default.createElement("tbody",null,f.regressions))),this.state.resetShow&&u.default.createElement(h.default,{show:!0,blockTitles:i,mode:this.state.selectedBlock,close:function(){e.setState({resetShow:!1})},reset:o,loading:l,i18n:a}),this.state.searchConfigShow&&u.default.createElement(v,{show:!0,title:i[this.state.selectedBlock]+" - 过滤器管理",close:function(){e.setState({searchConfigShow:!1})},filters:r[this.state.selectedBlock],config:this.edit.bind(this),loading:l,i18n:a}))}}],[{key:"propTypes",value:{i18n:s.PropTypes.object.isRequired,project:s.PropTypes.object.isRequired,filters:s.PropTypes.object.isRequired,loading:s.PropTypes.bool.isRequired,saveLoading:s.PropTypes.bool.isRequired,reset:s.PropTypes.func.isRequired,edit:s.PropTypes.func.isRequired,index:s.PropTypes.func.isRequired},enumerable:!0}]),t}(s.Component);t.default=b,e.exports=t.default}).call(this)}finally{}},1951:function(e,t,a){try{(function(){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),i=function(e,t,a){for(var r=!0;r;){var n=e,l=t,o=a;r=!1,null===n&&(n=Function.prototype);var i=Object.getOwnPropertyDescriptor(n,l);if(void 0!==i){if("value"in i)return i.value;var s=i.get;if(void 0===s)return;return s.call(o)}var u=Object.getPrototypeOf(n);if(null===u)return;e=u,t=l,a=o,r=!0,i=u=void 0}},s=a(1),u=r(s),c=a(2),d=a(5),f=a(4),p=function(e){function t(e){n(this,t),i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={ecode:0},this.confirm=this.confirm.bind(this),this.cancel=this.cancel.bind(this)}return l(t,e),o(t,[{key:"confirm",value:function(){var e,t,a,r,n;return regeneratorRuntime.async(function(l){for(;;)switch(l.prev=l.next){case 0:return e=this.props,t=e.close,a=e.reset,r=e.mode,l.next=6,regeneratorRuntime.awrap(a(r));case 6:n=l.sent,this.setState({ecode:n}),0===n&&(t(),d.notify.show("已重置。","success",2e3));case 9:case"end":return l.stop()}},null,this)}},{key:"cancel",value:function(){var e=this.props,t=e.loading,a=e.close;t||a()}},{key:"render",value:function(){var e=this.props,t=e.i18n.errMsg,a=e.blockTitles,r=e.mode,n=e.loading;return u.default.createElement(c.Modal,{show:!0,onHide:this.cancel,backdrop:"static","aria-labelledby":"contained-modal-title-sm"},u.default.createElement(c.Modal.Header,{closeButton:!0},u.default.createElement(c.Modal.Title,{id:"contained-modal-title-la"},"重置过滤器 - ",a[r])),u.default.createElement(c.Modal.Body,null,"确认要重置此模块的过滤器？"),u.default.createElement(c.Modal.Footer,null,u.default.createElement("span",{className:"ralign"},0!==this.state.ecode&&!n&&t[this.state.ecode]),u.default.createElement("img",{src:f,className:n?"loading":"hide"}),u.default.createElement(c.Button,{disabled:n,onClick:this.confirm},"确定"),u.default.createElement(c.Button,{bsStyle:"link",disabled:n,onClick:this.cancel},"取消")))}}],[{key:"propTypes",value:{i18n:s.PropTypes.object.isRequired,close:s.PropTypes.func.isRequired,loading:s.PropTypes.bool.isRequired,reset:s.PropTypes.func.isRequired,blockTitles:s.PropTypes.string.isRequired,mode:s.PropTypes.string.isRequired},enumerable:!0}]),t}(s.Component);t.default=p,e.exports=t.default}).call(this)}finally{}},1952:function(e,t,a){try{(function(){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),i=function(e,t,a){for(var r=!0;r;){var n=e,l=t,o=a;r=!1,null===n&&(n=Function.prototype);var i=Object.getOwnPropertyDescriptor(n,l);if(void 0!==i){if("value"in i)return i.value;var s=i.get;if(void 0===s)return;return s.call(o)}var u=Object.getPrototypeOf(n);if(null===u)return;e=u,t=l,a=o,r=!0,i=u=void 0}},s=a(1),u=r(s),c=a(21),d=a(2),f=a(7),p=r(f),m=a(201),h=a(3),y=r(h),v=a(115),g=a(339),b=r(g),E=(a(6),a(4)),w=a(30),_=function(e){function t(e){n(this,t),i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={stat_x:"",stat_y:"",shape:"pie",sort:"default",issueFilterShow:!1,saveFilterShow:!1},this.gotoIssue=this.gotoIssue.bind(this)}return l(t,e),o(t,[{key:"componentWillMount",value:function(){var e=this.props,t=e.index,a=e.query;t(a)}},{key:"componentWillReceiveProps",value:function(e){var t=e.query||{},a=this.props,r=a.index,n=a.query;y.default.isEqual(t,n)||r(y.default.assign({},{stat_x:"type"},t)),this.setState({stat_x:t.stat_x||"type",stat_y:t.stat_y||""})}},{key:"search",value:function(){var e=this.props,t=e.query,a=void 0===t?{}:t,r=e.refresh,n=y.default.assign({},a);this.state.stat_x?n.stat_x=this.state.stat_x:delete n.stat_x,this.state.stat_y?n.stat_y=this.state.stat_y:delete n.stat_y,r(n)}},{key:"gotoIssue",value:function a(e){var t=this.props,r=t.query,a=t.gotoIssue;a(y.default.assign({},y.default.omit(r,["stat_x","stat_y"]),e))}},{key:"render",value:function(){var e=this,t=this.props,a=t.i18n,r=t.layout,n=t.project,l=t.filters,o=t.options,i=t.optionsLoading,s=t.issues,f=t.issuesLoading,h=t.refresh,g=t.query,_=t.saveFilter,k=this.state,x=k.stat_x,T=k.stat_y,C=k.shape,P=k.sort,O=["#3b7fc4","#815b3a","#8eb021","#d39c3f","#654982","#4a6785","#f79232","#f15c75","#ac707a"],j=[{value:"default",label:"默认顺序"},{value:"total_asc",label:"总数升序"},{value:"total_desc",label:"总数降序"}],R=["Select","MultiSelect","CheckboxGroup","RadioGroup","SingleVersion","MultiVersion","SingleUser"],S=y.default.filter(o.fields||[],function(e){return R.indexOf(e.type)!==-1}),q="";if(!i){var F=g.stat_x;if(F){var N=y.default.findIndex(S,{key:F});q="X轴: "+(N!==-1?S[N].name:"")}var D=g.stat_y;if(D){var N=y.default.findIndex(S,{key:D});q+=(F?" | ":"")+"Y轴: "+(N!==-1?S[N].name:"")}var L=(0,v.parseQuery)(g,o);L&&(q+=(q?" | ":"")+L)}var I=C;x!=T&&T&&"pie"==C&&(I="bar");var B=[];return B="total_asc"==P?y.default.sortBy(s,function(e){return e.cnt}):"total_desc"==P?y.default.sortBy(s,function(e){return-e.cnt}):s,x!=T?y.default.forEach(B,function(e){y.default.forEach(e.y||[],function(t,a){e["y_"+a+"_cnt"]=t.cnt})}):y.default.forEach(B,function(e){e.y&&delete e.y}),u.default.createElement("div",{className:"project-report-container"},u.default.createElement(w,null),u.default.createElement("div",{className:"report-title"},"问题分布图",u.default.createElement(c.Link,{to:"/project/"+n.key+"/report"},u.default.createElement(d.Button,{bsStyle:"link"},"返回"))),u.default.createElement(d.Form,{horizontal:!0,className:"report-filter-form"},u.default.createElement(d.FormGroup,null,u.default.createElement(d.Col,{sm:1,componentClass:d.ControlLabel},"X轴"),u.default.createElement(d.Col,{sm:3},u.default.createElement(p.default,{simpleValue:!0,placeholder:"请选择",clearable:!1,value:x||null,onChange:function(t){e.state.stat_x=t,e.search()},options:y.default.map(S,function(e){return{value:e.key,label:e.name}})})),u.default.createElement(d.Col,{sm:1,componentClass:d.ControlLabel},"Y轴"),u.default.createElement(d.Col,{sm:3},u.default.createElement(p.default,{simpleValue:!0,placeholder:"请选择",value:this.state.stat_y||null,onChange:function(t){e.state.stat_y=t,e.search()},options:y.default.map(S,function(e){return{value:e.key,label:e.name}})})),u.default.createElement(d.Col,{sm:4},u.default.createElement(d.Button,{bsStyle:"link",onClick:function(){e.setState({issueFilterShow:!e.state.issueFilterShow})},style:{"float":"right",marginTop:"0px"}},"更多问题过滤 ",this.state.issueFilterShow?u.default.createElement("i",{className:"fa fa-angle-up"}):u.default.createElement("i",{className:"fa fa-angle-down"}))))),u.default.createElement(v.IssueFilterList,{values:g,visable:this.state.issueFilterShow,notShowFields:["watcher"],options:o,onHide:function(){e.setState({issueFilterShow:!1})},onChange:function(e){h(e)}}),u.default.createElement("div",{className:"report-conds-style"},q&&u.default.createElement("div",{className:"cond-bar",style:{marginTop:"0px","float":"left"}},u.default.createElement("div",{className:"cond-contents",title:q},u.default.createElement("b",null,"检索条件"),"：",q),u.default.createElement("div",{className:"remove-icon",onClick:function(){e.setState({saveFilterShow:!0})},title:"保存当前检索"},u.default.createElement("i",{className:"fa fa-save"}))),u.default.createElement(d.ButtonGroup,{className:"report-shape-buttongroup"},(x===T||!T)&&u.default.createElement(d.Button,{title:"饼状图",style:{height:"36px",backgroundColor:"pie"==I&&"#eee"},onClick:function(){e.setState({shape:"pie"})}},"饼状图"),u.default.createElement(d.Button,{title:"柱状图",style:{height:"36px",backgroundColor:"bar"==I&&"#eee"},onClick:function(){e.setState({shape:"bar"})}},"柱状图"),u.default.createElement(d.Button,{title:"折线图",style:{height:"36px",backgroundColor:"line"==I&&"#eee"},onClick:function(){e.setState({shape:"line"})}},"折线图")),u.default.createElement("div",{className:"report-select-sort"},u.default.createElement(p.default,{simpleValue:!0,clearable:!1,placeholder:"选择顺序",value:this.state.sort||"default",onChange:function(t){e.setState({sort:t})},options:j}))),f?u.default.createElement("div",{style:{height:"550px",paddingTop:"40px"}},u.default.createElement("div",{style:{textAlign:"center"}},u.default.createElement("img",{src:E,className:"loading"}))):u.default.createElement("div",{style:{height:"565px"}},B.length<=0&&u.default.createElement("div",{className:"report-shape-container",style:{paddingTop:"40px"}},u.default.createElement("div",{style:{textAlign:"center"}},u.default.createElement("span",{style:{fontSize:"160px",color:"#FFC125"}},u.default.createElement("i",{className:"fa fa-warning"})),u.default.createElement("br",null),u.default.createElement("span",null,"抱歉，暂无满足该检索条件的数据。"))),"bar"===I&&B.length>0&&u.default.createElement("div",{className:"report-shape-container"},u.default.createElement(m.BarChart,{width:.95*r.containerWidth,height:380,barSize:40,data:B,style:{margin:"25px auto"}},u.default.createElement(m.CartesianGrid,{strokeDasharray:"3 3"}),u.default.createElement(m.XAxis,{dataKey:"name"}),u.default.createElement(m.YAxis,null),u.default.createElement(m.Tooltip,null),x!==T&&T&&u.default.createElement(m.Legend,null),x!==T&&T?y.default.map(B[0].y||[],function(e,t){return u.default.createElement(m.Bar,{key:t,dataKey:"y_"+t+"_cnt",stackId:"a",name:e.name,fill:O[t%O.length]})}):u.default.createElement(m.Bar,{dataKey:"cnt",name:"个数",fill:"#3b7fc4"}))),"line"===I&&B.length>0&&u.default.createElement("div",{className:"report-shape-container"},u.default.createElement(m.LineChart,{width:.95*r.containerWidth,height:380,data:B,style:{margin:"25px auto"}},u.default.createElement(m.XAxis,{dataKey:"name"}),u.default.createElement(m.YAxis,null),u.default.createElement(m.CartesianGrid,{strokeDasharray:"3 3"}),u.default.createElement(m.Tooltip,null),x!==T&&T&&u.default.createElement(m.Legend,null),x!==T&&T?y.default.map(B[0].y||[],function(e,t){return u.default.createElement(m.Line,{key:t,dataKey:"y_"+t+"_cnt",name:e.name,stroke:O[t%O.length]})}):u.default.createElement(m.Line,{dataKey:"cnt",name:"个数",stroke:"#d04437"}))),"pie"===I&&B.length>0&&u.default.createElement("div",{className:"report-shape-container"},u.default.createElement(m.PieChart,{width:800,height:380,style:{margin:"25px auto"}},u.default.createElement(m.Pie,{dataKey:"cnt",data:B,cx:400,cy:200,outerRadius:130,label:!0},y.default.map(B,function(e,t){return u.default.createElement(m.Cell,{key:t,fill:O[t%O.length]})})),u.default.createElement(m.Tooltip,null))),B.length>0&&u.default.createElement("div",{style:{"float":"left",width:"100%",marginBottom:"30px"}},u.default.createElement("span",null,"注：该图表最多统计满足当前检索条件下的10000条结果。"),x!=T&&T?u.default.createElement(d.Table,{responsive:!0,bordered:!0},u.default.createElement("thead",null,u.default.createElement("tr",null,u.default.createElement("th",null,"维度"),y.default.map(B[0].y,function(e,t){return u.default.createElement("th",{key:t},e.name)}))),u.default.createElement("tbody",null,y.default.map(B,function(t,a){return u.default.createElement("tr",{key:a},u.default.createElement("td",null,t.name),y.default.map(t.y,function(a,r){return u.default.createElement("td",{key:r},u.default.createElement("a",{href:"#",onClick:function(r){r.preventDefault();var n={};n[x]=t.id,n[T]=a.id,e.gotoIssue(n)}},a.cnt))}))}))):u.default.createElement(d.Table,{responsive:!0,bordered:!0},u.default.createElement("thead",null,u.default.createElement("tr",null,u.default.createElement("th",null,x?y.default.find(S,{key:x}).name:""),u.default.createElement("th",null,"个数"))),u.default.createElement("tbody",null,y.default.map(B,function(t,a){return u.default.createElement("tr",{key:a},u.default.createElement("td",null,t.name),u.default.createElement("td",null,u.default.createElement("a",{href:"#",onClick:function(a){a.preventDefault();var r={};r[x]=t.id,e.gotoIssue(r)}},t.cnt)))}))))),this.state.saveFilterShow&&u.default.createElement(b.default,{show:!0,close:function(){e.setState({saveFilterShow:!1})},filters:l.data||[],options:o,save:_,mode:"issues",query:g,sqlTxt:q,i18n:a}))}}],[{key:"propTypes",value:{i18n:s.PropTypes.object.isRequired,layout:s.PropTypes.object.isRequired,project:s.PropTypes.object.isRequired,filters:s.PropTypes.object.isRequired,options:s.PropTypes.object.isRequired,optionsLoading:s.PropTypes.bool.isRequired,query:s.PropTypes.object,issues:s.PropTypes.array.isRequired,issuesLoading:s.PropTypes.bool.isRequired,refresh:s.PropTypes.func.isRequired,gotoIssue:s.PropTypes.func.isRequired,saveFilter:s.PropTypes.func.isRequired,index:s.PropTypes.func.isRequired},enumerable:!0}]),t}(s.Component);t.default=_,e.exports=t.default}).call(this)}finally{}},1953:function(e,t,a){try{(function(){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),i=function(e,t,a){for(var r=!0;r;){var n=e,l=t,o=a;r=!1,null===n&&(n=Function.prototype);var i=Object.getOwnPropertyDescriptor(n,l);if(void 0!==i){if("value"in i)return i.value;var s=i.get;if(void 0===s)return;return s.call(o)}var u=Object.getPrototypeOf(n);if(null===u)return;e=u,t=l,a=o,r=!0,i=u=void 0}},s=a(1),u=r(s),c=a(21),d=a(2),f=a(7),p=r(f),m=a(201),h=a(3),y=r(h),v=a(115),g=a(339),b=r(g),E=(a(6),a(4)),w=a(30),_=function(e){function t(e){n(this,t),i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={stat_dimension:"",his_resolvers:"",issueFilterShow:!1,saveFilterShow:!1},this.gotoIssue=this.gotoIssue.bind(this)}return l(t,e),o(t,[{key:"componentWillMount",value:function(){var e=this.props,t=e.index,a=e.query;t(a)}},{key:"componentWillReceiveProps",value:function(e){var t=e.query||{},a=this.props,r=a.index,n=a.query;y.default.isEqual(t,n)||r(t),this.setState({stat_dimension:t.stat_dimension||"",his_resolvers:t.his_resolvers||""})}},{key:"search",value:function(){var e=this.props,t=e.query,a=void 0===t?{}:t,r=e.refresh,n=y.default.assign({},a);this.state.stat_dimension?n.stat_dimension=this.state.stat_dimension:delete n.stat_dimension,this.state.his_resolvers?n.his_resolvers=this.state.his_resolvers:delete n.his_resolvers,r(n)}},{key:"gotoIssue",value:function a(e){var a=this.props.gotoIssue;a({title:e.join(",")})}},{key:"render",value:function(){var e=this,t=this.props,a=t.i18n,r=t.layout,n=t.project,l=t.filters,o=t.options,i=t.optionsLoading,s=t.regressions,f=t.regressionsLoading,h=t.refresh,g=t.query,_=t.saveFilter,k=o.users||[],x=["Select","MultiSelect","CheckboxGroup","RadioGroup","SingleVersion","MultiVersion","SingleUser"],T=y.default.filter(y.default.filter(o.fields||[],function(e){return["state","resolution"].indexOf(e.key)===-1}),function(e){return x.indexOf(e.type)!==-1}),C="";if(!i){var P=g.stat_dimension;if(P){var O=y.default.findIndex(T,{key:P});C="统计维度: "+(O!==-1?T[O].name:"")}var j=g.his_resolvers;j&&!function(){var e=j.split(","),t=[];y.default.forEach(e,function(e){var a=-1;(a=y.default.findIndex(k,{id:e}))!==-1&&t.push(k[a].name)}),t.length>0&&(C=(C?C+" | ":"")+"历史解决者: "+t.join(","))}();var R=(0,v.parseQuery)(g,o);R&&(C+=(C?" | ":"")+R)}var S="",q=[];return this.state.stat_dimension?(S="bar",y.default.forEach(s,function(e){var t={};t.category=e.category,t.ones=e.ones||[],t.gt_ones=e.gt_ones||[],t.ones_cnt=e.ones.length,t.gt_ones_cnt=e.gt_ones.length,t.total_cnt=t.ones_cnt+t.gt_ones_cnt,q.push(t)})):(S="pie",s.length>0&&(q.push({name:"一次通过",nos:s[0].ones,cnt:s[0].ones.length}),q.push({name:"大于一次",nos:s[0].gt_ones,cnt:s[0].gt_ones.length}))),u.default.createElement("div",{className:"project-report-container"},u.default.createElement(w,null),u.default.createElement("div",{className:"report-title"},"问题解决回归分布",u.default.createElement(c.Link,{to:"/project/"+n.key+"/report"},u.default.createElement(d.Button,{bsStyle:"link"},"返回"))),u.default.createElement(d.Form,{horizontal:!0,className:"report-filter-form"},u.default.createElement(d.FormGroup,null,u.default.createElement(d.Col,{sm:1,componentClass:d.ControlLabel},"统计维度"),u.default.createElement(d.Col,{sm:3},u.default.createElement(p.default,{simpleValue:!0,placeholder:"请选择",value:this.state.stat_dimension||null,onChange:function(t){e.state.stat_dimension=t,e.search()},options:y.default.map(T,function(e){return{value:e.key,label:e.name}})})),u.default.createElement(d.Col,{sm:2,componentClass:d.ControlLabel},"历史解决者"),u.default.createElement(d.Col,{sm:3},u.default.createElement(p.default,{simpleValue:!0,multi:!0,placeholder:"选择解决者",value:this.state.his_resolvers,onChange:function(t){e.state.his_resolvers=t,e.search()},options:y.default.map(k,function(e){return{value:e.id,label:e.name}})})),u.default.createElement(d.Col,{sm:3},u.default.createElement(d.Button,{bsStyle:"link",onClick:function(){e.setState({issueFilterShow:!e.state.issueFilterShow})},style:{"float":"right",marginTop:"0px"}},"更多问题过滤 ",this.state.issueFilterShow?u.default.createElement("i",{className:"fa fa-angle-up"}):u.default.createElement("i",{className:"fa fa-angle-down"}))))),u.default.createElement(v.IssueFilterList,{values:g,visable:this.state.issueFilterShow,notShowFields:["watcher"],options:o,onHide:function(){e.setState({issueFilterShow:!1})},onChange:function(e){h(e)}}),u.default.createElement("div",{className:"report-conds-style"},C&&u.default.createElement("div",{className:"cond-bar",style:{marginTop:"0px","float":"left"}},u.default.createElement("div",{className:"cond-contents",title:C},u.default.createElement("b",null,"检索条件"),"：",C),u.default.createElement("div",{className:"remove-icon",onClick:function(){e.setState({saveFilterShow:!0})},title:"保存当前检索"},u.default.createElement("i",{className:"fa fa-save"})))),f?u.default.createElement("div",{style:{height:"550px",paddingTop:"40px"}},u.default.createElement("div",{style:{textAlign:"center"}},u.default.createElement("img",{src:E,className:"loading"}))):u.default.createElement("div",{style:{height:"565px"}},q.length<=0&&u.default.createElement("div",{className:"report-shape-container",style:{paddingTop:"40px"}},u.default.createElement("div",{style:{textAlign:"center"}},u.default.createElement("span",{style:{fontSize:"160px",color:"#FFC125"}},u.default.createElement("i",{className:"fa fa-warning"})),u.default.createElement("br",null),u.default.createElement("span",null,"抱歉，暂无满足该检索条件的数据。"))),"bar"===S&&q.length>0&&u.default.createElement("div",{className:"report-shape-container"},u.default.createElement(m.BarChart,{width:.95*r.containerWidth,height:380,barSize:40,data:q,style:{margin:"25px auto"}},u.default.createElement(m.CartesianGrid,{strokeDasharray:"3 3"}),u.default.createElement(m.XAxis,{dataKey:"category"}),u.default.createElement(m.YAxis,null),u.default.createElement(m.Tooltip,null),u.default.createElement(m.Legend,null),u.default.createElement(m.Bar,{dataKey:"ones_cnt",name:"一次回归",stackId:"a",fill:"#4572A7"}),u.default.createElement(m.Bar,{dataKey:"gt_ones_cnt",name:"大于一次",stackId:"a",fill:"#AA4643"}))),"pie"===S&&q.length>0&&u.default.createElement("div",{className:"report-shape-container"},u.default.createElement(m.PieChart,{width:800,height:380,style:{margin:"25px auto"}},u.default.createElement(m.Pie,{dataKey:"cnt",data:q,cx:400,cy:200,outerRadius:130,label:!0},u.default.createElement(m.Cell,{fill:"#3b7fc4"}),u.default.createElement(m.Cell,{fill:"#f79232"})),u.default.createElement(m.Tooltip,null))),q.length>0&&u.default.createElement("div",{style:{"float":"left",width:"100%",marginBottom:"30px"}},u.default.createElement("span",null,"注：该图表最多统计满足当前检索条件下的10000条结果。"),this.state.stat_dimension&&u.default.createElement(d.Table,{responsive:!0,bordered:!0},u.default.createElement("thead",null,u.default.createElement("tr",null,u.default.createElement("th",null,y.default.find(T,{key:this.state.stat_dimension}).name),u.default.createElement("th",null,"一次回归"),u.default.createElement("th",null,"大于一次"),u.default.createElement("th",null,"一次通过率"))),u.default.createElement("tbody",null,y.default.map(q,function(t,a){return u.default.createElement("tr",{key:a},e.state.stat_dimension&&u.default.createElement("td",null,t.category),u.default.createElement("td",null,u.default.createElement("a",{href:"#",onClick:function(a){a.preventDefault(),e.gotoIssue(t.ones)}},t.ones_cnt)),u.default.createElement("td",null,u.default.createElement("a",{href:"#",onClick:function(a){a.preventDefault(),e.gotoIssue(t.gt_ones)}},t.gt_ones_cnt)),u.default.createElement("td",null,y.default.round(t.ones_cnt/t.total_cnt*100,2)+"%"))}))),!this.state.stat_dimension&&u.default.createElement(d.Table,{responsive:!0,bordered:!0},u.default.createElement("thead",null,u.default.createElement("tr",null,u.default.createElement("th",null,"一次回归"),u.default.createElement("th",null,"大于一次"),u.default.createElement("th",null,"一次通过率"))),u.default.createElement("tbody",null,u.default.createElement("tr",null,u.default.createElement("td",null,u.default.createElement("a",{href:"#",onClick:function(t){t.preventDefault(),e.gotoIssue(q[0].nos)}},q[0].cnt)),u.default.createElement("td",null,u.default.createElement("a",{href:"#",onClick:function(t){t.preventDefault(),e.gotoIssue(q[1].nos)}},q[1].cnt)),u.default.createElement("td",null,y.default.round(q[0].cnt/(q[0].cnt+q[1].cnt)*100,2)+"%")))))),this.state.saveFilterShow&&u.default.createElement(b.default,{show:!0,close:function(){e.setState({saveFilterShow:!1})},filters:l.data||[],options:o,save:_,mode:"regressions",query:g,sqlTxt:C,i18n:a}))}}],[{key:"propTypes",value:{i18n:s.PropTypes.object.isRequired,layout:s.PropTypes.object.isRequired,project:s.PropTypes.object.isRequired,filters:s.PropTypes.object.isRequired,options:s.PropTypes.object.isRequired,optionsLoading:s.PropTypes.bool.isRequired,query:s.PropTypes.object,regressions:s.PropTypes.array.isRequired,regressionsLoading:s.PropTypes.bool.isRequired,refresh:s.PropTypes.func.isRequired,gotoIssue:s.PropTypes.func.isRequired,saveFilter:s.PropTypes.func.isRequired,index:s.PropTypes.func.isRequired},enumerable:!0}]),t}(s.Component);t.default=_,e.exports=t.default}).call(this)}finally{}},1954:function(e,t,a){try{(function(){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),i=function(e,t,a){for(var r=!0;r;){var n=e,l=t,o=a;r=!1,null===n&&(n=Function.prototype);var i=Object.getOwnPropertyDescriptor(n,l);if(void 0!==i){if("value"in i)return i.value;var s=i.get;if(void 0===s)return;return s.call(o)}var u=Object.getPrototypeOf(n);if(null===u)return;e=u,t=l,a=o,r=!0,i=u=void 0}},s=a(1),u=r(s),c=a(2),d=a(3),f=r(d),p=a(20),m=a(6),h=a(4),y=function(e){function t(e){n(this,t),i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.handleCancel=this.handleCancel.bind(this)}return l(t,e),o(t,[{key:"handleCancel",value:function(){var e=this.props.close;e()}},{key:"componentWillMount",value:function(){var e=this.props,t=e.issue,a=e.index;a(t.id)}},{key:"refresh",value:function(){var e=this.props,t=e.issue,a=e.index;a(t.id)}},{key:"render",value:function(){var e=this.props,t=e.data,a=e.issue,r=e.loading,n=e.options,l=n.w2d,o=void 0===l?5:l,i=n.d2h,s=void 0===i?8:i,d=o*s*60,y=60*s;return u.default.createElement(c.Modal,{show:!0,onHide:this.handleCancel,bsSize:"large",backdrop:"static","aria-labelledby":"contained-modal-title-sm"},u.default.createElement(c.Modal.Header,{closeButton:!0},u.default.createElement(c.Modal.Title,{id:"contained-modal-title-la"},"工作日志 - ",a.no)),r&&u.default.createElement(c.Modal.Body,{style:{height:"580px",overflow:"auto"}},u.default.createElement("div",{style:{textAlign:"center",marginTop:"250px"}},u.default.createElement("img",{src:h,className:"loading"}))),!r&&u.default.createElement(c.Modal.Body,{style:{height:"580px",overflow:"auto"}},u.default.createElement("div",{style:{marginBottom:"10px"}},u.default.createElement("span",null,"共耗费 ",u.default.createElement("strong",null,(0,p.ttFormat)(f.default.reduce(t,function(e,t){return e+(t.spend_m||0)},0),d,y))," 分钟"),u.default.createElement("span",{title:"刷新"},u.default.createElement(c.Button,{bsStyle:"link",onClick:this.refresh.bind(this)},u.default.createElement("i",{className:"fa fa-refresh"})))),u.default.createElement(c.Table,{condensed:!0,responsive:!0},u.default.createElement("thead",null,u.default.createElement("tr",null,u.default.createElement("th",null,"人员"),u.default.createElement("th",null,"开始时间"),u.default.createElement("th",null,"耗费时间"),u.default.createElement("th",null,"备注"))),u.default.createElement("tbody",null,f.default.map(t,function(e,t){return u.default.createElement("tr",{key:t},u.default.createElement("td",null,e.recorder.name||"-"),u.default.createElement("td",null,e.started_at?m.unix(e.started_at).format("YYYY/MM/DD HH:mm:ss"):"-"),u.default.createElement("td",null,e.spend||"-"),u.default.createElement("td",{width:"45%",dangerouslySetInnerHTML:{__html:f.default.escape(e.comments).replace(/(\r\n)|(\n)/g,"<br/>")||"-"}}))})))),u.default.createElement(c.Modal.Footer,null,u.default.createElement(c.Button,{onClick:this.handleCancel},"关闭")))}}],[{key:"propTypes",value:{i18n:s.PropTypes.object.isRequired,options:s.PropTypes.object.isRequired,issue:s.PropTypes.object.isRequired,close:s.PropTypes.func.isRequired,index:s.PropTypes.func.isRequired,loading:s.PropTypes.bool.isRequired,data:s.PropTypes.array.isRequired},enumerable:!0}]),t}(s.Component);t.default=y,e.exports=t.default}).call(this)}finally{}},1955:function(e,t,a){try{(function(){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),i=function(e,t,a){for(var r=!0;r;){var n=e,l=t,o=a;r=!1,null===n&&(n=Function.prototype);var i=Object.getOwnPropertyDescriptor(n,l);if(void 0!==i){if("value"in i)return i.value;var s=i.get;if(void 0===s)return;return s.call(o)}var u=Object.getPrototypeOf(n);if(null===u)return;e=u,t=l,a=o,r=!0,i=u=void 0}},s=a(1),u=r(s),c=a(2),d=a(20),f=a(3),p=r(f),m=function(e){function t(e){n(this,t),i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e)}return l(t,e),o(t,[{key:"render",value:function(){var e=this.props,t=e.options,a=e.values,r=(t.w2d||5)*(t.d2h||8)*60,n=60*(t.d2h||8),l=p.default.round(a.spend_m/(a.spend_m+a.left_m),2);l=p.default.max([l,0]),a.spend_m>0&&(l=p.default.max([l,.01])),l=p.default.min([l,1]);var o=a.diff_m<0?p.default.round(a.origin_m/(a.spend_m+a.left_m),2):p.default.round((a.spend_m+a.left_m)/a.origin_m,2);return o=p.default.max([o,0]),o=p.default.min([o,1]),u.default.createElement("div",null,u.default.createElement(c.Table,{style:{marginBottom:"10px"}},u.default.createElement("tbody",null,u.default.createElement("tr",null,u.default.createElement("td",{width:"10%"},u.default.createElement("span",{style:{fontWeight:600}},"完成度")),u.default.createElement("td",{width:"60%"},u.default.createElement("table",{style:{width:"100%",marginTop:"3px"}},u.default.createElement("tbody",null,u.default.createElement("tr",null,u.default.createElement("td",{style:{width:p.default.round(100*l)+"%"}},u.default.createElement("div",{className:"color-bar",style:{borderTopColor:"#51a825"}})),u.default.createElement("td",{style:{width:p.default.round(100*(1-l))+"%"}},u.default.createElement("div",{className:"color-bar",style:{borderTopColor:"#ec8e00"}})))))),u.default.createElement("td",{width:"30%"},u.default.createElement("span",null,p.default.round(100*l)+"%"),u.default.createElement("span",{style:{marginLeft:"10px",fontWeight:600}},a.spend," 比 ",(0,d.ttFormat)(a.spend_m+a.left_m,r,n)))),u.default.createElement("tr",null,u.default.createElement("td",{width:"10%"},u.default.createElement("span",{style:{fontWeight:600}},"精准度")),u.default.createElement("td",{
width:"60%"},u.default.createElement("table",{style:{width:"100%",marginTop:"3px"}},u.default.createElement("tbody",null,u.default.createElement("tr",null,u.default.createElement("td",{style:{width:p.default.round(100*o)+"%"}},u.default.createElement("div",{className:"color-bar"})),u.default.createElement("td",{style:{width:p.default.round(100*(1-o))+"%"}},u.default.createElement("div",{className:"color-bar",style:{borderTopColor:"#ccc"}})))))),u.default.createElement("td",{width:"30%"},u.default.createElement("span",null,p.default.round(100*o)+"%"),u.default.createElement("span",{style:{marginLeft:"10px",fontWeight:600}},a.diff_m<0?(0,d.ttFormat)(a.origin_m,r,n):(0,d.ttFormat)(a.spend_m+a.left_m,r,n)," 比 ",a.diff_m<0?(0,d.ttFormat)(a.spend_m+a.left_m,r,n):(0,d.ttFormat)(a.origin_m,r,n)))))))}}],[{key:"propTypes",value:{options:s.PropTypes.object.isRequired,values:s.PropTypes.object.isRequired},enumerable:!0}]),t}(s.Component);t.default=m,e.exports=t.default}).call(this)}finally{}},1956:function(e,t,a){try{(function(){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),i=function(e,t,a){for(var r=!0;r;){var n=e,l=t,o=a;r=!1,null===n&&(n=Function.prototype);var i=Object.getOwnPropertyDescriptor(n,l);if(void 0!==i){if("value"in i)return i.value;var s=i.get;if(void 0===s)return;return s.call(o)}var u=Object.getPrototypeOf(n);if(null===u)return;e=u,t=l,a=o,r=!0,i=u=void 0}},s=a(1),u=r(s),c=a(21),d=a(2),f=a(7),p=r(f),m=a(31),h=a(3),y=r(h),v=a(115),g=a(20),b=a(339),E=r(b),w=a(1955),_=r(w),k=a(1954),x=r(k),T=(a(6),a(4)),C=a(30),P=function(e){function t(e){n(this,t),i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={scale:"all",selectedIds:[],detailShow:!1,issueFilterShow:!1,saveFilterShow:!1}}return l(t,e),o(t,[{key:"componentWillMount",value:function(){var e=this.props,t=e.index,a=e.query;t(a)}},{key:"componentWillReceiveProps",value:function(e){var t=e.query||{},a=this.props,r=a.index,n=a.query;y.default.isEqual(t,n)||r(t),this.setState({scale:t.scale?t.scale:"all"})}},{key:"search",value:function(){var e=this.props,t=e.query,a=void 0===t?{}:t,r=e.refresh,n=y.default.assign({},a);this.state.scale?n.scale=this.state.scale:delete n.scale,r(n)}},{key:"showDetail",value:function(e){this.setState({detailShow:!0,selectedIssue:e})}},{key:"onSelectAll",value:function(e,t){if(e)for(var a=t.length,r=0;r<a;r++)this.state.selectedIds.push(t[r].id);else this.state.selectedIds=[];this.setState({selectedIds:this.state.selectedIds})}},{key:"onSelect",value:function(e,t){if(t)this.state.selectedIds.push(e.id);else{for(var a=[],r=this.state.selectedIds.length,n=0;n<r;n++)this.state.selectedIds[n]!==e.id&&a.push(this.state.selectedIds[n]);this.state.selectedIds=a}this.setState({selectedIds:this.state.selectedIds})}},{key:"render",value:function(){var e=this,t=this.props,a=t.i18n,r=t.project,n=t.filters,l=t.options,o=t.options,i=o.states,s=void 0===i?[]:i,f=o.types,h=void 0===f?[]:f,b=t.optionsLoading,w=t.collection,k=t.indexLoading,P=t.select,O=t.item,j=t.itemLoading,R=t.refresh,S=t.query,q=t.saveFilter,F="";if(!b){F="统计范围: "+("only"===S.scale?"仅包含有初始预估时间的":"所有问题");var N=(0,v.parseQuery)(S,l);N&&(F+=" | "+N)}var D=this.state.selectedIds,L=(l.w2d||5)*(l.d2h||8)*60,I=60*(l.d2h||8),B={origin_m:0,spend_m:0,left_m:0};y.default.forEach(w,function(e){(D.length>0&&D.indexOf(e.id)!==-1||D.length<=0)&&(B.origin_m+=e.origin_m||0,B.spend_m+=e.spend_m||0,B.left_m+=e.left_m||0)}),B.origin=(0,g.ttFormat)(B.origin_m,L,I),B.spend=(0,g.ttFormat)(B.spend_m,L,I),B.left=(0,g.ttFormat)(B.left_m,L,I),B.diff_m=B.origin_m-B.spend_m-B.left_m,B.diff=(0,g.ttFormat)(B.diff_m,L,I);for(var M=[],A=w.length,W=function(t){var a=w[t].state?y.default.findIndex(s,{id:w[t].state}):-1,r="";a!==-1&&(r="state-"+(s[a].category||"")+"-label"),M.push({id:w[t].id,type:u.default.createElement("span",{className:"type-abb",title:y.default.findIndex(h,{id:w[t].type})!==-1?y.default.find(h,{id:w[t].type}).name:""},y.default.findIndex(h,{id:w[t].type})!==-1?y.default.find(h,{id:w[t].type}).abb:"-"),name:u.default.createElement("div",null,w[t].spend_m>0?u.default.createElement("a",{href:"#",onClick:function(a){a.preventDefault(),e.showDetail(w[t])},style:{whiteSpace:"pre-wrap",wordWrap:"break-word"}},u.default.createElement("span",null,w[t].no+" - "+w[t].title)):u.default.createElement("span",{style:{whiteSpace:"pre-wrap",wordWrap:"break-word"}},w[t].no+" - "+w[t].title)),state:a!==-1?u.default.createElement("span",{className:r},s[a].name||"-"):"-",origin:w[t].origin||"-",spend:w[t].spend||"-",left:w[t].left||"-",diff:w[t].origin?(0,g.ttFormat)(w[t].origin_m-w[t].spend_m-w[t].left_m,L,I):"-"})},G=0;G<A;G++)W(G);var H={};w.length>0&&(H={mode:"checkbox",selected:y.default.filter(this.state.selectedIds,function(e){return"xxx"!==e}),unselectable:["xxx"],onSelect:this.onSelect.bind(this),onSelectAll:this.onSelectAll.bind(this)},M.push({id:"xxx",type:"",name:"合计",state:"",origin:B.origin,spend:B.spend,left:B.left,diff:B.diff}));var K={};return k?K.noDataText=u.default.createElement("div",null,u.default.createElement("img",{src:T,className:"loading"})):K.noDataText="暂无数据显示。",u.default.createElement("div",{className:"project-report-container"},u.default.createElement(C,null),u.default.createElement("div",{className:"report-title"},"问题时间跟踪报告",u.default.createElement(c.Link,{to:"/project/"+r.key+"/report"},u.default.createElement(d.Button,{bsStyle:"link"},"返回"))),u.default.createElement(d.Form,{horizontal:!0,className:"report-filter-form"},u.default.createElement(d.FormGroup,null,u.default.createElement(d.Col,{sm:1,componentClass:d.ControlLabel},"统计范围"),u.default.createElement(d.Col,{sm:4},u.default.createElement(p.default,{simpleValue:!0,clearable:!1,placeholder:"请选择",value:this.state.scale,onChange:function(t){e.state.scale=t,e.search()},options:[{value:"all",label:"所有问题"},{value:"only",label:"仅包含有初始预估时间的"}]})),u.default.createElement(d.Col,{sm:7},u.default.createElement(d.Button,{bsStyle:"link",onClick:function(){e.setState({issueFilterShow:!e.state.issueFilterShow})},style:{"float":"right",marginTop:"0px"}},"更多问题过滤 ",this.state.issueFilterShow?u.default.createElement("i",{className:"fa fa-angle-up"}):u.default.createElement("i",{className:"fa fa-angle-down"}))))),u.default.createElement("div",null,u.default.createElement(v.IssueFilterList,{values:S,visable:this.state.issueFilterShow,notShowFields:["watcher"],options:l,onHide:function(){e.setState({issueFilterShow:!1})},onChange:function(e){R(e)}})),u.default.createElement("div",{className:"report-conds-style"},F&&u.default.createElement("div",{className:"cond-bar",style:{marginTop:"0px","float":"left"}},u.default.createElement("div",{className:"cond-contents",title:F},u.default.createElement("b",null,"检索条件"),"：",F),u.default.createElement("div",{className:"remove-icon",onClick:function(){e.setState({saveFilterShow:!0})},title:"保存当前检索"},u.default.createElement("i",{className:"fa fa-save"})))),!k&&w.length>0&&u.default.createElement(_.default,{options:l,values:B}),u.default.createElement("div",{style:{marginBottom:"30px"}},w.length>=1e3&&u.default.createElement("div",{style:{color:"red"}},u.default.createElement("span",null,"注：最多统计满足当前检索条件下的1000条结果。")),u.default.createElement(m.BootstrapTable,{selectRow:H,data:M,bordered:!1,headerStyle:{backgroundColor:"#fff"},hover:!0,options:K},u.default.createElement(m.TableHeaderColumn,{dataField:"id",isKey:!0,hidden:!0},"ID"),u.default.createElement(m.TableHeaderColumn,{dataField:"type",width:"50"},"类型"),u.default.createElement(m.TableHeaderColumn,{dataField:"state",width:"100"},"状态"),u.default.createElement(m.TableHeaderColumn,{dataField:"name"},"名称"),u.default.createElement(m.TableHeaderColumn,{dataField:"origin",width:"120"},"初始预估时间"),u.default.createElement(m.TableHeaderColumn,{dataField:"spend",width:"120"},"耗费时间"),u.default.createElement(m.TableHeaderColumn,{dataField:"left",width:"120"},"剩余时间"),u.default.createElement(m.TableHeaderColumn,{dataField:"diff",width:"120"},"误差")),w.length>0&&u.default.createElement("div",null,u.default.createElement("span",null,"共计 ",w.length," 条"))),this.state.saveFilterShow&&u.default.createElement(E.default,{show:!0,close:function(){e.setState({saveFilterShow:!1})},filters:n.data||[],options:l,save:q,mode:"timetrack",query:S,sqlTxt:F,i18n:a}),this.state.detailShow&&u.default.createElement(x.default,{show:!0,options:this.props.options,close:function(){e.setState({detailShow:!1})},issue:this.state.selectedIssue,index:P,data:O,loading:j,i18n:a}))}}],[{key:"propTypes",value:{i18n:s.PropTypes.object.isRequired,project:s.PropTypes.object.isRequired,filters:s.PropTypes.object.isRequired,options:s.PropTypes.object.isRequired,optionsLoading:s.PropTypes.bool.isRequired,query:s.PropTypes.object,item:s.PropTypes.array.isRequired,itemLoading:s.PropTypes.bool.isRequired,collection:s.PropTypes.array.isRequired,indexLoading:s.PropTypes.bool.isRequired,refresh:s.PropTypes.func.isRequired,saveFilter:s.PropTypes.func.isRequired,select:s.PropTypes.func.isRequired,index:s.PropTypes.func.isRequired},enumerable:!0}]),t}(s.Component);t.default=P,e.exports=t.default}).call(this)}finally{}},1957:function(e,t,a){try{(function(){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),i=function(e,t,a){for(var r=!0;r;){var n=e,l=t,o=a;r=!1,null===n&&(n=Function.prototype);var i=Object.getOwnPropertyDescriptor(n,l);if(void 0!==i){if("value"in i)return i.value;var s=i.get;if(void 0===s)return;return s.call(o)}var u=Object.getPrototypeOf(n);if(null===u)return;e=u,t=l,a=o,r=!0,i=u=void 0}},s=a(1),u=r(s),c=a(21),d=a(2),f=a(41),p=a(7),m=r(p),h=a(201),y=a(3),v=r(y),g=a(115),b=a(595),E=r(b),w=a(339),_=r(w),k=a(6),x=a(4),T=a(30),C=function(e){function t(e){n(this,t),i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={stat_time:"",issueFilterShow:!1,saveFilterShow:!1,notWorkingShow:!0,interval:"day",is_accu:"0",statItems:["new","resolve","close"],shape:"bar"},this.gotoIssue=this.gotoIssue.bind(this)}return l(t,e),o(t,[{key:"componentWillMount",value:function(){var e=this.props,t=e.index,a=e.query;a.stat_time&&t(v.default.assign({},a,{interval:a.interval||"day"},{is_accu:a.is_accu||"0"}))}},{key:"componentWillReceiveProps",value:function(e){var t=e.query||{},a=this.props,r=a.index,n=a.query;!v.default.isEqual(t,n)&&t.stat_time&&r(v.default.assign({},t,{interval:t.interval||"day"},{is_accu:t.is_accu||"0"})),this.setState({stat_time:t.stat_time?t.stat_time:"",is_accu:t.is_accu?t.is_accu:"0",interval:t.interval?t.interval:"day"})}},{key:"gotoIssue",value:function a(e,t,r){var n={},l="",o="",i=this.props,s=i.query,a=i.gotoIssue,u=i.options;"sub"===t?("week"===s.interval?(l=k(r).startOf("week").add(1,"days").format("YYYY/MM/DD"),o=k(r).endOf("week").add(1,"days").format("YYYY/MM/DD")):"month"===s.interval?(l=k(r).startOf("month").format("YYYY/MM/DD"),o=k(r).endOf("month").format("YYYY/MM/DD")):(l=r,o=r),"1"===s.is_accu?n[e]="~"+o:u.trend_start_stat_date?n[e]=(u.trend_start_stat_date>l?u.trend_start_stat_date:l)+"~"+o:n[e]=l+"~"+o):n[e]=s.stat_time,a(v.default.assign({},v.default.omit(s,["stat_time","interval","is_accu"]),n))}},{key:"search",value:function(){var e=this.props,t=e.query,a=void 0===t?{}:t,r=e.refresh,n=v.default.assign({},a);this.state.stat_time?n.stat_time=this.state.stat_time:delete n.stat_time,n.interval=this.state.interval||"day",n.is_accu="1"===this.state.is_accu?"1":"0",r(n)}},{key:"render",value:function(){var e=this,t=this.props,a=t.i18n,r=t.layout,n=t.project,l=t.filters,o=t.options,i=t.optionsLoading,s=t.trend,p=t.trendLoading,y=t.refresh,b=t.query,w=t.saveFilter,k={"0d":"当天","0w":"本周","0m":"当月","0y":"当前年"},C={d:"天",w:"周",m:"月",y:"年"},P="";if(!i){var O=b.stat_time;if(O){var j="",R="",S=O.split("~");if(["0d","0w","0m","0y"].indexOf(S[0])!==-1)j=k[S[0]];else if(["d","w","m","y"].indexOf(S[0].charAt(S[0].length-1))!==-1){var q=new RegExp("^(-?)(\\d+)(d|w|m|y)$");q.exec(S[0])&&(j="0"==RegExp.$2?"当天":RegExp.$2+C[RegExp.$3]+("-"===RegExp.$1?"前":"后"))}else j=S[0];if(S[1])if(["0d","0w","0m","0y"].indexOf(S[1])!==-1)R=k[S[1]];else if(["d","w","m","y"].indexOf(S[1].charAt(S[1].length-1))!==-1){var q=new RegExp("^(-?)(\\d+)(d|w|m|y)$");q.exec(S[1])&&(R="0"==RegExp.$2?"当天":RegExp.$2+C[RegExp.$3]+("-"===RegExp.$1?"前":"后"))}else R=S[1];P="统计时间: "+j+"~"+R}P+=" | 是否累计: "+("1"===b.is_accu?"是":"否");var F={day:"天",week:"周",month:"月"},N=b.interval||"day";P+=" | 时间间隔: "+F[N];var D=(0,g.parseQuery)(b,o);P&&D?P+=" | "+D:D&&(P=D)}var L=s;this.state.notWorkingShow||(L=v.default.reject(s,{notWorking:1}));var I=s.length>100||!b.stat_time;return u.default.createElement("div",{className:"project-report-container"},u.default.createElement(T,null),u.default.createElement("div",{className:"report-title"},"问题趋势图",u.default.createElement(c.Link,{to:"/project/"+n.key+"/report"},u.default.createElement(d.Button,{bsStyle:"link"},"返回"))),u.default.createElement(d.Form,{horizontal:!0,className:"report-filter-form"},u.default.createElement(d.FormGroup,null,u.default.createElement(d.Col,{sm:1,componentClass:d.ControlLabel},"统计时间"),u.default.createElement(d.Col,{sm:6},u.default.createElement(E.default,{options:["fixed","variable_duration"],value:this.state.stat_time,onChange:function(t){e.state.stat_time=t,e.search()}})),u.default.createElement(d.Col,{sm:1,componentClass:d.ControlLabel},"统计项"),u.default.createElement(d.Col,{sm:4},u.default.createElement(f.CheckboxGroup,{name:"statItems",value:this.state.statItems,onChange:function(t){e.setState({statItems:t})},style:{marginTop:"8px"}},u.default.createElement("div",{style:{"float":"left"}},u.default.createElement("label",{style:{fontWeight:400}},u.default.createElement(f.Checkbox,{value:"new",style:{"float":"left"}}),u.default.createElement("span",{style:{marginLeft:"2px"}},"新建的"))),u.default.createElement("div",{style:{"float":"left",marginLeft:"8px"}},u.default.createElement("label",{style:{fontWeight:400}},u.default.createElement(f.Checkbox,{value:"resolve"}),u.default.createElement("span",{style:{marginLeft:"2px"}},"已解决的"))),u.default.createElement("div",{style:{"float":"left",marginLeft:"8px"}},u.default.createElement("label",{style:{fontWeight:400}},u.default.createElement(f.Checkbox,{value:"close"}),u.default.createElement("span",{style:{marginLeft:"2px"}},"已关闭的")))))),u.default.createElement(d.FormGroup,null,u.default.createElement(d.Col,{sm:1,componentClass:d.ControlLabel},"时间间隔"),u.default.createElement(d.Col,{sm:2},u.default.createElement(m.default,{simpleValue:!0,clearable:!1,placeholder:"选择时间间隔",value:this.state.interval,onChange:function(t){e.state.interval=t,e.search()},options:[{value:"day",label:"天"},{value:"week",label:"周"},{value:"month",label:"月"}]})),u.default.createElement(d.Col,{sm:5,componentClass:d.ControlLabel},"是否累计"),u.default.createElement(d.Col,{sm:2},u.default.createElement(d.Radio,{inline:!0,name:"is_accu",onClick:function(){e.state.is_accu="1",e.search()},checked:"1"===this.state.is_accu},"是"),u.default.createElement(d.Radio,{inline:!0,name:"is_accu",onClick:function(){e.state.is_accu="0",e.search()},checked:"1"!==this.state.is_accu},"否")),u.default.createElement(d.Col,{sm:2},u.default.createElement(d.Button,{bsStyle:"link",onClick:function(){e.setState({issueFilterShow:!e.state.issueFilterShow})},style:{"float":"right",marginTop:"0px"}},"更多问题过滤 ",this.state.issueFilterShow?u.default.createElement("i",{className:"fa fa-angle-up"}):u.default.createElement("i",{className:"fa fa-angle-down"}))))),u.default.createElement(g.IssueFilterList,{values:b,visable:this.state.issueFilterShow,notShowFields:["watcher"],notShowBlocks:["time"],options:o,onHide:function(){e.setState({issueFilterShow:!1})},onChange:function(e){y(e)}}),u.default.createElement("div",{className:"report-conds-style"},b.stat_time&&P&&u.default.createElement("div",{className:"cond-bar",style:{marginTop:"0px","float":"left"}},u.default.createElement("div",{className:"cond-contents",title:P},u.default.createElement("b",null,"检索条件"),"：",P),u.default.createElement("div",{className:"remove-icon",onClick:function(){e.setState({saveFilterShow:!0})},title:"保存当前检索"},u.default.createElement("i",{className:"fa fa-save"}))),u.default.createElement(d.ButtonGroup,{className:"report-shape-buttongroup"},u.default.createElement(d.Button,{title:"柱状图",style:{height:"36px",backgroundColor:"bar"==this.state.shape&&"#eee"},onClick:function(){e.setState({shape:"bar"})}},"柱状图"),u.default.createElement(d.Button,{title:"面积图",style:{height:"36px",backgroundColor:"area"==this.state.shape&&"#eee"},onClick:function(){e.setState({shape:"area"})}},"面积图"),u.default.createElement(d.Button,{title:"折线图",style:{height:"36px",backgroundColor:"line"==this.state.shape&&"#eee"},onClick:function(){e.setState({shape:"line"})}},"折线图")),"day"===this.state.interval&&u.default.createElement("div",{style:{"float":"right"}},u.default.createElement(d.Checkbox,{disabled:p,checked:this.state.notWorkingShow,onClick:function(){e.setState({notWorkingShow:!e.state.notWorkingShow})},style:{display:"inline-block",marginRight:"20px",marginLeft:"10px"}},"显示非工作日"))),p?u.default.createElement("div",{style:{height:"550px",paddingTop:"40px"}},u.default.createElement("div",{style:{textAlign:"center"}},u.default.createElement("img",{src:x,className:"loading"}))):u.default.createElement("div",{style:{height:"565px"}},I&&u.default.createElement("div",{className:"report-shape-container",style:{paddingTop:"40px"}},u.default.createElement("div",{style:{textAlign:"center"}},u.default.createElement("span",{style:{fontSize:"160px",color:"#FFC125"}},u.default.createElement("i",{className:"fa fa-warning"})),u.default.createElement("br",null),s.length>100&&u.default.createElement("span",null,"统计结果数据量太大，无法生成统计图，建议您重新选择过滤条件。"),!b.stat_time&&u.default.createElement("span",null,"抱歉，统计时间段不能为空。"))),"bar"===this.state.shape&&!I&&u.default.createElement("div",{className:"report-shape-container"},u.default.createElement(h.BarChart,{width:.95*r.containerWidth,height:380,barSize:40,data:L,style:{margin:"25px auto"}},u.default.createElement(h.CartesianGrid,{strokeDasharray:"3 3"}),u.default.createElement(h.XAxis,{dataKey:"category"}),u.default.createElement(h.YAxis,null),u.default.createElement(h.Tooltip,null),u.default.createElement(h.Legend,null),this.state.statItems.indexOf("new")!==-1&&u.default.createElement(h.Bar,{dataKey:"new",name:"新建的",stackId:"a",fill:"#4572A7"}),this.state.statItems.indexOf("resolve")!==-1&&u.default.createElement(h.Bar,{dataKey:"resolved",name:"已解决的",stackId:"a",fill:"#89A54E"}),this.state.statItems.indexOf("close")!==-1&&u.default.createElement(h.Bar,{dataKey:"closed",name:"已关闭的",stackId:"a",fill:"#AA4643"}))),"line"===this.state.shape&&!I&&u.default.createElement("div",{className:"report-shape-container"},u.default.createElement(h.LineChart,{width:.95*r.containerWidth,height:380,data:L,style:{margin:"25px auto"}},u.default.createElement(h.XAxis,{dataKey:"category"}),u.default.createElement(h.YAxis,null),u.default.createElement(h.CartesianGrid,{strokeDasharray:"3 3"}),u.default.createElement(h.Tooltip,null),u.default.createElement(h.Legend,null),this.state.statItems.indexOf("new")!==-1&&u.default.createElement(h.Line,{dataKey:"new",name:"新建的",stroke:"#4572A7"}),this.state.statItems.indexOf("resolve")!==-1&&u.default.createElement(h.Line,{dataKey:"resolved",name:"已解决的",stroke:"#89A54E"}),this.state.statItems.indexOf("close")!==-1&&u.default.createElement(h.Line,{dataKey:"closed",name:"已关闭的",stroke:"#AA4643"}))),"area"===this.state.shape&&!I&&u.default.createElement("div",{className:"report-shape-container"},u.default.createElement(h.AreaChart,{width:.95*r.containerWidth,height:380,data:L,style:{margin:"25px auto"}},u.default.createElement("defs",null,this.state.statItems.indexOf("new")!==-1&&u.default.createElement("linearGradient",{id:"colorNew",x1:"0",y1:"0",x2:"0",y2:"1"},u.default.createElement("stop",{offset:"5%",stopColor:"#4572A7",stopOpacity:.8}),u.default.createElement("stop",{offset:"95%",stopColor:"#4572A7",stopOpacity:0})),this.state.statItems.indexOf("resolve")!==-1&&u.default.createElement("linearGradient",{id:"colorResolved",x1:"0",y1:"0",x2:"0",y2:"1"},u.default.createElement("stop",{offset:"5%",stopColor:"#89A54E",stopOpacity:.8}),u.default.createElement("stop",{offset:"95%",stopColor:"#89A54E",stopOpacity:0})),this.state.statItems.indexOf("close")!==-1&&u.default.createElement("linearGradient",{id:"colorClosed",x1:"0",y1:"0",x2:"0",y2:"1"},u.default.createElement("stop",{offset:"5%",stopColor:"#AA4643",stopOpacity:.8}),u.default.createElement("stop",{offset:"95%",stopColor:"#AA4643",stopOpacity:0}))),u.default.createElement(h.XAxis,{dataKey:"category"}),u.default.createElement(h.YAxis,null),u.default.createElement(h.CartesianGrid,{strokeDasharray:"3 3"}),u.default.createElement(h.Tooltip,null),u.default.createElement(h.Legend,null),this.state.statItems.indexOf("new")!==-1&&u.default.createElement(h.Area,{dataKey:"new",name:"新建的",fillOpacity:1,stroke:"#4572A7",fill:"url(#colorNew)",type:"monotone"}),this.state.statItems.indexOf("resolve")!==-1&&u.default.createElement(h.Area,{dataKey:"resolved",name:"已解决的",fillOpacity:1,stroke:"#89A54E",fill:"url(#colorResolved)",type:"monotone"}),this.state.statItems.indexOf("close")!==-1&&u.default.createElement(h.Area,{dataKey:"closed",name:"已关闭的",fillOpacity:1,stroke:"#AA4643",fill:"url(#colorClosed)",type:"monotone"}))),!I&&u.default.createElement("div",{style:{"float":"left",width:"100%",marginBottom:"30px"}},u.default.createElement("span",null,"注：该图表最多展示100条目。"),u.default.createElement(d.Table,{responsive:!0,bordered:!0},u.default.createElement("thead",null,u.default.createElement("tr",null,u.default.createElement("th",null,"时间"),u.default.createElement("th",null,"新建的"),u.default.createElement("th",null,"已解决的"),u.default.createElement("th",null,"已关闭的"))),u.default.createElement("tbody",null,v.default.map(s,function(t,a){return u.default.createElement("tr",{key:a},u.default.createElement("td",null,t.category),u.default.createElement("td",null,u.default.createElement("a",{href:"#",onClick:function(a){a.preventDefault(),e.gotoIssue("created_at","sub",t.category)}},t.new)),u.default.createElement("td",null,u.default.createElement("a",{href:"#",onClick:function(a){a.preventDefault(),e.gotoIssue("resolved_at","sub",t.category)}},t.resolved)),u.default.createElement("td",null,u.default.createElement("a",{href:"#",onClick:function(a){a.preventDefault(),e.gotoIssue("closed_at","sub",t.category)}},t.closed)))}),"0"===this.state.is_accu&&u.default.createElement("tr",null,u.default.createElement("td",null,"合计"),u.default.createElement("td",null,u.default.createElement("a",{href:"#",onClick:function(t){t.preventDefault(),e.gotoIssue("created_at","total")}},v.default.reduce(s,function(e,t){return e+t.new},0))),u.default.createElement("td",null,u.default.createElement("a",{href:"#",onClick:function(t){t.preventDefault(),e.gotoIssue("resolved_at","total")}},v.default.reduce(s,function(e,t){return e+t.resolved},0))),u.default.createElement("td",null,u.default.createElement("a",{href:"#",onClick:function(t){t.preventDefault(),e.gotoIssue("closed_at","total")}},v.default.reduce(s,function(e,t){return e+t.closed},0)))))))),this.state.saveFilterShow&&u.default.createElement(_.default,{show:!0,close:function(){e.setState({saveFilterShow:!1})},filters:l.data||[],options:o,save:w,mode:"trend",query:b,sqlTxt:P,i18n:a}))}}],[{key:"propTypes",value:{i18n:s.PropTypes.object.isRequired,layout:s.PropTypes.object.isRequired,project:s.PropTypes.object.isRequired,filters:s.PropTypes.object.isRequired,options:s.PropTypes.object.isRequired,optionsLoading:s.PropTypes.bool.isRequired,query:s.PropTypes.object,trend:s.PropTypes.array.isRequired,trendLoading:s.PropTypes.bool.isRequired,refresh:s.PropTypes.func.isRequired,gotoIssue:s.PropTypes.func.isRequired,saveFilter:s.PropTypes.func.isRequired,index:s.PropTypes.func.isRequired},enumerable:!0}]),t}(s.Component);t.default=C,e.exports=t.default}).call(this)}finally{}},1958:function(e,t,a){try{(function(){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),i=function(e,t,a){for(var r=!0;r;){var n=e,l=t,o=a;r=!1,null===n&&(n=Function.prototype);var i=Object.getOwnPropertyDescriptor(n,l);if(void 0!==i){if("value"in i)return i.value;var s=i.get;if(void 0===s)return;return s.call(o)}var u=Object.getPrototypeOf(n);if(null===u)return;e=u,t=l,a=o,r=!0,i=u=void 0}},s=a(1),u=r(s),c=a(2),d=a(3),f=r(d),p=a(20),m=a(6),h=a(4),y=function(e){function t(e){n(this,t),i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={showAll:!1},this.handleCancel=this.handleCancel.bind(this)}return l(t,e),o(t,[{key:"handleCancel",value:function(){var e=this.props.close;e()}},{key:"componentWillMount",value:function(){var e=this.props,t=e.showedUser,a=e.issue,r=e.index,n=e.query;r(a.id,f.default.assign({},n,{recorder:t.id}))}},{key:"refresh",value:function(){var e=this.props,t=e.showedUser,a=e.issue,r=e.index,n=e.query;r(a.id,f.default.assign({},n,{recorder:t.id}))}},{key:"render",value:function(){var e=this,t=this.props,a=t.data,r=a.total,n=void 0===r?[]:r,l=a.parts,o=void 0===l?[]:l,i=t.issue,s=t.loading,d=t.options,y=d.w2d,v=void 0===y?5:y,g=d.d2h,b=void 0===g?8:g,E=v*b*60,w=60*b,_=this.state.showAll?n:o;return u.default.createElement(c.Modal,{show:!0,onHide:this.handleCancel,bsSize:"large",backdrop:"static","aria-labelledby":"contained-modal-title-sm"},u.default.createElement(c.Modal.Header,{closeButton:!0},u.default.createElement(c.Modal.Title,{id:"contained-modal-title-la"},"工作日志 - ",i.no)),s&&u.default.createElement(c.Modal.Body,{style:{height:"580px",overflow:"auto"}},u.default.createElement("div",{style:{textAlign:"center",marginTop:"250px"}},u.default.createElement("img",{src:h,className:"loading"}))),!s&&u.default.createElement(c.Modal.Body,{style:{height:"580px",overflow:"auto"}},u.default.createElement("div",{style:{marginBottom:"10px"}},u.default.createElement("span",null,"共耗费 ",u.default.createElement("strong",null,(0,p.ttFormat)(f.default.reduce(_,function(e,t){return e+(t.spend_m||0)},0),E,w))," 分钟"),u.default.createElement("span",{title:"刷新"},u.default.createElement(c.Button,{bsStyle:"link",onClick:this.refresh.bind(this)},u.default.createElement("i",{className:"fa fa-refresh"})))),u.default.createElement(c.Table,{condensed:!0,responsive:!0},u.default.createElement("thead",null,u.default.createElement("tr",null,u.default.createElement("th",null,"人员"),u.default.createElement("th",null,"开始时间"),u.default.createElement("th",null,"耗费时间"),u.default.createElement("th",null,"备注"))),u.default.createElement("tbody",null,f.default.map(_,function(e,t){return u.default.createElement("tr",{key:t,style:{backgroundColor:f.default.findIndex(o,{id:e.id})===-1&&"#e5e5e5"}},u.default.createElement("td",null,e.recorder.name||"-"),u.default.createElement("td",null,e.started_at?m.unix(e.started_at).format("YYYY/MM/DD HH:mm:ss"):"-"),u.default.createElement("td",null,e.spend||"-"),u.default.createElement("td",{width:"45%",dangerouslySetInnerHTML:{__html:f.default.escape(e.comments).replace(/(\r\n)|(\n)/g,"<br/>")||"-"}}))})))),u.default.createElement(c.Modal.Footer,null,u.default.createElement(c.Checkbox,{checked:this.state.showAll,onClick:function(){e.setState({showAll:!e.state.showAll})},style:{display:"inline-block",marginRight:"20px",marginLeft:"10px"}},"显示该问题全部工作日志"),u.default.createElement(c.Button,{onClick:this.handleCancel},"关闭")))}}],[{key:"propTypes",value:{i18n:s.PropTypes.object.isRequired,options:s.PropTypes.object.isRequired,showedUser:s.PropTypes.object.isRequired,query:s.PropTypes.object.isRequired,close:s.PropTypes.func.isRequired,issue:s.PropTypes.object.isRequired,index:s.PropTypes.func.isRequired,loading:s.PropTypes.bool.isRequired,data:s.PropTypes.object.isRequired},enumerable:!0}]),t}(s.Component);t.default=y,e.exports=t.default}).call(this)}finally{}},1959:function(e,t,a){try{(function(){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),i=function(e,t,a){for(var r=!0;r;){var n=e,l=t,o=a;r=!1,null===n&&(n=Function.prototype);var i=Object.getOwnPropertyDescriptor(n,l);if(void 0!==i){if("value"in i)return i.value;var s=i.get;if(void 0===s)return;return s.call(o)}var u=Object.getPrototypeOf(n);if(null===u)return;e=u,t=l,a=o,r=!0,i=u=void 0}},s=a(1),u=r(s),c=a(31),d=(a(2),a(3)),f=r(d),p=a(1958),m=r(p),h=a(20),y=a(4),v=function(e){function t(e){n(this,t),i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={detailShow:!1,selectedIssue:{}},this.showDetail=this.showDetail.bind(this)}return l(t,e),o(t,[{key:"componentWillMount",value:function(){var e=this.props,t=e.showedUser,a=e.index,r=e.query;a(f.default.assign({},r,{recorder:t.id}))}},{key:"componentWillReceiveProps",value:function(e){var t=e.showedUser||{},a=this.props,r=a.index,n=a.query,l=a.showedUser;l.id!=t.id&&r(f.default.assign({},n,{recorder:t.id}))}},{key:"showDetail",value:function(e){this.setState({detailShow:!0,selectedIssue:e})}},{key:"render",value:function(){for(var e=this,t=this.props,a=t.i18n,r=t.query,n=t.options,l=n.states,o=void 0===l?[]:l,i=n.types,s=void 0===i?[]:i,d=n.w2d,p=void 0===d?5:d,v=n.d2h,g=void 0===v?8:v,b=t.collection,E=t.indexLoading,w=t.showedUser,_=t.select,k=t.item,x=t.itemLoading,T=p*g*60,C=60*g,P=[],O=b.length,j=function(t){
var a=b[t].state?f.default.findIndex(o,{id:b[t].state}):-1,r="";a!==-1&&(r="state-"+(o[a].category||"")+"-label"),P.push({id:b[t].id,type:u.default.createElement("span",{className:"type-abb",title:f.default.findIndex(s,{id:b[t].type})!==-1?f.default.find(s,{id:b[t].type}).name:""},f.default.findIndex(s,{id:b[t].type})!==-1?f.default.find(s,{id:b[t].type}).abb:"-"),name:u.default.createElement("div",null,u.default.createElement("a",{href:"#",onClick:function(a){a.preventDefault(),e.showDetail(b[t])},style:{whiteSpace:"pre-wrap",wordWrap:"break-word"}},b[t].no+" - "+b[t].title)),state:a!==-1?u.default.createElement("span",{className:r},o[a].name||"-"):"-",total_value:(0,h.ttFormat)(b[t].total_value,T,C)})},R=0;R<O;R++)j(R);var S={};return E?S.noDataText=u.default.createElement("div",null,u.default.createElement("img",{src:y,className:"loading"})):S.noDataText="暂无数据显示。",u.default.createElement("div",{style:{marginBottom:"30px"}},u.default.createElement(c.BootstrapTable,{data:P,bordered:!1,hover:!0,options:S},u.default.createElement(c.TableHeaderColumn,{dataField:"id",isKey:!0,hidden:!0},"ID"),u.default.createElement(c.TableHeaderColumn,{dataField:"type",width:"50"},"类型"),u.default.createElement(c.TableHeaderColumn,{dataField:"name"},"名称"),u.default.createElement(c.TableHeaderColumn,{dataField:"state",width:"100"},"状态"),u.default.createElement(c.TableHeaderColumn,{dataField:"total_value",width:"100"},"耗费时间")),P.length>0&&u.default.createElement("div",{style:{"float":"left"}},u.default.createElement("span",null,"共计 ",P.length," 条")),this.state.detailShow&&u.default.createElement(m.default,{show:!0,options:this.props.options,close:function(){e.setState({detailShow:!1})},showedUser:w,query:r,issue:this.state.selectedIssue,index:_,data:k,loading:x,i18n:a}))}}],[{key:"propTypes",value:{i18n:s.PropTypes.object.isRequired,showedUser:s.PropTypes.object.isRequired,query:s.PropTypes.object.isRequired,options:s.PropTypes.object.isRequired,collection:s.PropTypes.array.isRequired,item:s.PropTypes.object.isRequired,itemLoading:s.PropTypes.bool.isRequired,indexLoading:s.PropTypes.bool.isRequired,index:s.PropTypes.func.isRequired,select:s.PropTypes.func.isRequired},enumerable:!0}]),t}(s.Component);t.default=v,e.exports=t.default}).call(this)}finally{}},1960:function(e,t,a){try{(function(){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),i=function(e,t,a){for(var r=!0;r;){var n=e,l=t,o=a;r=!1,null===n&&(n=Function.prototype);var i=Object.getOwnPropertyDescriptor(n,l);if(void 0!==i){if("value"in i)return i.value;var s=i.get;if(void 0===s)return;return s.call(o)}var u=Object.getPrototypeOf(n);if(null===u)return;e=u,t=l,a=o,r=!0,i=u=void 0}},s=a(1),u=r(s),c=a(21),d=a(2),f=a(7),p=r(f),m=a(201),h=a(3),y=r(h),v=a(115),g=a(595),b=r(g),E=a(339),w=r(E),_=a(1959),k=r(_),x=a(20),T=a(4),C=a(30),P=function(e){function t(e){n(this,t),i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={recorded_at:"",issueFilterShow:!1,saveFilterShow:!1,worklogListShow:!1,showedUser:{},sort:"default",shape:"pie"},this.showList=this.showList.bind(this),this.refreshList=this.refreshList.bind(this)}return l(t,e),o(t,[{key:"componentWillMount",value:function(){var e=this.props,t=e.index,a=e.query;t(a)}},{key:"componentWillReceiveProps",value:function(e){var t=e.query||{},a=this.props,r=a.index,n=a.query;y.default.isEqual(t,n)||(r(t),this.state.worklogListShow=!1,this.state.showedUser={}),this.setState({recorded_at:t.recorded_at?t.recorded_at:""})}},{key:"exportWorklog",value:function a(){var e=this.props,a=e.exportWorklog,t=e.query;a(t)}},{key:"search",value:function(){var e=this.props,t=e.query,a=void 0===t?{}:t,r=e.refresh,n=y.default.assign({},a);this.state.recorded_at?n.recorded_at=this.state.recorded_at:delete n.recorded_at,r(n)}},{key:"showList",value:function(e){this.setState({worklogListShow:!0,showedUser:e})}},{key:"refreshList",value:function(){var e=this.props,t=e.query,a=e.getWorklogList;a(y.default.assign({},t,{recorder:this.state.showedUser.id}))}},{key:"render",value:function(){var e=this,t=["#3b7fc4","#815b3a","#8eb021","#d39c3f","#654982","#4a6785","#f79232","#f15c75","#ac707a"],a=[{value:"default",label:"默认顺序"},{value:"total_asc",label:"总数升序"},{value:"total_desc",label:"总数降序"}],r=this.props,n=r.i18n,l=r.layout,o=r.project,i=r.filters,s=r.options,f=r.optionsLoading,h=r.worklog,g=r.worklogLoading,E=r.getWorklogList,_=r.worklogList,P=r.worklogListLoading,O=r.getWorklogDetail,j=r.worklogDetail,R=r.worklogDetailLoading,S=r.refresh,q=r.query,F=r.saveFilter,N=(s.w2d||5)*(s.d2h||8)*60,D=60*(s.d2h||8),L=y.default.map(h,function(e){return{id:e.user.id,name:e.user.name,value:e.value}}),I=[];I="total_asc"==this.state.sort?y.default.sortBy(L,function(e){return e.value}):"total_desc"==this.state.sort?y.default.sortBy(L,function(e){return-e.value}):L;var B={"0d":"当天","0w":"本周","0m":"当月","0y":"当前年"},M={d:"天",w:"周",m:"月",y:"年"},A="";if(!f){var W=q.recorded_at;if(W){var G="",H="",K=W.split("~");if(["0d","0w","0m","0y"].indexOf(K[0])!==-1)G=B[K[0]];else if(["d","w","m","y"].indexOf(K[0].charAt(K[0].length-1))!==-1){var Y=new RegExp("^(-?)(\\d+)(d|w|m|y)$");Y.exec(K[0])&&(G="0"==RegExp.$2?"当天":RegExp.$2+M[RegExp.$3]+("-"===RegExp.$1?"前":"后"))}else G=K[0];if(K[1])if(["0d","0w","0m","0y"].indexOf(K[1])!==-1)H=B[K[1]];else if(["d","w","m","y"].indexOf(K[1].charAt(K[1].length-1))!==-1){var Y=new RegExp("^(-?)(\\d+)(d|w|m|y)$");Y.exec(K[1])&&(H="0"==RegExp.$2?"当天":RegExp.$2+M[RegExp.$3]+("-"===RegExp.$1?"前":"后"))}else H=K[1];A="填报时间: "+G+"~"+H}var U=(0,v.parseQuery)(q,s);A&&U?A+=" | "+U:U&&(A=U)}return u.default.createElement("div",{className:"project-report-container"},u.default.createElement(C,null),u.default.createElement("div",{className:"report-title"},"人员工作日志报告",u.default.createElement(c.Link,{to:"/project/"+o.key+"/report"},u.default.createElement(d.Button,{bsStyle:"link"},"返回"))),u.default.createElement(d.Form,{horizontal:!0,className:"report-filter-form"},u.default.createElement(d.FormGroup,null,u.default.createElement(d.Col,{sm:1,componentClass:d.ControlLabel},"填报时间"),u.default.createElement(d.Col,{sm:6},u.default.createElement(b.default,{options:["fixed","variable_duration"],value:this.state.recorded_at,onChange:function(t){e.state.recorded_at=t,e.search()}})),u.default.createElement(d.Col,{sm:5},u.default.createElement(d.Button,{bsStyle:"link",onClick:function(){e.setState({issueFilterShow:!e.state.issueFilterShow})},style:{"float":"right",marginTop:"0px"}},"更多问题过滤 ",this.state.issueFilterShow?u.default.createElement("i",{className:"fa fa-angle-up"}):u.default.createElement("i",{className:"fa fa-angle-down"}))))),u.default.createElement(v.IssueFilterList,{values:q,visable:this.state.issueFilterShow,notShowFields:["watcher"],options:s,onHide:function(){e.setState({issueFilterShow:!1})},onChange:function(e){S(e)}}),u.default.createElement("div",{className:"report-conds-style"},A&&u.default.createElement("div",{className:"cond-bar",style:{marginTop:"0px","float":"left"}},u.default.createElement("div",{className:"cond-contents",title:A},u.default.createElement("b",null,"检索条件"),"：",A),u.default.createElement("div",{className:"remove-icon",onClick:function(){e.setState({saveFilterShow:!0})},title:"保存当前检索"},u.default.createElement("i",{className:"fa fa-save"}))),I.length>0&&u.default.createElement(d.ButtonGroup,{className:"report-shape-buttongroup"},u.default.createElement(d.Button,{title:"饼状图",style:{height:"36px",backgroundColor:"pie"==this.state.shape&&"#eee"},onClick:function(){e.setState({shape:"pie"})}},"饼状图"),u.default.createElement(d.Button,{title:"柱状图",style:{height:"36px",backgroundColor:"bar"==this.state.shape&&"#eee"},onClick:function(){e.setState({shape:"bar"})}},"柱状图"),u.default.createElement(d.Button,{title:"折线图",style:{height:"36px",backgroundColor:"line"==this.state.shape&&"#eee"},onClick:function(){e.setState({shape:"line"})}},"折线图")),I.length>0&&u.default.createElement("div",{className:"report-select-sort"},u.default.createElement(p.default,{simpleValue:!0,clearable:!1,placeholder:"选择顺序",value:this.state.sort||"default",onChange:function(t){e.setState({sort:t})},options:a})),I.length>0&&u.default.createElement("div",{style:{"float":"right",marginRight:"15px"}},u.default.createElement(d.Button,{onClick:this.exportWorklog.bind(this),style:{height:"36px"}},u.default.createElement("i",{className:"fa fa-download"})," 导出"))),g?u.default.createElement("div",{style:{height:"550px",paddingTop:"40px"}},u.default.createElement("div",{style:{textAlign:"center"}},u.default.createElement("img",{src:T,className:"loading"}))):u.default.createElement("div",{style:{height:"565px"}},I.length<=0&&u.default.createElement("div",{className:"report-shape-container",style:{paddingTop:"40px"}},u.default.createElement("div",{style:{textAlign:"center"}},u.default.createElement("span",{style:{fontSize:"160px",color:"#FFC125"}},u.default.createElement("i",{className:"fa fa-warning"})),u.default.createElement("br",null),u.default.createElement("span",null,"抱歉，暂无满足该检索条件的数据。"))),I.length>0&&u.default.createElement("div",{style:{marginLeft:"10px","float":"right"}},"注：图表耗费时间值是以分钟(m)为单位"),"pie"===this.state.shape&&I.length>0&&u.default.createElement("div",{className:"report-shape-container"},u.default.createElement(m.PieChart,{width:800,height:380,style:{margin:"25px auto"}},u.default.createElement(m.Pie,{dataKey:"value",data:I,cx:400,cy:200,outerRadius:130,label:!0},I.map(function(e,a){return u.default.createElement(m.Cell,{key:a,fill:t[a%t.length]})})),u.default.createElement(m.Tooltip,{formatter:function(e){return(0,x.ttFormat)(e,N,D)}}))),"bar"===this.state.shape&&I.length>0&&u.default.createElement("div",{className:"report-shape-container"},u.default.createElement(m.BarChart,{width:.95*l.containerWidth,height:380,data:I,barSize:40,style:{margin:"25px auto"}},u.default.createElement(m.CartesianGrid,{strokeDasharray:"3 3"}),u.default.createElement(m.XAxis,{dataKey:"name"}),u.default.createElement(m.YAxis,null),u.default.createElement(m.Tooltip,{formatter:function(e){return(0,x.ttFormat)(e,N,D)}}),u.default.createElement(m.Bar,{name:"工时",stackId:"a",dataKey:"value",fill:"#3b7fc4"}))),"line"===this.state.shape&&I.length>0&&u.default.createElement("div",{className:"report-shape-container"},u.default.createElement(m.LineChart,{width:.95*l.containerWidth,height:380,data:I,style:{margin:"25px auto"}},u.default.createElement(m.XAxis,{dataKey:"name"}),u.default.createElement(m.YAxis,null),u.default.createElement(m.CartesianGrid,{strokeDasharray:"3 3"}),u.default.createElement(m.Tooltip,{formatter:function(e){return(0,x.ttFormat)(e,N,D)}}),u.default.createElement(m.Line,{name:"工时",dataKey:"value",stroke:"#d04437"}))),I.length>0&&u.default.createElement("div",{style:{"float":"left",width:"100%"}},u.default.createElement(d.Table,{responsive:!0,bordered:!0},u.default.createElement("thead",null,u.default.createElement("tr",null,u.default.createElement("th",null,"总计"),y.default.map(I,function(e,t){return u.default.createElement("th",{key:t},e.name)}))),u.default.createElement("tbody",null,u.default.createElement("tr",null,u.default.createElement("td",null,(0,x.ttFormat)(y.default.reduce(I,function(e,t){return e+t.value},0),N,D)),y.default.map(I,function(t,a){return"others"===t.id||t.id==e.state.showedUser.id?u.default.createElement("td",{key:a},(0,x.ttFormat)(t.value,N,D)):u.default.createElement("td",{key:a},u.default.createElement("a",{href:"#workloglist",onClick:function(a){e.showList({id:t.id,name:t.name})}},(0,x.ttFormat)(t.value,N,D)))})))))),this.state.worklogListShow&&u.default.createElement("div",{id:"workloglist",style:{"float":"left",width:"100%",textAlign:"center",margin:"15px 0px 30px 0px"}},u.default.createElement("span",{style:{fontWeight:"600"}},this.state.showedUser.name||""," - 工作日志"),u.default.createElement("span",{title:"刷新",onClick:this.refreshList},u.default.createElement(d.Button,{bsStyle:"link",disabled:P},u.default.createElement("i",{className:"fa fa-refresh"}))),u.default.createElement(k.default,{show:!0,showedUser:this.state.showedUser,query:q,options:s,index:E,collection:_,indexLoading:P,select:O,item:j,itemLoading:R,i18n:n})),this.state.saveFilterShow&&u.default.createElement(w.default,{show:!0,close:function(){e.setState({saveFilterShow:!1})},filters:i.worklog||[],options:s,save:F,mode:"worklog",query:q,sqlTxt:A,i18n:n}))}}],[{key:"propTypes",value:{i18n:s.PropTypes.object.isRequired,layout:s.PropTypes.object.isRequired,project:s.PropTypes.object.isRequired,filters:s.PropTypes.object.isRequired,options:s.PropTypes.object.isRequired,optionsLoading:s.PropTypes.bool.isRequired,query:s.PropTypes.object,worklog:s.PropTypes.array.isRequired,worklogLoading:s.PropTypes.bool.isRequired,getWorklogList:s.PropTypes.func.isRequired,worklogList:s.PropTypes.array.isRequired,worklogListLoading:s.PropTypes.bool.isRequired,getWorklogDetail:s.PropTypes.func.isRequired,exportWorklog:s.PropTypes.func.isRequired,worklogDetail:s.PropTypes.object.isRequired,worklogDetailLoading:s.PropTypes.bool.isRequired,refresh:s.PropTypes.func.isRequired,saveFilter:s.PropTypes.func.isRequired,index:s.PropTypes.func.isRequired},enumerable:!0}]),t}(s.Component);t.default=P,e.exports=t.default}).call(this)}finally{}},2087:function(e,t,a){try{(function(){"use strict";function e(e){return(0,h.asyncFuncCreator)({constant:"REPORT_LIST_GET",promise:function(t){return t.request({url:"/project/"+e+"/report/index"})}})}function r(e,t){return(0,h.asyncFuncCreator)({constant:"REPORT_FILTER_RESET",mode:t,promise:function(a){return a.request({url:"/project/"+e+"/report/"+t+"/filters/reset"})}})}function n(e,t,a){return(0,h.asyncFuncCreator)({constant:"REPORT_FILTER_EDIT",mode:t,promise:function(r){return r.request({url:"/project/"+e+"/report/"+t+"/filters",method:"post",data:a})}})}function l(e,t,a){return(0,h.asyncFuncCreator)({constant:"REPORT_FILTER_SAVE",mode:t,promise:function(r){return r.request({url:"/project/"+e+"/report/"+t+"/filter",method:"post",data:a})}})}function o(e,t){return(0,h.asyncFuncCreator)({constant:"REPORT_WORKLOG_INDEX",promise:function(a){return a.request({url:"/project/"+e+"/report/worklog"+(t?"?"+t:"")})}})}function i(e,t){return(0,h.asyncFuncCreator)({constant:"REPORT_WORKLOG_LIST_GET",promise:function(a){return a.request({url:"/project/"+e+"/report/worklog/list"+(t?"?"+t:"")})}})}function s(e,t,a){return(0,h.asyncFuncCreator)({constant:"REPORT_WORKLOG_DETAIL_GET",promise:function(r){return r.request({url:"/project/"+e+"/report/worklog/issue/"+t+(a?"?"+a:"")})}})}function u(e,t){return(0,h.asyncFuncCreator)({constant:"REPORT_TREND_INDEX",promise:function(a){return a.request({url:"/project/"+e+"/report/trend"+(t?"?"+t:"")})}})}function c(e,t){return(0,h.asyncFuncCreator)({constant:"REPORT_TIMETRACKS_INDEX",promise:function(a){return a.request({url:"/project/"+e+"/report/timetracks"+(t?"?"+t:"")})}})}function d(e,t){return(0,h.asyncFuncCreator)({constant:"REPORT_TIMETRACKS_DETAIL_GET",promise:function(a){return a.request({url:"/project/"+e+"/report/timetracks/issue/"+t})}})}function f(e,t){return(0,h.asyncFuncCreator)({constant:"REPORT_REGRESSIONS_INDEX",promise:function(a){return a.request({url:"/project/"+e+"/report/regressions"+(t?"?"+t:"")})}})}function p(e,t){return(0,h.asyncFuncCreator)({constant:"REPORT_ISSUES_INDEX",promise:function(a){return a.request({url:"/project/"+e+"/report/issues"+(t?"?"+t:"")})}})}function m(e){return(0,h.asyncFuncCreator)({constant:"REPORT_OPTIONS",promise:function(t){return t.request({url:"/project/"+e+"/issue/options"})}})}Object.defineProperty(t,"__esModule",{value:!0}),t.index=e,t.resetFilter=r,t.editFilter=n,t.saveFilter=l,t.worklog=o,t.getWorklogList=i,t.getWorklogDetail=s,t.trend=u,t.timetracks=c,t.getTimetrackDetail=d,t.regressions=f,t.issues=p,t.getOptions=m;var h=a(27)}).call(this)}finally{}}});
//# sourceMappingURL=report-22330d39961866779fe1.js.map