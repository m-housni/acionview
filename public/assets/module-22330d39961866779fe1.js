webpackJsonp([19],{19:function(e,t,n){try{(function(){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var e=[{value:"Integer",label:"整数字段"},{value:"Number",label:"数值字段"},{value:"Text",label:"文本框单行"},{value:"TextArea",label:"文本框多行"},{value:"RichTextEditor",label:"富文本"},{value:"Select",label:"选择列表(单行)"},{value:"MultiSelect",label:"选择列表(多行)"},{value:"CheckboxGroup",label:"复选按钮"},{value:"RadioGroup",label:"单选按钮"},{value:"DatePicker",label:"日期选择控件"},{value:"DateTimePicker",label:"日期时间选择控件"},{value:"TimeTracking",label:"时间跟踪"},{value:"File",label:"文件"},{value:"SingleVersion",label:"单一版本选择"},{value:"MultiVersion",label:"多版本选择"},{value:"SingleUser",label:"单一用户选择"},{value:"MultiUser",label:"多用户选择"},{value:"Url",label:"URL"}];t.FieldTypes=e;var n=[{id:"new",name:"新建"},{id:"inprogress",name:"进行中"},{id:"completed",name:"完成"}];t.StateCategories=n;var a={project:[{id:"view_project",name:"查看项目"},{id:"manage_project",name:"管理项目"}],issue:[{id:"create_issue",name:"创建问题"},{id:"edit_issue",name:"编辑问题"},{id:"edit_self_issue",name:"编辑自己创建的问题"},{id:"delete_issue",name:"删除问题"},{id:"delete_self_issue",name:"删除自己创建的问题"},{id:"assign_issue",name:"分配问题"},{id:"assigned_issue",name:"被分配问题"},{id:"resolve_issue",name:"解决问题"},{id:"close_issue",name:"关闭问题"},{id:"reset_issue",name:"重置问题"},{id:"link_issue",name:"链接问题"},{id:"move_issue",name:"移动问题"},{id:"exec_workflow",name:"执行流程"}],comments:[{id:"add_comments",name:"添加评论"},{id:"edit_comments",name:"编辑评论"},{id:"edit_self_comments",name:"编辑自己的评论"},{id:"delete_comments",name:"删除评论"},{id:"delete_self_comments",name:"删除自己的评论"}],worklogs:[{id:"add_worklog",name:"添加工作日志"},{id:"edit_worklog",name:"编辑工作日志"},{id:"edit_self_worklog",name:"编辑自己的工作日志"},{id:"delete_worklog",name:"删除工作日志"},{id:"delete_self_worklog",name:"删除自己的工作日志"}],files:[{id:"upload_file",name:"上传附件"},{id:"download_file",name:"下载附件"},{id:"remove_file",name:"删除附件"},{id:"remove_self_file",name:"删除自己上传附件"}]};t.Permissions=a;var i=[{id:"create_issue",name:"创建问题"},{id:"edit_issue",name:"编辑问题"},{id:"del_issue",name:"删除问题"},{id:"resolve_issue",name:"解决问题"},{id:"close_issue",name:"关闭问题"},{id:"reopen_issue",name:"重新打开问题"},{id:"create_version",name:"创建版本"},{id:"edit_version",name:"编辑版本"},{id:"release_version",name:"发布版本"},{id:"merge_version",name:"合并版本"},{id:"del_version",name:"删除版本"},{id:"add_worklog",name:"添加工作日志"},{id:"edit_worklog",name:"编辑工作日志"}];t.webhookEvents=i;var r={CARD:"card",KANBAN_COLUMN:"kanban_column",KANBAN_FILTER:"kanban_filter"};t.CardTypes=r;var l=["#CCCCCC","#B3B3B3","#999999","#A4DD00","#68BC00","#006600","#73D8FF","#009CE0","#0062B1","#FCDC00","#FCC400","#FB9E00","#FE9200","#E27300","#C45100","#F44E3B","#D33115","#9F0500"];t.PriorityRGBs=l;var o=["#CCCCCC","#B3B3B3","#999999","#808080","#666666","#FDA1FF","#FA28FF","#AB149E","#AEA1FF","#7B64FF","#653294","#73D8FF","#009CE0","#0062B1","#68CCCA","#16A5A5","#0C797D","#A4DD00","#68BC00","#006600","#DBDF00","#B0BC00","#808900","#FCDC00","#FCC400","#FB9E00","#FE9200","#E27300","#C45100","#F44E3B","#D33115","#9F0500","#4D4D4D","#333333","#000000"];t.LabelRGBs=o;var s=660;t.DetailMinWidth=s;var u=1e3;t.DetailMaxWdith=u}).call(this)}finally{}},30:function(e,t,n){try{(function(){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=function(e,t,n){for(var a=!0;a;){var i=e,r=t,l=n;a=!1,null===i&&(i=Function.prototype);var o=Object.getOwnPropertyDescriptor(i,r);if(void 0!==o){if("value"in o)return o.value;var s=o.get;if(void 0===s)return;return s.call(l)}var u=Object.getPrototypeOf(i);if(null===u)return;e=u,t=r,n=l,a=!0,o=u=void 0}},s=n(1),u=a(s),c=n(15),d=function(e){function t(e){i(this,t),o(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={visible:!1},this.timer=null,this.scrollToTop=this.scrollToTop.bind(this)}return r(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.visibilityHeight,n=void 0===t?400:t,a=c(".doc-container");a.unbind("scroll").scroll(function(){var t=a.scrollTop();e.setState({visible:t>n})})}},{key:"componentWillUnmount",value:function(){c(".doc-container").unbind("scroll")}},{key:"scrollToTop",value:function(){var e=this,t=c(".doc-container"),n=50*(parseInt(t.scrollTop()/1e3)+1);cancelAnimationFrame(this.timer),this.timer=requestAnimationFrame(function a(){var i=t.scrollTop();i>0?(t.scrollTop(i-n>0?i-n:0),e.timer=requestAnimationFrame(a)):cancelAnimationFrame(e.timer)})}},{key:"render",value:function(){var e=this.state.visible,t=void 0!==e&&e;return u.default.createElement("div",{id:"backtop",className:"back-top",style:{visibility:t&&"visible"||"hidden"},onClick:this.scrollToTop},u.default.createElement("div",{className:"back-top-content"},u.default.createElement("div",{className:"back-top-icon"})))}}],[{key:"propTypes",value:{visibilityHeight:s.PropTypes.number},enumerable:!0}]),t}(s.Component);t.default=d,e.exports=t.default}).call(this)}finally{}},49:function(e,t,n){try{(function(){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=function(e,t,n){for(var a=!0;a;){var i=e,r=t,l=n;a=!1,null===i&&(i=Function.prototype);var o=Object.getOwnPropertyDescriptor(i,r);if(void 0!==o){if("value"in o)return o.value;var s=o.get;if(void 0===s)return;return s.call(l)}var u=Object.getPrototypeOf(i);if(null===u)return;e=u,t=r,n=l,a=!0,o=u=void 0}},s=n(1),u=a(s),c=n(12),d=n(35),p=n(19),f={beginDrag:function(e){return{id:e.id,index:e.index}}},m={hover:function(e,t,n){var a=t.getItem().index,i=e.index;if(a!==i){var r=(0,c.findDOMNode)(n).getBoundingClientRect(),l=(r.bottom-r.top)/2,o=t.getClientOffset(),s=o.y-r.top;a<i&&s<l||a>i&&s>l||(e.moveCard(a,i),t.getItem().index=i)}}},h=function(e){function t(){i(this,n),o(Object.getPrototypeOf(n.prototype),"constructor",this).apply(this,arguments)}r(t,e),l(t,[{key:"render",value:function(){var e=this.props,t=e.text,n=e.isDragging,a=e.connectDragSource,i=e.connectDropTarget,r=e.deleteCard,l=n?0:1,o={"float":"right",cursor:"pointer"};return a(i(u.default.createElement("div",{style:{opacity:l},className:"dragcard"},t,!!r&&u.default.createElement("span",{style:o,onClick:r,title:"删除",className:"rm-icon"},u.default.createElement("i",{className:"fa fa-remove"})))))}}],[{key:"propTypes",value:{connectDragSource:s.PropTypes.func.isRequired,connectDropTarget:s.PropTypes.func.isRequired,index:s.PropTypes.number.isRequired,isDragging:s.PropTypes.bool.isRequired,id:s.PropTypes.any.isRequired,text:s.PropTypes.string.isRequired,deleteCard:s.PropTypes.func,moveCard:s.PropTypes.func.isRequired},enumerable:!0}]);var n=t;return t=(0,d.DragSource)(p.CardTypes.CARD,f,function(e,t){return{connectDragSource:e.dragSource(),isDragging:t.isDragging()}})(t)||t,t=(0,d.DropTarget)(p.CardTypes.CARD,m,function(e){return{connectDropTarget:e.dropTarget()}})(t)||t}(s.Component);t.default=h,e.exports=t.default}).call(this)}finally{}},116:function(e,t,n){try{(function(){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=function(e,t,n){for(var a=!0;a;){var i=e,r=t,l=n;a=!1,null===i&&(i=Function.prototype);var o=Object.getOwnPropertyDescriptor(i,r);if(void 0!==o){if("value"in o)return o.value;var s=o.get;if(void 0===s)return;return s.call(l)}var u=Object.getPrototypeOf(i);if(null===u)return;e=u,t=r,n=l,a=!0,o=u=void 0}},s=n(1),u=a(s),c=n(2),d=n(56),p=a(d),f=n(35),m=n(86),h=a(m),y=n(3),v=a(y),b=n(49),g=a(b),E=n(5),w=n(4),O={width:"100%"},P=function(e){function t(e){i(this,n),o(Object.getPrototypeOf(n.prototype),"constructor",this).call(this,e),this.moveCard=this.moveCard.bind(this),this.state={cards:[],ecode:0};for(var t=this.props.cards.length,a=0;a<t;a++)this.state.cards.push({id:this.props.cards[a].id,text:this.props.cards[a].name});this.state.strCards=JSON.stringify(this.state.cards)}r(t,e),l(t,[{key:"moveCard",value:function(e,t){var n=this.state.cards,a=n[e];this.setState((0,p.default)(this.state,{cards:{$splice:[[e,1],[t,0,a]]}}))}},{key:"save",value:function(){var e,t,n,a,i;return regeneratorRuntime.async(function(r){for(;;)switch(r.prev=r.next){case 0:return e=this.props,t=e.close,n=e.setSort,a={sequence:v.default.map(this.state.cards,v.default.iteratee("id"))},r.next=6,regeneratorRuntime.awrap(n(a));case 6:i=r.sent,0===i?(this.setState({ecode:0}),t(),E.notify.show("保存完成。","success",2e3)):this.setState({ecode:i});case 8:case"end":return r.stop()}},null,this)}},{key:"cancel",value:function(){var e=this.props,t=e.close,n=e.sortLoading;n||t()}},{key:"render",value:function(){var e=this,t=this.state,n=t.cards,a=t.strCards,i=this.props,r=i.model,l=i.i18n.errMsg,o=i.sortLoading;return u.default.createElement(c.Modal,{show:!0,onHide:this.cancel.bind(this),backdrop:"static","aria-labelledby":"contained-modal-title-sm"},u.default.createElement(c.Modal.Header,{closeButton:!0},u.default.createElement(c.Modal.Title,{id:"contained-modal-title-la"},"编辑"+r+"顺序")),u.default.createElement(c.Modal.Body,{style:{maxHeight:"420px",overflow:"auto"}},u.default.createElement("div",{style:{marginBottom:"8px"}},"通过上下拖拽改变显示顺序。"),u.default.createElement("div",{style:O},n.map(function(t,n){return u.default.createElement(g.default,{key:t.id,index:n,id:t.id,text:t.text,moveCard:e.moveCard})}))),u.default.createElement(c.Modal.Footer,null,u.default.createElement("span",{className:"ralign"},0!==this.state.ecode&&l[this.state.ecode]),u.default.createElement("img",{src:w,className:o?"loading":"hide"}),u.default.createElement(c.Button,{disabled:o||a==JSON.stringify(n),onClick:this.save.bind(this)},"确定"),u.default.createElement(c.Button,{bsStyle:"link",disabled:o,onClick:this.cancel.bind(this)},"取消")))}}],[{key:"propTypes",value:{i18n:s.PropTypes.object.isRequired,model:s.PropTypes.string.isRequired,cards:s.PropTypes.array,sortLoading:s.PropTypes.bool,setSort:s.PropTypes.func,close:s.PropTypes.func.isRequired},enumerable:!0}]);var n=t;return t=(0,f.DragDropContext)(h.default)(t)||t}(s.Component);t.default=P,e.exports=t.default}).call(this)}finally{}},1925:function(e,t,n){try{(function(){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e){return{actions:(0,m.bindActionCreators)(b,e)}}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),c=function(e,t,n){for(var a=!0;a;){var i=e,r=t,l=n;a=!1,null===i&&(i=Function.prototype);var o=Object.getOwnPropertyDescriptor(i,r);if(void 0!==o){if("value"in o)return o.value;var s=o.get;if(void 0===s)return;return s.call(l)}var u=Object.getPrototypeOf(i);if(null===u)return;e=u,t=r,n=l,a=!0,o=u=void 0}},d=n(1),p=i(d),f=n(22),m=n(23),h=n(3),y=i(h),v=n(2083),b=a(v),g=n(1929),E=n(1930),w=function(e){function t(e){r(this,n),c(Object.getPrototypeOf(n.prototype),"constructor",this).call(this,e),this.pid=""}l(t,e),u(t,[{key:"index",value:function(){return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(this.props.actions.index(this.pid));case 2:return e.abrupt("return",this.props.module.ecode);case 3:case"end":return e.stop()}},null,this)}},{key:"create",value:function(e){return regeneratorRuntime.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(this.props.actions.create(this.pid,e));case 2:return t.abrupt("return",this.props.module.ecode);case 3:case"end":return t.stop()}},null,this)}},{key:"update",value:function(e){return regeneratorRuntime.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(this.props.actions.update(this.pid,e));case 2:return t.abrupt("return",this.props.module.ecode);case 3:case"end":return t.stop()}},null,this)}},{key:"gotoIssueList",value:function(e){this.context.router.push({pathname:"/project/"+this.pid+"/issue",query:{module:e}})}},{key:"gotoGantt",value:function(e){this.context.router.push({pathname:"/project/"+this.pid+"/gantt",query:{module:e}})}},{key:"del",value:function(e){var t;return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:return t=this.props.actions,n.next=3,regeneratorRuntime.awrap(t.del(this.pid,e));case 3:return n.abrupt("return",this.props.module.ecode);case 4:case"end":return n.stop()}},null,this)}},{key:"setSort",value:function(e){return regeneratorRuntime.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(this.props.actions.setSort(this.pid,e));case 2:return t.abrupt("return",this.props.module.ecode);case 3:case"end":return t.stop()}},null,this)}},{key:"componentWillMount",value:function(){var e=this.props.params.key;this.pid=e}},{key:"render",value:function(){return this.props.project.options&&y.default.assign(this.props.module.options,this.props.project.options),p.default.createElement("div",null,p.default.createElement(g,s({create:this.create.bind(this),setSort:this.setSort.bind(this),i18n:this.props.i18n},this.props.module)),p.default.createElement(E,s({index:this.index.bind(this),gotoIssueList:this.gotoIssueList.bind(this),gotoGantt:this.gotoGantt.bind(this),select:this.props.actions.select,update:this.update.bind(this),del:this.del.bind(this),delNotify:this.props.actions.delNotify,i18n:this.props.i18n},this.props.module)))}}],[{key:"propTypes",value:{project:d.PropTypes.object.isRequired,actions:d.PropTypes.object.isRequired,params:d.PropTypes.object.isRequired,i18n:d.PropTypes.object.isRequired,module:d.PropTypes.object.isRequired},enumerable:!0},{key:"contextTypes",value:{router:d.PropTypes.object.isRequired},enumerable:!0}]);var n=t;return t=(0,f.connect)(function(e){var t=e.i18n,n=e.project,a=e.module;return{i18n:t,project:n,module:a}},o)(t)||t}(d.Component);t.default=w,e.exports=t.default}).call(this)}finally{}},1926:function(e,t,n){try{(function(){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=function(e,t,n){for(var a=!0;a;){var i=e,r=t,l=n;a=!1,null===i&&(i=Function.prototype);var o=Object.getOwnPropertyDescriptor(i,r);if(void 0!==o){if("value"in o)return o.value;var s=o.get;if(void 0===s)return;return s.call(l)}var u=Object.getPrototypeOf(i);if(null===u)return;e=u,t=r,n=l,a=!0,o=u=void 0}},u=n(1),c=a(u),d=n(8),p=n(2),f=n(7),m=a(f),h=n(3),y=a(h),v=n(5),b=n(4),g=function(e,t){var n={};return e.name?y.default.findIndex(t.collection||[],{name:e.name})!==-1&&(n.name="该名称已存在"):n.name="必填",n},E=function(e){function t(e){i(this,n),s(Object.getPrototypeOf(n.prototype),"constructor",this).call(this,e),this.state={ecode:0},this.handleSubmit=this.handleSubmit.bind(this),this.handleCancel=this.handleCancel.bind(this)}r(t,e),o(t,[{key:"handleSubmit",value:function(){var e,t,n,a,i;return regeneratorRuntime.async(function(r){for(;;)switch(r.prev=r.next){case 0:return e=this.props,t=e.values,n=e.create,a=e.close,t.defaultAssignee||(t.defaultAssignee="projectPrincipal"),r.next=7,regeneratorRuntime.awrap(n(t));case 7:i=r.sent,0===i?(this.setState({ecode:0}),a(),v.notify.show("新建完成。","success",2e3)):this.setState({ecode:i});case 9:case"end":return r.stop()}},null,this)}},{key:"handleCancel",value:function(){var e=this.props,t=e.close,n=e.submitting;n||(this.setState({ecode:0}),t())}},{key:"render",value:function(){var e=this.props,t=e.i18n.errMsg,n=e.fields,a=n.name,i=n.defaultAssignee,r=n.principal,o=n.description,s=e.options,u=void 0===s?{}:s,d=e.handleSubmit,f=e.invalid,h=e.submitting,v=[{value:"projectPrincipal",label:"项目负责人"},{value:"modulePrincipal",label:"模块负责人"},{value:"none",label:"未分配"}],g=y.default.map(u.users||[],function(e){return{value:e.id,label:e.name+"("+e.email+")"}});return c.default.createElement(p.Modal,{show:!0,onHide:this.handleCancel,backdrop:"static","aria-labelledby":"contained-modal-title-sm"},c.default.createElement(p.Modal.Header,{closeButton:!0},c.default.createElement(p.Modal.Title,{id:"contained-modal-title-la"},"创建模块")),c.default.createElement("form",{onSubmit:d(this.handleSubmit),onKeyDown:function(e){13==e.keyCode&&e.preventDefault()}},c.default.createElement(p.Modal.Body,null,c.default.createElement(p.FormGroup,{controlId:"formControlsText",validationState:a.touched&&a.error?"error":null},c.default.createElement(p.ControlLabel,null,c.default.createElement("span",{className:"txt-impt"},"*"),"名称"),c.default.createElement(p.FormControl,l({disabled:h,type:"text"},a,{placeholder:"模块名"})),a.touched&&a.error&&c.default.createElement(p.HelpBlock,{style:{"float":"right"}},a.error)),c.default.createElement(p.FormGroup,{controlId:"formControlsSelect"},c.default.createElement(p.ControlLabel,null,"责任人"),c.default.createElement(m.default,{disabled:h,clearable:!0,value:r.value,onChange:function(e){r.onChange(e)},options:g,placeholder:"选择责任人"})),c.default.createElement(p.FormGroup,{controlId:"formControlsSelect"},c.default.createElement(p.ControlLabel,null,"默认负责人"),c.default.createElement(m.default,{disabled:h,options:v,clearable:!0,value:i.value,onChange:function(e){i.onChange(e)},placeholder:"默认负责人(项目负责人)"})),c.default.createElement(p.FormGroup,{controlId:"formControlsText"},c.default.createElement(p.ControlLabel,null,"描述"),c.default.createElement(p.FormControl,l({disabled:h,type:"text"},o,{placeholder:"描述"})))),c.default.createElement(p.Modal.Footer,null,c.default.createElement("span",{className:"ralign"},0!==this.state.ecode&&!h&&t[this.state.ecode]),c.default.createElement("img",{src:b,className:h?"loading":"hide"}),c.default.createElement(p.Button,{disabled:h||f,type:"submit"},"确定"),c.default.createElement(p.Button,{bsStyle:"link",disabled:h,onClick:this.handleCancel},"取消"))))}}],[{key:"propTypes",value:{i18n:u.PropTypes.object.isRequired,submitting:u.PropTypes.bool,invalid:u.PropTypes.bool,values:u.PropTypes.object,fields:u.PropTypes.object,handleSubmit:u.PropTypes.func.isRequired,close:u.PropTypes.func.isRequired,options:u.PropTypes.object.isRequired,resetForm:u.PropTypes.func.isRequired,create:u.PropTypes.func.isRequired},enumerable:!0}]);var n=t;return t=(0,d.reduxForm)({form:"module",fields:["name","defaultAssignee","principal","description"],validate:g})(t)||t}(u.Component);t.default=E,e.exports=t.default}).call(this)}finally{}},1927:function(e,t,n){try{(function(){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=function(e,t,n){for(var a=!0;a;){var i=e,r=t,l=n;a=!1,null===i&&(i=Function.prototype);var o=Object.getOwnPropertyDescriptor(i,r);if(void 0!==o){if("value"in o)return o.value;var s=o.get;if(void 0===s)return;return s.call(l)}var u=Object.getPrototypeOf(i);if(null===u)return;e=u,t=r,n=l,a=!0,o=u=void 0}},s=n(1),u=a(s),c=n(2),d=n(7),p=a(d),f=n(5),m=n(3),h=a(m),y=n(4),v=function(e){function t(e){i(this,t),o(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={ecode:0,operate_flg:"0",swapModule:""},this.confirm=this.confirm.bind(this),this.cancel=this.cancel.bind(this)}return r(t,e),l(t,[{key:"confirm",value:function(){var e,t,n,a,i;return regeneratorRuntime.async(function(r){for(;;)switch(r.prev=r.next){case 0:return e=this.props,t=e.close,n=e.del,a=e.data,r.next=6,regeneratorRuntime.awrap(n(h.default.extend({},{id:a.id},{operate_flg:this.state.operate_flg,swap_module:this.state.swapModule})));case 6:i=r.sent,0===i&&(t(),f.notify.show("删除完成。","success",2e3)),this.setState({ecode:i});case 9:case"end":return r.stop()}},null,this)}},{key:"cancel",value:function(){var e=this.props,t=e.close,n=e.loading;n||t()}},{key:"render",value:function(){var e=this,t=this.props,n=t.i18n.errMsg,a=t.data,i=t.modules,r=t.loading;return u.default.createElement(c.Modal,{show:!0,onHide:this.cancel,backdrop:"static","aria-labelledby":"contained-modal-title-sm"},u.default.createElement(c.Modal.Header,{closeButton:!0},u.default.createElement(c.Modal.Title,{id:"contained-modal-title-la"},"删除模块 - ",a.name)),u.default.createElement(c.Modal.Body,null,a.is_used?u.default.createElement("div",{className:"info-col",style:{marginTop:"5px"}},u.default.createElement("div",{className:"info-icon"},u.default.createElement("i",{className:"fa fa-info-circle"})),u.default.createElement("div",{className:"info-content"},"有问题和此模块关联，请选择以下操作。")):u.default.createElement("div",{className:"info-col",style:{marginTop:"5px"}},u.default.createElement("div",{className:"info-icon"},u.default.createElement("i",{className:"fa fa-info-circle"})),u.default.createElement("div",{className:"info-content"},"没有问题和此模块关联，可放心删除。")),a.is_used&&u.default.createElement("div",{style:{margin:"20px 10px 10px 10px"}},u.default.createElement("div",{style:{display:"inline-block",verticalAlign:"top"}},"修复问题"),u.default.createElement("div",{style:{display:"inline-block",marginLeft:"20px"}},u.default.createElement(c.FormGroup,null,u.default.createElement(c.Radio,{inline:!0,name:"swap",onClick:function(){e.setState({operate_flg:"1"})},checked:"1"===this.state.operate_flg},"移动至模块"),u.default.createElement("div",{style:{width:"300px",margin:"5px 5px 10px 18px"}},u.default.createElement(p.default,{simpleValue:!0,clearable:!1,disabled:"1"!==this.state.operate_flg,options:h.default.map(h.default.reject(i,{id:a.id}),function(e){return{value:e.id,label:e.name}}),value:this.state.swapModule,onChange:function(t){e.setState({swapModule:t})},placeholder:"选择模块"})),u.default.createElement(c.Radio,{inline:!0,name:"remove",onClick:function(){e.setState({operate_flg:"2"})},checked:"2"===this.state.operate_flg},"移除模块"))))),u.default.createElement(c.Modal.Footer,null,u.default.createElement("span",{className:"ralign"},0!==this.state.ecode&&!r&&n[this.state.ecode]),u.default.createElement("img",{src:y,className:r?"loading":"hide"}),u.default.createElement(c.Button,{onClick:this.confirm,disabled:r||a.is_used&&"0"===this.state.operate_flg||"1"===this.state.operate_flg&&!this.state.swapModule},"确定"),u.default.createElement(c.Button,{bsStyle:"link",onClick:this.cancel},"取消")))}}],[{key:"propTypes",value:{i18n:s.PropTypes.object.isRequired,close:s.PropTypes.func.isRequired,del:s.PropTypes.func.isRequired,modules:s.PropTypes.array.isRequired,loading:s.PropTypes.bool.isRequired,data:s.PropTypes.object.isRequired},enumerable:!0}]),t}(s.Component);t.default=v,e.exports=t.default}).call(this)}finally{}},1928:function(e,t,n){try{(function(){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=function(e,t,n){for(var a=!0;a;){var i=e,r=t,l=n;a=!1,null===i&&(i=Function.prototype);var o=Object.getOwnPropertyDescriptor(i,r);if(void 0!==o){if("value"in o)return o.value;var s=o.get;if(void 0===s)return;return s.call(l)}var u=Object.getPrototypeOf(i);if(null===u)return;e=u,t=r,n=l,a=!0,o=u=void 0}},u=n(1),c=a(u),d=n(8),p=n(2),f=n(3),m=a(f),h=n(5),y=n(4),v=function(e,t){var n={};return e.name?t.data.name!==e.name&&m.default.findIndex(t.collection||[],{name:e.name})!==-1&&(n.name="该名称已存在"):n.name="必填",n},b=function(e){function t(e){i(this,n),s(Object.getPrototypeOf(n.prototype),"constructor",this).call(this,e),this.state={ecode:0},this.handleSubmit=this.handleSubmit.bind(this),this.handleCancel=this.handleCancel.bind(this)}r(t,e),o(t,[{key:"componentWillMount",value:function(){var e=this.props,t=e.initializeForm,n=e.data;t(l({},n))}},{key:"handleSubmit",value:function(){var e,t,n,a,i;return regeneratorRuntime.async(function(r){for(;;)switch(r.prev=r.next){case 0:return e=this.props,t=e.values,n=e.update,a=e.close,r.next=6,regeneratorRuntime.awrap(n(t));case 6:i=r.sent,0===i?(this.setState({ecode:0}),a(),h.notify.show("更新完成。","success",2e3)):this.setState({ecode:i});case 8:case"end":return r.stop()}},null,this)}},{key:"handleCancel",value:function(){var e=this.props,t=e.close,n=e.submitting;n||(this.setState({ecode:0}),t())}},{key:"render",value:function(){var e=this.props,t=e.i18n.errMsg,n=e.fields,a=n.id,i=n.name,r=n.description,o=e.handleSubmit,s=e.invalid,u=e.dirty,d=e.submitting,f=e.data;return c.default.createElement(p.Modal,{show:!0,onHide:this.handleCancel,backdrop:"static","aria-labelledby":"contained-modal-title-sm"},c.default.createElement(p.Modal.Header,{closeButton:!0},c.default.createElement(p.Modal.Title,{id:"contained-modal-title-la"},"编辑模块 - "+f.name)),c.default.createElement("form",{onSubmit:o(this.handleSubmit),onKeyDown:function(e){13==e.keyCode&&e.preventDefault()}},c.default.createElement(p.Modal.Body,null,c.default.createElement(p.FormGroup,{controlId:"formControlsText",validationState:i.touched&&i.error?"error":null},c.default.createElement(p.ControlLabel,null,c.default.createElement("span",{className:"txt-impt"},"*"),"名称"),c.default.createElement(p.FormControl,l({type:"hidden"},a)),c.default.createElement(p.FormControl,l({type:"text"},i,{placeholder:"模块名"})),i.touched&&i.error&&c.default.createElement(p.HelpBlock,{style:{"float":"right"}},i.error)),c.default.createElement(p.FormGroup,{controlId:"formControlsText"},c.default.createElement(p.ControlLabel,null,"描述"),c.default.createElement(p.FormControl,l({type:"text"},r,{placeholder:"描述"})))),c.default.createElement(p.Modal.Footer,null,c.default.createElement("span",{className:"ralign"},0!==this.state.ecode&&!d&&t[this.state.ecode]),c.default.createElement("img",{src:y,className:d?"loading":"hide"}),c.default.createElement(p.Button,{disabled:!u||d||s,type:"submit"},"确定"),c.default.createElement(p.Button,{bsStyle:"link",disabled:d,onClick:this.handleCancel},"取消"))))}}],[{key:"propTypes",value:{i18n:u.PropTypes.object.isRequired,submitting:u.PropTypes.bool,invalid:u.PropTypes.bool,dirty:u.PropTypes.bool,values:u.PropTypes.object,fields:u.PropTypes.object,handleSubmit:u.PropTypes.func.isRequired,close:u.PropTypes.func.isRequired,data:u.PropTypes.object.isRequired,initializeForm:u.PropTypes.func.isRequired,update:u.PropTypes.func.isRequired},enumerable:!0}]);var n=t;return t=(0,d.reduxForm)({form:"module",fields:["id","name","description"],validate:v})(t)||t}(u.Component);t.default=b,e.exports=t.default}).call(this)}finally{}},1929:function(e,t,n){try{(function(){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=function(e,t,n){for(var a=!0;a;){var i=e,r=t,l=n;a=!1,null===i&&(i=Function.prototype);var o=Object.getOwnPropertyDescriptor(i,r);
if(void 0!==o){if("value"in o)return o.value;var s=o.get;if(void 0===s)return;return s.call(l)}var u=Object.getPrototypeOf(i);if(null===u)return;e=u,t=r,n=l,a=!0,o=u=void 0}},s=n(1),u=a(s),c=n(2),d=n(1926),p=n(116),f=(n(4),function(e){function t(e){i(this,t),o(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={createModalShow:!1,sortCardsModalShow:!1},this.createModalClose=this.createModalClose.bind(this)}return r(t,e),l(t,[{key:"createModalClose",value:function(){this.setState({createModalShow:!1})}},{key:"sortCardsModalClose",value:function(){this.setState({sortCardsModalShow:!1})}},{key:"render",value:function(){var e=this,t=this.props,n=t.i18n,a=t.create,i=t.setSort,r=t.loading,l=t.indexLoading,o=t.collection,s=t.options,f=void 0===s?{}:s;return u.default.createElement("div",null,f.permissions&&f.permissions.indexOf("manage_project")!==-1?u.default.createElement("div",{style:{marginTop:"5px"}},u.default.createElement(c.Button,{className:"create-btn",disabled:l,onClick:function(){e.setState({createModalShow:!0})}},u.default.createElement("i",{className:"fa fa-plus"})," 新建模块"),!l&&u.default.createElement(c.Button,{className:"create-btn",onClick:function(){e.setState({sortCardsModalShow:!0})}},u.default.createElement("i",{className:"fa fa-edit"})," 编辑顺序")):u.default.createElement("div",{style:{marginTop:"15px"}}),this.state.createModalShow&&u.default.createElement(d,{show:!0,close:this.createModalClose,create:a,collection:o,options:f,i18n:n}),this.state.sortCardsModalShow&&u.default.createElement(p,{show:!0,model:"模块",close:this.sortCardsModalClose.bind(this),cards:o,setSort:i,sortLoading:r,i18n:n}))}}],[{key:"propTypes",value:{i18n:s.PropTypes.object.isRequired,create:s.PropTypes.func.isRequired,setSort:s.PropTypes.func.isRequired,collection:s.PropTypes.array,loading:s.PropTypes.bool.isRequired,indexLoading:s.PropTypes.bool.isRequired,options:s.PropTypes.object.isRequired},enumerable:!0}]),t}(s.Component));t.default=f,e.exports=t.default}).call(this)}finally{}},1930:function(e,t,n){try{(function(){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=function(e,t,n){for(var a=!0;a;){var i=e,r=t,l=n;a=!1,null===i&&(i=Function.prototype);var o=Object.getOwnPropertyDescriptor(i,r);if(void 0!==o){if("value"in o)return o.value;var s=o.get;if(void 0===s)return;return s.call(l)}var u=Object.getPrototypeOf(i);if(null===u)return;e=u,t=r,n=l,a=!0,o=u=void 0}},s=n(1),u=a(s),c=n(31),d=n(2),p=n(7),f=a(p),m=n(3),h=a(m),y=n(5),v=n(1928),b=n(30),g=n(1927),E=n(4),w=function(e){function t(e){i(this,t),o(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={editModalShow:!1,delNotifyShow:!1,operateShow:!1,hoverRowId:"",willSetPrincipalModuleIds:[],settingPrincipalModuleIds:[],willSetDefalutAssigneeModuleIds:[],settingDefaultAssigneeModuleIds:[],principal:{},defaultAssignee:{}},this.editModalClose=this.editModalClose.bind(this),this.delNotifyClose=this.delNotifyClose.bind(this)}return r(t,e),l(t,[{key:"componentWillMount",value:function(){var e=this.props.index;e()}},{key:"editModalClose",value:function(){this.setState({editModalShow:!1})}},{key:"delNotifyClose",value:function(){this.setState({delNotifyShow:!1})}},{key:"edit",value:function(e){this.setState({editModalShow:!0});var t=this.props.select;t(e)}},{key:"delNotify",value:function(e){this.setState({delNotifyShow:!0});var t=this.props.select;t(e)}},{key:"operateSelect",value:function(e){var t=this.state.hoverRowId,n=this.props,a=n.gotoIssueList,i=n.gotoGantt;"1"===e?this.edit(t):"2"===e?this.delNotify(t):"3"===e?a(t):"4"===e&&i(t)}},{key:"onRowMouseOver",value:function(e){e.id!==this.state.hoverRowId&&this.setState({operateShow:!0,hoverRowId:e.id})}},{key:"onMouseLeave",value:function(){this.setState({operateShow:!1,hoverRowId:""})}},{key:"willSetPrincipal",value:function(e,t){var n=this.props.collection;n[t].principal&&n[t].principal.id&&(this.state.principal[n[t].id]=n[t].principal.id),this.state.willSetPrincipalModuleIds.push(e),this.setState({})}},{key:"cancelSetPrincipal",value:function(e){var t=this.state.willSetPrincipalModuleIds.indexOf(e);this.state.willSetPrincipalModuleIds.splice(t,1),this.state.principal[e]=void 0,this.setState({})}},{key:"setPrincipal",value:function(e){var t,n,a,i;return regeneratorRuntime.async(function(r){for(;;)switch(r.prev=r.next){case 0:return this.state.settingPrincipalModuleIds.push(e),this.setState({}),t=this.props.update,r.next=5,regeneratorRuntime.awrap(t({principal:this.state.principal[e]||"",id:e}));case 5:n=r.sent,0===n?(a=h.default.indexOf(this.state.willSetPrincipalModuleIds,e),this.state.willSetPrincipalModuleIds.splice(a,1),i=h.default.indexOf(this.state.settingPrincipalModuleIds,e),this.state.settingPrincipalModuleIds.splice(i,1),this.setState({}),y.notify.show("设置完成。","success",2e3)):(i=h.default.indexOf(this.state.settingPrincipalModuleIds,e),this.state.settingPrincipalModuleIds.splice(i,1),this.setState({}),y.notify.show("设置失败。","error",2e3));case 7:case"end":return r.stop()}},null,this)}},{key:"handlePrincipalSelectChange",value:function(e,t){this.state.principal[e]=t,this.setState({})}},{key:"willSetDefaultAssignee",value:function(e,t){var n=this.props.collection;n[t].defaultAssignee&&(this.state.defaultAssignee[n[t].id]=n[t].defaultAssignee),this.state.willSetDefalutAssigneeModuleIds.push(e),this.setState({})}},{key:"cancelSetDefaultAssignee",value:function(e){var t=this.state.willSetDefalutAssigneeModuleIds.indexOf(e);this.state.willSetDefalutAssigneeModuleIds.splice(t,1),this.state.defaultAssignee[e]=void 0,this.setState({})}},{key:"setDefaultAssignee",value:function(e){var t,n,a,i;return regeneratorRuntime.async(function(r){for(;;)switch(r.prev=r.next){case 0:return this.state.settingDefaultAssigneeModuleIds.push(e),this.setState({}),t=this.props.update,r.next=5,regeneratorRuntime.awrap(t({defaultAssignee:this.state.defaultAssignee[e]||"",id:e}));case 5:n=r.sent,0===n?(a=h.default.indexOf(this.state.willSetDefalutAssigneeModuleIds,e),this.state.willSetDefalutAssigneeModuleIds.splice(a,1),i=h.default.indexOf(this.state.settingDefaultAssigneeModuleIds,e),this.state.settingDefaultAssigneeModuleIds.splice(i,1),this.setState({}),y.notify.show("设置完成。","success",2e3)):(i=h.default.indexOf(this.state.settingDefaultAssigneeModuleIds,e),this.state.settingDefaultAssigneeModuleIds.splice(i,1),this.setState({}),y.notify.show("设置失败。","error",2e3));case 7:case"end":return r.stop()}},null,this)}},{key:"handleDefaultAssigneeSelectChange",value:function(e,t){this.state.defaultAssignee[e]=t,this.setState({})}},{key:"render",value:function(){for(var e=this.props,t=e.i18n,n=e.collection,a=e.selectedItem,i=e.options,r=e.indexLoading,l=e.itemLoading,o=e.loading,s=e.del,p=e.update,m=this.state,y=m.hoverRowId,w=m.operateShow,O=m.willSetPrincipalModuleIds,P=m.settingPrincipalModuleIds,C=m.willSetDefalutAssigneeModuleIds,_=m.settingDefaultAssigneeModuleIds,x=u.default.createElement("span",null,u.default.createElement("i",{className:"fa fa-cog"})),T=i.users,S=void 0===T?[]:T,k=h.default.map(S,function(e){return{label:e.name+"("+e.email+")",value:e.id}}),j=[{value:"projectPrincipal",label:"项目负责人"},{value:"modulePrincipal",label:"模块负责人"},{value:"none",label:"未分配"}],M=[],R=n.length,D=0;D<R;D++)M.push({id:n[D].id,name:u.default.createElement("div",null,u.default.createElement("span",{className:"table-td-title"},n[D].name),n[D].description&&u.default.createElement("span",{className:"table-td-desc"},n[D].description)),principal:i.permissions&&i.permissions.indexOf("manage_project")===-1?u.default.createElement("div",null,n[D].principal&&n[D].principal.name?u.default.createElement("div",{style:{display:"inline-block","float":"left",margin:"3px 3px 6px 3px"}},u.default.createElement(d.Label,{style:{color:"#007eff",border:"1px solid #c2e0ff",backgroundColor:"#ebf5ff",fontWeight:"normal"}},n[D].principal.name)):u.default.createElement("span",null,u.default.createElement("div",{style:{display:"inline-block",margin:"3px 3px 6px 3px"}},"-"))):u.default.createElement("div",null,h.default.indexOf(O,n[D].id)===-1&&h.default.indexOf(P,n[D].id)===-1?u.default.createElement("div",{className:"editable-list-field"},u.default.createElement("div",{style:{display:"table",width:"100%"}},n[D].principal&&n[D].principal.name?u.default.createElement("div",{style:{display:"inline-block","float":"left",margin:"3px 3px 6px 3px"}},u.default.createElement(d.Label,{style:{color:"#007eff",border:"1px solid #c2e0ff",backgroundColor:"#ebf5ff",fontWeight:"normal"}},n[D].principal.name)):u.default.createElement("span",null,u.default.createElement("div",{style:{display:"inline-block",margin:"3px 3px 6px 3px"}},"-")),u.default.createElement("span",{className:"edit-icon-zone edit-icon",onClick:this.willSetPrincipal.bind(this,n[D].id,D)},u.default.createElement("i",{className:"fa fa-edit"})))):u.default.createElement("div",null,u.default.createElement(f.default,{simpleValue:!0,clearable:!0,disabled:h.default.indexOf(P,n[D].id)!==-1&&!0,options:k,value:h.default.isUndefined(this.state.principal[n[D].id])?n[D].principal.id:this.state.principal[n[D].id],onChange:this.handlePrincipalSelectChange.bind(this,n[D].id),placeholder:"请选择用户"}),u.default.createElement("div",{className:h.default.indexOf(P,n[D].id)!==-1?"hide":"edit-button-group"},u.default.createElement(d.Button,{className:"edit-ok-button",onClick:this.setPrincipal.bind(this,n[D].id),disabled:n[D].principal.id==this.state.principal[n[D].id]},u.default.createElement("i",{className:"fa fa-check"})),u.default.createElement(d.Button,{className:"edit-cancel-button",onClick:this.cancelSetPrincipal.bind(this,n[D].id)},u.default.createElement("i",{className:"fa fa-close"})))),u.default.createElement("img",{src:E,style:{"float":"right"},className:h.default.indexOf(P,n[D].id)!==-1?"loading":"hide"})),defaultAssignee:i.permissions&&i.permissions.indexOf("manage_project")===-1?u.default.createElement("div",null,u.default.createElement("span",null,h.default.find(j,{value:n[D].defaultAssignee})?h.default.find(j,{value:n[D].defaultAssignee}).label:"-")):u.default.createElement("div",null,h.default.indexOf(C,n[D].id)===-1&&h.default.indexOf(_,n[D].id)===-1?u.default.createElement("div",{className:"editable-list-field"},u.default.createElement("div",{style:{display:"table",width:"100%"}},n[D].defaultAssignee?u.default.createElement("span",null,u.default.createElement("div",{style:{display:"inline-block","float":"left",margin:"5px 3px"}},h.default.find(j,{value:n[D].defaultAssignee})?h.default.find(j,{value:n[D].defaultAssignee}).label:"-")):u.default.createElement("span",null,u.default.createElement("div",{style:{display:"inline-block",margin:"5px 3px"}},"-")),u.default.createElement("span",{className:"edit-icon-zone edit-icon",onClick:this.willSetDefaultAssignee.bind(this,n[D].id,D)},u.default.createElement("i",{className:"fa fa-edit"})))):u.default.createElement("div",null,u.default.createElement(f.default,{simpleValue:!0,clearable:!1,searchable:!1,disabled:h.default.indexOf(_,n[D].id)!==-1&&!0,options:j,value:this.state.defaultAssignee[n[D].id]||n[D].defaultAssignee,onChange:this.handleDefaultAssigneeSelectChange.bind(this,n[D].id),placeholder:"默认负责人(项目负责人)"}),u.default.createElement("div",{className:h.default.indexOf(_,n[D].id)!==-1?"hide":"edit-button-group"},u.default.createElement(d.Button,{className:"edit-ok-button",disabled:n[D].defaultAssignee==this.state.defaultAssignee[n[D].id],onClick:this.setDefaultAssignee.bind(this,n[D].id)},u.default.createElement("i",{className:"fa fa-check"})),u.default.createElement(d.Button,{className:"edit-cancel-button",onClick:this.cancelSetDefaultAssignee.bind(this,n[D].id)},u.default.createElement("i",{className:"fa fa-close"})))),u.default.createElement("img",{src:E,style:{"float":"right"},className:h.default.indexOf(_,n[D].id)!==-1?"loading":"hide"})),operation:u.default.createElement("div",null,w&&y===n[D].id&&!l&&u.default.createElement(d.DropdownButton,{pullRight:!0,bsStyle:"link",style:{textDecoration:"blink",color:"#000"},key:D,title:x,id:"dropdown-basic-"+D,onSelect:this.operateSelect.bind(this)},i.permissions&&i.permissions.indexOf("manage_project")!==-1&&u.default.createElement(d.MenuItem,{eventKey:"1"},"编辑"),i.permissions&&i.permissions.indexOf("manage_project")!==-1&&u.default.createElement(d.MenuItem,{eventKey:"2"},"删除"),i.permissions&&i.permissions.indexOf("manage_project")!==-1&&u.default.createElement(d.MenuItem,{divider:!0}),u.default.createElement(d.MenuItem,{eventKey:"3"},"问题列表"),u.default.createElement(d.MenuItem,{eventKey:"4"},"甘特图")),u.default.createElement("img",{src:E,className:l&&a.id===n[D].id?"loading":"hide"}))});var N={};return r?N.noDataText=u.default.createElement("div",null,u.default.createElement("img",{src:E,className:"loading"})):N.noDataText="暂无数据显示。",N.onRowMouseOver=this.onRowMouseOver.bind(this),u.default.createElement("div",{style:{marginBottom:"30px"}},u.default.createElement(b,null),u.default.createElement(c.BootstrapTable,{data:M,bordered:!1,hover:!0,options:N,trClassName:"tr-middle"},u.default.createElement(c.TableHeaderColumn,{dataField:"id",isKey:!0,hidden:!0},"ID"),u.default.createElement(c.TableHeaderColumn,{dataField:"name"},"名称"),u.default.createElement(c.TableHeaderColumn,{dataField:"principal"},"负责人"),u.default.createElement(c.TableHeaderColumn,{dataField:"defaultAssignee"},"默认负责人"),u.default.createElement(c.TableHeaderColumn,{width:"60",dataField:"operation"})),!r&&n.length>0&&u.default.createElement("div",{className:"page-footer"},u.default.createElement("span",null,"共计 ",n.length," 个。")),this.state.editModalShow&&u.default.createElement(v,{show:!0,close:this.editModalClose,update:p,data:a,options:i,collection:n,i18n:t}),this.state.delNotifyShow&&u.default.createElement(g,{show:!0,loading:o,close:this.delNotifyClose,modules:n,data:a,del:s,i18n:t}))}}],[{key:"propTypes",value:{i18n:s.PropTypes.object.isRequired,options:s.PropTypes.object.isRequired,collection:s.PropTypes.array.isRequired,selectedItem:s.PropTypes.object.isRequired,itemLoading:s.PropTypes.bool.isRequired,indexLoading:s.PropTypes.bool.isRequired,loading:s.PropTypes.bool.isRequired,index:s.PropTypes.func.isRequired,gotoIssueList:s.PropTypes.func.isRequired,gotoGantt:s.PropTypes.func.isRequired,select:s.PropTypes.func.isRequired,update:s.PropTypes.func.isRequired,del:s.PropTypes.func.isRequired},enumerable:!0}]),t}(s.Component);t.default=w,e.exports=t.default}).call(this)}finally{}},2083:function(e,t,n){try{(function(){"use strict";function e(e){return(0,s.asyncFuncCreator)({constant:"MODULE_INDEX",promise:function(t){return t.request({url:"/project/"+e+"/module"})}})}function a(e,t){return(0,s.asyncFuncCreator)({constant:"MODULE_CREATE",promise:function(n){return n.request({url:"/project/"+e+"/module",method:"post",data:t})}})}function i(e,t){return(0,s.asyncFuncCreator)({constant:"MODULE_UPDATE",promise:function(n){return n.request({url:"/project/"+e+"/module/"+t.id,method:"put",data:t})}})}function r(e){return{type:"MODULE_SELECT",id:e}}function l(e,t){return(0,s.asyncFuncCreator)({constant:"MODULE_DELETE",id:t.id,promise:function(n){return n.request({url:"/project/"+e+"/module/"+t.id+"/delete",data:t,method:"post"})}})}function o(e,t){return(0,s.asyncFuncCreator)({constant:"MODULE_SET_SORT",promise:function(n){return n.request({url:"/project/"+e+"/module/batch",method:"post",data:t})}})}Object.defineProperty(t,"__esModule",{value:!0}),t.index=e,t.create=a,t.update=i,t.select=r,t.del=l,t.setSort=o;var s=n(27)}).call(this)}finally{}}});
//# sourceMappingURL=module-22330d39961866779fe1.js.map